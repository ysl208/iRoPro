<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes"><title>Rapid PbD</title><meta name="description" content="rapid-pbd description"><link rel="manifest" href="/manifest.json"><script>(function(){/*

 Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
'use strict';var p,q="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,da="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ea(){ea=function(){};q.Symbol||(q.Symbol=fa)}var fa=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function ha(){ea();var a=q.Symbol.iterator;a||(a=q.Symbol.iterator=q.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&da(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ia(this)}});ha=function(){}}function ia(a){var b=0;return ja(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ja(a){ha();a={next:a};a[q.Symbol.iterator]=function(){return this};return a}function ka(a){ha();var b=a[Symbol.iterator];return b?b.call(a):ia(a)}
function la(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}
(function(){if(!function(){var a=document.createEvent("Event");a.initEvent("foo",!0,!0);a.preventDefault();return a.defaultPrevented}()){var a=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(a.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var b=/Trident/.test(navigator.userAgent);if(!window.CustomEvent||b&&"function"!==typeof window.CustomEvent)window.CustomEvent=function(a,b){b=b||{};var c=document.createEvent("CustomEvent");
c.initCustomEvent(a,!!b.bubbles,!!b.cancelable,b.detail);return c},window.CustomEvent.prototype=window.Event.prototype;if(!window.Event||b&&"function"!==typeof window.Event){var c=window.Event;window.Event=function(a,b){b=b||{};var c=document.createEvent("Event");c.initEvent(a,!!b.bubbles,!!b.cancelable);return c};if(c)for(var d in c)window.Event[d]=c[d];window.Event.prototype=c.prototype}if(!window.MouseEvent||b&&"function"!==typeof window.MouseEvent){b=window.MouseEvent;window.MouseEvent=function(a,
b){b=b||{};var c=document.createEvent("MouseEvent");c.initMouseEvent(a,!!b.bubbles,!!b.cancelable,b.view||window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget);return c};if(b)for(d in b)window.MouseEvent[d]=b[d];window.MouseEvent.prototype=b.prototype}Array.from||(Array.from=function(a){return[].slice.call(a)});Object.assign||(Object.assign=function(a,b){for(var c=[].slice.call(arguments,1),d=0,e;d<c.length;d++)if(e=c[d])for(var f=
a,m=e,n=Object.getOwnPropertyNames(m),w=0;w<n.length;w++)e=n[w],f[e]=m[e];return a})})(window.WebComponents);(function(){function a(){}function b(a,b){if(!a.childNodes.length)return[];switch(a.nodeType){case Node.DOCUMENT_NODE:return w.call(a,b);case Node.DOCUMENT_FRAGMENT_NODE:return I.call(a,b);default:return n.call(a,b)}}var c="undefined"===typeof HTMLTemplateElement,d=!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment),e=!1;/Trident/.test(navigator.userAgent)&&function(){function a(a,b){if(a instanceof DocumentFragment)for(var d;d=a.firstChild;)c.call(this,d,b);else c.call(this,
a,b);return a}e=!0;var b=Node.prototype.cloneNode;Node.prototype.cloneNode=function(a){a=b.call(this,a);this instanceof DocumentFragment&&(a.__proto__=DocumentFragment.prototype);return a};DocumentFragment.prototype.querySelectorAll=HTMLElement.prototype.querySelectorAll;DocumentFragment.prototype.querySelector=HTMLElement.prototype.querySelector;Object.defineProperties(DocumentFragment.prototype,{nodeType:{get:function(){return Node.DOCUMENT_FRAGMENT_NODE},configurable:!0},localName:{get:function(){},
configurable:!0},nodeName:{get:function(){return"#document-fragment"},configurable:!0}});var c=Node.prototype.insertBefore;Node.prototype.insertBefore=a;var d=Node.prototype.appendChild;Node.prototype.appendChild=function(b){b instanceof DocumentFragment?a.call(this,b,null):d.call(this,b);return b};var f=Node.prototype.removeChild,h=Node.prototype.replaceChild;Node.prototype.replaceChild=function(b,c){b instanceof DocumentFragment?(a.call(this,b,c),f.call(this,c)):h.call(this,b,c);return c};Document.prototype.createDocumentFragment=
function(){var a=this.createElement("df");a.__proto__=DocumentFragment.prototype;return a};var g=Document.prototype.importNode;Document.prototype.importNode=function(a,b){b=g.call(this,a,b||!1);a instanceof DocumentFragment&&(b.__proto__=DocumentFragment.prototype);return b}}();var f=Node.prototype.cloneNode,h=Document.prototype.createElement,g=Document.prototype.importNode,k=Node.prototype.removeChild,l=Node.prototype.appendChild,m=Node.prototype.replaceChild,n=Element.prototype.querySelectorAll,
w=Document.prototype.querySelectorAll,I=DocumentFragment.prototype.querySelectorAll,cb=function(){if(!c){var a=document.createElement("template"),b=document.createElement("template");b.content.appendChild(document.createElement("div"));a.content.appendChild(b);a=a.cloneNode(!0);return 0===a.content.childNodes.length||0===a.content.firstChild.content.childNodes.length||d}}();if(c){var t=document.implementation.createHTMLDocument("template"),pa=!0,Z=document.createElement("style");Z.textContent="template{display:none;}";
var aa=document.head;aa.insertBefore(Z,aa.firstElementChild);a.prototype=Object.create(HTMLElement.prototype);var ba=!document.createElement("div").hasOwnProperty("innerHTML");a.D=function(b){if(!b.content){b.content=t.createDocumentFragment();for(var c;c=b.firstChild;)l.call(b.content,c);if(ba)b.__proto__=a.prototype;else if(b.cloneNode=function(b){return a.ca(this,b)},pa)try{R(b),ca(b)}catch(Lg){pa=!1}a.J(b.content)}};var R=function(b){Object.defineProperty(b,"innerHTML",{get:function(){for(var a=
"",b=this.content.firstChild;b;b=b.nextSibling)a+=b.outerHTML||b.data.replace(Ee,qa);return a},set:function(b){t.body.innerHTML=b;for(a.J(t);this.content.firstChild;)k.call(this.content,this.content.firstChild);for(;t.body.firstChild;)l.call(this.content,t.body.firstChild)},configurable:!0})},ca=function(a){Object.defineProperty(a,"outerHTML",{get:function(){return"<template>"+this.innerHTML+"</template>"},set:function(a){if(this.parentNode){t.body.innerHTML=a;for(a=this.ownerDocument.createDocumentFragment();t.body.firstChild;)l.call(a,
t.body.firstChild);m.call(this.parentNode,a,this)}else throw Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.");},configurable:!0})};R(a.prototype);ca(a.prototype);a.J=function(c){c=b(c,"template");for(var d=0,e=c.length,f;d<e&&(f=c[d]);d++)a.D(f)};document.addEventListener("DOMContentLoaded",function(){a.J(document)});Document.prototype.createElement=function(){var b=h.apply(this,arguments);"template"===b.localName&&a.D(b);return b};var Ee=/[&\u00A0<>]/g,
qa=function(a){switch(a){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case "\u00a0":return"&nbsp;"}}}if(c||cb){a.ca=function(a,b){var c=f.call(a,!1);this.D&&this.D(c);b&&(l.call(c.content,f.call(a.content,!0)),Ca(c.content,a.content));return c};var Ca=function(c,d){if(d.querySelectorAll&&(d=b(d,"template"),0!==d.length)){c=b(c,"template");for(var e=0,f=c.length,h,g;e<f;e++)g=d[e],h=c[e],a&&a.D&&a.D(g),m.call(h.parentNode,Fe.call(g,!0),h)}},Fe=Node.prototype.cloneNode=function(b){if(!e&&
d&&this instanceof DocumentFragment)if(b)var c=Ge.call(this.ownerDocument,this,!0);else return this.ownerDocument.createDocumentFragment();else c=this.nodeType===Node.ELEMENT_NODE&&"template"===this.localName?a.ca(this,b):f.call(this,b);b&&Ca(c,this);return c},Ge=Document.prototype.importNode=function(c,d){d=d||!1;if("template"===c.localName)return a.ca(c,d);var e=g.call(this,c,d);if(d){Ca(e,c);c=b(e,'script:not([type]),script[type="application/javascript"],script[type="text/javascript"]');for(var f,
k=0;k<c.length;k++){f=c[k];d=h.call(document,"script");d.textContent=f.textContent;for(var l=f.attributes,ca=0,qa;ca<l.length;ca++)qa=l[ca],d.setAttribute(qa.name,qa.value);m.call(f.parentNode,d,f)}}return e}}c&&(window.HTMLTemplateElement=a)})();var ma=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var na=0,oa,ra="undefined"!==typeof window?window:void 0,sa=ra||{},ta=sa.MutationObserver||sa.WebKitMutationObserver,ua="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function va(){return"undefined"!==typeof oa?function(){oa(wa)}:xa()}function ya(){var a=0,b=new ta(wa),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}
function za(){var a=new MessageChannel;a.port1.onmessage=wa;return function(){return a.port2.postMessage(0)}}function xa(){var a=setTimeout;return function(){return a(wa,1)}}var Aa=Array(1E3);function wa(){for(var a=0;a<na;a+=2)(0,Aa[a])(Aa[a+1]),Aa[a]=void 0,Aa[a+1]=void 0;na=0}var Ba,Da;
if("undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process))Da=function(){return process.ib(wa)};else{var Ea;if(ta)Ea=ya();else{var Fa;if(ua)Fa=za();else{var Ga;if(void 0===ra&&"function"===typeof require)try{var Ha=require("vertx");oa=Ha.kb||Ha.jb;Ga=va()}catch(a){Ga=xa()}else Ga=xa();Fa=Ga}Ea=Fa}Da=Ea}Ba=Da;function Ia(a,b){Aa[na]=a;Aa[na+1]=b;na+=2;2===na&&Ba()};function Ja(a,b){var c=this,d=new this.constructor(Ka);void 0===d[La]&&Ma(d);var e=c.g;if(e){var f=arguments[e-1];Ia(function(){return Na(e,d,f,c.f)})}else Oa(c,d,a,b);return d};function Pa(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(Ka);Qa(b,a);return b};var La=Math.random().toString(36).substring(16);function Ka(){}var Sa=new Ra;function Ta(a){try{return a.then}catch(b){return Sa.error=b,Sa}}function Ua(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function Va(a,b,c){Ia(function(a){var d=!1,f=Ua(c,b,function(c){d||(d=!0,b!==c?Qa(a,c):r(a,c))},function(b){d||(d=!0,u(a,b))});!d&&f&&(d=!0,u(a,f))},a)}function Wa(a,b){1===b.g?r(a,b.f):2===b.g?u(a,b.f):Oa(b,void 0,function(b){return Qa(a,b)},function(b){return u(a,b)})}
function Xa(a,b,c){b.constructor===a.constructor&&c===Ja&&b.constructor.resolve===Pa?Wa(a,b):c===Sa?(u(a,Sa.error),Sa.error=null):void 0===c?r(a,b):"function"===typeof c?Va(a,b,c):r(a,b)}function Qa(a,b){if(a===b)u(a,new TypeError("You cannot resolve a promise with itself"));else{var c=typeof b;null===b||"object"!==c&&"function"!==c?r(a,b):Xa(a,b,Ta(b))}}function Ya(a){a.na&&a.na(a.f);Za(a)}function r(a,b){void 0===a.g&&(a.f=b,a.g=1,0!==a.I.length&&Ia(Za,a))}
function u(a,b){void 0===a.g&&(a.g=2,a.f=b,Ia(Ya,a))}function Oa(a,b,c,d){var e=a.I,f=e.length;a.na=null;e[f]=b;e[f+1]=c;e[f+2]=d;0===f&&a.g&&Ia(Za,a)}function Za(a){var b=a.I,c=a.g;if(0!==b.length){for(var d,e,f=a.f,h=0;h<b.length;h+=3)d=b[h],e=b[h+c],d?Na(c,d,e,f):e(f);a.I.length=0}}function Ra(){this.error=null}var $a=new Ra;
function Na(a,b,c,d){var e="function"===typeof c;if(e){try{var f=c(d)}catch(l){$a.error=l,f=$a}if(f===$a){var h=!0;var g=f.error;f.error=null}else var k=!0;if(b===f){u(b,new TypeError("A promises callback cannot return that same promise."));return}}else f=d,k=!0;void 0===b.g&&(e&&k?Qa(b,f):h?u(b,g):1===a?r(b,f):2===a&&u(b,f))}function ab(a,b){try{b(function(b){Qa(a,b)},function(b){u(a,b)})}catch(c){u(a,c)}}var bb=0;function Ma(a){a[La]=bb++;a.g=void 0;a.f=void 0;a.I=[]};function db(a,b){this.Ea=a;this.A=new a(Ka);this.A[La]||Ma(this.A);if(ma(b))if(this.S=this.length=b.length,this.f=Array(this.length),0===this.length)r(this.A,this.f);else{this.length=this.length||0;for(a=0;void 0===this.g&&a<b.length;a++)eb(this,b[a],a);0===this.S&&r(this.A,this.f)}else u(this.A,Error("Array Methods must be provided an Array"))}
function eb(a,b,c){var d=a.Ea,e=d.resolve;e===Pa?(e=Ta(b),e===Ja&&void 0!==b.g?fb(a,b.g,c,b.f):"function"!==typeof e?(a.S--,a.f[c]=b):d===v?(d=new d(Ka),Xa(d,b,e),gb(a,d,c)):gb(a,new d(function(a){return a(b)}),c)):gb(a,e(b),c)}function fb(a,b,c,d){var e=a.A;void 0===e.g&&(a.S--,2===b?u(e,d):a.f[c]=d);0===a.S&&r(e,a.f)}function gb(a,b,c){Oa(b,void 0,function(b){return fb(a,1,c,b)},function(b){return fb(a,2,c,b)})};function hb(a){return(new db(this,a)).A};function ib(a){var b=this;return ma(a)?new b(function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}):new b(function(a,b){return b(new TypeError("You must pass an array to race."))})};function jb(a){var b=new this(Ka);u(b,a);return b};function v(a){this[La]=bb++;this.f=this.g=void 0;this.I=[];if(Ka!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof v)ab(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}v.prototype={constructor:v,then:Ja,a:function(a){return this.then(null,a)}};/*

Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.Promise||(window.Promise=v,v.prototype["catch"]=v.prototype.a,v.prototype.then=v.prototype.then,v.all=hb,v.race=ib,v.resolve=Pa,v.reject=jb);(function(a){function b(a,b){if("function"===typeof window.CustomEvent)return new CustomEvent(a,b);var c=document.createEvent("CustomEvent");c.initCustomEvent(a,!!b.bubbles,!!b.cancelable,b.detail);return c}function c(a){if(m)return a.ownerDocument!==document?a.ownerDocument:null;var b=a.__importDoc;if(!b&&a.parentNode){b=a.parentNode;if("function"===typeof b.closest)b=b.closest("link[rel=import]");else for(;!g(b)&&(b=b.parentNode););a.__importDoc=b}return b}function d(a){var b=document.querySelectorAll("link[rel=import]:not([import-dependency])"),
c=b.length;c?l(b,function(b){return h(b,function(){0===--c&&a()})}):a()}function e(a){function b(){"loading"!==document.readyState&&document.body&&(document.removeEventListener("readystatechange",b),a())}document.addEventListener("readystatechange",b);b()}function f(a){e(function(){return d(function(){return a&&a()})})}function h(a,b){if(a.__loaded)b&&b();else if("script"===a.localName&&!a.src||"style"===a.localName&&!a.firstChild)a.__loaded=!0,b&&b();else{var c=function(d){a.removeEventListener(d.type,
c);a.__loaded=!0;b&&b()};a.addEventListener("load",c);Z&&"style"===a.localName||a.addEventListener("error",c)}}function g(a){return a.nodeType===Node.ELEMENT_NODE&&"link"===a.localName&&"import"===a.rel}function k(){var a=this;this.a={};this.b=0;this.c=new MutationObserver(function(b){return a.Ra(b)});this.c.observe(document.head,{childList:!0,subtree:!0});this.loadImports(document)}function l(a,b,c){var d=a?a.length:0,e=c?-1:1;for(c=c?d-1:0;c<d&&0<=c;c+=e)b(a[c],c)}var m="import"in document.createElement("link"),
n=null;!1==="currentScript"in document&&Object.defineProperty(document,"currentScript",{get:function(){return n||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null)},configurable:!0});var w=/(url\()([^)]*)(\))/g,I=/(@import[\s]+(?!url\())([^;]*)(;)/g,cb=/(<link[^>]*)(rel=['|"]?stylesheet['|"]?[^>]*>)/g,t={La:function(a,b){a.href&&a.setAttribute("href",t.Y(a.getAttribute("href"),b));a.src&&a.setAttribute("src",t.Y(a.getAttribute("src"),b));if("style"===a.localName){var c=
t.ta(a.textContent,b,w);a.textContent=t.ta(c,b,I)}},ta:function(a,b,c){return a.replace(c,function(a,c,d,e){a=d.replace(/["']/g,"");b&&(a=t.Y(a,b));return c+"'"+a+"'"+e})},Y:function(a,b){if(void 0===t.ba){t.ba=!1;try{var c=new URL("b","http://a");c.pathname="c%20d";t.ba="http://a/c%20d"===c.href}catch(Ca){}}if(t.ba)return(new URL(a,b)).href;c=t.Ba;c||(c=document.implementation.createHTMLDocument("temp"),t.Ba=c,c.ma=c.createElement("base"),c.head.appendChild(c.ma),c.la=c.createElement("a"));c.ma.href=
b;c.la.href=a;return c.la.href||a}},pa={async:!0,load:function(a,b,c){if(a)if(a.match(/^data:/)){a=a.split(",");var d=a[1];d=-1<a[0].indexOf(";base64")?atob(d):decodeURIComponent(d);b(d)}else{var e=new XMLHttpRequest;e.open("GET",a,pa.async);e.onload=function(){var a=e.responseURL||e.getResponseHeader("Location");a&&0===a.indexOf("/")&&(a=(location.origin||location.protocol+"//"+location.host)+a);var d=e.response||e.responseText;304===e.status||0===e.status||200<=e.status&&300>e.status?b(d,a):c(d)};
e.send()}else c("error: href must be specified")}},Z=/Trident/.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent);k.prototype.loadImports=function(a){var b=this;a=a.querySelectorAll("link[rel=import]");l(a,function(a){return b.s(a)})};k.prototype.s=function(a){var b=this,c=a.href;if(void 0!==this.a[c]){var d=this.a[c];d&&d.__loaded&&(a.__import=d,this.h(a))}else this.b++,this.a[c]="pending",pa.load(c,function(a,d){a=b.Sa(a,d||c);b.a[c]=a;b.b--;b.loadImports(a);b.L()},function(){b.a[c]=
null;b.b--;b.L()})};k.prototype.Sa=function(a,b){if(!a)return document.createDocumentFragment();Z&&(a=a.replace(cb,function(a,b,c){return-1===a.indexOf("type=")?b+" type=import-disable "+c:a}));var c=document.createElement("template");c.innerHTML=a;if(c.content){a=c.content;var d=function(a){l(a.querySelectorAll("template"),function(a){l(a.content.querySelectorAll('script:not([type]),script[type="application/javascript"],script[type="text/javascript"]'),function(a){var b=document.createElement("script");
l(a.attributes,function(a){return b.setAttribute(a.name,a.value)});b.textContent=a.textContent;a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)});d(a.content)})};d(a)}else for(a=document.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);if(c=a.querySelector("base"))b=t.Y(c.getAttribute("href"),b),c.removeAttribute("href");c=a.querySelectorAll('link[rel=import],link[rel=stylesheet][href][type=import-disable],style:not([type]),link[rel=stylesheet][href]:not([type]),script:not([type]),script[type="application/javascript"],script[type="text/javascript"]');
var e=0;l(c,function(a){h(a);t.La(a,b);a.setAttribute("import-dependency","");"script"===a.localName&&!a.src&&a.textContent&&(a.setAttribute("src","data:text/javascript;charset=utf-8,"+encodeURIComponent(a.textContent+("\n//# sourceURL="+b+(e?"-"+e:"")+".js\n"))),a.textContent="",e++)});return a};k.prototype.L=function(){var a=this;if(!this.b){this.c.disconnect();this.flatten(document);var b=!1,c=!1,d=function(){c&&b&&(a.loadImports(document),a.b||(a.c.observe(document.head,{childList:!0,subtree:!0}),
a.Pa()))};this.Ua(function(){c=!0;d()});this.Ta(function(){b=!0;d()})}};k.prototype.flatten=function(a){var b=this;a=a.querySelectorAll("link[rel=import]");l(a,function(a){var c=b.a[a.href];(a.__import=c)&&c.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(b.a[a.href]=a,a.readyState="loading",a.__import=a,b.flatten(c),a.appendChild(c))})};k.prototype.Ta=function(a){function b(e){if(e<d){var f=c[e],g=document.createElement("script");f.removeAttribute("import-dependency");l(f.attributes,function(a){return g.setAttribute(a.name,
a.value)});n=g;f.parentNode.replaceChild(g,f);h(g,function(){n=null;b(e+1)})}else a()}var c=document.querySelectorAll("script[import-dependency]"),d=c.length;b(0)};k.prototype.Ua=function(a){var b=document.querySelectorAll("style[import-dependency],link[rel=stylesheet][import-dependency]"),d=b.length;if(d){var e=Z&&!!document.querySelector("link[rel=stylesheet][href][type=import-disable]");l(b,function(b){h(b,function(){b.removeAttribute("import-dependency");0===--d&&a()});if(e&&b.parentNode!==document.head){var f=
document.createElement(b.localName);f.__appliedElement=b;f.setAttribute("type","import-placeholder");b.parentNode.insertBefore(f,b.nextSibling);for(f=c(b);f&&c(f);)f=c(f);f.parentNode!==document.head&&(f=null);document.head.insertBefore(b,f);b.removeAttribute("type")}})}else a()};k.prototype.Pa=function(){var a=this,b=document.querySelectorAll("link[rel=import]");l(b,function(b){return a.h(b)},!0)};k.prototype.h=function(a){a.__loaded||(a.__loaded=!0,a.import&&(a.import.readyState="complete"),a.dispatchEvent(b(a.import?
"load":"error",{bubbles:!1,cancelable:!1,detail:void 0})))};k.prototype.Ra=function(a){var b=this;l(a,function(a){return l(a.addedNodes,function(a){a&&a.nodeType===Node.ELEMENT_NODE&&(g(a)?b.s(a):b.loadImports(a))})})};var aa=null;if(m){var ba=document.querySelectorAll("link[rel=import]");l(ba,function(a){a.import&&"loading"===a.import.readyState||(a.__loaded=!0)});ba=function(a){a=a.target;g(a)&&(a.__loaded=!0)};document.addEventListener("load",ba,!0);document.addEventListener("error",ba,!0)}else{var R=
Object.getOwnPropertyDescriptor(Node.prototype,"baseURI");Object.defineProperty((!R||R.configurable?Node:Element).prototype,"baseURI",{get:function(){var a=g(this)?this:c(this);return a?a.href:R&&R.get?R.get.call(this):(document.querySelector("base")||window.location).href},configurable:!0,enumerable:!0});Object.defineProperty(HTMLLinkElement.prototype,"import",{get:function(){return this.__import||null},configurable:!0,enumerable:!0});e(function(){aa=new k})}f(function(){return document.dispatchEvent(b("HTMLImportsLoaded",
{cancelable:!0,bubbles:!0,detail:void 0}))});a.useNative=m;a.whenReady=f;a.importForElement=c;a.loadImports=function(a){aa&&aa.loadImports(a)}})(window.HTMLImports=window.HTMLImports||{});/*

 Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.WebComponents=window.WebComponents||{flags:{}};var kb=document.querySelector('script[src*="webcomponents-lite.js"]'),lb=/wc-(.+)/,x={};if(!x.noOpts){location.search.slice(1).split("&").forEach(function(a){a=a.split("=");var b;a[0]&&(b=a[0].match(lb))&&(x[b[1]]=a[1]||!0)});if(kb)for(var mb=0,nb;nb=kb.attributes[mb];mb++)"src"!==nb.name&&(x[nb.name]=nb.value||!0);if(x.log&&x.log.split){var ob=x.log.split(",");x.log={};ob.forEach(function(a){x.log[a]=!0})}else x.log={}}
window.WebComponents.flags=x;var pb=x.shadydom;pb&&(window.ShadyDOM=window.ShadyDOM||{},window.ShadyDOM.force=pb);var qb=x.register||x.ce;qb&&window.customElements&&(window.customElements.forcePolyfill=qb);/*

Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
var y=window.ShadyDOM||{};y.Na=!(!Element.prototype.attachShadow||!Node.prototype.getRootNode);var rb=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild");y.M=!!(rb&&rb.configurable&&rb.get);y.sa=y.force||!y.Na;function sb(a){return a.__shady&&void 0!==a.__shady.firstChild}function z(a){return"ShadyRoot"===a.ya}function tb(a){a=a.getRootNode();if(z(a))return a}var ub=Element.prototype,vb=ub.matches||ub.matchesSelector||ub.mozMatchesSelector||ub.msMatchesSelector||ub.oMatchesSelector||ub.webkitMatchesSelector;
function wb(a,b){if(a&&b)for(var c=Object.getOwnPropertyNames(b),d=0,e;d<c.length&&(e=c[d]);d++){var f=Object.getOwnPropertyDescriptor(b,e);f&&Object.defineProperty(a,e,f)}}function xb(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(d=0;d<c.length;d++)wb(a,c[d]);return a}function yb(a,b){for(var c in b)a[c]=b[c]}var zb=document.createTextNode(""),Ab=0,Bb=[];(new MutationObserver(function(){for(;Bb.length;)try{Bb.shift()()}catch(a){throw zb.textContent=Ab++,a;}})).observe(zb,{characterData:!0});
function Cb(a){Bb.push(a);zb.textContent=Ab++}var Db=!!document.contains;function Eb(a,b){for(;b;){if(b==a)return!0;b=b.parentNode}return!1};var Fb=[],Gb;function Hb(a){Gb||(Gb=!0,Cb(Ib));Fb.push(a)}function Ib(){Gb=!1;for(var a=!!Fb.length;Fb.length;)Fb.shift()();return a}Ib.list=Fb;function Jb(){this.a=!1;this.addedNodes=[];this.removedNodes=[];this.V=new Set}function Kb(a){a.a||(a.a=!0,Cb(function(){Lb(a)}))}function Lb(a){if(a.a){a.a=!1;var b=a.takeRecords();b.length&&a.V.forEach(function(a){a(b)})}}Jb.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var a=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];this.addedNodes=[];this.removedNodes=[];return a}return[]};
function Mb(a,b){a.__shady=a.__shady||{};a.__shady.N||(a.__shady.N=new Jb);a.__shady.N.V.add(b);var c=a.__shady.N;return{Ca:b,C:c,Ga:a,takeRecords:function(){return c.takeRecords()}}}function Nb(a){var b=a&&a.C;b&&(b.V.delete(a.Ca),b.V.size||(a.Ga.__shady.N=null))}
function Ob(a,b){var c=b.getRootNode();return a.map(function(a){var b=c===a.target.getRootNode();if(b&&a.addedNodes){if(b=Array.from(a.addedNodes).filter(function(a){return c===a.getRootNode()}),b.length)return a=Object.create(a),Object.defineProperty(a,"addedNodes",{value:b,configurable:!0}),a}else if(b)return a}).filter(function(a){return a})};var A={},Pb=Element.prototype.insertBefore,Qb=Element.prototype.removeChild,Rb=Element.prototype.setAttribute,Sb=Element.prototype.removeAttribute,Tb=Element.prototype.cloneNode,Ub=Document.prototype.importNode,Vb=Element.prototype.addEventListener,Wb=Element.prototype.removeEventListener,Xb=Window.prototype.addEventListener,Yb=Window.prototype.removeEventListener,Zb=Element.prototype.dispatchEvent,$b=Element.prototype.querySelector,ac=Element.prototype.querySelectorAll,bc=Node.prototype.contains||
HTMLElement.prototype.contains;A.appendChild=Element.prototype.appendChild;A.insertBefore=Pb;A.removeChild=Qb;A.setAttribute=Rb;A.removeAttribute=Sb;A.cloneNode=Tb;A.importNode=Ub;A.addEventListener=Vb;A.removeEventListener=Wb;A.ab=Xb;A.bb=Yb;A.dispatchEvent=Zb;A.querySelector=$b;A.querySelectorAll=ac;A.contains=bc;var cc=/[&\u00A0"]/g,dc=/[&\u00A0<>]/g;function ec(a){switch(a){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case '"':return"&quot;";case "\u00a0":return"&nbsp;"}}function fc(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;return b}var gc=fc("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),hc=fc("style script xmp iframe noembed noframes plaintext noscript".split(" "));
function ic(a,b){"template"===a.localName&&(a=a.content);for(var c="",d=b?b(a):a.childNodes,e=0,f=d.length,h;e<f&&(h=d[e]);e++){a:{var g=h;var k=a;var l=b;switch(g.nodeType){case Node.ELEMENT_NODE:for(var m=g.localName,n="<"+m,w=g.attributes,I=0;k=w[I];I++)n+=" "+k.name+'="'+k.value.replace(cc,ec)+'"';n+=">";g=gc[m]?n:n+ic(g,l)+"</"+m+">";break a;case Node.TEXT_NODE:g=g.data;g=k&&hc[k.localName]?g:g.replace(dc,ec);break a;case Node.COMMENT_NODE:g="\x3c!--"+g.data+"--\x3e";break a;default:throw window.console.error(g),
Error("not implemented");}}c+=g}return c};var B={},C=document.createTreeWalker(document,NodeFilter.SHOW_ALL,null,!1),D=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,null,!1);function jc(a){var b=[];C.currentNode=a;for(a=C.firstChild();a;)b.push(a),a=C.nextSibling();return b}B.parentNode=function(a){C.currentNode=a;return C.parentNode()};B.firstChild=function(a){C.currentNode=a;return C.firstChild()};B.lastChild=function(a){C.currentNode=a;return C.lastChild()};B.previousSibling=function(a){C.currentNode=a;return C.previousSibling()};
B.nextSibling=function(a){C.currentNode=a;return C.nextSibling()};B.childNodes=jc;B.parentElement=function(a){D.currentNode=a;return D.parentNode()};B.firstElementChild=function(a){D.currentNode=a;return D.firstChild()};B.lastElementChild=function(a){D.currentNode=a;return D.lastChild()};B.previousElementSibling=function(a){D.currentNode=a;return D.previousSibling()};B.nextElementSibling=function(a){D.currentNode=a;return D.nextSibling()};
B.children=function(a){var b=[];D.currentNode=a;for(a=D.firstChild();a;)b.push(a),a=D.nextSibling();return b};B.innerHTML=function(a){return ic(a,function(a){return jc(a)})};B.textContent=function(a){switch(a.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:a=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);for(var b="",c;c=a.nextNode();)b+=c.nodeValue;return b;default:return a.nodeValue}};var kc=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML")||Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerHTML"),lc=document.implementation.createHTMLDocument("inert"),mc=Object.getOwnPropertyDescriptor(Document.prototype,"activeElement"),nc={parentElement:{get:function(){var a=this.__shady&&this.__shady.parentNode;a&&a.nodeType!==Node.ELEMENT_NODE&&(a=null);return void 0!==a?a:B.parentElement(this)},configurable:!0},parentNode:{get:function(){var a=this.__shady&&this.__shady.parentNode;
return void 0!==a?a:B.parentNode(this)},configurable:!0},nextSibling:{get:function(){var a=this.__shady&&this.__shady.nextSibling;return void 0!==a?a:B.nextSibling(this)},configurable:!0},previousSibling:{get:function(){var a=this.__shady&&this.__shady.previousSibling;return void 0!==a?a:B.previousSibling(this)},configurable:!0},className:{get:function(){return this.getAttribute("class")||""},set:function(a){this.setAttribute("class",a)},configurable:!0},nextElementSibling:{get:function(){if(this.__shady&&
void 0!==this.__shady.nextSibling){for(var a=this.nextSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.nextSibling;return a}return B.nextElementSibling(this)},configurable:!0},previousElementSibling:{get:function(){if(this.__shady&&void 0!==this.__shady.previousSibling){for(var a=this.previousSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.previousSibling;return a}return B.previousElementSibling(this)},configurable:!0}},oc={childNodes:{get:function(){if(sb(this)){if(!this.__shady.childNodes){this.__shady.childNodes=
[];for(var a=this.firstChild;a;a=a.nextSibling)this.__shady.childNodes.push(a)}var b=this.__shady.childNodes}else b=B.childNodes(this);b.item=function(a){return b[a]};return b},configurable:!0},childElementCount:{get:function(){return this.children.length},configurable:!0},firstChild:{get:function(){var a=this.__shady&&this.__shady.firstChild;return void 0!==a?a:B.firstChild(this)},configurable:!0},lastChild:{get:function(){var a=this.__shady&&this.__shady.lastChild;return void 0!==a?a:B.lastChild(this)},
configurable:!0},textContent:{get:function(){if(sb(this)){for(var a=[],b=0,c=this.childNodes,d;d=c[b];b++)d.nodeType!==Node.COMMENT_NODE&&a.push(d.textContent);return a.join("")}return B.textContent(this)},set:function(a){switch(this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(0<a.length||this.nodeType===Node.ELEMENT_NODE)&&this.appendChild(document.createTextNode(a));break;default:this.nodeValue=a}},configurable:!0},firstElementChild:{get:function(){if(this.__shady&&
void 0!==this.__shady.firstChild){for(var a=this.firstChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.nextSibling;return a}return B.firstElementChild(this)},configurable:!0},lastElementChild:{get:function(){if(this.__shady&&void 0!==this.__shady.lastChild){for(var a=this.lastChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.previousSibling;return a}return B.lastElementChild(this)},configurable:!0},children:{get:function(){var a=sb(this)?Array.prototype.filter.call(this.childNodes,function(a){return a.nodeType===
Node.ELEMENT_NODE}):B.children(this);a.item=function(b){return a[b]};return a},configurable:!0},innerHTML:{get:function(){var a="template"===this.localName?this.content:this;return sb(this)?ic(a):B.innerHTML(a)},set:function(a){for(var b="template"===this.localName?this.content:this;b.firstChild;)b.removeChild(b.firstChild);var c=this.localName;c&&"template"!==c||(c="div");c=lc.createElement(c);for(kc&&kc.set?kc.set.call(c,a):c.innerHTML=a;c.firstChild;)b.appendChild(c.firstChild)},configurable:!0}},
pc={shadowRoot:{get:function(){return this.__shady&&this.__shady.Va||null},configurable:!0}},qc={activeElement:{get:function(){var a=mc&&mc.get?mc.get.call(document):y.M?void 0:document.activeElement;if(a&&a.nodeType){var b=!!z(this);if(this===document||b&&this.host!==a&&A.contains.call(this.host,a)){for(b=tb(a);b&&b!==this;)a=b.host,b=tb(a);a=this===document?b?null:a:b===this?a:null}else a=null}else a=null;return a},set:function(){},configurable:!0}};
function E(a,b,c){for(var d in b){var e=Object.getOwnPropertyDescriptor(a,d);e&&e.configurable||!e&&c?Object.defineProperty(a,d,b[d]):c&&console.warn("Could not define",d,"on",a)}}function F(a){E(a,nc);E(a,oc);E(a,qc)}var rc=y.M?function(){}:function(a){a.__shady&&a.__shady.za||(a.__shady=a.__shady||{},a.__shady.za=!0,E(a,nc,!0))},sc=y.M?function(){}:function(a){a.__shady&&a.__shady.xa||(a.__shady=a.__shady||{},a.__shady.xa=!0,E(a,oc,!0),E(a,pc,!0))};function tc(a,b,c){rc(a);c=c||null;a.__shady=a.__shady||{};b.__shady=b.__shady||{};c&&(c.__shady=c.__shady||{});a.__shady.previousSibling=c?c.__shady.previousSibling:b.lastChild;var d=a.__shady.previousSibling;d&&d.__shady&&(d.__shady.nextSibling=a);(d=a.__shady.nextSibling=c)&&d.__shady&&(d.__shady.previousSibling=a);a.__shady.parentNode=b;c?c===b.__shady.firstChild&&(b.__shady.firstChild=a):(b.__shady.lastChild=a,b.__shady.firstChild||(b.__shady.firstChild=a));b.__shady.childNodes=null}
function uc(a){if(!a.__shady||void 0===a.__shady.firstChild){a.__shady=a.__shady||{};a.__shady.firstChild=B.firstChild(a);a.__shady.lastChild=B.lastChild(a);sc(a);for(var b=a.__shady.childNodes=B.childNodes(a),c=0,d;c<b.length&&(d=b[c]);c++)d.__shady=d.__shady||{},d.__shady.parentNode=a,d.__shady.nextSibling=b[c+1]||null,d.__shady.previousSibling=b[c-1]||null,rc(d)}};function vc(a,b,c){if(b===a)throw Error("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");if(c){var d=c.__shady&&c.__shady.parentNode;if(void 0!==d&&d!==a||void 0===d&&B.parentNode(c)!==a)throw Error("Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.");}if(c===b)return b;b.parentNode&&wc(b.parentNode,b);d=tb(a);var e;if(e=d)a:{if(!b.__noInsertionPoint){var f;"slot"===b.localName?f=[b]:
b.querySelectorAll&&(f=b.querySelectorAll("slot"));if(f&&f.length){e=f;break a}}e=void 0}(f=e)&&d.H.push.apply(d.H,[].concat(f instanceof Array?f:la(ka(f))));d&&("slot"===a.localName||f)&&xc(d);if(sb(a)){d=c;sc(a);a.__shady=a.__shady||{};void 0!==a.__shady.firstChild&&(a.__shady.childNodes=null);if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){f=b.childNodes;for(e=0;e<f.length;e++)tc(f[e],a,d);b.__shady=b.__shady||{};d=void 0!==b.__shady.firstChild?null:void 0;b.__shady.firstChild=b.__shady.lastChild=
d;b.__shady.childNodes=d}else tc(b,a,d);if(yc(a)){xc(a.__shady.root);var h=!0}else a.__shady.root&&(h=!0)}h||(h=z(a)?a.host:a,c?(c=zc(c),A.insertBefore.call(h,b,c)):A.appendChild.call(h,b));Ac(a,b);return b}
function wc(a,b){if(b.parentNode!==a)throw Error("The node to be removed is not a child of this node: "+b);var c=tb(b);if(sb(a)){b.__shady=b.__shady||{};a.__shady=a.__shady||{};b===a.__shady.firstChild&&(a.__shady.firstChild=b.__shady.nextSibling);b===a.__shady.lastChild&&(a.__shady.lastChild=b.__shady.previousSibling);var d=b.__shady.previousSibling,e=b.__shady.nextSibling;d&&(d.__shady=d.__shady||{},d.__shady.nextSibling=e);e&&(e.__shady=e.__shady||{},e.__shady.previousSibling=d);b.__shady.parentNode=
b.__shady.previousSibling=b.__shady.nextSibling=void 0;void 0!==a.__shady.childNodes&&(a.__shady.childNodes=null);if(yc(a)){xc(a.__shady.root);var f=!0}}Bc(b);if(c){(d=a&&"slot"===a.localName)&&(f=!0);Cc(c);e=c.l;for(var h in e)for(var g=e[h],k=0;k<g.length;k++){var l=g[k];if(Eb(b,l)){g.splice(k,1);var m=c.o.indexOf(l);0<=m&&c.o.splice(m,1);k--;if(m=l.__shady.K)for(l=0;l<m.length;l++){var n=m[l],w=B.parentNode(n);w&&A.removeChild.call(w,n)}m=!0}}(m||d)&&xc(c)}f||(f=z(a)?a.host:a,(!a.__shady.root&&
"slot"!==b.localName||f===B.parentNode(b))&&A.removeChild.call(f,b));Ac(a,null,b);return b}function Bc(a){if(a.__shady&&void 0!==a.__shady.ka)for(var b=a.childNodes,c=0,d=b.length,e;c<d&&(e=b[c]);c++)Bc(e);a.__shady&&(a.__shady.ka=void 0)}function zc(a){var b=a;a&&"slot"===a.localName&&(b=(b=a.__shady&&a.__shady.K)&&b.length?b[0]:zc(a.nextSibling));return b}function yc(a){return(a=a&&a.__shady&&a.__shady.root)&&Dc(a)}
function Ec(a,b){if("slot"===b)a=a.parentNode,yc(a)&&xc(a.__shady.root);else if("slot"===a.localName&&"name"===b&&(b=tb(a))){var c=a.Aa,d=Fc(a);if(d!==c){c=b.l[c];var e=c.indexOf(a);0<=e&&c.splice(e,1);c=b.l[d]||(b.l[d]=[]);c.push(a);1<c.length&&(b.l[d]=Gc(c))}xc(b)}}function Ac(a,b,c){if(a=a.__shady&&a.__shady.N)b&&a.addedNodes.push(b),c&&a.removedNodes.push(c),Kb(a)}
function Hc(a){if(a&&a.nodeType){a.__shady=a.__shady||{};var b=a.__shady.ka;void 0===b&&(b=z(a)?a:(b=a.parentNode)?Hc(b):a,A.contains.call(document.documentElement,a)&&(a.__shady.ka=b));return b}}function Ic(a,b,c){var d=[];Jc(a.childNodes,b,c,d);return d}function Jc(a,b,c,d){for(var e=0,f=a.length,h;e<f&&(h=a[e]);e++){var g;if(g=h.nodeType===Node.ELEMENT_NODE){g=h;var k=b,l=c,m=d,n=k(g);n&&m.push(g);l&&l(n)?g=n:(Jc(g.childNodes,k,l,m),g=void 0)}if(g)break}}var Kc=null;
function Lc(a,b,c){Kc||(Kc=window.ShadyCSS&&window.ShadyCSS.ScopingShim);Kc&&"class"===b?Kc.setElementClass(a,c):(A.setAttribute.call(a,b,c),Ec(a,b))}function Mc(a,b){if(a.ownerDocument!==document)return A.importNode.call(document,a,b);var c=A.importNode.call(document,a,!1);if(b){a=a.childNodes;b=0;for(var d;b<a.length;b++)d=Mc(a[b],!0),c.appendChild(d)}return c};var Nc="__eventWrappers"+Date.now(),Oc={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,
dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0};function Pc(a,b){var c=[],d=a;for(a=a===window?window:a.getRootNode();d;)c.push(d),d=d.assignedSlot?d.assignedSlot:d.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&d.host&&(b||d!==a)?d.host:d.parentNode;c[c.length-1]===document&&c.push(window);return c}
function Qc(a,b){if(!z)return a;a=Pc(a,!0);for(var c=0,d,e,f,h;c<b.length;c++)if(d=b[c],f=d===window?window:d.getRootNode(),f!==e&&(h=a.indexOf(f),e=f),!z(f)||-1<h)return d}
var Rc={get composed(){!1!==this.isTrusted&&void 0===this.Z&&(this.Z=Oc[this.type]);return this.Z||!1},composedPath:function(){this.b||(this.b=Pc(this.__target,this.composed));return this.b},get target(){return Qc(this.currentTarget,this.composedPath())},get relatedTarget(){if(!this.$)return null;this.c||(this.c=Pc(this.$,!0));return Qc(this.currentTarget,this.c)},stopPropagation:function(){Event.prototype.stopPropagation.call(this);this.a=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this);
this.a=this.h=!0}};function Sc(a){function b(b,d){b=new a(b,d);b.Z=d&&!!d.composed;return b}yb(b,a);b.prototype=a.prototype;return b}var Tc={focus:!0,blur:!0};function Uc(a){return a.__target!==a.target||a.$!==a.relatedTarget}function Vc(a,b,c){if(c=b.__handlers&&b.__handlers[a.type]&&b.__handlers[a.type][c])for(var d=0,e;(e=c[d])&&(!Uc(a)||a.target!==a.relatedTarget)&&(e.call(b,a),!a.h);d++);}
function Wc(a){var b=a.composedPath();Object.defineProperty(a,"currentTarget",{get:function(){return d},configurable:!0});for(var c=b.length-1;0<=c;c--){var d=b[c];Vc(a,d,"capture");if(a.a)return}Object.defineProperty(a,"eventPhase",{get:function(){return Event.AT_TARGET}});var e;for(c=0;c<b.length;c++){d=b[c];var f=d.__shady&&d.__shady.root;if(0===c||f&&f===e)if(Vc(a,d,"bubble"),d!==window&&(e=d.getRootNode()),a.a)break}}
function Xc(a,b,c,d,e,f){for(var h=0;h<a.length;h++){var g=a[h],k=g.type,l=g.capture,m=g.once,n=g.passive;if(b===g.node&&c===k&&d===l&&e===m&&f===n)return h}return-1}
function Yc(a,b,c){if(b){var d=typeof b;if("function"===d||"object"===d)if("object"!==d||b.handleEvent&&"function"===typeof b.handleEvent){if(c&&"object"===typeof c){var e=!!c.capture;var f=!!c.once;var h=!!c.passive}else e=!!c,h=f=!1;var g=c&&c.aa||this,k=b[Nc];if(k){if(-1<Xc(k,g,a,e,f,h))return}else b[Nc]=[];k=function(e){f&&this.removeEventListener(a,b,c);e.__target||Zc(e);if(g!==this){var h=Object.getOwnPropertyDescriptor(e,"currentTarget");Object.defineProperty(e,"currentTarget",{get:function(){return g},
configurable:!0})}if(e.composed||-1<e.composedPath().indexOf(g))if(Uc(e)&&e.target===e.relatedTarget)e.eventPhase===Event.BUBBLING_PHASE&&e.stopImmediatePropagation();else if(e.eventPhase===Event.CAPTURING_PHASE||e.bubbles||e.target===g||g instanceof Window){var k="function"===d?b.call(g,e):b.handleEvent&&b.handleEvent(e);g!==this&&(h?(Object.defineProperty(e,"currentTarget",h),h=null):delete e.currentTarget);return k}};b[Nc].push({node:this,type:a,capture:e,once:f,passive:h,cb:k});Tc[a]?(this.__handlers=
this.__handlers||{},this.__handlers[a]=this.__handlers[a]||{capture:[],bubble:[]},this.__handlers[a][e?"capture":"bubble"].push(k)):(this instanceof Window?A.ab:A.addEventListener).call(this,a,k,c)}}}
function $c(a,b,c){if(b){if(c&&"object"===typeof c){var d=!!c.capture;var e=!!c.once;var f=!!c.passive}else d=!!c,f=e=!1;var h=c&&c.aa||this,g=void 0;var k=null;try{k=b[Nc]}catch(l){}k&&(e=Xc(k,h,a,d,e,f),-1<e&&(g=k.splice(e,1)[0].cb,k.length||(b[Nc]=void 0)));(this instanceof Window?A.bb:A.removeEventListener).call(this,a,g||b,c);g&&Tc[a]&&this.__handlers&&this.__handlers[a]&&(a=this.__handlers[a][d?"capture":"bubble"],g=a.indexOf(g),-1<g&&a.splice(g,1))}}
function ad(){for(var a in Tc)window.addEventListener(a,function(a){a.__target||(Zc(a),Wc(a))},!0)}function Zc(a){a.__target=a.target;a.$=a.relatedTarget;if(y.M){var b=Object.getPrototypeOf(a);if(!b.hasOwnProperty("__patchProto")){var c=Object.create(b);c.fb=b;wb(c,Rc);b.__patchProto=c}a.__proto__=b.__patchProto}else wb(a,Rc)}var bd=Sc(window.Event),cd=Sc(window.CustomEvent),dd=Sc(window.MouseEvent);function ed(a,b){return{index:a,O:[],U:b}}
function fd(a,b,c,d){var e=0,f=0,h=0,g=0,k=Math.min(b-e,d-f);if(0==e&&0==f)a:{for(h=0;h<k;h++)if(a[h]!==c[h])break a;h=k}if(b==a.length&&d==c.length){g=a.length;for(var l=c.length,m=0;m<k-h&&gd(a[--g],c[--l]);)m++;g=m}e+=h;f+=h;b-=g;d-=g;if(0==b-e&&0==d-f)return[];if(e==b){for(b=ed(e,0);f<d;)b.O.push(c[f++]);return[b]}if(f==d)return[ed(e,b-e)];k=e;h=f;d=d-h+1;g=b-k+1;b=Array(d);for(l=0;l<d;l++)b[l]=Array(g),b[l][0]=l;for(l=0;l<g;l++)b[0][l]=l;for(l=1;l<d;l++)for(m=1;m<g;m++)if(a[k+m-1]===c[h+l-1])b[l][m]=
b[l-1][m-1];else{var n=b[l-1][m]+1,w=b[l][m-1]+1;b[l][m]=n<w?n:w}k=b.length-1;h=b[0].length-1;d=b[k][h];for(a=[];0<k||0<h;)0==k?(a.push(2),h--):0==h?(a.push(3),k--):(g=b[k-1][h-1],l=b[k-1][h],m=b[k][h-1],n=l<m?l<g?l:g:m<g?m:g,n==g?(g==d?a.push(0):(a.push(1),d=g),k--,h--):n==l?(a.push(3),k--,d=l):(a.push(2),h--,d=m));a.reverse();b=void 0;k=[];for(h=0;h<a.length;h++)switch(a[h]){case 0:b&&(k.push(b),b=void 0);e++;f++;break;case 1:b||(b=ed(e,0));b.U++;e++;b.O.push(c[f]);f++;break;case 2:b||(b=ed(e,0));
b.U++;e++;break;case 3:b||(b=ed(e,0)),b.O.push(c[f]),f++}b&&k.push(b);return k}function gd(a,b){return a===b};var hd={};function G(a,b,c){if(a!==hd)throw new TypeError("Illegal constructor");a=document.createDocumentFragment();a.__proto__=G.prototype;a.ya="ShadyRoot";uc(b);uc(a);a.host=b;a.Fa=c&&c.mode;b.__shady=b.__shady||{};b.__shady.root=a;b.__shady.Va="closed"!==a.Fa?a:null;a.T=!1;a.o=[];a.l={};a.H=[];c=B.childNodes(b);for(var d=0,e=c.length;d<e;d++)A.removeChild.call(b,c[d]);return a}G.prototype=Object.create(DocumentFragment.prototype);function xc(a){a.T||(a.T=!0,Hb(function(){return id(a)}))}
function id(a){for(var b;a;){a.T&&(b=a);a:{var c=a;a=c.host.getRootNode();if(z(a))for(var d=c.host.childNodes,e=0;e<d.length;e++)if(c=d[e],"slot"==c.localName)break a;a=void 0}}b&&b._renderRoot()}
G.prototype._renderRoot=function(){this.T=!1;Cc(this);for(var a=0,b;a<this.o.length;a++){b=this.o[a];var c=b.__shady.assignedNodes;b.__shady.assignedNodes=[];b.__shady.K=[];if(b.__shady.oa=c)for(var d=0;d<c.length;d++){var e=c[d];e.__shady.ga=e.__shady.assignedSlot;e.__shady.assignedSlot===b&&(e.__shady.assignedSlot=null)}}for(b=this.host.firstChild;b;b=b.nextSibling)jd(this,b);for(a=0;a<this.o.length;a++){b=this.o[a];if(!b.__shady.assignedNodes.length)for(c=b.firstChild;c;c=c.nextSibling)jd(this,
c,b);c=b.parentNode;(c=c.__shady&&c.__shady.root)&&Dc(c)&&c._renderRoot();kd(this,b.__shady.K,b.__shady.assignedNodes);if(c=b.__shady.oa){for(d=0;d<c.length;d++)c[d].__shady.ga=null;b.__shady.oa=null;c.length>b.__shady.assignedNodes.length&&(b.__shady.ia=!0)}b.__shady.ia&&(b.__shady.ia=!1,ld(this,b))}a=this.o;b=[];for(c=0;c<a.length;c++)d=a[c].parentNode,d.__shady&&d.__shady.root||!(0>b.indexOf(d))||b.push(d);for(a=0;a<b.length;a++){c=b[a];d=c===this?this.host:c;e=[];c=c.childNodes;for(var f=0;f<
c.length;f++){var h=c[f];if("slot"==h.localName){h=h.__shady.K;for(var g=0;g<h.length;g++)e.push(h[g])}else e.push(h)}c=void 0;f=B.childNodes(d);h=fd(e,e.length,f,f.length);for(var k=g=0;g<h.length&&(c=h[g]);g++){for(var l=0,m;l<c.O.length&&(m=c.O[l]);l++)B.parentNode(m)===d&&A.removeChild.call(d,m),f.splice(c.index+k,1);k-=c.U}for(k=0;k<h.length&&(c=h[k]);k++)for(g=f[c.index],l=c.index;l<c.index+c.U;l++)m=e[l],A.insertBefore.call(d,m,g),f.splice(l,0,m)}};
function jd(a,b,c){b.__shady=b.__shady||{};var d=b.__shady.ga;b.__shady.ga=null;c||(c=(a=a.l[b.slot||"__catchall"])&&a[0]);c?(c.__shady.assignedNodes.push(b),b.__shady.assignedSlot=c):b.__shady.assignedSlot=void 0;d!==b.__shady.assignedSlot&&b.__shady.assignedSlot&&(b.__shady.assignedSlot.__shady.ia=!0)}function kd(a,b,c){for(var d=0,e;d<c.length&&(e=c[d]);d++)if("slot"==e.localName){var f=e.__shady.assignedNodes;f&&f.length&&kd(a,b,f)}else b.push(c[d])}
function ld(a,b){A.dispatchEvent.call(b,new Event("slotchange"));b.__shady.assignedSlot&&ld(a,b.__shady.assignedSlot)}function Cc(a){if(a.H.length){for(var b=a.H,c,d=0;d<b.length;d++){var e=b[d];e.__shady=e.__shady||{};uc(e);uc(e.parentNode);var f=Fc(e);a.l[f]?(c=c||{},c[f]=!0,a.l[f].push(e)):a.l[f]=[e];a.o.push(e)}if(c)for(var h in c)a.l[h]=Gc(a.l[h]);a.H=[]}}function Fc(a){var b=a.name||a.getAttribute("name")||"__catchall";return a.Aa=b}
function Gc(a){return a.sort(function(a,c){a=md(a);for(var b=md(c),e=0;e<a.length;e++){c=a[e];var f=b[e];if(c!==f)return a=Array.from(c.parentNode.childNodes),a.indexOf(c)-a.indexOf(f)}})}function md(a){var b=[];do b.unshift(a);while(a=a.parentNode);return b}function Dc(a){Cc(a);return!!a.o.length}G.prototype.addEventListener=function(a,b,c){"object"!==typeof c&&(c={capture:!!c});c.aa=this;this.host.addEventListener(a,b,c)};
G.prototype.removeEventListener=function(a,b,c){"object"!==typeof c&&(c={capture:!!c});c.aa=this;this.host.removeEventListener(a,b,c)};G.prototype.getElementById=function(a){return Ic(this,function(b){return b.id==a},function(a){return!!a})[0]||null};var nd=G.prototype;E(nd,oc,!0);E(nd,qc,!0);function od(a){var b=a.getRootNode();z(b)&&id(b);return a.__shady&&a.__shady.assignedSlot||null}
var pd={addEventListener:Yc.bind(window),removeEventListener:$c.bind(window)},qd={addEventListener:Yc,removeEventListener:$c,appendChild:function(a){return vc(this,a)},insertBefore:function(a,b){return vc(this,a,b)},removeChild:function(a){return wc(this,a)},replaceChild:function(a,b){vc(this,a,b);wc(this,b);return a},cloneNode:function(a){if("template"==this.localName)var b=A.cloneNode.call(this,a);else if(b=A.cloneNode.call(this,!1),a){a=this.childNodes;for(var c=0,d;c<a.length;c++)d=a[c].cloneNode(!0),
b.appendChild(d)}return b},getRootNode:function(){return Hc(this)},contains:function(a){return Eb(this,a)},get isConnected(){var a=this.ownerDocument;if(Db&&A.contains.call(a,this)||a.documentElement&&A.contains.call(a.documentElement,this))return!0;for(a=this;a&&!(a instanceof Document);)a=a.parentNode||(a instanceof G?a.host:void 0);return!!(a&&a instanceof Document)},dispatchEvent:function(a){Ib();return A.dispatchEvent.call(this,a)}},rd={get assignedSlot(){return od(this)}},sd={querySelector:function(a){return Ic(this,
function(b){return vb.call(b,a)},function(a){return!!a})[0]||null},querySelectorAll:function(a){return Ic(this,function(b){return vb.call(b,a)})}},td={assignedNodes:function(a){if("slot"===this.localName){var b=this.getRootNode();z(b)&&id(b);return this.__shady?(a&&a.flatten?this.__shady.K:this.__shady.assignedNodes)||[]:[]}}},ud=xb({setAttribute:function(a,b){Lc(this,a,b)},removeAttribute:function(a){A.removeAttribute.call(this,a);Ec(this,a)},attachShadow:function(a){if(!this)throw"Must provide a host.";
if(!a)throw"Not enough arguments.";return new G(hd,this,a)},get slot(){return this.getAttribute("slot")},set slot(a){Lc(this,"slot",a)},get assignedSlot(){return od(this)}},sd,td);Object.defineProperties(ud,pc);var vd=xb({importNode:function(a,b){return Mc(a,b)},getElementById:function(a){return Ic(this,function(b){return b.id==a},function(a){return!!a})[0]||null}},sd);Object.defineProperties(vd,{_activeElement:qc.activeElement});
var wd=HTMLElement.prototype.blur,xd=xb({blur:function(){var a=this.__shady&&this.__shady.root;(a=a&&a.activeElement)?a.blur():wd.call(this)}});function H(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f.value?a[e]=f.value:Object.defineProperty(a,e,f)}};if(y.sa){var ShadyDOM={inUse:y.sa,patch:function(a){return a},isShadyRoot:z,enqueue:Hb,flush:Ib,settings:y,filterMutations:Ob,observeChildren:Mb,unobserveChildren:Nb,nativeMethods:A,nativeTree:B};window.ShadyDOM=ShadyDOM;window.Event=bd;window.CustomEvent=cd;window.MouseEvent=dd;ad();var yd=window.customElements&&window.customElements.nativeHTMLElement||HTMLElement;H(window.Node.prototype,qd);H(window.Window.prototype,pd);H(window.Text.prototype,rd);H(window.DocumentFragment.prototype,sd);H(window.Element.prototype,
ud);H(window.Document.prototype,vd);window.HTMLSlotElement&&H(window.HTMLSlotElement.prototype,td);H(yd.prototype,xd);y.M&&(F(window.Node.prototype),F(window.Text.prototype),F(window.DocumentFragment.prototype),F(window.Element.prototype),F(yd.prototype),F(window.Document.prototype),window.HTMLSlotElement&&F(window.HTMLSlotElement.prototype));window.ShadowRoot=G};var zd=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function Ad(a){var b=zd.has(a);a=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(a);return!b&&a}function J(a){var b=a.isConnected;if(void 0!==b)return b;for(;a&&!(a.__CE_isImportDocument||a instanceof Document);)a=a.parentNode||(window.ShadowRoot&&a instanceof ShadowRoot?a.host:void 0);return!(!a||!(a.__CE_isImportDocument||a instanceof Document))}
function Bd(a,b){for(;b&&b!==a&&!b.nextSibling;)b=b.parentNode;return b&&b!==a?b.nextSibling:null}
function K(a,b,c){c=void 0===c?new Set:c;for(var d=a;d;){if(d.nodeType===Node.ELEMENT_NODE){var e=d;b(e);var f=e.localName;if("link"===f&&"import"===e.getAttribute("rel")){d=e.import;if(d instanceof Node&&!c.has(d))for(c.add(d),d=d.firstChild;d;d=d.nextSibling)K(d,b,c);d=Bd(a,e);continue}else if("template"===f){d=Bd(a,e);continue}if(e=e.__CE_shadowRoot)for(e=e.firstChild;e;e=e.nextSibling)K(e,b,c)}d=d.firstChild?d.firstChild:Bd(a,d)}}function L(a,b,c){a[b]=c};function Cd(){this.a=new Map;this.s=new Map;this.h=[];this.c=!1}function Dd(a,b,c){a.a.set(b,c);a.s.set(c.constructor,c)}function Ed(a,b){a.c=!0;a.h.push(b)}function Fd(a,b){a.c&&K(b,function(b){return a.b(b)})}Cd.prototype.b=function(a){if(this.c&&!a.__CE_patched){a.__CE_patched=!0;for(var b=0;b<this.h.length;b++)this.h[b](a)}};function M(a,b){var c=[];K(b,function(a){return c.push(a)});for(b=0;b<c.length;b++){var d=c[b];1===d.__CE_state?a.connectedCallback(d):Gd(a,d)}}
function N(a,b){var c=[];K(b,function(a){return c.push(a)});for(b=0;b<c.length;b++){var d=c[b];1===d.__CE_state&&a.disconnectedCallback(d)}}
function O(a,b,c){c=void 0===c?{}:c;var d=c.$a||new Set,e=c.va||function(b){return Gd(a,b)},f=[];K(b,function(b){if("link"===b.localName&&"import"===b.getAttribute("rel")){var c=b.import;c instanceof Node&&(c.__CE_isImportDocument=!0,c.__CE_hasRegistry=!0);c&&"complete"===c.readyState?c.__CE_documentLoadHandled=!0:b.addEventListener("load",function(){var c=b.import;if(!c.__CE_documentLoadHandled){c.__CE_documentLoadHandled=!0;var f=new Set(d);f.delete(c);O(a,c,{$a:f,va:e})}})}else f.push(b)},d);if(a.c)for(b=
0;b<f.length;b++)a.b(f[b]);for(b=0;b<f.length;b++)e(f[b])}
function Gd(a,b){if(void 0===b.__CE_state){var c=b.ownerDocument;if(c.defaultView||c.__CE_isImportDocument&&c.__CE_hasRegistry)if(c=a.a.get(b.localName)){c.constructionStack.push(b);var d=c.constructor;try{try{if(new d!==b)throw Error("The custom element constructor did not produce the element being upgraded.");}finally{c.constructionStack.pop()}}catch(h){throw b.__CE_state=2,h;}b.__CE_state=1;b.__CE_definition=c;if(c.attributeChangedCallback)for(c=c.observedAttributes,d=0;d<c.length;d++){var e=c[d],
f=b.getAttribute(e);null!==f&&a.attributeChangedCallback(b,e,null,f,null)}J(b)&&a.connectedCallback(b)}}}Cd.prototype.connectedCallback=function(a){var b=a.__CE_definition;b.connectedCallback&&b.connectedCallback.call(a)};Cd.prototype.disconnectedCallback=function(a){var b=a.__CE_definition;b.disconnectedCallback&&b.disconnectedCallback.call(a)};
Cd.prototype.attributeChangedCallback=function(a,b,c,d,e){var f=a.__CE_definition;f.attributeChangedCallback&&-1<f.observedAttributes.indexOf(b)&&f.attributeChangedCallback.call(a,b,c,d,e)};function Hd(a){var b=document;this.j=a;this.a=b;this.C=void 0;O(this.j,this.a);"loading"===this.a.readyState&&(this.C=new MutationObserver(this.b.bind(this)),this.C.observe(this.a,{childList:!0,subtree:!0}))}Hd.prototype.disconnect=function(){this.C&&this.C.disconnect()};Hd.prototype.b=function(a){var b=this.a.readyState;"interactive"!==b&&"complete"!==b||this.disconnect();for(b=0;b<a.length;b++)for(var c=a[b].addedNodes,d=0;d<c.length;d++)O(this.j,c[d])};function Id(){var a=this;this.b=this.a=void 0;this.c=new Promise(function(b){a.b=b;a.a&&b(a.a)})}Id.prototype.resolve=function(a){if(this.a)throw Error("Already resolved.");this.a=a;this.b&&this.b(a)};function P(a){this.da=!1;this.j=a;this.ha=new Map;this.ea=function(a){return a()};this.R=!1;this.fa=[];this.Da=new Hd(a)}
P.prototype.define=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!Ad(a))throw new SyntaxError("The element name '"+a+"' is not valid.");if(this.j.a.get(a))throw Error("A custom element with name '"+a+"' has already been defined.");if(this.da)throw Error("A custom element is already being defined.");this.da=!0;try{var d=function(a){var b=e[a];if(void 0!==b&&!(b instanceof Function))throw Error("The '"+a+"' callback must be a function.");
return b},e=b.prototype;if(!(e instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var f=d("connectedCallback");var h=d("disconnectedCallback");var g=d("adoptedCallback");var k=d("attributeChangedCallback");var l=b.observedAttributes||[]}catch(m){return}finally{this.da=!1}b={localName:a,constructor:b,connectedCallback:f,disconnectedCallback:h,adoptedCallback:g,attributeChangedCallback:k,observedAttributes:l,constructionStack:[]};Dd(this.j,a,b);this.fa.push(b);
this.R||(this.R=!0,this.ea(function(){return Jd(c)}))};function Jd(a){if(!1!==a.R){a.R=!1;for(var b=a.fa,c=[],d=new Map,e=0;e<b.length;e++)d.set(b[e].localName,[]);O(a.j,document,{va:function(b){if(void 0===b.__CE_state){var e=b.localName,f=d.get(e);f?f.push(b):a.j.a.get(e)&&c.push(b)}}});for(e=0;e<c.length;e++)Gd(a.j,c[e]);for(;0<b.length;){var f=b.shift();e=f.localName;f=d.get(f.localName);for(var h=0;h<f.length;h++)Gd(a.j,f[h]);(e=a.ha.get(e))&&e.resolve(void 0)}}}
P.prototype.get=function(a){if(a=this.j.a.get(a))return a.constructor};P.prototype.a=function(a){if(!Ad(a))return Promise.reject(new SyntaxError("'"+a+"' is not a valid custom element name."));var b=this.ha.get(a);if(b)return b.c;b=new Id;this.ha.set(a,b);this.j.a.get(a)&&!this.fa.some(function(b){return b.localName===a})&&b.resolve(void 0);return b.c};P.prototype.b=function(a){this.Da.disconnect();var b=this.ea;this.ea=function(c){return a(function(){return b(c)})}};
window.CustomElementRegistry=P;P.prototype.define=P.prototype.define;P.prototype.get=P.prototype.get;P.prototype.whenDefined=P.prototype.a;P.prototype.polyfillWrapFlushCallback=P.prototype.b;var Kd=window.Document.prototype.createElement,Ld=window.Document.prototype.createElementNS,Md=window.Document.prototype.importNode,Nd=window.Document.prototype.prepend,Od=window.Document.prototype.append,Pd=window.DocumentFragment.prototype.prepend,Qd=window.DocumentFragment.prototype.append,Rd=window.Node.prototype.cloneNode,Sd=window.Node.prototype.appendChild,Td=window.Node.prototype.insertBefore,Ud=window.Node.prototype.removeChild,Vd=window.Node.prototype.replaceChild,Wd=Object.getOwnPropertyDescriptor(window.Node.prototype,
"textContent"),Xd=window.Element.prototype.attachShadow,Yd=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),Zd=window.Element.prototype.getAttribute,$d=window.Element.prototype.setAttribute,ae=window.Element.prototype.removeAttribute,be=window.Element.prototype.getAttributeNS,ce=window.Element.prototype.setAttributeNS,de=window.Element.prototype.removeAttributeNS,ee=window.Element.prototype.insertAdjacentElement,fe=window.Element.prototype.prepend,ge=window.Element.prototype.append,
he=window.Element.prototype.before,ie=window.Element.prototype.after,je=window.Element.prototype.replaceWith,ke=window.Element.prototype.remove,le=window.HTMLElement,me=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),ne=window.HTMLElement.prototype.insertAdjacentElement;var oe=new function(){};function pe(){var a=qe;window.HTMLElement=function(){function b(){var b=this.constructor,d=a.s.get(b);if(!d)throw Error("The custom element being constructed was not registered with `customElements`.");var e=d.constructionStack;if(0===e.length)return e=Kd.call(document,d.localName),Object.setPrototypeOf(e,b.prototype),e.__CE_state=1,e.__CE_definition=d,a.b(e),e;d=e.length-1;var f=e[d];if(f===oe)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");
e[d]=oe;Object.setPrototypeOf(f,b.prototype);a.b(f);return f}b.prototype=le.prototype;return b}()};function re(a,b,c){function d(b){return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];e=[];for(var f=[],l=0;l<d.length;l++){var m=d[l];m instanceof Element&&J(m)&&f.push(m);if(m instanceof DocumentFragment)for(m=m.firstChild;m;m=m.nextSibling)e.push(m);else e.push(m)}b.apply(this,d);for(d=0;d<f.length;d++)N(a,f[d]);if(J(this))for(d=0;d<e.length;d++)f=e[d],f instanceof Element&&M(a,f)}}void 0!==c.X&&(b.prepend=d(c.X));void 0!==c.append&&(b.append=d(c.append))};function se(){var a=qe;L(Document.prototype,"createElement",function(b){if(this.__CE_hasRegistry){var c=a.a.get(b);if(c)return new c.constructor}b=Kd.call(this,b);a.b(b);return b});L(Document.prototype,"importNode",function(b,c){b=Md.call(this,b,c);this.__CE_hasRegistry?O(a,b):Fd(a,b);return b});L(Document.prototype,"createElementNS",function(b,c){if(this.__CE_hasRegistry&&(null===b||"http://www.w3.org/1999/xhtml"===b)){var d=a.a.get(c);if(d)return new d.constructor}b=Ld.call(this,b,c);a.b(b);return b});
re(a,Document.prototype,{X:Nd,append:Od})};function te(){var a=qe;function b(b,d){Object.defineProperty(b,"textContent",{enumerable:d.enumerable,configurable:!0,get:d.get,set:function(b){if(this.nodeType===Node.TEXT_NODE)d.set.call(this,b);else{var c=void 0;if(this.firstChild){var e=this.childNodes,g=e.length;if(0<g&&J(this)){c=Array(g);for(var k=0;k<g;k++)c[k]=e[k]}}d.set.call(this,b);if(c)for(b=0;b<c.length;b++)N(a,c[b])}}})}L(Node.prototype,"insertBefore",function(b,d){if(b instanceof DocumentFragment){var c=Array.prototype.slice.apply(b.childNodes);
b=Td.call(this,b,d);if(J(this))for(d=0;d<c.length;d++)M(a,c[d]);return b}c=J(b);d=Td.call(this,b,d);c&&N(a,b);J(this)&&M(a,b);return d});L(Node.prototype,"appendChild",function(b){if(b instanceof DocumentFragment){var c=Array.prototype.slice.apply(b.childNodes);b=Sd.call(this,b);if(J(this))for(var e=0;e<c.length;e++)M(a,c[e]);return b}c=J(b);e=Sd.call(this,b);c&&N(a,b);J(this)&&M(a,b);return e});L(Node.prototype,"cloneNode",function(b){b=Rd.call(this,b);this.ownerDocument.__CE_hasRegistry?O(a,b):
Fd(a,b);return b});L(Node.prototype,"removeChild",function(b){var c=J(b),e=Ud.call(this,b);c&&N(a,b);return e});L(Node.prototype,"replaceChild",function(b,d){if(b instanceof DocumentFragment){var c=Array.prototype.slice.apply(b.childNodes);b=Vd.call(this,b,d);if(J(this))for(N(a,d),d=0;d<c.length;d++)M(a,c[d]);return b}c=J(b);var f=Vd.call(this,b,d),h=J(this);h&&N(a,d);c&&N(a,b);h&&M(a,b);return f});Wd&&Wd.get?b(Node.prototype,Wd):Ed(a,function(a){b(a,{enumerable:!0,configurable:!0,get:function(){for(var a=
[],b=0;b<this.childNodes.length;b++)a.push(this.childNodes[b].textContent);return a.join("")},set:function(a){for(;this.firstChild;)Ud.call(this,this.firstChild);Sd.call(this,document.createTextNode(a))}})})};function ue(a){var b=Element.prototype;function c(b){return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];e=[];for(var g=[],k=0;k<d.length;k++){var l=d[k];l instanceof Element&&J(l)&&g.push(l);if(l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)e.push(l);else e.push(l)}b.apply(this,d);for(d=0;d<g.length;d++)N(a,g[d]);if(J(this))for(d=0;d<e.length;d++)g=e[d],g instanceof Element&&M(a,g)}}void 0!==he&&(b.before=c(he));void 0!==he&&(b.after=c(ie));void 0!==
je&&L(b,"replaceWith",function(b){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];d=[];for(var h=[],g=0;g<c.length;g++){var k=c[g];k instanceof Element&&J(k)&&h.push(k);if(k instanceof DocumentFragment)for(k=k.firstChild;k;k=k.nextSibling)d.push(k);else d.push(k)}g=J(this);je.apply(this,c);for(c=0;c<h.length;c++)N(a,h[c]);if(g)for(N(a,this),c=0;c<d.length;c++)h=d[c],h instanceof Element&&M(a,h)});void 0!==ke&&L(b,"remove",function(){var b=J(this);ke.call(this);b&&N(a,this)})};function ve(){var a=qe;function b(b,c){Object.defineProperty(b,"innerHTML",{enumerable:c.enumerable,configurable:!0,get:c.get,set:function(b){var d=this,e=void 0;J(this)&&(e=[],K(this,function(a){a!==d&&e.push(a)}));c.set.call(this,b);if(e)for(var f=0;f<e.length;f++){var l=e[f];1===l.__CE_state&&a.disconnectedCallback(l)}this.ownerDocument.__CE_hasRegistry?O(a,this):Fd(a,this);return b}})}function c(b,c){L(b,"insertAdjacentElement",function(b,d){var e=J(d);b=c.call(this,b,d);e&&N(a,d);J(b)&&M(a,d);
return b})}Xd&&L(Element.prototype,"attachShadow",function(a){return this.__CE_shadowRoot=a=Xd.call(this,a)});Yd&&Yd.get?b(Element.prototype,Yd):me&&me.get?b(HTMLElement.prototype,me):Ed(a,function(a){b(a,{enumerable:!0,configurable:!0,get:function(){return Rd.call(this,!0).innerHTML},set:function(a){var b="template"===this.localName,c=b?this.content:this,d=Kd.call(document,this.localName);for(d.innerHTML=a;0<c.childNodes.length;)Ud.call(c,c.childNodes[0]);for(a=b?d.content:d;0<a.childNodes.length;)Sd.call(c,
a.childNodes[0])}})});L(Element.prototype,"setAttribute",function(b,c){if(1!==this.__CE_state)return $d.call(this,b,c);var d=Zd.call(this,b);$d.call(this,b,c);c=Zd.call(this,b);a.attributeChangedCallback(this,b,d,c,null)});L(Element.prototype,"setAttributeNS",function(b,c,f){if(1!==this.__CE_state)return ce.call(this,b,c,f);var d=be.call(this,b,c);ce.call(this,b,c,f);f=be.call(this,b,c);a.attributeChangedCallback(this,c,d,f,b)});L(Element.prototype,"removeAttribute",function(b){if(1!==this.__CE_state)return ae.call(this,
b);var c=Zd.call(this,b);ae.call(this,b);null!==c&&a.attributeChangedCallback(this,b,c,null,null)});L(Element.prototype,"removeAttributeNS",function(b,c){if(1!==this.__CE_state)return de.call(this,b,c);var d=be.call(this,b,c);de.call(this,b,c);var e=be.call(this,b,c);d!==e&&a.attributeChangedCallback(this,c,d,e,b)});ne?c(HTMLElement.prototype,ne):ee?c(Element.prototype,ee):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched.");re(a,Element.prototype,{X:fe,append:ge});ue(a)}
;var we=window.customElements;if(!we||we.forcePolyfill||"function"!=typeof we.define||"function"!=typeof we.get){var qe=new Cd;pe();se();re(qe,DocumentFragment.prototype,{X:Pd,append:Qd});te();ve();document.__CE_hasRegistry=!0;var customElements=new P(qe);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:customElements})};function xe(){this.end=this.start=0;this.rules=this.parent=this.previous=null;this.cssText=this.parsedCssText="";this.atRule=!1;this.type=0;this.parsedSelector=this.selector=this.keyframesName=""}
function ye(a){a=a.replace(ze,"").replace(Ae,"");var b=Be,c=a,d=new xe;d.start=0;d.end=c.length;for(var e=d,f=0,h=c.length;f<h;f++)if("{"===c[f]){e.rules||(e.rules=[]);var g=e,k=g.rules[g.rules.length-1]||null;e=new xe;e.start=f+1;e.parent=g;e.previous=k;g.rules.push(e)}else"}"===c[f]&&(e.end=f+1,e=e.parent||d);return b(d,a)}
function Be(a,b){var c=b.substring(a.start,a.end-1);a.parsedCssText=a.cssText=c.trim();a.parent&&(c=b.substring(a.previous?a.previous.end:a.parent.start,a.start-1),c=Ce(c),c=c.replace(De," "),c=c.substring(c.lastIndexOf(";")+1),c=a.parsedSelector=a.selector=c.trim(),a.atRule=0===c.indexOf("@"),a.atRule?0===c.indexOf("@media")?a.type=He:c.match(Ie)&&(a.type=Je,a.keyframesName=a.selector.split(De).pop()):a.type=0===c.indexOf("--")?Ke:Le);if(c=a.rules)for(var d=0,e=c.length,f;d<e&&(f=c[d]);d++)Be(f,
b);return a}function Ce(a){return a.replace(/\\([0-9a-f]{1,6})\s/gi,function(a,c){a=c;for(c=6-a.length;c--;)a="0"+a;return"\\"+a})}
function Me(a,b,c){c=void 0===c?"":c;var d="";if(a.cssText||a.rules){var e=a.rules,f;if(f=e)f=e[0],f=!(f&&f.selector&&0===f.selector.indexOf("--"));if(f){f=0;for(var h=e.length,g;f<h&&(g=e[f]);f++)d=Me(g,b,d)}else b?b=a.cssText:(b=a.cssText,b=b.replace(Ne,"").replace(Oe,""),b=b.replace(Pe,"").replace(Qe,"")),(d=b.trim())&&(d="  "+d+"\n")}d&&(a.selector&&(c+=a.selector+" {\n"),c+=d,a.selector&&(c+="}\n\n"));return c}
var Le=1,Je=7,He=4,Ke=1E3,ze=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,Ae=/@import[^;]*;/gim,Ne=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,Oe=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,Pe=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,Qe=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,Ie=/^@[^\s]*keyframes/,De=/\s+/g;var Q=!(window.ShadyDOM&&window.ShadyDOM.inUse),Re;function Se(a){Re=a&&a.shimcssproperties?!1:Q||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)"))}window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?Re=window.ShadyCSS.nativeCss:window.ShadyCSS?(Se(window.ShadyCSS),window.ShadyCSS=void 0):Se(window.WebComponents&&window.WebComponents.flags);var S=Re;var Te=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,Ue=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,Ve=/(--[\w-]+)\s*([:,;)]|$)/gi,We=/(animation\s*:)|(animation-name\s*:)/,Xe=/@media\s(.*)/,Ye=/\{[^}]*\}/g;var Ze=new Set;function $e(a,b){if(!a)return"";"string"===typeof a&&(a=ye(a));b&&af(a,b);return Me(a,S)}function bf(a){!a.__cssRules&&a.textContent&&(a.__cssRules=ye(a.textContent));return a.__cssRules||null}function cf(a){return!!a.parent&&a.parent.type===Je}function af(a,b,c,d){if(a){var e=!1,f=a.type;if(d&&f===He){var h=a.selector.match(Xe);h&&(window.matchMedia(h[1]).matches||(e=!0))}f===Le?b(a):c&&f===Je?c(a):f===Ke&&(e=!0);if((a=a.rules)&&!e){e=0;f=a.length;for(var g;e<f&&(g=a[e]);e++)af(g,b,c,d)}}}
function df(a,b,c,d){var e=document.createElement("style");b&&e.setAttribute("scope",b);e.textContent=a;ef(e,c,d);return e}var T=null;function ef(a,b,c){b=b||document.head;b.insertBefore(a,c&&c.nextSibling||b.firstChild);T?a.compareDocumentPosition(T)===Node.DOCUMENT_POSITION_PRECEDING&&(T=a):T=a}
function ff(a,b){var c=a.indexOf("var(");if(-1===c)return b(a,"","","");a:{var d=0;var e=c+3;for(var f=a.length;e<f;e++)if("("===a[e])d++;else if(")"===a[e]&&0===--d)break a;e=-1}d=a.substring(c+4,e);c=a.substring(0,c);a=ff(a.substring(e+1),b);e=d.indexOf(",");return-1===e?b(c,d.trim(),"",a):b(c,d.substring(0,e).trim(),d.substring(e+1).trim(),a)}function gf(a,b){Q?a.setAttribute("class",b):window.ShadyDOM.nativeMethods.setAttribute.call(a,"class",b)}
function U(a){var b=a.localName,c="";b?-1<b.indexOf("-")||(c=b,b=a.getAttribute&&a.getAttribute("is")||""):(b=a.is,c=a.extends);return{is:b,P:c}};function hf(){}function jf(a,b,c){var d=V;a.__styleScoped?a.__styleScoped=null:kf(d,a,b||"",c)}function kf(a,b,c,d){b.nodeType===Node.ELEMENT_NODE&&lf(b,c,d);if(b="template"===b.localName?(b.content||b.gb).childNodes:b.children||b.childNodes)for(var e=0;e<b.length;e++)kf(a,b[e],c,d)}
function lf(a,b,c){if(b)if(a.classList)c?(a.classList.remove("style-scope"),a.classList.remove(b)):(a.classList.add("style-scope"),a.classList.add(b));else if(a.getAttribute){var d=a.getAttribute(mf);c?d&&(b=d.replace("style-scope","").replace(b,""),gf(a,b)):gf(a,(d?d+" ":"")+"style-scope "+b)}}function nf(a,b,c){var d=V,e=a.__cssBuild;Q||"shady"===e?b=$e(b,c):(a=U(a),b=of(d,b,a.is,a.P,c)+"\n\n");return b.trim()}
function of(a,b,c,d,e){var f=pf(c,d);c=c?qf+c:"";return $e(b,function(b){b.c||(b.selector=b.m=rf(a,b,a.b,c,f),b.c=!0);e&&e(b,c,f)})}function pf(a,b){return b?"[is="+a+"]":a}function rf(a,b,c,d,e){var f=b.selector.split(sf);if(!cf(b)){b=0;for(var h=f.length,g;b<h&&(g=f[b]);b++)f[b]=c.call(a,g,d,e)}return f.join(sf)}function tf(a){return a.replace(uf,function(a,c,d){-1<d.indexOf("+")?d=d.replace(/\+/g,"___"):-1<d.indexOf("___")&&(d=d.replace(/___/g,"+"));return":"+c+"("+d+")"})}
hf.prototype.b=function(a,b,c){var d=!1;a=a.trim();var e=uf.test(a);e&&(a=a.replace(uf,function(a,b,c){return":"+b+"("+c.replace(/\s/g,"")+")"}),a=tf(a));a=a.replace(vf,wf+" $1");a=a.replace(xf,function(a,e,g){d||(a=yf(g,e,b,c),d=d||a.stop,e=a.Ka,g=a.value);return e+g});e&&(a=tf(a));return a};
function yf(a,b,c,d){var e=a.indexOf(zf);0<=a.indexOf(wf)?a=Af(a,d):0!==e&&(a=c?Bf(a,c):a);c=!1;0<=e&&(b="",c=!0);if(c){var f=!0;c&&(a=a.replace(Cf,function(a,b){return" > "+b}))}a=a.replace(Df,function(a,b,c){return'[dir="'+c+'"] '+b+", "+b+'[dir="'+c+'"]'});return{value:a,Ka:b,stop:f}}function Bf(a,b){a=a.split(Ef);a[0]+=b;return a.join(Ef)}
function Af(a,b){var c=a.match(Ff);return(c=c&&c[2].trim()||"")?c[0].match(Gf)?a.replace(Ff,function(a,c,f){return b+f}):c.split(Gf)[0]===b?c:Hf:a.replace(wf,b)}function If(a){a.selector===Jf&&(a.selector="html")}hf.prototype.c=function(a){return a.match(zf)?this.b(a,Kf):Bf(a.trim(),Kf)};q.Object.defineProperties(hf.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"style-scope"}}});
var uf=/:(nth[-\w]+)\(([^)]+)\)/,Kf=":not(.style-scope)",sf=",",xf=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=[])+)/g,Gf=/[[.:#*]/,wf=":host",Jf=":root",zf="::slotted",vf=new RegExp("^("+zf+")"),Ff=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,Cf=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,Df=/(.*):dir\((?:(ltr|rtl))\)/,qf=".",Ef=":",mf="class",Hf="should_not_match",V=new hf;function Lf(a,b,c,d){this.w=a||null;this.b=b||null;this.ja=c||[];this.G=null;this.P=d||"";this.a=this.u=this.B=null}function W(a){return a?a.__styleInfo:null}function Mf(a,b){return a.__styleInfo=b}Lf.prototype.c=function(){return this.w};Lf.prototype._getStyleRules=Lf.prototype.c;var Nf,Of=window.Element.prototype;Nf=Of.matches||Of.matchesSelector||Of.mozMatchesSelector||Of.msMatchesSelector||Of.oMatchesSelector||Of.webkitMatchesSelector;var Pf=navigator.userAgent.match("Trident");function Qf(){}function Rf(a){var b={},c=[],d=0;af(a,function(a){Sf(a);a.index=d++;a=a.i.cssText;for(var c;c=Ve.exec(a);){var e=c[1];":"!==c[2]&&(b[e]=!0)}},function(a){c.push(a)});a.b=c;a=[];for(var e in b)a.push(e);return a}
function Sf(a){if(!a.i){var b={},c={};Tf(a,c)&&(b.v=c,a.rules=null);b.cssText=a.parsedCssText.replace(Ye,"").replace(Te,"");a.i=b}}function Tf(a,b){var c=a.i;if(c){if(c.v)return Object.assign(b,c.v),!0}else{c=a.parsedCssText;for(var d;a=Te.exec(c);){d=(a[2]||a[3]).trim();if("inherit"!==d||"unset"!==d)b[a[1].trim()]=d;d=!0}return d}}
function Uf(a,b,c){b&&(b=0<=b.indexOf(";")?Vf(a,b,c):ff(b,function(b,e,f,h){if(!e)return b+h;(e=Uf(a,c[e],c))&&"initial"!==e?"apply-shim-inherit"===e&&(e="inherit"):e=Uf(a,c[f]||f,c)||f;return b+(e||"")+h}));return b&&b.trim()||""}
function Vf(a,b,c){b=b.split(";");for(var d=0,e,f;d<b.length;d++)if(e=b[d]){Ue.lastIndex=0;if(f=Ue.exec(e))e=Uf(a,c[f[1]],c);else if(f=e.indexOf(":"),-1!==f){var h=e.substring(f);h=h.trim();h=Uf(a,h,c)||h;e=e.substring(0,f)+h}b[d]=e&&e.lastIndexOf(";")===e.length-1?e.slice(0,-1):e||""}return b.join(";")}
function Wf(a,b){var c={},d=[];af(a,function(a){a.i||Sf(a);var e=a.m||a.parsedSelector;b&&a.i.v&&e&&Nf.call(b,e)&&(Tf(a,c),a=a.index,e=parseInt(a/32,10),d[e]=(d[e]||0)|1<<a%32)},null,!0);return{v:c,key:d}}
function Xf(a,b,c,d){b.i||Sf(b);if(b.i.v){var e=U(a);a=e.is;e=e.P;e=a?pf(a,e):"html";var f=b.parsedSelector,h=":host > *"===f||"html"===f,g=0===f.indexOf(":host")&&!h;"shady"===c&&(h=f===e+" > *."+e||-1!==f.indexOf("html"),g=!h&&0===f.indexOf(e));"shadow"===c&&(h=":host > *"===f||"html"===f,g=g&&!h);if(h||g)c=e,g&&(Q&&!b.m&&(b.m=rf(V,b,V.b,a?qf+a:"",e)),c=b.m||e),d({Xa:c,Qa:g,hb:h})}}
function Yf(a,b){var c={},d={},e=b&&b.__cssBuild;af(b,function(b){Xf(a,b,e,function(e){Nf.call(a.b||a,e.Xa)&&(e.Qa?Tf(b,c):Tf(b,d))})},null,!0);return{Wa:d,Oa:c}}
function Zf(a,b,c,d){var e=U(b),f=pf(e.is,e.P),h=new RegExp("(?:^|[^.#[:])"+(b.extends?"\\"+f.slice(0,-1)+"\\]":f)+"($|[.:[\\s>+~])");e=W(b).w;var g=$f(e,d);return nf(b,e,function(b){var e="";b.i||Sf(b);b.i.cssText&&(e=Vf(a,b.i.cssText,c));b.cssText=e;if(!Q&&!cf(b)&&b.cssText){var k=e=b.cssText;null==b.ra&&(b.ra=We.test(e));if(b.ra)if(null==b.W){b.W=[];for(var n in g)k=g[n],k=k(e),e!==k&&(e=k,b.W.push(n))}else{for(n=0;n<b.W.length;++n)k=g[b.W[n]],e=k(e);k=e}b.cssText=k;b.m=b.m||b.selector;e="."+d;
n=b.m.split(",");k=0;for(var w=n.length,I;k<w&&(I=n[k]);k++)n[k]=I.match(h)?I.replace(f,e):e+" "+I;b.selector=n.join(",")}})}function $f(a,b){a=a.b;var c={};if(!Q&&a)for(var d=0,e=a[d];d<a.length;e=a[++d]){var f=e,h=b;f.h=new RegExp(f.keyframesName,"g");f.a=f.keyframesName+"-"+h;f.m=f.m||f.selector;f.selector=f.m.replace(f.keyframesName,f.a);c[e.keyframesName]=ag(e)}return c}function ag(a){return function(b){return b.replace(a.h,a.a)}}
function bg(a,b){var c=cg,d=bf(a);a.textContent=$e(d,function(a){var d=a.cssText=a.parsedCssText;a.i&&a.i.cssText&&(d=d.replace(Ne,"").replace(Oe,""),a.cssText=Vf(c,d,b))})}q.Object.defineProperties(Qf.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"x-scope"}}});var cg=new Qf;var dg={},eg=window.customElements;if(eg&&!Q){var fg=eg.define;eg.define=function(a,b,c){var d=document.createComment(" Shady DOM styles for "+a+" "),e=document.head;e.insertBefore(d,(T?T.nextSibling:null)||e.firstChild);T=d;dg[a]=d;return fg.call(eg,a,b,c)}};function gg(){this.cache={}}gg.prototype.store=function(a,b,c,d){var e=this.cache[a]||[];e.push({v:b,styleElement:c,u:d});100<e.length&&e.shift();this.cache[a]=e};gg.prototype.fetch=function(a,b,c){if(a=this.cache[a])for(var d=a.length-1;0<=d;d--){var e=a[d],f;a:{for(f=0;f<c.length;f++){var h=c[f];if(e.v[h]!==b[h]){f=!1;break a}}f=!0}if(f)return e}};function hg(){}
function ig(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.target!==document.documentElement&&c.target!==document.head)for(var d=0;d<c.addedNodes.length;d++){var e=c.addedNodes[d];if(e.nodeType===Node.ELEMENT_NODE){var f=e.getRootNode();var h=e;var g=[];h.classList?g=Array.from(h.classList):h instanceof window.SVGElement&&h.hasAttribute("class")&&(g=h.getAttribute("class").split(/\s+/));h=g;g=h.indexOf(V.a);if((h=-1<g?h[g+1]:"")&&f===e.ownerDocument)jf(e,h,!0);else if(f.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&
(f=f.host))if(f=U(f).is,h===f)for(e=window.ShadyDOM.nativeMethods.querySelectorAll.call(e,":not(."+V.a+")"),f=0;f<e.length;f++)lf(e[f],h);else h&&jf(e,h,!0),jf(e,f)}}}}
if(!Q){var jg=new MutationObserver(ig),kg=function(a){jg.observe(a,{childList:!0,subtree:!0})};if(window.customElements&&!window.customElements.polyfillWrapFlushCallback)kg(document);else{var lg=function(){kg(document.body)};window.HTMLImports?window.HTMLImports.whenReady(lg):requestAnimationFrame(function(){if("loading"===document.readyState){var a=function(){lg();document.removeEventListener("readystatechange",a)};document.addEventListener("readystatechange",a)}else lg()})}hg=function(){ig(jg.takeRecords())}}
var mg=hg;var ng={};var og=Promise.resolve();function pg(a){if(a=ng[a])a._applyShimCurrentVersion=a._applyShimCurrentVersion||0,a._applyShimValidatingVersion=a._applyShimValidatingVersion||0,a._applyShimNextVersion=(a._applyShimNextVersion||0)+1}function qg(a){return a._applyShimCurrentVersion===a._applyShimNextVersion}function rg(a){a._applyShimValidatingVersion=a._applyShimNextVersion;a.qa||(a.qa=!0,og.then(function(){a._applyShimCurrentVersion=a._applyShimNextVersion;a.qa=!1}))};var sg=null,tg=window.HTMLImports&&window.HTMLImports.whenReady||null,ug;function vg(a){requestAnimationFrame(function(){tg?tg(a):(sg||(sg=new Promise(function(a){ug=a}),"complete"===document.readyState?ug():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&ug()})),sg.then(function(){a&&a()}))})};var wg=new gg;function X(){var a=this;this.L={};this.c=document.documentElement;var b=new xe;b.rules=[];this.h=Mf(this.c,new Lf(b));this.s=!1;this.b=this.a=null;vg(function(){xg(a)})}p=X.prototype;p.wa=function(){mg()};p.Ma=function(a){return bf(a)};p.Za=function(a){return $e(a)};
p.prepareTemplate=function(a,b,c){if(!a.Ia){a.Ia=!0;a.name=b;a.extends=c;ng[b]=a;var d=(d=a.content.querySelector("style"))?d.getAttribute("css-build")||"":"";var e=[];for(var f=a.content.querySelectorAll("style"),h=0;h<f.length;h++){var g=f[h];if(g.hasAttribute("shady-unscoped")){if(!Q){var k=g.textContent;Ze.has(k)||(Ze.add(k),k=g.cloneNode(!0),document.head.appendChild(k));g.parentNode.removeChild(g)}}else e.push(g.textContent),g.parentNode.removeChild(g)}e=e.join("").trim();c={is:b,extends:c,
eb:d};Q||jf(a.content,b);xg(this);f=Ue.test(e)||Te.test(e);Ue.lastIndex=0;Te.lastIndex=0;e=ye(e);f&&S&&this.a&&this.a.transformRules(e,b);a._styleAst=e;a.a=d;d=[];S||(d=Rf(a._styleAst));if(!d.length||S)e=Q?a.content:null,b=dg[b],f=nf(c,a._styleAst),b=f.length?df(f,c.is,e,b):void 0,a.pa=b;a.Ha=d}};
function yg(a){!a.b&&window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface&&(a.b=window.ShadyCSS.CustomStyleInterface,a.b.transformCallback=function(b){a.ua(b)},a.b.validateCallback=function(){requestAnimationFrame(function(){(a.b.enqueued||a.s)&&a.F()})})}function xg(a){!a.a&&window.ShadyCSS&&window.ShadyCSS.ApplyShim&&(a.a=window.ShadyCSS.ApplyShim,a.a.invalidCallback=pg);yg(a)}
p.F=function(){xg(this);if(this.b){var a=this.b.processStyles();if(this.b.enqueued){if(S)for(var b=0;b<a.length;b++){var c=this.b.getStyleForCustomStyle(a[b]);if(c&&S&&this.a){var d=bf(c);xg(this);this.a.transformRules(d);c.textContent=$e(d)}}else for(zg(this,this.c,this.h),b=0;b<a.length;b++)(c=this.b.getStyleForCustomStyle(a[b]))&&bg(c,this.h.B);this.b.enqueued=!1;this.s&&!S&&this.styleDocument()}}};
p.styleElement=function(a,b){var c=U(a).is,d=W(a);if(!d){var e=U(a);d=e.is;e=e.P;var f=dg[d];d=ng[d];if(d){var h=d._styleAst;var g=d.Ha}d=Mf(a,new Lf(h,f,g,e))}a!==this.c&&(this.s=!0);b&&(d.G=d.G||{},Object.assign(d.G,b));if(S){if(d.G){b=d.G;for(var k in b)null===k?a.style.removeProperty(k):a.style.setProperty(k,b[k])}if(((k=ng[c])||a===this.c)&&k&&k.pa&&!qg(k)){if(qg(k)||k._applyShimValidatingVersion!==k._applyShimNextVersion)xg(this),this.a&&this.a.transformRules(k._styleAst,c),k.pa.textContent=
nf(a,d.w),rg(k);Q&&(c=a.shadowRoot)&&(c.querySelector("style").textContent=nf(a,d.w));d.w=k._styleAst}}else if(zg(this,a,d),d.ja&&d.ja.length){c=d;k=U(a).is;d=(b=wg.fetch(k,c.B,c.ja))?b.styleElement:null;h=c.u;(g=b&&b.u)||(g=this.L[k]=(this.L[k]||0)+1,g=k+"-"+g);c.u=g;g=c.u;e=cg;e=d?d.textContent||"":Zf(e,a,c.B,g);f=W(a);var l=f.a;l&&!Q&&l!==d&&(l._useCount--,0>=l._useCount&&l.parentNode&&l.parentNode.removeChild(l));Q?f.a?(f.a.textContent=e,d=f.a):e&&(d=df(e,g,a.shadowRoot,f.b)):d?d.parentNode||
(Pf&&-1<e.indexOf("@media")&&(d.textContent=e),ef(d,null,f.b)):e&&(d=df(e,g,null,f.b));d&&(d._useCount=d._useCount||0,f.a!=d&&d._useCount++,f.a=d);g=d;Q||(d=c.u,f=e=a.getAttribute("class")||"",h&&(f=e.replace(new RegExp("\\s*x-scope\\s*"+h+"\\s*","g")," ")),f+=(f?" ":"")+"x-scope "+d,e!==f&&gf(a,f));b||wg.store(k,c.B,g,c.u)}};function Ag(a,b){return(b=b.getRootNode().host)?W(b)?b:Ag(a,b):a.c}
function zg(a,b,c){a=Ag(a,b);var d=W(a);a=Object.create(d.B||null);var e=Yf(b,c.w);b=Wf(d.w,b).v;Object.assign(a,e.Oa,b,e.Wa);b=c.G;for(var f in b)if((e=b[f])||0===e)a[f]=e;f=cg;b=Object.getOwnPropertyNames(a);for(e=0;e<b.length;e++)d=b[e],a[d]=Uf(f,a[d],a);c.B=a}p.styleDocument=function(a){this.styleSubtree(this.c,a)};
p.styleSubtree=function(a,b){var c=a.shadowRoot;(c||a===this.c)&&this.styleElement(a,b);if(b=c&&(c.children||c.childNodes))for(a=0;a<b.length;a++)this.styleSubtree(b[a]);else if(a=a.children||a.childNodes)for(b=0;b<a.length;b++)this.styleSubtree(a[b])};p.ua=function(a){var b=this,c=bf(a);af(c,function(a){if(Q)If(a);else{var c=V;a.selector=a.parsedSelector;If(a);a.selector=a.m=rf(c,a,c.c,void 0,void 0)}S&&(xg(b),b.a&&b.a.transformRule(a))});S?a.textContent=$e(c):this.h.w.rules.push(c)};
p.getComputedStyleValue=function(a,b){var c;S||(c=(W(a)||W(Ag(this,a))).B[b]);return(c=c||window.getComputedStyle(a).getPropertyValue(b))?c.trim():""};p.Ya=function(a,b){var c=a.getRootNode();b=b?b.split(/\s/):[];c=c.host&&c.host.localName;if(!c){var d=a.getAttribute("class");if(d){d=d.split(/\s/);for(var e=0;e<d.length;e++)if(d[e]===V.a){c=d[e+1];break}}}c&&b.push(V.a,c);S||(c=W(a))&&c.u&&b.push(cg.a,c.u);gf(a,b.join(" "))};p.Ja=function(a){return W(a)};X.prototype.flush=X.prototype.wa;
X.prototype.prepareTemplate=X.prototype.prepareTemplate;X.prototype.styleElement=X.prototype.styleElement;X.prototype.styleDocument=X.prototype.styleDocument;X.prototype.styleSubtree=X.prototype.styleSubtree;X.prototype.getComputedStyleValue=X.prototype.getComputedStyleValue;X.prototype.setElementClass=X.prototype.Ya;X.prototype._styleInfoForNode=X.prototype.Ja;X.prototype.transformCustomStyleForDocument=X.prototype.ua;X.prototype.getStyleAst=X.prototype.Ma;X.prototype.styleAstToString=X.prototype.Za;
X.prototype.flushCustomStyles=X.prototype.F;Object.defineProperties(X.prototype,{nativeShadow:{get:function(){return Q}},nativeCss:{get:function(){return S}}});var Y=new X,Bg,Cg;window.ShadyCSS&&(Bg=window.ShadyCSS.ApplyShim,Cg=window.ShadyCSS.CustomStyleInterface);window.ShadyCSS={ScopingShim:Y,prepareTemplate:function(a,b,c){Y.F();Y.prepareTemplate(a,b,c)},styleSubtree:function(a,b){Y.F();Y.styleSubtree(a,b)},styleElement:function(a){Y.F();Y.styleElement(a)},styleDocument:function(a){Y.F();Y.styleDocument(a)},getComputedStyleValue:function(a,b){return Y.getComputedStyleValue(a,b)},nativeCss:S,nativeShadow:Q};Bg&&(window.ShadyCSS.ApplyShim=Bg);
Cg&&(window.ShadyCSS.CustomStyleInterface=Cg);var Dg=window.customElements,Eg=window.HTMLImports,Fg=window.HTMLTemplateElement;window.WebComponents=window.WebComponents||{};if(Dg&&Dg.polyfillWrapFlushCallback){var Gg,Hg=function(){if(Gg){Fg.J&&Fg.J(window.document);var a=Gg;Gg=null;a();return!0}},Ig=Eg.whenReady;Dg.polyfillWrapFlushCallback(function(a){Gg=a;Ig(Hg)});Eg.whenReady=function(a){Ig(function(){Hg()?Eg.whenReady(a):a()})}}
Eg.whenReady(function(){requestAnimationFrame(function(){window.WebComponents.ready=!0;document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})});var Jg=document.createElement("style");Jg.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var Kg=document.querySelector("head");Kg.insertBefore(Jg,Kg.firstChild);}).call(this);

//# sourceMappingURL=webcomponents-lite.js.map
</script></head><body><div hidden="" by-polymer-bundler=""><script>(function(){"use strict";function c(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function b(j){j=j.replace(v,"").replace(L,"");var a=j,b=new c;b.start=0,b.end=a.length;for(var d=b,e=0,f=a.length;e<f;e++)if("{"===a[e]){d.rules||(d.rules=[]);var h=d,g=h.rules[h.rules.length-1]||null;d=new c,d.start=e+1,d.parent=h,d.previous=g,h.rules.push(d)}else"}"===a[e]&&(d.end=e+1,d=d.parent||b);return i(b,j)}function i(h,a){var c=a.substring(h.start,h.end-1);if(h.parsedCssText=h.cssText=c.trim(),h.parent&&(c=a.substring(h.previous?h.previous.end:h.parent.start,h.start-1),c=g(c),c=c.replace(V," "),c=c.substring(c.lastIndexOf(";")+1),c=h.parsedSelector=h.selector=c.trim(),h.atRule=0===c.indexOf("@"),h.atRule?0===c.indexOf("@media")?h.type=u:c.match(U)&&(h.type=x,h.keyframesName=h.selector.split(V).pop()):h.type=0===c.indexOf("--")?t:k),c=h.rules)for(var b,f=0,d=c.length;f<d&&(b=c[f]);f++)i(b,a);return h}function g(b){return b.replace(/\\([0-9a-f]{1,6})\s/gi,function(c,a){for(c=a,a=6-c.length;a--;)c="0"+c;return"\\"+c})}function j(i,a,c){c=void 0===c?"":c;var b="";if(i.cssText||i.rules){var d,f=i.rules;if((d=f)&&(d=f[0],d=!(d&&d.selector&&0===d.selector.indexOf("--"))),d){d=0;for(var e,g=f.length;d<g&&(e=f[d]);d++)b=j(e,a,b)}else a?a=i.cssText:(a=i.cssText,a=a.replace(M,"").replace(O,""),a=a.replace(P,"").replace(Q,"")),(b=a.trim())&&(b="  "+b+"\n")}return b&&(i.selector&&(c+=i.selector+" {\n"),c+=b,i.selector&&(c+="}\n\n")),c}function d(b){(b=B[b])&&(b._applyShimCurrentVersion=b._applyShimCurrentVersion||0,b._applyShimValidatingVersion=b._applyShimValidatingVersion||0,b._applyShimNextVersion=(b._applyShimNextVersion||0)+1)}function e(b){return b._applyShimCurrentVersion===b._applyShimNextVersion}function f(b){b._applyShimValidatingVersion=b._applyShimNextVersion,b.b||(b.b=!0,r.then(function(){b._applyShimCurrentVersion=b._applyShimNextVersion,b.b=!1}))}function a(b){K=b&&b.shimcssproperties?!1:W||!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")}function h(c){return c?("string"===typeof c&&(c=b(c)),j(c,Y)):""}function l(c){return!c.__cssRules&&c.textContent&&(c.__cssRules=b(c.textContent)),c.__cssRules||null}function m(i,a,c,b){if(i){var d=!1,j=i.type;if(b&&j===u){var f=i.selector.match(G);f&&(window.matchMedia(f[1]).matches||(d=!0))}if(j===k?a(i):c&&j===x?c(i):j===t&&(d=!0),(i=i.rules)&&!d){d=0,j=i.length;for(var h;d<j&&(h=i[d]);d++)m(h,a,c,b)}}}function n(g,a){var c=g.indexOf("var(");if(-1===c)return a(g,"","","");a:{for(var b=0,d=c+3,e=g.length;d<e;d++)if("("===g[d])b++;else if(")"===g[d]&&0===--b)break a;d=-1}return b=g.substring(c+4,d),c=g.substring(0,c),g=n(g.substring(d+1),a),d=b.indexOf(","),-1===d?a(c,b.trim(),"",g):a(c,b.substring(0,d).trim(),b.substring(d+1).trim(),g)}function o(){this.a={}}function p(){this.b=this.c=null,this.a=new o}function q(d,a){return a=a.replace(Z,function(a,b,c,e){return w(d,a,b,c,e)}),s(d,a)}function s(i,a){for(var c;c=F.exec(a);){var b=c[0],d=c[1];c=c.index;var e=a.slice(0,c+b.indexOf("@apply"));a=a.slice(c+b.length);var f=y(i,e);b=void 0;var h=i;d=d.replace(H,"");var g=[],j=h.a.get(d);if(j||(h.a.set(d,{}),j=h.a.get(d)),j)for(b in h.c&&(j.i[h.c]=!0),j.h)h=f&&f[b],j=[b,": var(",d,"_-_",b],h&&j.push(",",h),j.push(")"),g.push(j.join(""));b=g.join("; "),a=""+e+b+a,F.lastIndex=c+b.length}return a}function y(i,a){a=a.split(";");for(var c,b,d,h={},e=0;e<a.length;e++)if((c=a[e])&&(d=c.split(":"),1<d.length)){c=d[0].trim();var f=i;b=c,d=d.slice(1).join(":");var g=_.exec(d);g&&(g[1]?(f.b||(f.b=document.createElement("meta"),f.b.setAttribute("apply-shim-measure",""),f.b.style.all="initial",document.head.appendChild(f.b)),b=window.getComputedStyle(f.b).getPropertyValue(b)):b="apply-shim-inherit",d=b),b=d,h[c]=b}return h}function z(d,a){if(aa)for(var c in a.i)c!==d.c&&aa(c)}function w(i,a,c,b,d){if(b&&n(b,function(a,c){c&&i.a.get(c)&&(d="@apply "+c+";")}),!d)return a;var j=s(i,d),f=a.slice(0,a.indexOf("--")),h=j=y(i,j),g=i.a.get(c),k=g&&g.h;k?h=Object.assign(Object.create(k),j):i.a.set(c,h);var m,o=[],p=!1;for(m in h){var q=j[m];void 0===q&&(q="initial"),!k||m in k||(p=!0),o.push(""+c+"_-_"+m+": "+q)}return p&&z(i,g),g&&(g.h=h),b&&(f=a+";"+f),""+f+o.join("; ")+";"}function C(b){requestAnimationFrame(function(){R?R(b):(S||(S=new Promise(function(b){N=b}),"complete"===document.readyState?N():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&N()})),S.then(function(){b&&b()}))})}function E(){var b=this;this.a=null,C(function(){I(b)}),ba.invalidCallback=d}function I(b){b.a||(b.a=window.ShadyCSS.CustomStyleInterface,b.a&&(b.a.transformCallback=function(b){ba.f(b)},b.a.validateCallback=function(){requestAnimationFrame(function(){b.a.enqueued&&J(b)})}))}function J(e){if(I(e),e.a){var a=e.a.processStyles();if(e.a.enqueued){for(var c,d=0;d<a.length;d++)c=e.a.getStyleForCustomStyle(a[d]),c&&ba.f(c);e.a.enqueued=!1}}}var K,B={},k=1,x=7,u=4,t=1E3,v=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,L=/@import[^;]*;/gim,M=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,O=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,P=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,Q=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,U=/^@[^\s]*keyframes/,V=/\s+/g,r=Promise.resolve(),W=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?K=window.ShadyCSS.nativeCss:window.ShadyCSS?(a(window.ShadyCSS),window.ShadyCSS=void 0):a(window.WebComponents&&window.WebComponents.flags);var Y=K,Z=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,F=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,G=/@media\s(.*)/,$=new Set,H=/;\s*/m,_=/^\s*(initial)|(inherit)\s*$/;o.prototype.set=function(b,a){b=b.trim(),this.a[b]={h:a,i:{}}},o.prototype.get=function(b){return b=b.trim(),this.a[b]||null};var aa=null;p.prototype.o=function(b){return b=F.test(b)||Z.test(b),F.lastIndex=0,Z.lastIndex=0,b},p.prototype.m=function(g,a){if(void 0===g.a){for(var c,f=[],b=g.content.querySelectorAll("style"),d=0;d<b.length;d++)if(c=b[d],!c.hasAttribute("shady-unscoped"))f.push(c.textContent),c.parentNode.removeChild(c);else if(!W){var e=c.textContent;$.has(e)||($.add(e),e=c.cloneNode(!0),document.head.appendChild(e)),c.parentNode.removeChild(c)}(f=f.join("").trim())?(b=document.createElement("style"),b.textContent=f,g.content.insertBefore(b,g.content.firstChild),f=b):f=null,g.a=f}return(g=g.a)?this.j(g,a):null},p.prototype.j=function(d,a){a=void 0===a?"":a;var c=l(d);return this.l(c,a),d.textContent=h(c),c},p.prototype.f=function(d){var e=this,a=l(d);return m(a,function(b){":root"===b.selector&&(b.selector="html"),e.g(b)}),d.textContent=h(a),a},p.prototype.l=function(d,a){var c=this;this.c=a,m(d,function(b){c.g(b)}),this.c=null},p.prototype.g=function(b){b.cssText=q(this,b.parsedCssText),":root"===b.selector&&(b.selector=":host > *")},p.prototype.detectMixin=p.prototype.o,p.prototype.transformStyle=p.prototype.j,p.prototype.transformCustomStyle=p.prototype.f,p.prototype.transformRules=p.prototype.l,p.prototype.transformRule=p.prototype.g,p.prototype.transformTemplate=p.prototype.m,p.prototype._separator="_-_",Object.defineProperty(p.prototype,"invalidCallback",{get:function(){return aa},set:function(b){aa=b}});var N,S=null,R=window.HTMLImports&&window.HTMLImports.whenReady||null,ba=new p;if(E.prototype.prepareTemplate=function(b,a){I(this),B[a]=b,a=ba.m(b,a),b._styleAst=a},E.prototype.styleSubtree=function(d,a){if(I(this),a)for(var c in a)null===c?d.style.removeProperty(c):d.style.setProperty(c,a[c]);if(d.shadowRoot)for(this.styleElement(d),d=d.shadowRoot.children||d.shadowRoot.childNodes,a=0;a<d.length;a++)this.styleSubtree(d[a]);else for(d=d.children||d.childNodes,a=0;a<d.length;a++)this.styleSubtree(d[a])},E.prototype.styleElement=function(d){I(this);var a,b=d.localName;a=b?-1<b.indexOf("-")?b:d.getAttribute&&d.getAttribute("is")||"":d.is,(b=B[a])&&!e(b)&&((e(b)||b._applyShimValidatingVersion!==b._applyShimNextVersion)&&(this.prepareTemplate(b,a),f(b)),(d=d.shadowRoot)&&(d=d.querySelector("style"))&&(d.__cssRules=b._styleAst,d.textContent=h(b._styleAst)))},E.prototype.styleDocument=function(b){I(this),this.styleSubtree(document.body,b)},!window.ShadyCSS||!window.ShadyCSS.ScopingShim){var T=new E,X=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate:function(b,a){J(T),T.prepareTemplate(b,a)},styleSubtree:function(b,a){J(T),T.styleSubtree(b,a)},styleElement:function(b){J(T),T.styleElement(b)},styleDocument:function(b){J(T),T.styleDocument(b)},getComputedStyleValue:function(b,a){return(b=window.getComputedStyle(b).getPropertyValue(a))?b.trim():""},nativeCss:Y,nativeShadow:W},X&&(window.ShadyCSS.CustomStyleInterface=X)}window.ShadyCSS.ApplyShim=ba}).call(this);</script><script>(function(){'use strict';const a=window.Polymer;window.Polymer=function(a){return window.Polymer._polymerFn(a)},a&&Object.assign(Polymer,a),window.Polymer._polymerFn=function(){throw new Error('Load polymer.html to use the Polymer() function.')},window.Polymer.version='2.3.1',window.JSCompiler_renameProperty=function(a){return a}})();</script><script>(function(){'use strict';function a(a,d){if(a&&e.test(a))return a;if(void 0===b){b=!1;try{const a=new URL('b','http://a');a.pathname='c%20d',b='http://a/c%20d'===a.href}catch(a){}}return(d||(d=document.baseURI||window.location.href),b)?new URL(a,d).href:(c||(c=document.implementation.createHTMLDocument('temp'),c.base=c.createElement('base'),c.head.appendChild(c.base),c.anchor=c.createElement('a'),c.body.appendChild(c.anchor)),c.base.href=d,c.anchor.href=a,c.anchor.href||a)}let b,c,d=/(url\()([^)]*)(\))/g,e=/(^\/)|(^#)|(^[\w-\d]*:)/;Polymer.ResolveUrl={resolveCss:function(b,c){return b.replace(d,function(b,d,e,f){return d+'\''+a(e.replace(/["']/g,''),c)+'\''+f})},resolveUrl:a,pathFromUrl:function(a){return a.substring(0,a.lastIndexOf('/')+1)}}})();</script><script>(function(){'use strict';const a=Polymer.Settings||{};a.useShadow=!window.ShadyDOM,a.useNativeCSSProperties=!(window.ShadyCSS&&!window.ShadyCSS.nativeCss),a.useNativeCustomElements=!window.customElements.polyfillWrapFlushCallback,Polymer.Settings=a;let b=Polymer.rootPath||Polymer.ResolveUrl.pathFromUrl(document.baseURI||window.location.href);Polymer.rootPath=b,Polymer.setRootPath=function(a){Polymer.rootPath=a};let c=Polymer.sanitizeDOMValue;Polymer.sanitizeDOMValue=c,Polymer.setSanitizeDOMValue=function(a){Polymer.sanitizeDOMValue=a};Polymer.passiveTouchGestures=!1,Polymer.setPassiveTouchGestures=function(a){Polymer.passiveTouchGestures=a}})();</script><script>(function(){'use strict';function a(){}let b=0;a.prototype.__mixinApplications,a.prototype.__mixinSet,Polymer.dedupingMixin=function(a){let c=a.__mixinApplications;c||(c=new WeakMap,a.__mixinApplications=c);let d=b++;return function(b){let e=b.__mixinSet;if(e&&e[d])return b;let f=c,g=f.get(b);g||(g=a(b),f.set(b,g));let h=Object.create(g.__mixinSet||e||null);return h[d]=!0,g.__mixinSet=h,g}}})();</script><script>(function(){'use strict';const a={},b=/-[a-z]/g,c=/([A-Z])/g,d={dashToCamelCase(c){return a[c]||(a[c]=0>c.indexOf('-')?c:c.replace(b,(a)=>a[1].toUpperCase()))},camelToDashCase(b){return a[b]||(a[b]=b.replace(c,'-$1').toLowerCase())}};Polymer.CaseMap=d})();</script><script>(function(){'use strict';function a(a){const b=customElements.get('dom-module');return b?b.import(a):null}function b(a){let b=a.body?a.body:a;const c=Polymer.ResolveUrl.resolveCss(b.textContent,a.baseURI),d=document.createElement('style');return d.textContent=c,d}const c='shady-unscoped';const d={stylesFromModules(a){const b=a.trim().split(/\s+/),c=[];for(let d=0;d<b.length;d++)c.push(...this.stylesFromModule(b[d]));return c},stylesFromModule(b){const c=a(b);if(c&&void 0===c._styles){const a=[...this._stylesFromModuleImports(c)],b=c.querySelector('template');b&&a.push(...this.stylesFromTemplate(b,c.assetpath)),c._styles=a}return c||console.warn('Could not find style data in module named',b),c?c._styles:[]},stylesFromTemplate(a,b){if(!a._styles){const c=[],d=a.content.querySelectorAll('style');for(let a=0;a<d.length;a++){let f=d[a],e=f.getAttribute('include');e&&c.push(...this.stylesFromModules(e)),b&&(f.textContent=Polymer.ResolveUrl.resolveCss(f.textContent,b)),c.push(f)}a._styles=c}return a._styles},stylesFromModuleImports(b){let c=a(b);return c?this._stylesFromModuleImports(c):[]},_stylesFromModuleImports(a){const d=[],e=a.querySelectorAll('link[rel=import][type~=css]');for(let f,g=0;g<e.length;g++)if(f=e[g],f.import){const a=f.import,e=f.hasAttribute(c);if(e&&!a._unscopedStyle){const d=b(a);d.setAttribute(c,''),a._unscopedStyle=d}else a._style||(a._style=b(a));d.push(e?a._unscopedStyle:a._style)}return d},cssFromModules(a){let b=a.trim().split(/\s+/),c='';for(let d=0;d<b.length;d++)c+=this.cssFromModule(b[d]);return c},cssFromModule(b){let c=a(b);if(c&&void 0===c._cssText){let a=this._cssFromModuleImports(c),b=c.querySelector('template');b&&(a+=this.cssFromTemplate(b,c.assetpath)),c._cssText=a||null}return c||console.warn('Could not find style data in module named',b),c&&c._cssText||''},cssFromTemplate(a,b){let c='';const d=this.stylesFromTemplate(a,b);for(let f,e=0;e<d.length;e++)f=d[e],f.parentNode&&f.parentNode.removeChild(f),c+=f.textContent;return c},cssFromModuleImports(b){let c=a(b);return c?this._cssFromModuleImports(c):''},_cssFromModuleImports(a){let b='',c=this._stylesFromModuleImports(a);for(let d=0;d<c.length;d++)b+=c[d].textContent;return b}};Polymer.StyleGather=d})();</script><script>(function(){'use strict';function a(a){return c[a]||d[a.toLowerCase()]}function b(a){a.querySelector('style')&&console.warn('dom-module %s has style outside template',a.id)}let c={},d={};class e extends HTMLElement{static get observedAttributes(){return['id']}static import(b,c){if(b){let d=a(b);return d&&c?d.querySelector(c):d}return null}attributeChangedCallback(a,b,c){b!==c&&this.register()}get assetpath(){if(!this.__assetpath){const a=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,b=Polymer.ResolveUrl.resolveUrl(this.getAttribute('assetpath')||'',a.baseURI);this.__assetpath=Polymer.ResolveUrl.pathFromUrl(b)}return this.__assetpath}register(a){a=a||this.id,a&&(this.id=a,c[a]=this,d[a.toLowerCase()]=this,b(this))}}e.prototype.modules=c,customElements.define('dom-module',e),Polymer.DomModule=e})();</script><script>(function(){'use strict';const a={isPath:function(a){return 0<=a.indexOf('.')},root:function(a){let b=a.indexOf('.');return-1===b?a:a.slice(0,b)},isAncestor:function(a,b){return 0===a.indexOf(b+'.')},isDescendant:function(a,b){return 0===b.indexOf(a+'.')},translate:function(a,b,c){return b+c.slice(a.length)},matches:function(a,b){return a===b||this.isAncestor(a,b)||this.isDescendant(a,b)},normalize:function(a){if(Array.isArray(a)){let b=[];for(let c,d=0;d<a.length;d++){c=a[d].toString().split('.');for(let a=0;a<c.length;a++)b.push(c[a])}return b.join('.')}return a},split:function(a){return Array.isArray(a)?this.normalize(a).split('.'):a.toString().split('.')},get:function(a,b,c){let d=a,e=this.split(b);for(let f=0;f<e.length;f++){if(!d)return;let a=e[f];d=d[a]}return c&&(c.path=e.join('.')),d},set:function(a,b,c){let d=a,e=this.split(b),f=e[e.length-1];if(1<e.length){for(let a,b=0;b<e.length-1;b++)if(a=e[b],d=d[a],!d)return;d[f]=c}else d[b]=c;return e.join('.')}};a.isDeep=a.isPath,Polymer.Path=a})();</script><script>(function(){'use strict';let a=0,b=0,c=[],d=0,e=document.createTextNode('');new window.MutationObserver(function(){const a=c.length;for(let b,d=0;d<a;d++)if(b=c[d],b)try{b()}catch(a){setTimeout(()=>{throw a})}c.splice(0,a),b+=a}).observe(e,{characterData:!0}),Polymer.Async={timeOut:{after(a){return{run(b){return setTimeout(b,a)},cancel:window.clearTimeout.bind(window)}},run:window.setTimeout.bind(window),cancel:window.clearTimeout.bind(window)},animationFrame:{run:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)},idlePeriod:{run(a){return window.requestIdleCallback?window.requestIdleCallback(a):window.setTimeout(a,16)},cancel(a){window.cancelIdleCallback?window.cancelIdleCallback(a):window.clearTimeout(a)}},microTask:{run(b){return e.textContent=d++,c.push(b),a++},cancel(a){const d=a-b;if(0<=d){if(!c[d])throw new Error('invalid async handle: '+a);c[d]=null}}}}})();</script><script>(function(){'use strict';function a(a,b){if(!d[b]){let c=a[b];c!==void 0&&(a.__data?a._setPendingProperty(b,c):(a.__dataProto?!a.hasOwnProperty(JSCompiler_renameProperty('__dataProto',a))&&(a.__dataProto=Object.create(a.__dataProto)):a.__dataProto={},a.__dataProto[b]=c))}}let b=Polymer.CaseMap,c=Polymer.Async.microTask;const d={};for(let a=HTMLElement.prototype;a;){let b=Object.getOwnPropertyNames(a);for(let a=0;a<b.length;a++)d[b[a]]=!0;a=Object.getPrototypeOf(a)}Polymer.PropertyAccessors=Polymer.dedupingMixin((d)=>{return class extends d{static createPropertiesForAttributes(){let a=this.observedAttributes;for(let c=0;c<a.length;c++)this.prototype._createPropertyAccessor(b.dashToCamelCase(a[c]))}constructor(){super(),this.__serializing,this.__dataCounter,this.__dataEnabled,this.__dataReady,this.__dataInvalid,this.__data,this.__dataPending,this.__dataOld,this.__dataProto,this.__dataHasAccessor,this.__dataInstanceProps,this._initializeProperties()}attributeChangedCallback(a,b,c){b!==c&&this._attributeToProperty(a,c)}_initializeProperties(){for(let a in this.__serializing=!1,this.__dataCounter=0,this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),this.__dataHasAccessor)this.hasOwnProperty(a)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[a]=this[a],delete this[a])}_initializeProtoProperties(a){for(let b in a)this._setProperty(b,a[b])}_initializeInstanceProperties(a){Object.assign(this,a)}_ensureAttribute(a,b){this.hasAttribute(a)||this._valueToNodeAttribute(this,b,a)}_attributeToProperty(a,c,d){if(!this.__serializing){let e=b.dashToCamelCase(a);this[e]=this._deserializeValue(c,d)}}_propertyToAttribute(a,c,d){this.__serializing=!0,d=3>arguments.length?this[a]:d,this._valueToNodeAttribute(this,d,c||b.camelToDashCase(a)),this.__serializing=!1}_valueToNodeAttribute(a,b,c){let d=this._serializeValue(b);d===void 0?a.removeAttribute(c):a.setAttribute(c,d)}_serializeValue(a){switch(typeof a){case'boolean':return a?'':void 0;case'object':if(a instanceof Date)return a.toString();if(a)try{return JSON.stringify(a)}catch(a){return''}default:return null==a?void 0:a.toString();}}_deserializeValue(a,b){let c;switch(b){case Number:c=+a;break;case Boolean:c=null!==a;break;case Object:try{c=JSON.parse(a)}catch(a){}break;case Array:try{c=JSON.parse(a)}catch(b){c=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${a}`)}break;case Date:a=isNaN(a)?a+'':+a,c=new Date(a);break;case String:default:c=a;}return c}_createPropertyAccessor(b,c){this.hasOwnProperty('__dataHasAccessor')||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[b]||(this.__dataHasAccessor[b]=!0,a(this,b),Object.defineProperty(this,b,{get:function(){return this.__data[b]},set:c?function(){}:function(a){this._setProperty(b,a)}}))}_hasAccessor(a){return this.__dataHasAccessor&&this.__dataHasAccessor[a]}_setProperty(a,b){this._setPendingProperty(a,b)&&this._invalidateProperties()}_setPendingProperty(a,b){let c=this.__data[a],d=this._shouldPropertyChange(a,b,c);return d&&(!this.__dataPending&&(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(a in this.__dataOld)&&(this.__dataOld[a]=c),this.__data[a]=b,this.__dataPending[a]=b),d}_isPropertyPending(a){return!!(this.__dataPending&&a in this.__dataPending)}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,c.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){if(this.__dataPending&&this.__dataOld){let a=this.__dataPending;this.__dataPending=null,this.__dataCounter++,this._propertiesChanged(this.__data,a,this.__dataOld),this.__dataCounter--}}ready(){this.__dataReady=!0,this._flushProperties()}_propertiesChanged(){}_shouldPropertyChange(a,b,c){return c!==b&&(c===c||b===b)}}})})();</script><script>(function(){'use strict';function a(a){let b=a.getAttribute('is');if(b&&g[b]){let c=a;for(c.removeAttribute('is'),a=c.ownerDocument.createElement(b),c.parentNode.replaceChild(a,c),a.appendChild(c);c.attributes.length;)a.setAttribute(c.attributes[0].name,c.attributes[0].value),c.removeAttribute(c.attributes[0].name)}return a}function b(a,c){let d=c.parentInfo&&b(a,c.parentInfo);if(d){for(let a=d.firstChild,b=0;a;a=a.nextSibling)if(c.parentIndex===b++)return a;}else return a}function c(a,b,c,d){d.id&&(b[d.id]=c)}function d(a,b,c){if(c.events&&c.events.length)for(let d,e=0,f=c.events;e<f.length&&(d=f[e]);e++)a._addMethodEventListenerToNode(b,d.name,d.value,a)}function e(a,b,c){c.templateInfo&&(b._templateInfo=c.templateInfo)}function f(a,b,c){a=a._methodHost||a;return function(b){a[c]?a[c](b,b.detail):console.warn('listener method `'+c+'` not defined')}}const g={"dom-if":!0,"dom-repeat":!0};Polymer.TemplateStamp=Polymer.dedupingMixin((g)=>{return class extends g{static _parseTemplate(a,b){if(!a._templateInfo){let c=a._templateInfo={};c.nodeInfoList=[],c.stripWhiteSpace=b&&b.stripWhiteSpace||a.hasAttribute('strip-whitespace'),this._parseTemplateContent(a,c,{parent:null})}return a._templateInfo}static _parseTemplateContent(a,b,c){return this._parseTemplateNode(a.content,b,c)}static _parseTemplateNode(a,b,c){let d,e=a;return'template'!=e.localName||e.hasAttribute('preserve-content')?'slot'===e.localName&&(b.hasInsertionPoint=!0):d=this._parseTemplateNestedTemplate(e,b,c)||d,e.firstChild&&(d=this._parseTemplateChildNodes(e,b,c)||d),e.hasAttributes&&e.hasAttributes()&&(d=this._parseTemplateNodeAttributes(e,b,c)||d),d}static _parseTemplateChildNodes(b,c,d){if('script'!==b.localName&&'style'!==b.localName)for(let e,f=b.firstChild,g=0;f;f=e){if('template'==f.localName&&(f=a(f)),e=f.nextSibling,f.nodeType===Node.TEXT_NODE){for(let a=e;a&&a.nodeType===Node.TEXT_NODE;)f.textContent+=a.textContent,e=a.nextSibling,b.removeChild(a),a=e;if(c.stripWhiteSpace&&!f.textContent.trim()){b.removeChild(f);continue}}let h={parentIndex:g,parentInfo:d};this._parseTemplateNode(f,c,h)&&(h.infoIndex=c.nodeInfoList.push(h)-1),f.parentNode&&g++}}static _parseTemplateNestedTemplate(a,b,c){let d=this._parseTemplate(a,b),e=d.content=a.content.ownerDocument.createDocumentFragment();return e.appendChild(a.content),c.templateInfo=d,!0}static _parseTemplateNodeAttributes(b,c,d){let e=!1,f=Array.from(b.attributes);for(let g,a=f.length-1;g=f[a];a--)e=this._parseTemplateNodeAttribute(b,c,d,g.name,g.value)||e;return e}static _parseTemplateNodeAttribute(a,b,c,d,e){return'on-'===d.slice(0,3)?(a.removeAttribute(d),c.events=c.events||[],c.events.push({name:d.slice(3),value:e}),!0):!('id'!==d)&&(c.id=e,!0)}static _contentForTemplate(a){let b=a._templateInfo;return b&&b.content||a.content}_stampTemplate(a){a&&!a.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(a);let f=this.constructor._parseTemplate(a),g=f.nodeInfoList,h=f.content||a.content,j=document.importNode(h,!0);j.__noInsertionPoint=!f.hasInsertionPoint;let k=j.nodeList=Array(g.length);j.$={};for(let f,h,m=0,i=g.length;m<i&&(f=g[m]);m++)h=k[m]=b(j,f),c(this,j.$,h,f),e(this,h,f),d(this,h,f);return j=j,j}_addMethodEventListenerToNode(a,b,c,d){d=d||a;let e=f(d,b,c);return this._addEventListenerToNode(a,b,e),e}_addEventListenerToNode(a,b,c){a.addEventListener(b,c)}_removeEventListenerFromNode(a,b,c){a.removeEventListener(b,c)}}})})();</script><script>(function(){'use strict';function e(e,t){let a=e[t];if(!a)a=e[t]={};else if(!e.hasOwnProperty(t))for(let n in a=e[t]=Object.create(e[t]),a){let e=a[n],t=a[n]=Array(e.length);for(let a=0;a<e.length;a++)t[a]=e[a]}return a}function t(e,t,n,r,o,d){if(t){let i=!1,s=H++;for(let p in n)a(e,t,s,p,n,r,o,d)&&(i=!0);return i}return!1}function a(e,t,a,r,o,d,s,p){let _=!1,i=s?Polymer.Path.root(r):r,h=t[i];if(h)for(let t,P=0,i=h.length;P<i&&(t=h[P]);P++)t.info&&t.info.lastRun===a||s&&!n(r,t.trigger)||(t.info&&(t.info.lastRun=a),t.fn(e,r,o,d,t.info,s,p),_=!0);return _}function n(e,t){if(t){let a=t.name;return a==e||t.structured&&Polymer.Path.isAncestor(a,e)||t.wildcard&&Polymer.Path.isDescendant(a,e)}return!0}function r(e,t,a,n,r){let o='string'===typeof r.method?e[r.method]:r.method,d=r.property;o?o.call(e,e.__data[d],n[d]):!r.dynamicFn&&console.warn('observer method `'+r.method+'` not defined')}function o(e,t,n,r,o){let i,s=e[Y.NOTIFY],p=H++;for(let _ in t)t[_]&&(s&&a(e,s,p,_,n,r,o)?i=!0:o&&d(e,_,n)&&(i=!0));let _;i&&(_=e.__dataHost)&&_._invalidateProperties&&_._invalidateProperties()}function d(e,t,a){let n=Polymer.Path.root(t);if(n!==t){let r=Polymer.CaseMap.camelToDashCase(n)+'-changed';return i(e,r,a[t],t),!0}return!1}function i(e,t,a,n){let r={value:a,queueProperty:!0};n&&(r.path=n),e.dispatchEvent(new CustomEvent(t,{detail:r}))}function s(e,t,a,n,r,o){let d=o?Polymer.Path.root(t):t,s=d==t?null:t,p=s?Polymer.Path.get(e,s):e.__data[t];s&&p===void 0&&(p=a[t]),i(e,r.eventName,p,s)}function p(e,t,a,n,r){let o,d=e.detail,i=d&&d.path;i?(n=Polymer.Path.translate(a,n,i),o=d&&d.value):o=e.target[a],o=r?!o:o,t[Y.READ_ONLY]&&t[Y.READ_ONLY][n]||!t._setPendingPropertyOrPath(n,o,!0,!!i)||d&&d.queueProperty||t._invalidateProperties()}function _(e,t,a,n,r){let o=e.__data[t];Polymer.sanitizeDOMValue&&(o=Polymer.sanitizeDOMValue(o,r.attrName,'attribute',e)),e._propertyToAttribute(t,r.attrName,o)}function l(e,a,n,r){let o=e[Y.COMPUTE];if(o)for(let d=a;t(e,o,d,n,r);)Object.assign(n,e.__dataOld),Object.assign(a,e.__dataPending),d=e.__dataPending,e.__dataPending=null}function h(e,t,a,n,r){let o=N(e,t,a,n,r),d=r.methodInfo;e.__dataHasAccessor&&e.__dataHasAccessor[d]?e._setPendingProperty(d,o,!0):e[d]=o}function P(e,t,n){let r=e.__dataLinkedPaths;if(r){let o;for(let d in r){let a=r[d];Polymer.Path.isDescendant(d,t)?(o=Polymer.Path.translate(d,a,t),e._setPendingPropertyOrPath(o,n,!0,!0)):Polymer.Path.isDescendant(a,t)&&(o=Polymer.Path.translate(a,d,t),e._setPendingPropertyOrPath(o,n,!0,!0))}}}function g(e,t,a,n,r,o,d){a.bindings=a.bindings||[];let s={kind:n,target:r,parts:o,literal:d,isCompound:1!==o.length};if(a.bindings.push(s),y(s)){let{event:e,negate:t}=s.parts[0];s.listenerEvent=e||D.camelToDashCase(r)+'-changed',s.listenerNegate=t}let p=t.nodeInfoList.length;for(let _,l=0;l<s.parts.length;l++)_=s.parts[l],_.compoundIndex=l,f(e,t,s,_,p)}function f(e,t,a,n,r){if(!n.literal)if('attribute'===a.kind&&'-'===a.target[0])console.warn('Cannot set attribute '+a.target+' because "-" is not a valid attribute starting character');else{let o=n.dependencies,d={index:r,binding:a,part:n,evaluator:e};for(let a,n=0;n<o.length;n++)a=o[n],'string'==typeof a&&(a=A(a),a.wildcard=!0),e._addTemplatePropertyEffect(t,a.rootProperty,{fn:c,info:d,trigger:a})}}function c(e,t,a,n,r,o,d){let i=d[r.index],s=r.binding,p=r.part;if(o&&p.source&&t.length>p.source.length&&'property'==s.kind&&!s.isCompound&&i.__dataHasAccessor&&i.__dataHasAccessor[s.target]){let n=a[t];t=Polymer.Path.translate(p.source,s.target,t),i._setPendingPropertyOrPath(t,n,!1,!0)&&e._enqueueClient(i)}else{let d=r.evaluator._evaluateBinding(e,p,t,a,n,o);u(e,i,s,p,d)}}function u(e,t,a,n,r){if(r=m(t,r,a,n),Polymer.sanitizeDOMValue&&(r=Polymer.sanitizeDOMValue(r,a.target,a.kind,t)),'attribute'==a.kind)e._valueToNodeAttribute(t,r,a.target);else{let n=a.target;t.__dataHasAccessor&&t.__dataHasAccessor[n]?(!t[Y.READ_ONLY]||!t[Y.READ_ONLY][n])&&t._setPendingProperty(n,r)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,n,r)}}function m(e,t,a,n){if(a.isCompound){let r=e.__dataCompoundStorage[a.target];r[n.compoundIndex]=t,t=r.join('')}return'attribute'!==a.kind&&('textContent'===a.target||'value'===a.target&&('input'===e.localName||'textarea'===e.localName))&&(t=void 0==t?'':t),t}function y(e){return!!e.target&&'attribute'!=e.kind&&'text'!=e.kind&&!e.isCompound&&'{'===e.parts[0].mode}function E(e,t){let{nodeList:a,nodeInfoList:n}=t;if(n.length)for(let t=0;t<n.length;t++){let r=n[t],o=a[t],d=r.bindings;if(d)for(let t,a=0;a<d.length;a++)t=d[a],C(o,t),T(o,e,t);o.__dataHost=e}}function C(e,t){if(t.isCompound){let a=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),n=t.parts,r=Array(n.length);for(let e=0;e<n.length;e++)r[e]=n[e].literal;let o=t.target;a[o]=r,t.literal&&'property'==t.kind&&(e[o]=t.literal)}}function T(e,t,a){if(a.listenerEvent){let n=a.parts[0];e.addEventListener(a.listenerEvent,function(r){p(r,t,a.target,n.source,n.negate)})}}function O(e,t,a,n,r,o){o=t.static||o&&('object'!==typeof o||o[t.methodName]);let d={methodName:t.methodName,args:t.args,methodInfo:r,dynamicFn:o};for(let s,p=0;p<t.args.length&&(s=t.args[p]);p++)s.literal||e._addPropertyEffect(s.rootProperty,a,{fn:n,info:d,trigger:s});o&&e._addPropertyEffect(t.methodName,a,{fn:n,info:d})}function N(e,t,a,n,r){let o=e._methodHost||e,d=o[r.methodName];if(d){let n=L(e.__data,r.args,t,a);return d.apply(o,n)}r.dynamicFn||console.warn('method `'+r.methodName+'` not defined')}function b(e){let t='';for(let a,n=0;n<e.length;n++)a=e[n].literal,t+=a||'';return t}function v(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e=t[1],a={methodName:e,static:!0,args:M};if(t[2].trim()){let e=t[2].replace(/\\,/g,'&comma;').split(',');return I(e,a)}return a}return null}function I(e,t){return t.args=e.map(function(e){let a=A(e);return a.literal||(t.static=!1),a},this),t}function A(e){let t=e.trim().replace(/&comma;/g,',').replace(/\\(.)/g,'$1'),n={name:t,value:'',literal:!1},a=t[0];return'-'===a&&(a=t[1]),'0'<=a&&'9'>=a&&(a='#'),'\''===a||'"'===a?(n.value=t.slice(1,-1),n.literal=!0):'#'===a?(n.value=+t,n.literal=!0):void 0,(n.literal||(n.rootProperty=Polymer.Path.root(t),n.structured=Polymer.Path.isPath(t),n.structured&&(n.wildcard='.*'==t.slice(-2),n.wildcard&&(n.name=t.slice(0,-2)))),n)}function L(e,t,a,n){let r=[];for(let o=0,d=t.length;o<d;o++){let d,i=t[o],s=i.name;if(i.literal?d=i.value:i.structured?(d=Polymer.Path.get(e,s),void 0===d&&(d=n[s])):d=e[s],i.wildcard){let e=0===s.indexOf(a+'.'),t=0===a.indexOf(s)&&!e;r[o]={path:t?a:s,value:t?n[a]:d,base:d}}else r[o]=d}return r}function R(e,t,a,n){let r=a+'.splices';e.notifyPath(r,{indexSplices:n}),e.notifyPath(a+'.length',t.length),e.__data[r]={indexSplices:null}}function x(e,t,a,n,r,o){R(e,t,a,[{index:n,addedCount:r,removed:o,object:t,type:'splice'}])}function k(e){return e[0].toUpperCase()+e.substring(1)}const D=Polymer.CaseMap;let H=0;const Y={COMPUTE:'__computeEffects',REFLECT:'__reflectEffects',NOTIFY:'__notifyEffects',PROPAGATE:'__propagateEffects',OBSERVE:'__observeEffects',READ_ONLY:'__readOnly'};let F;const M=[],S='(?:[a-zA-Z_$][\\w.:$\\-*]*)',w='(?:('+S+'|'+'(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)'+'|'+('(?:'+'(?:\'(?:[^\'\\\\]|\\\\.)*\')'+'|'+'(?:"(?:[^"\\\\]|\\\\.)*")'+')')+')\\s*)',z=/(\[\[|{{)\s*(?:(!)\s*)?((?:[a-zA-Z_$][\w.:$\-*]*)\s*(?:\(\s*(?:(?:(?:((?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*")))\s*)(?:,\s*(?:((?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*")))\s*))*)?)\)\s*)?)(?:]]|}})/g;Polymer.PropertyEffects=Polymer.dedupingMixin((a)=>{const n=Polymer.TemplateStamp(Polymer.PropertyAccessors(a));class d extends n{constructor(){super(),this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__dataCounter,this.__templateInfo}get PROPERTY_EFFECT_TYPES(){return Y}_initializeProperties(){super._initializeProperties(),B.registerHost(this),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}_initializeInstanceProperties(e){let t=this[Y.READ_ONLY];for(let a in e)t&&t[a]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[a]=this.__dataPending[a]=e[a])}_addPropertyEffect(t,a,n){this._createPropertyAccessor(t,a==Y.READ_ONLY);let r=e(this,a)[t];r||(r=this[a][t]=[]),r.push(n)}_removePropertyEffect(t,a,n){let r=e(this,a)[t],o=r.indexOf(n);0<=o&&r.splice(o,1)}_hasPropertyEffect(e,t){let a=this[t];return!!(a&&a[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,Y.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,Y.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,Y.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,Y.COMPUTE)}_setPendingPropertyOrPath(e,t,a,n){if(n||Polymer.Path.root(Array.isArray(e)?e[0]:e)!==e){if(!n){let a=Polymer.Path.get(this,e);if(e=Polymer.Path.set(this,e,t),!e||!super._shouldPropertyChange(e,t,a))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,a))return P(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,a);this[e]=t}return!1}_setUnmanagedPropertyToNode(e,t,a){(a!==e[t]||'object'==typeof a)&&(e[t]=a)}_setPendingProperty(e,t,a){let n=this.__dataHasPaths&&Polymer.Path.isPath(e),r=n?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,r[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),n?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(n||this[Y.NOTIFY]&&this[Y.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=a),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t,a=0;a<e.length;a++)t=e[a],t.__dataEnabled?t.__dataPending&&t._flushProperties():t._enableProperties()}}_readyClients(){this.__enableOrFlushClients()}setProperties(e,t){for(let a in e)!t&&this[Y.READ_ONLY]&&this[Y.READ_ONLY][a]||this._setPendingPropertyOrPath(a,e[a],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(e,a,n){let r=this.__dataHasPaths;this.__dataHasPaths=!1,l(this,a,n,r);let d=this.__dataToNotify;this.__dataToNotify=null,this._propagatePropertyChanges(a,n,r),this._flushClients(),t(this,this[Y.REFLECT],a,n,r),t(this,this[Y.OBSERVE],a,n,r),d&&o(this,d,a,n,r),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(e,a,n){this[Y.PROPAGATE]&&t(this,this[Y.PROPAGATE],e,a,n);for(let r=this.__templateInfo;r;)t(this,r.propertyEffects,e,a,n,r.nodeList),r=r.nextTemplateInfo}linkPaths(e,t){e=Polymer.Path.normalize(e),t=Polymer.Path.normalize(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}unlinkPaths(e){e=Polymer.Path.normalize(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}notifySplices(e,t){let a={path:''},n=Polymer.Path.get(this,e,a);R(this,n,a.path,t)}get(e,t){return Polymer.Path.get(t||this,e)}set(e,t,a){a?Polymer.Path.set(a,e,t):(!this[Y.READ_ONLY]||!this[Y.READ_ONLY][e])&&this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}push(e,...t){let a={path:''},n=Polymer.Path.get(this,e,a),r=n.length,o=n.push(...t);return t.length&&x(this,n,a.path,r,t.length,[]),o}pop(e){let t={path:''},a=Polymer.Path.get(this,e,t),n=!!a.length,r=a.pop();return n&&x(this,a,t.path,a.length,0,[r]),r}splice(e,t,a,...n){var r=Math.floor;let o={path:''},d=Polymer.Path.get(this,e,o);t=0>t?d.length-r(-t):r(t),t||(t=0);let i=d.splice(t,a,...n);return(n.length||i.length)&&x(this,d,o.path,t,n.length,i),i}shift(e){let t={path:''},a=Polymer.Path.get(this,e,t),n=!!a.length,r=a.shift();return n&&x(this,a,t.path,0,0,[r]),r}unshift(e,...t){let a={path:''},n=Polymer.Path.get(this,e,a),r=n.unshift(...t);return t.length&&x(this,n,a.path,0,t.length,[]),r}notifyPath(e,t){let a;if(1==arguments.length){let n={path:''};t=Polymer.Path.get(this,e,n),a=n.path}else a=Array.isArray(e)?Polymer.Path.normalize(e):e;this._setPendingPropertyOrPath(a,t,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(e,t){this._addPropertyEffect(e,Y.READ_ONLY),t&&(this['_set'+k(e)]=function(t){this._setProperty(e,t)})}_createPropertyObserver(e,t,a){let n={property:e,method:t,dynamicFn:!!a};this._addPropertyEffect(e,Y.OBSERVE,{fn:r,info:n,trigger:{name:e}}),a&&this._addPropertyEffect(t,Y.OBSERVE,{fn:r,info:n,trigger:{name:t}})}_createMethodObserver(e,t){let a=v(e);if(!a)throw new Error('Malformed observer expression \''+e+'\'');O(this,a,Y.OBSERVE,N,null,t)}_createNotifyingProperty(e){this._addPropertyEffect(e,Y.NOTIFY,{fn:s,info:{eventName:D.camelToDashCase(e)+'-changed',property:e}})}_createReflectedProperty(e){let t=D.camelToDashCase(e);'-'===t[0]?console.warn('Property '+e+' cannot be reflected to attribute '+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,Y.REFLECT,{fn:_,info:{attrName:t}})}_createComputedProperty(e,t,a){let n=v(t);if(!n)throw new Error('Malformed computed expression \''+t+'\'');O(this,n,Y.COMPUTE,h,e,a)}static addPropertyEffect(e,t,a){this.prototype._addPropertyEffect(e,t,a)}static createPropertyObserver(e,t,a){this.prototype._createPropertyObserver(e,t,a)}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t)}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e)}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t)}static createReflectedProperty(e){this.prototype._createReflectedProperty(e)}static createComputedProperty(e,t,a){this.prototype._createComputedProperty(e,t,a)}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let a=this.constructor._parseTemplate(e),n=this.__templateInfo==a;if(!n)for(let e in a.propertyEffects)this._createPropertyAccessor(e);if(t&&(a=Object.create(a),a.wasPreBound=n,!n&&this.__templateInfo)){let e=this.__templateInfoLast||this.__templateInfo;return this.__templateInfoLast=e.nextTemplateInfo=a,a.previousTemplateInfo=e,a}return this.__templateInfo=a}static _addTemplatePropertyEffect(e,t,a){let n=e.hostProps=e.hostProps||{};n[t]=!0;let r=e.propertyEffects=e.propertyEffects||{},o=r[t]=r[t]||[];o.push(a)}_stampTemplate(e){B.beginHosting(this);let a=super._stampTemplate(e);B.endHosting(this);let n=this._bindTemplate(e,!0);if(n.nodeList=a.nodeList,!n.wasPreBound){let e=n.childNodes=[];for(let t=a.firstChild;t;t=t.nextSibling)e.push(t)}return a.templateInfo=n,E(this,n),this.__dataReady&&t(this,n.propertyEffects,this.__data,null,!1,n.nodeList),a}_removeBoundDom(e){let t=e.templateInfo;t.previousTemplateInfo&&(t.previousTemplateInfo.nextTemplateInfo=t.nextTemplateInfo),t.nextTemplateInfo&&(t.nextTemplateInfo.previousTemplateInfo=t.previousTemplateInfo),this.__templateInfoLast==t&&(this.__templateInfoLast=t.previousTemplateInfo),t.previousTemplateInfo=t.nextTemplateInfo=null;let a=t.childNodes;for(let t,n=0;n<a.length;n++)t=a[n],t.parentNode.removeChild(t)}static _parseTemplateNode(e,t,a){let n=super._parseTemplateNode(e,t,a);if(e.nodeType===Node.TEXT_NODE){let r=this._parseBindings(e.textContent,t);r&&(e.textContent=b(r)||' ',g(this,t,a,'text','textContent',r),n=!0)}return n}static _parseTemplateNodeAttribute(e,t,a,n,r){let o=this._parseBindings(r,t);if(o){let r=n,d='property';'$'==n[n.length-1]&&(n=n.slice(0,-1),d='attribute');let i=b(o);return i&&'attribute'==d&&e.setAttribute(n,i),'input'===e.localName&&'value'===r&&e.setAttribute(r,''),e.removeAttribute(r),'property'===d&&(n=Polymer.CaseMap.dashToCamelCase(n)),g(this,t,a,d,n,o,i),!0}return super._parseTemplateNodeAttribute(e,t,a,n,r)}static _parseTemplateNestedTemplate(e,t,a){let n=super._parseTemplateNestedTemplate(e,t,a),r=a.templateInfo.hostProps;for(let n in r){g(this,t,a,'property','_host_'+n,[{mode:'{',source:n,dependencies:[n]}])}return n}static _parseBindings(e,t){let a,n=[],r=0;for(;null!==(a=z.exec(e));){a.index>r&&n.push({literal:e.slice(r,a.index)});let o=a[1][0],d=!!a[2],i=a[3].trim(),s=!1,p='',_=-1;'{'==o&&0<(_=i.indexOf('::'))&&(p=i.substring(_+2),i=i.substring(0,_),s=!0);let l=v(i),h=[];if(l){let{args:e,methodName:a}=l;for(let t,a=0;a<e.length;a++)t=e[a],t.literal||h.push(t);let n=t.dynamicFns;(n&&n[a]||l.static)&&(h.push(a),l.dynamicFn=!0)}else h.push(i);n.push({source:i,mode:o,negate:d,customEvent:s,signature:l,dependencies:h,event:p}),r=z.lastIndex}if(r&&r<e.length){let t=e.substring(r);t&&n.push({literal:t})}return n.length?n:null}static _evaluateBinding(e,t,a,n,r,o){let d;return d=t.signature?N(e,a,n,r,t.signature):a==t.source?o&&Polymer.Path.isPath(a)?Polymer.Path.get(e,a):e.__data[a]:Polymer.Path.get(e,t.source),t.negate&&(d=!d),d}}return F=d,d});let B={stack:[],registerHost(e){if(this.stack.length){let t=this.stack[this.stack.length-1];t._enqueueClient(e)}},beginHosting(e){this.stack.push(e)},endHosting(e){let t=this.stack.length;t&&this.stack[t-1]==e&&this.stack.pop()}}})();</script><script>(function(){'use strict';Polymer.ElementMixin=Polymer.dedupingMixin((a)=>{function b(a){return a.hasOwnProperty(JSCompiler_renameProperty('__ownProperties',a))||(a.__ownProperties=a.hasOwnProperty(JSCompiler_renameProperty('properties',a))?a.properties:{}),a.__ownProperties}function c(a){return a.hasOwnProperty(JSCompiler_renameProperty('__ownObservers',a))||(a.__ownObservers=a.hasOwnProperty(JSCompiler_renameProperty('observers',a))?a.observers:[]),a.__ownObservers}function d(a,b){for(let c in b){let d=b[c];'function'==typeof d&&(d={type:d}),a[c]=d}return a}function e(a){if(!a.hasOwnProperty(JSCompiler_renameProperty('__classProperties',a))){a.__classProperties=d({},b(a));let c=Object.getPrototypeOf(a.prototype).constructor;c.prototype instanceof p&&(a.__classProperties=Object.assign(Object.create(e(c)),a.__classProperties))}return a.__classProperties}function f(a){if(!a.hasOwnProperty(JSCompiler_renameProperty('__classPropertyDefaults',a))){a.__classPropertyDefaults=null;let b=e(a);for(let c in b){let d=b[c];'value'in d&&(a.__classPropertyDefaults=a.__classPropertyDefaults||{},a.__classPropertyDefaults[c]=d)}}return a.__classPropertyDefaults}function g(a){return a.hasOwnProperty(JSCompiler_renameProperty('__finalized',a))}function h(a){let b=a.prototype,c=Object.getPrototypeOf(b).constructor;c.prototype instanceof p&&c.finalize(),i(a)}function i(a){a.__finalized=!0;let d=a.prototype;a.hasOwnProperty(JSCompiler_renameProperty('is',a))&&a.is&&Polymer.telemetry.register(d);let e=b(a);e&&j(d,e);let f=c(a);f&&k(d,f,e);let g=a.template;if(g){if('string'===typeof g){let a=document.createElement('template');a.innerHTML=g,g=a}else g=g.cloneNode(!0);d._template=g}}function j(a,b){for(let c in b)l(a,c,b[c],b)}function k(a,b,c){for(let d=0;d<b.length;d++)a._createMethodObserver(b[d],c)}function l(a,b,c,d){c.computed&&(c.readOnly=!0),c.computed&&!a._hasReadOnlyEffect(b)&&a._createComputedProperty(b,c.computed,d),c.readOnly&&!a._hasReadOnlyEffect(b)&&a._createReadOnlyProperty(b,!c.computed),c.reflectToAttribute&&!a._hasReflectEffect(b)&&a._createReflectedProperty(b),c.notify&&!a._hasNotifyEffect(b)&&a._createNotifyingProperty(b),c.observer&&a._createPropertyObserver(b,c.observer,d[c.observer])}function m(a,b,c,d){const e=Polymer.StyleGather.stylesFromModuleImports(c).concat(Polymer.StyleGather.stylesFromTemplate(b)),f=b.content.querySelectorAll('style');let g=0;for(let h=0;h<e.length;h++){let b=e[h],c=f[g];c===b?g++:(b=b.cloneNode(!0),c.parentNode.insertBefore(b,c)),b.textContent=a._processStyleText(b.textContent,d)}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(b,c)}const n=Polymer.PropertyEffects(a);let o=Polymer.CaseMap;class p extends n{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty('__observedAttributes',this))){let a=[],b=e(this);for(let c in b)a.push(Polymer.CaseMap.camelToDashCase(c));this.__observedAttributes=a}return this.__observedAttributes}static finalize(){g(this)||h(this)}static get template(){return this.hasOwnProperty(JSCompiler_renameProperty('_template',this))||(this._template=Polymer.DomModule&&Polymer.DomModule.import(this.is,'template')||Object.getPrototypeOf(this.prototype).constructor.template),this._template}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty('_importPath',this))){const a=Polymer.DomModule&&Polymer.DomModule.import(this.is);this._importPath=a?a.assetpath:Object.getPrototypeOf(this.prototype).constructor.importPath}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){Polymer.telemetry.instanceCount++,this.constructor.finalize();const a=this.constructor.importPath;this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=Polymer.rootPath,this.importPath=a;let b=f(this.constructor);if(b)for(let a in b){let c=b[a];if(!this.hasOwnProperty(a)){let b='function'==typeof c.value?c.value.call(this):c.value;this._hasAccessor(a)?this._setPendingProperty(a,b,!0):this[a]=b}}}static _processStyleText(a,b){return Polymer.ResolveUrl.resolveCss(a,b)}static _finalizeTemplate(a){const b=this.prototype._template;if(b&&!b.__polymerFinalized){b.__polymerFinalized=!0;const c=this.importPath,d=c?Polymer.ResolveUrl.resolveUrl(c):'';m(this,b,a,d),this.prototype._bindTemplate(b)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),this._enableProperties()}disconnectedCallback(){}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(a){if(this.attachShadow)return a?(this.shadowRoot||this.attachShadow({mode:'open'}),this.shadowRoot.appendChild(a),this.shadowRoot):null;throw new Error('ShadowDOM not available. Polymer.Element can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.')}attributeChangedCallback(a,b,c){if(b!==c){let b=o.dashToCamelCase(a),d=e(this.constructor)[b].type;this._hasReadOnlyEffect(b)||this._attributeToProperty(a,c,d)}}updateStyles(a){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,a)}resolveUrl(a,b){return!b&&this.importPath&&(b=Polymer.ResolveUrl.resolveUrl(this.importPath)),Polymer.ResolveUrl.resolveUrl(a,b)}static _parseTemplateContent(a,b,c){return b.dynamicFns=b.dynamicFns||e(this),super._parseTemplateContent(a,b,c)}}return p}),Polymer.telemetry={instanceCount:0,registrations:[],_regLog:function(a){console.log('['+a.is+']: registered')},register:function(a){this.registrations.push(a),Polymer.log&&this._regLog(a)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Polymer.updateStyles=function(a){window.ShadyCSS&&window.ShadyCSS.styleDocument(a)}})();</script><script>(function(){'use strict';class a{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(a,b){this._asyncModule=a,this._callback=b,this._timer=this._asyncModule.run(()=>{this._timer=null,this._callback()})}cancel(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(b,c,d){return b instanceof a?b.cancel():b=new a,b.setConfig(c,d),b}}Polymer.Debouncer=a})();</script><script>(function(){'use strict';function a(a){return-1<p.indexOf(a)}function b(b){return a(b)||'touchend'===b?void 0:j&&s&&Polymer.passiveTouchGestures?{passive:!0}:void 0}function c(a){let b=t?['click']:p;for(let c,d=0;d<b.length;d++)c=b[d],a?document.addEventListener(c,v,!0):document.removeEventListener(c,v,!0)}function d(b){let c=b.type;if(!a(c))return!1;if('mousemove'===c){let a=void 0===b.buttons?1:b.buttons;return b instanceof window.MouseEvent&&!r&&(a=q[b.which]||0),!!(1&a)}else{let a=void 0===b.button?0:b.button;return 0===a}}function f(a){if('click'===a.type){if(0===a.detail)return!0;let b=z._findOriginalTarget(a);if(!b.nodeType||b.nodeType!==Node.ELEMENT_NODE)return!0;let c=b.getBoundingClientRect(),d=a.pageX,e=a.pageY;return!(d>=c.left&&d<=c.right&&e>=c.top&&e<=c.bottom)}return!1}function e(a){let b='auto',c=a.composedPath&&a.composedPath();if(c)for(let a,d=0;d<c.length;d++)if(a=c[d],a[m]){b=a[m];break}return b}function g(a,b,c){a.movefn=b,a.upfn=c,document.addEventListener('mousemove',b),document.addEventListener('mouseup',c)}function h(a){document.removeEventListener('mousemove',a.movefn),document.removeEventListener('mouseup',a.upfn),a.movefn=null,a.upfn=null}var i=Math.abs;let j='string'===typeof document.head.style.touchAction,k='__polymerGestures',l='__polymerGesturesHandled',m='__polymerGesturesTouchAction',n=25,o=5,p=['mousedown','mousemove','mouseup','click'],q=[0,1,4,2],r=function(){try{return 1===new MouseEvent('test',{buttons:1}).buttons}catch(a){return!1}}(),s=!1;(function(){try{let a=Object.defineProperty({},'passive',{get(){s=!0}});window.addEventListener('test',null,a),window.removeEventListener('test',null,a)}catch(a){}})();let t=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),u=function(){};u.prototype.reset,u.prototype.mousedown,u.prototype.mousemove,u.prototype.mouseup,u.prototype.touchstart,u.prototype.touchmove,u.prototype.touchend,u.prototype.click;let v=function(a){let b=a.sourceCapabilities;if((!b||b.firesTouchEvents)&&(a[l]={skip:!0},'click'===a.type)){let b=a.composedPath&&a.composedPath();if(b)for(let a=0;a<b.length;a++)if(b[a]===w.mouse.target)return;a.preventDefault(),a.stopPropagation()}},w={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener('touchend',function(a){w.mouse.mouseIgnoreJob||c(!0);w.mouse.target=a.composedPath()[0],w.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(w.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(2500),function(){c(),w.mouse.target=null,w.mouse.mouseIgnoreJob=null})},!!s&&{passive:!0});const z={gestures:{},recognizers:[],deepTargetFind:function(a,b){let c=document.elementFromPoint(a,b),d=c;for(;d&&d.shadowRoot&&!window.ShadyDOM;){let e=d;if(d=d.shadowRoot.elementFromPoint(a,b),e===d)break;d&&(c=d)}return c},_findOriginalTarget:function(a){if(a.composedPath){const b=a.composedPath()[0];return b}return a.target},_handleNative:function(a){let b,c=a.type,d=a.currentTarget,e=d[k];if(e){let d=e[c];if(d){if(!a[l]&&(a[l]={},'touch'===c.slice(0,5))){a=a;let b=a.changedTouches[0];if('touchstart'===c&&1===a.touches.length&&(w.touch.id=b.identifier),w.touch.id!==b.identifier)return;j||'touchstart'!==c&&'touchmove'!==c||z._handleTouchAction(a)}if(b=a[l],!b.skip){for(let c,e=0;e<z.recognizers.length;e++)c=z.recognizers[e],d[c.name]&&!b[c.name]&&c.flow&&-1<c.flow.start.indexOf(a.type)&&c.reset&&c.reset();for(let e,f=0;f<z.recognizers.length;f++)e=z.recognizers[f],d[e.name]&&!b[e.name]&&(b[e.name]=!0,e[c](a))}}}},_handleTouchAction:function(a){let b=a.changedTouches[0],c=a.type;if('touchstart'===c)w.touch.x=b.clientX,w.touch.y=b.clientY,w.touch.scrollDecided=!1;else if('touchmove'===c){if(w.touch.scrollDecided)return;w.touch.scrollDecided=!0;let c=e(a),d=!1,f=i(w.touch.x-b.clientX),g=i(w.touch.y-b.clientY);a.cancelable&&('none'===c?d=!0:'pan-x'===c?d=g>f:'pan-y'===c&&(d=f>g)),d?a.preventDefault():z.prevent('track')}},addListener:function(a,b,c){return!!this.gestures[b]&&(this._add(a,b,c),!0)},removeListener:function(a,b,c){return!!this.gestures[b]&&(this._remove(a,b,c),!0)},_add:function(c,d,e){let f=this.gestures[d],g=f.deps,h=f.name,j=c[k];j||(c[k]=j={});for(let f,k,l=0;l<g.length;l++)(f=g[l],!(t&&a(f)&&'click'!==f))&&(k=j[f],k||(j[f]=k={_count:0}),0===k._count&&c.addEventListener(f,this._handleNative,b(f)),k[h]=(k[h]||0)+1,k._count=(k._count||0)+1);c.addEventListener(d,e),f.touchAction&&this.setTouchAction(c,f.touchAction)},_remove:function(a,c,d){let e=this.gestures[c],f=e.deps,g=e.name,h=a[k];if(h)for(let c,d,e=0;e<f.length;e++)c=f[e],d=h[c],d&&d[g]&&(d[g]=(d[g]||1)-1,d._count=(d._count||1)-1,0===d._count&&a.removeEventListener(c,this._handleNative,b(c)));a.removeEventListener(c,d)},register:function(a){this.recognizers.push(a);for(let b=0;b<a.emits.length;b++)this.gestures[a.emits[b]]=a},_findRecognizerByEvent:function(a){for(let b,c=0;c<this.recognizers.length;c++){b=this.recognizers[c];for(let c,d=0;d<b.emits.length;d++)if(c=b.emits[d],c===a)return b}return null},setTouchAction:function(a,b){j&&(a.style.touchAction=b),a[m]=b},_fire:function(a,b,c){let d=new Event(b,{bubbles:!0,cancelable:!0,composed:!0});if(d.detail=c,a.dispatchEvent(d),d.defaultPrevented){let a=c.preventer||c.sourceEvent;a&&a.preventDefault&&a.preventDefault()}},prevent:function(a){let b=this._findRecognizerByEvent(a);b.info&&(b.info.prevent=!0)},resetMouseCanceller:function(){w.mouse.mouseIgnoreJob&&w.mouse.mouseIgnoreJob.flush()}};z.register({name:'downup',deps:['mousedown','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['down','up'],info:{movefn:null,upfn:null},reset:function(){h(this.info)},mousedown:function(a){if(!d(a))return;let b=z._findOriginalTarget(a),c=this;g(this.info,function(a){d(a)||(c._fire('up',b,a),h(c.info))},function(a){d(a)&&c._fire('up',b,a),h(c.info)}),this._fire('down',b,a)},touchstart:function(a){this._fire('down',z._findOriginalTarget(a),a.changedTouches[0],a)},touchend:function(a){this._fire('up',z._findOriginalTarget(a),a.changedTouches[0],a)},_fire:function(a,b,c,d){z._fire(b,a,{x:c.clientX,y:c.clientY,sourceEvent:c,preventer:d,prevent:function(a){return z.prevent(a)}})}}),z.register({name:'track',touchAction:'none',deps:['mousedown','touchstart','touchmove','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['track'],info:{x:0,y:0,state:'start',started:!1,moves:[],addMove:function(a){this.moves.length>2&&this.moves.shift(),this.moves.push(a)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state='start',this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,h(this.info)},hasMovedEnough:function(a,b){if(this.info.prevent)return!1;if(this.info.started)return!0;let c=i(this.info.x-a),d=i(this.info.y-b);return c>=o||d>=o},mousedown:function(a){if(!d(a))return;let b=z._findOriginalTarget(a),c=this,f=function(a){let e=a.clientX,f=a.clientY;c.hasMovedEnough(e,f)&&(c.info.state=c.info.started?'mouseup'===a.type?'end':'track':'start','start'===c.info.state&&z.prevent('tap'),c.info.addMove({x:e,y:f}),!d(a)&&(c.info.state='end',h(c.info)),c._fire(b,a),c.info.started=!0)};g(this.info,f,function(a){c.info.started&&f(a),h(c.info)}),this.info.x=a.clientX,this.info.y=a.clientY},touchstart:function(a){let b=a.changedTouches[0];this.info.x=b.clientX,this.info.y=b.clientY},touchmove:function(a){let b=z._findOriginalTarget(a),c=a.changedTouches[0],d=c.clientX,e=c.clientY;this.hasMovedEnough(d,e)&&('start'===this.info.state&&z.prevent('tap'),this.info.addMove({x:d,y:e}),this._fire(b,c),this.info.state='track',this.info.started=!0)},touchend:function(a){let b=z._findOriginalTarget(a),c=a.changedTouches[0];this.info.started&&(this.info.state='end',this.info.addMove({x:c.clientX,y:c.clientY}),this._fire(b,c,a))},_fire:function(a,b){let c,d=this.info.moves[this.info.moves.length-2],e=this.info.moves[this.info.moves.length-1],f=e.x-this.info.x,g=e.y-this.info.y,h=0;d&&(c=e.x-d.x,h=e.y-d.y),z._fire(a,'track',{state:this.info.state,x:b.clientX,y:b.clientY,dx:f,dy:g,ddx:c,ddy:h,sourceEvent:b,hover:function(){return z.deepTargetFind(b.clientX,b.clientY)}})}}),z.register({name:'tap',deps:['mousedown','click','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['click','touchend']},emits:['tap'],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(a){this.info.x=a.clientX,this.info.y=a.clientY},mousedown:function(a){d(a)&&this.save(a)},click:function(a){d(a)&&this.forward(a)},touchstart:function(a){this.save(a.changedTouches[0],a)},touchend:function(a){this.forward(a.changedTouches[0],a)},forward:function(a,b){let c=i(a.clientX-this.info.x),d=i(a.clientY-this.info.y),g=z._findOriginalTarget(b||a);(isNaN(c)||isNaN(d)||c<=n&&d<=n||f(a))&&!this.info.prevent&&z._fire(g,'tap',{x:a.clientX,y:a.clientY,sourceEvent:a,preventer:b})}}),z.findOriginalTarget=z._findOriginalTarget,z.add=z.addListener,z.remove=z.removeListener,Polymer.Gestures=z})();</script><script>(function(){'use strict';const a=Polymer.Gestures;Polymer.GestureEventListeners=Polymer.dedupingMixin((b)=>{return class extends b{_addEventListenerToNode(b,c,d){a.addListener(b,c,d)||super._addEventListenerToNode(b,c,d)}_removeEventListenerFromNode(b,c,d){a.removeListener(b,c,d)||super._removeEventListenerFromNode(b,c,d)}}})})();</script><script>(function(){'use strict';function a(){i=document.documentElement.getAttribute('dir')}function b(a){if(!a.__autoDirOptOut){a.setAttribute('dir',i)}}function c(){a(),i=document.documentElement.getAttribute('dir');for(let a=0;a<g.length;a++)b(g[a])}function d(){h&&h.takeRecords().length&&c()}const e=/:host\(:dir\((ltr|rtl)\)\)/g,f=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,g=[];let h=null,i='';Polymer.DirMixin=Polymer.dedupingMixin((i)=>{h||(a(),h=new MutationObserver(c),h.observe(document.documentElement,{attributes:!0,attributeFilter:['dir']}));const j=Polymer.PropertyAccessors(i);class k extends j{static _processStyleText(a,b){return a=super._processStyleText(a,b),a=this._replaceDirInCssText(a),a}static _replaceDirInCssText(a){let b=a;return b=b.replace(e,':host([dir="$1"])'),b=b.replace(f,':host([dir="$2"]) $1'),a!==b&&(this.__activateDir=!0),b}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute('dir')}connectedCallback(){j.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(d(),g.push(this),b(this))}disconnectedCallback(){if(j.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const a=g.indexOf(this);-1<a&&g.splice(a,1)}}}return k.__activateDir=!1,k})})();</script><script>(function(){'use strict';function a(a){window.HTMLImports?HTMLImports.whenReady(a):a()}Polymer.importHref=function(b,c,d,e){let f=document.head.querySelector('link[href="'+b+'"][import-href]');f||(f=document.createElement('link'),f.rel='import',f.href=b,f.setAttribute('import-href','')),e&&f.setAttribute('async','');let g=function(){f.removeEventListener('load',h),f.removeEventListener('error',i)},h=function(b){g(),f.__dynamicImportLoaded=!0,c&&a(()=>{c(b)})},i=function(b){g(),f.parentNode&&f.parentNode.removeChild(f),d&&a(()=>{d(b)})};return f.addEventListener('load',h),f.addEventListener('error',i),null==f.parentNode?document.head.appendChild(f):f.__dynamicImportLoaded&&f.dispatchEvent(new Event('load')),f}})();</script><script>(function(){'use strict';function a(){e=!0,requestAnimationFrame(function(){e=!1,b(f),setTimeout(function(){c(g)})})}function b(a){for(;a.length;)d(a.shift())}function c(a){for(let b=0,c=a.length;b<c;b++)d(a.shift())}function d(a){const b=a[0],c=a[1],d=a[2];try{c.apply(b,d)}catch(a){setTimeout(()=>{throw a})}}let e=!1,f=[],g=[];Polymer.RenderStatus={beforeNextRender:function(b,c,d){e||a(),f.push([b,c,d])},afterNextRender:function(b,c,d){e||a(),g.push([b,c,d])},flush:function(){for(;f.length||g.length;)b(f),b(g);e=!1}}})();</script><script>(function(){'use strict';function a(){document.body.removeAttribute('unresolved')}window.WebComponents?window.addEventListener('WebComponentsReady',a):'interactive'===document.readyState||'complete'===document.readyState?a():window.addEventListener('DOMContentLoaded',a)})();</script><script>(function(){'use strict';function a(a,b,c){return{index:a,removed:b,addedCount:c}}function b(a,b,c,d,e,f){let h=f-e+1,k=c-b+1,l=Array(h);for(let g=0;g<h;g++)l[g]=Array(k),l[g][0]=g;for(let g=0;g<k;g++)l[0][g]=g;for(let m=1;m<h;m++)for(let c=1;c<k;c++)if(g(a[b+c-1],d[e+m-1]))l[m][c]=l[m-1][c-1];else{let a=l[m-1][c]+1,b=l[m][c-1]+1;l[m][c]=a<b?a:b}return l}function c(a){let b=a.length-1,c=a[0].length-1,d=a[b][c],e=[];for(;0<b||0<c;){if(0==b){e.push(l),c--;continue}if(0==c){e.push(m),b--;continue}let f,g=a[b-1][c-1],i=a[b-1][c],j=a[b][c-1];f=i<j?i<g?i:g:j<g?j:g,f==g?(g==d?e.push(h):(e.push(k),d=g),b--,c--):f==i?(e.push(m),b--,d=i):(e.push(l),c--,d=j)}return e.reverse(),e}function d(d,g,i,j,n,o){let p,q=0,r=0,s=Math.min(i-g,o-n);if(0==g&&0==n&&(q=e(d,j,s)),i==d.length&&o==j.length&&(r=f(d,j,s-q)),g+=q,n+=q,i-=r,o-=r,0==i-g&&0==o-n)return[];if(g==i){for(p=a(g,[],0);n<o;)p.removed.push(j[n++]);return[p]}if(n==o)return[a(g,[],i-g)];let t=c(b(d,g,i,j,n,o));p=void 0;let u=[],v=g,w=n;for(let b=0;b<t.length;b++)switch(t[b]){case h:p&&(u.push(p),p=void 0),v++,w++;break;case k:p||(p=a(v,[],0)),p.addedCount++,v++,p.removed.push(j[w]),w++;break;case l:p||(p=a(v,[],0)),p.addedCount++,v++;break;case m:p||(p=a(v,[],0)),p.removed.push(j[w]),w++;}return p&&u.push(p),u}function e(a,b,c){for(let d=0;d<c;d++)if(!g(a[d],b[d]))return d;return c}function f(a,b,c){let d=a.length,e=b.length,f=0;for(;f<c&&g(a[--d],b[--e]);)f++;return f}function g(a,b){return a===b}const h=0,k=1,l=2,m=3;Polymer.ArraySplice={calculateSplices:function(a,b){return d(a,0,a.length,b,0,b.length)}}})();</script><script>(function(){'use strict';function a(a){return'slot'===a.localName}Polymer.FlattenedNodesObserver=class{static getFlattenedNodes(b){return a(b)?(b=b,b.assignedNodes({flatten:!0})):Array.from(b.childNodes).map((b)=>a(b)?(b=b,b.assignedNodes({flatten:!0})):[b]).reduce((c,a)=>c.concat(a),[])}constructor(a,b){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=a,this.callback=b,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){a(this._target)?this._listenSlots([this._target]):(this._listenSlots(this._target.children),window.ShadyDOM?this._shadyChildrenObserver=ShadyDOM.observeChildren(this._target,(a)=>{this._processMutations(a)}):(this._nativeChildrenObserver=new MutationObserver((a)=>{this._processMutations(a)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){a(this._target)?this._unlistenSlots([this._target]):(this._unlistenSlots(this._target.children),window.ShadyDOM&&this._shadyChildrenObserver?(ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,Polymer.Async.microTask.run(()=>this.flush()))}_processMutations(a){this._processSlotMutations(a),this.flush()}_processSlotMutations(a){if(a)for(let b,c=0;c<a.length;c++)b=a[c],b.addedNodes&&this._listenSlots(b.addedNodes),b.removedNodes&&this._unlistenSlots(b.removedNodes)}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let a={target:this._target,addedNodes:[],removedNodes:[]},b=this.constructor.getFlattenedNodes(this._target),c=Polymer.ArraySplice.calculateSplices(b,this._effectiveNodes);for(let b,d=0;d<c.length&&(b=c[d]);d++)for(let c,d=0;d<b.removed.length&&(c=b.removed[d]);d++)a.removedNodes.push(c);for(let d,e=0;e<c.length&&(d=c[e]);e++)for(let c=d.index;c<d.index+d.addedCount;c++)a.addedNodes.push(b[c]);this._effectiveNodes=b;let d=!1;return(a.addedNodes.length||a.removedNodes.length)&&(d=!0,this.callback.call(this._target,a)),d}_listenSlots(b){for(let c,d=0;d<b.length;d++)c=b[d],a(c)&&c.addEventListener('slotchange',this._boundSchedule)}_unlistenSlots(b){for(let c,d=0;d<b.length;d++)c=b[d],a(c)&&c.removeEventListener('slotchange',this._boundSchedule)}}})();</script><script>(function(){'use strict';function a(){const a=!!b.length;for(;b.length;)try{b.shift().flush()}catch(a){setTimeout(()=>{throw a})}return a}let b=[];Polymer.enqueueDebouncer=function(a){b.push(a)},Polymer.flush=function(){let b,c;do b=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),c=a();while(b||c)}})();</script><script>(function(){'use strict';const a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector,d=function(a,c){return b.call(a,c)};class c{constructor(a){this.node=a}observeNodes(a){return new Polymer.FlattenedNodesObserver(this.node,a)}unobserveNodes(a){a.disconnect()}notifyObserver(){}deepContains(a){if(this.node.contains(a))return!0;let b=a,c=a.ownerDocument;for(;b&&b!==c&&b!==this.node;)b=b.parentNode||b.host;return b===this.node}getOwnerRoot(){return this.node.getRootNode()}getDistributedNodes(){return'slot'===this.node.localName?this.node.assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let a=[],b=this.node.assignedSlot;for(;b;)a.push(b),b=b.assignedSlot;return a}importNode(a,b){let c=this.node instanceof Document?this.node:this.node.ownerDocument;return c.importNode(a,b)}getEffectiveChildNodes(){return Polymer.FlattenedNodesObserver.getFlattenedNodes(this.node)}queryDistributedElements(a){let b=this.getEffectiveChildNodes(),e=[];for(let f,c=0,g=b.length;c<g&&(f=b[c]);c++)f.nodeType===Node.ELEMENT_NODE&&d(f,a)&&e.push(f);return e}get activeElement(){let a=this.node;return a._activeElement===void 0?a.activeElement:a._activeElement}}(function(a,b){for(let c,d=0;d<b.length;d++)c=b[d],a[c]=function(){return this.node[c].apply(this.node,arguments)}})(c.prototype,['cloneNode','appendChild','insertBefore','removeChild','replaceChild','setAttribute','removeAttribute','querySelector','querySelectorAll']),function(a,b){for(let c,d=0;d<b.length;d++)c=b[d],Object.defineProperty(a,c,{get:function(){const a=this;return a.node[c]},configurable:!0})}(c.prototype,['parentNode','firstChild','lastChild','nextSibling','previousSibling','firstElementChild','lastElementChild','nextElementSibling','previousElementSibling','childNodes','children','classList']),function(a,b){for(let c,d=0;d<b.length;d++)c=b[d],Object.defineProperty(a,c,{get:function(){const a=this;return a.node[c]},set:function(a){this.node[c]=a},configurable:!0})}(c.prototype,['textContent','innerHTML']);class e{constructor(a){this.event=a}get rootTarget(){return this.event.composedPath()[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}Polymer.DomApi=c,Polymer.dom=function(a){if(a=a||document,!a.__domApi){let b;b=a instanceof Event?new e(a):new c(a),a.__domApi=b}return a.__domApi},Polymer.dom.matchesSelector=d,Polymer.dom.flush=Polymer.flush,Polymer.dom.addDebouncer=Polymer.enqueueDebouncer})();</script><script>(function(){'use strict';let a=window.ShadyCSS;Polymer.LegacyElementMixin=Polymer.dedupingMixin((b)=>{const c=Polymer.DirMixin(Polymer.GestureEventListeners(Polymer.ElementMixin(b))),d={x:'pan-x',y:'pan-y',none:'none',all:'auto'};class e extends c{constructor(){super(),this.root=this,this.isAttached,this.__boundListeners,this._debouncers,this.created()}created(){}connectedCallback(){super.connectedCallback(),this.isAttached=!0,this.attached()}attached(){}disconnectedCallback(){super.disconnectedCallback(),this.isAttached=!1,this.detached()}detached(){}attributeChangedCallback(a,b,c){b!==c&&(super.attributeChangedCallback(a,b,c),this.attributeChanged(a,b,c))}attributeChanged(){}_initializeProperties(){let a=Object.getPrototypeOf(this);a.hasOwnProperty('__hasRegisterFinished')||(a.__hasRegisterFinished=!0,this._registered()),super._initializeProperties()}_registered(){}ready(){this._ensureAttributes(),this._applyListeners(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(a){return this._serializeValue(a)}deserialize(a,b){return this._deserializeValue(a,b)}reflectPropertyToAttribute(a,b,c){this._propertyToAttribute(a,b,c)}serializeValueToAttribute(a,b,c){this._valueToNodeAttribute(c||this,a,b)}extend(a,b){if(!(a&&b))return a||b;let c=Object.getOwnPropertyNames(b);for(let d,e,f=0;f<c.length&&(d=c[f]);f++)e=Object.getOwnPropertyDescriptor(b,d),e&&Object.defineProperty(a,d,e);return a}mixin(a,b){for(let c in b)a[c]=b[c];return a}chainObject(a,b){return a&&b&&a!==b&&(a.__proto__=b),a}instanceTemplate(a){let b=this.constructor._contentForTemplate(a),c=document.importNode(b,!0);return c}fire(a,b,c){c=c||{},b=null===b||void 0===b?{}:b;let d=new Event(a,{bubbles:void 0===c.bubbles||c.bubbles,cancelable:!!c.cancelable,composed:void 0===c.composed||c.composed});d.detail=b;let e=c.node||this;return e.dispatchEvent(d),d}listen(a,b,c){a=a||this;let d=this.__boundListeners||(this.__boundListeners=new WeakMap),e=d.get(a);e||(e={},d.set(a,e));let f=b+c;e[f]||(e[f]=this._addMethodEventListenerToNode(a,b,c,this))}unlisten(a,b,c){a=a||this;let d=this.__boundListeners&&this.__boundListeners.get(a),e=b+c,f=d&&d[e];f&&(this._removeEventListenerFromNode(a,b,f),d[e]=null)}setScrollDirection(a,b){Polymer.Gestures.setTouchAction(b||this,d[a]||'auto')}$$(a){return this.root.querySelector(a)}get domHost(){let a=this.getRootNode();return a instanceof DocumentFragment?a.host:a}distributeContent(){window.ShadyDOM&&this.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){const a=Polymer.dom(this);return a.getEffectiveChildNodes()}queryDistributedElements(a){const b=Polymer.dom(this);return b.queryDistributedElements(a)}getEffectiveChildren(){let a=this.getEffectiveChildNodes();return a.filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let a=this.getEffectiveChildNodes(),b=[];for(let d,c=0;d=a[c];c++)d.nodeType!==Node.COMMENT_NODE&&b.push(d.textContent);return b.join('')}queryEffectiveChildren(a){let b=this.queryDistributedElements(a);return b&&b[0]}queryAllEffectiveChildren(a){return this.queryDistributedElements(a)}getContentChildNodes(a){let b=this.root.querySelector(a||'slot');return b?Polymer.dom(b).getDistributedNodes():[]}getContentChildren(a){let b=this.getContentChildNodes(a).filter(function(a){return a.nodeType===Node.ELEMENT_NODE});return b}isLightDescendant(a){return this!==a&&this.contains(a)&&this.getRootNode()===a.getRootNode()}isLocalDescendant(a){return this.root===a.getRootNode()}scopeSubtree(){}getComputedStyleValue(b){return a.getComputedStyleValue(this,b)}debounce(a,b,c){return this._debouncers=this._debouncers||{},this._debouncers[a]=Polymer.Debouncer.debounce(this._debouncers[a],0<c?Polymer.Async.timeOut.after(c):Polymer.Async.microTask,b.bind(this))}isDebouncerActive(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];return!!(b&&b.isActive())}flushDebouncer(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];b&&b.flush()}cancelDebouncer(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];b&&b.cancel()}async(a,b){return 0<b?Polymer.Async.timeOut.run(a.bind(this),b):~Polymer.Async.microTask.run(a.bind(this))}cancelAsync(a){0>a?Polymer.Async.microTask.cancel(~a):Polymer.Async.timeOut.cancel(a)}create(a,b){let c=document.createElement(a);if(b)if(c.setProperties)c.setProperties(b);else for(let a in b)c[a]=b[a];return c}importHref(a,b,c,d){let e=b?b.bind(this):null,f=c?c.bind(this):null;return Polymer.importHref(a,e,f,d)}elementMatches(a,b){return Polymer.dom.matchesSelector(b||this,a)}toggleAttribute(a,b,c){c=c||this,1==arguments.length&&(b=!c.hasAttribute(a)),b?c.setAttribute(a,''):c.removeAttribute(a)}toggleClass(a,b,c){c=c||this,1==arguments.length&&(b=!c.classList.contains(a)),b?c.classList.add(a):c.classList.remove(a)}transform(a,b){b=b||this,b.style.webkitTransform=a,b.style.transform=a}translate3d(a,b,c,d){d=d||this,this.transform('translate3d('+a+','+b+','+c+')',d)}arrayDelete(a,b){let c;if(!Array.isArray(a)){let d=Polymer.Path.get(this,a);if(c=d.indexOf(b),0<=c)return this.splice(a,c,1)}else if(c=a.indexOf(b),0<=c)return a.splice(c,1);return null}_logger(a,b){Array.isArray(b)&&1===b.length&&(b=b[0]),'log'===a||'warn'===a||'error'===a?console[a](...b):void 0}_log(...a){this._logger('log',a)}_warn(...a){this._logger('warn',a)}_error(...a){this._logger('error',a)}_logf(a,...b){return['[%s::%s]',this.is,a,...b]}}return e.prototype.is='',e})})();</script><script>(function(){'use strict';function a(a,b){if(!a)return b=b,b;b=Polymer.LegacyElementMixin(b),Array.isArray(a)||(a=[a]);let e=b.prototype.behaviors;return a=d(a,null,e),b=c(a,b),e&&(a=e.concat(a)),b.prototype.behaviors=a,b}function c(a,d){for(let f,b=0;b<a.length;b++)f=a[b],f&&(d=Array.isArray(f)?c(f,d):e(f,d));return d}function d(a,c,e){c=c||[];for(let f,b=a.length-1;0<=b;b--)f=a[b],f?Array.isArray(f)?d(f,c):0>c.indexOf(f)&&(!e||0>e.indexOf(f))&&c.unshift(f):console.warn('behavior is null, check for missing or 404 import');return c}function e(c,a){class d extends a{static get properties(){return c.properties}static get observers(){return c.observers}static get template(){return c._template||Polymer.DomModule&&Polymer.DomModule.import(this.is,'template')||a.template||this.prototype._template||null}created(){super.created(),c.created&&c.created.call(this)}_registered(){super._registered(),c.beforeRegister&&c.beforeRegister.call(Object.getPrototypeOf(this)),c.registered&&c.registered.call(Object.getPrototypeOf(this))}_applyListeners(){if(super._applyListeners(),c.listeners)for(let a in c.listeners)this._addMethodEventListenerToNode(this,a,c.listeners[a])}_ensureAttributes(){if(c.hostAttributes)for(let b in c.hostAttributes)this._ensureAttribute(b,c.hostAttributes[b]);super._ensureAttributes()}ready(){super.ready(),c.ready&&c.ready.call(this)}attached(){super.attached(),c.attached&&c.attached.call(this)}detached(){super.detached(),c.detached&&c.detached.call(this)}attributeChanged(a,b,d){super.attributeChanged(a,b,d),c.attributeChanged&&c.attributeChanged.call(this,a,b,d)}}for(let e in d.generatedFrom=c,c)if(!(e in b)){let a=Object.getOwnPropertyDescriptor(c,e);a&&Object.defineProperty(d.prototype,e,a)}return d}let b={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0};Polymer.Class=function(b){b||console.warn('Polymer.Class requires `info` argument');let c=e(b,b.behaviors?a(b.behaviors,HTMLElement):Polymer.LegacyElementMixin(HTMLElement));return c.is=b.is,c},Polymer.mixinBehaviors=a})();</script><script>(function(){'use strict';window.Polymer._polymerFn=function(a){let b;return b='function'===typeof a?a:Polymer.Class(a),customElements.define(b.is,b),b}})();</script><script>(function(){'use strict';function a(a,b,c,d,e){let f;e&&(f='object'===typeof c&&null!==c,f&&(d=a.__dataTemp[b]));let g=d!==c&&(d===d||c===c);return f&&g&&(a.__dataTemp[b]=c),g}Polymer.MutableData=Polymer.dedupingMixin((b)=>{class c extends b{_shouldPropertyChange(b,c,d){return a(this,b,c,d,!0)}}return c.prototype.mutableData=!1,c}),Polymer.OptionalMutableData=Polymer.dedupingMixin((b)=>{class c extends b{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(b,c,d){return a(this,b,c,d,this.mutableData)}}return c}),Polymer.MutableData._mutablePropertyChange=a})();</script><script>(function(){'use strict';function a(){return j}function b(a,b){j=a,Object.setPrototypeOf(a,b.prototype),new b,j=null}function c(a){let b=a.__dataHost;return b&&b._methodHost||b}function d(a,b,c){let d=c.mutableData?o:n,e=class extends d{};return e.prototype.__templatizeOptions=c,e.prototype._bindTemplate(a),g(e,a,b,c),e}function e(a,c,d){let e=d.forwardHostProp;if(e){let g=c.templatizeTemplateClass;if(!g){let a=d.mutableData?l:k;g=c.templatizeTemplateClass=class extends a{};let b=c.hostProps;for(let a in b)g.prototype._addPropertyEffect('_host_'+a,g.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:f(a,e)}),g.prototype._createNotifyingProperty('_host_'+a)}b(a,g),a.__dataProto&&Object.assign(a.__data,a.__dataProto),a.__dataTemp={},a.__dataPending=null,a.__dataOld=null,a._enableProperties()}}function f(a,b){return function(a,c,d){b.call(a.__templatizeOwner,c.substring(6),d[c])}}function g(a,b,c,d){let e=c.hostProps||{};for(let f in d.instanceProps){delete e[f];let b=d.notifyInstanceProp;b&&a.prototype._addPropertyEffect(f,a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:h(f,b)})}if(d.forwardHostProp&&b.__dataHost)for(let b in e)a.prototype._addPropertyEffect(b,a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:i()})}function h(a,b){return function(a,c,d){b.call(a.__templatizeOwner,a,c,d[c])}}function i(){return function(a,b,c){a.__dataHost._setPendingPropertyOrPath('_host_'+b,c[b],!0,!0)}}let j=null;a.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:a,writable:!0}});const k=Polymer.PropertyEffects(a),l=Polymer.MutableData(k),m=Polymer.PropertyEffects(class{});class n extends m{constructor(a){super(),this._configureProperties(a),this.root=this._stampTemplate(this.__dataHost);let b=this.children=[];for(let c=this.root.firstChild;c;c=c.nextSibling)b.push(c),c.__templatizeInstance=this;this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let c=this.__templatizeOptions;(a&&c.instanceProps||!c.instanceProps)&&this._enableProperties()}_configureProperties(a){let b=this.__templatizeOptions;if(a)for(let c in b.instanceProps)c in a&&this._setPendingProperty(c,a[c]);for(let b in this.__hostProps)this._setPendingProperty(b,this.__dataHost['_host_'+b])}forwardHostProp(a,b){this._setPendingPropertyOrPath(a,b,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(a,b,c){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(a,b,(a)=>{a.model=this,c(a)});else{let d=this.__dataHost.__dataHost;d&&d._addEventListenerToNode(a,b,c)}}_showHideChildren(a){let b=this.children;for(let c,d=0;d<b.length;d++)c=b[d],!!a!=!!c.__hideTemplateChildren__&&(c.nodeType===Node.TEXT_NODE?a?(c.__polymerTextContent__=c.textContent,c.textContent=''):c.textContent=c.__polymerTextContent__:c.style&&(a?(c.__polymerDisplay__=c.style.display,c.style.display='none'):c.style.display=c.__polymerDisplay__)),c.__hideTemplateChildren__=a,c._showHideChildren&&c._showHideChildren(a)}_setUnmanagedPropertyToNode(a,b,c){a.__hideTemplateChildren__&&a.nodeType==Node.TEXT_NODE&&'textContent'==b?a.__polymerTextContent__=c:super._setUnmanagedPropertyToNode(a,b,c)}get parentModel(){let a=this.__parentModel;if(!a){let b;a=this;do a=a.__dataHost.__dataHost;while((b=a.__templatizeOptions)&&!b.parentModel);this.__parentModel=a}return a}}n.prototype.__dataHost,n.prototype.__templatizeOptions,n.prototype._methodHost,n.prototype.__templatizeOwner,n.prototype.__hostProps;const o=Polymer.MutableData(n),p={templatize(a,b,f){if(f=f||{},a.__templatizeOwner)throw new Error('A <template> can only be templatized once');a.__templatizeOwner=b;let g=b.constructor._parseTemplate(a),h=g.templatizeInstanceClass;h||(h=d(a,g,f),g.templatizeInstanceClass=h),e(a,g,f);let i=class extends h{};return i.prototype._methodHost=c(a),i.prototype.__dataHost=a,i.prototype.__templatizeOwner=b,i.prototype.__hostProps=g.hostProps,i=i,i},modelForElement(a,b){for(let c;b;)if(!(c=b.__templatizeInstance))b=b.parentNode;else if(c.__dataHost!=a)b=c.__dataHost;else return c;return null}};Polymer.Templatize=p,Polymer.TemplateInstanceBase=n})();</script><script>(function(){'use strict';Polymer.TemplateInstanceBase;Polymer.Templatizer={templatize(a,b){this._templatizerTemplate=a,this.ctor=Polymer.Templatize.templatize(a,this,{mutableData:!!b,parentModel:this._parentModel,instanceProps:this._instanceProps,forwardHostProp:this._forwardHostPropV2,notifyInstanceProp:this._notifyInstancePropV2})},stamp(a){return new this.ctor(a)},modelForElement(a){return Polymer.Templatize.modelForElement(this._templatizerTemplate,a)}}})();</script><script>(function(){'use strict';const a=Polymer.GestureEventListeners(Polymer.OptionalMutableData(Polymer.PropertyEffects(HTMLElement)));class b extends a{static get observedAttributes(){return['mutable-data']}constructor(){super(),this.root=null,this.$=null,this.__children=null}attributeChangedCallback(){this.mutableData=!0}connectedCallback(){this.style.display='none',this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){this.parentNode.insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let a=0;a<this.__children.length;a++)this.root.appendChild(this.__children[a])}render(){let a;if(!this.__children){if(a=a||this.querySelector('template'),!a){let b=new MutationObserver(()=>{if(a=this.querySelector('template'),a)b.disconnect(),this.render();else throw new Error('dom-bind requires a <template> child')});return void b.observe(this,{childList:!0})}this.root=this._stampTemplate(a),this.$=this.root.$,this.__children=[];for(let a=this.root.firstChild;a;a=a.nextSibling)this.__children[this.__children.length]=a;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0}))}}customElements.define('dom-bind',b),Polymer.DomBind=b})();</script><script>(function(){'use strict';const a=Polymer.ElementMixin(HTMLElement);Polymer.Element=a})();</script><script>(function(){'use strict';Polymer.TemplateInstanceBase;const a=Polymer.OptionalMutableData(Polymer.Element);class b extends a{static get is(){return'dom-repeat'}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},itemsIndexAs:{type:String,value:'itemsIndex'},sort:{type:Function,observer:'__sortChanged'},filter:{type:Function,observer:'__filterChanged'},observe:{type:String,observer:'__observeChanged'},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:'__initializeChunking'},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:'__computeFrameTime(targetFramerate)'}}}static get observers(){return['__itemsChanged(items.*)']}constructor(){super(),this.__instances=[],this.__limit=Infinity,this.__pool=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__lastChunkTime=null,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let a=0;a<this.__instances.length;a++)this.__detachInstance(a)}connectedCallback(){if(super.connectedCallback(),this.style.display='none',this.__isDetached){this.__isDetached=!1;let a=this.parentNode;for(let b=0;b<this.__instances.length;b++)this.__attachInstance(b,a)}}__ensureTemplatized(){if(!this.__ctor){let a=this.template=this.querySelector('template');if(!a){let a=new MutationObserver(()=>{if(this.querySelector('template'))a.disconnect(),this.__render();else throw new Error('dom-repeat requires a <template> child')});return a.observe(this,{childList:!0}),!1}let b={};b[this.as]=!0,b[this.indexAs]=!0,b[this.itemsIndexAs]=!0,this.__ctor=Polymer.Templatize.templatize(a,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:b,forwardHostProp:function(a,b){let c=this.__instances;for(let d,e=0;e<c.length&&(d=c[e]);e++)d.forwardHostProp(a,b)},notifyInstanceProp:function(a,b,c){if(Polymer.Path.matches(this.as,b)){let d=a[this.itemsIndexAs];b==this.as&&(this.items[d]=c);let e=Polymer.Path.translate(this.as,'items.'+d,b);this.notifyPath(e,c)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__sortChanged(a){let b=this.__getMethodHost();this.__sortFn=a&&('function'==typeof a?a:function(){return b[a].apply(b,arguments)}),this.items&&this.__debounceRender(this.__render)}__filterChanged(a){let b=this.__getMethodHost();this.__filterFn=a&&('function'==typeof a?a:function(){return b[a].apply(b,arguments)}),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(a){return Math.ceil(1e3/a)}__initializeChunking(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}__tryRenderChunk(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}__requestRenderChunk(){requestAnimationFrame(()=>this.__renderChunk())}__renderChunk(){let a=performance.now(),b=this._targetFrameTime/(a-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*b)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=a,this.__debounceRender(this.__render)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace('.*','.').split(' ')}__itemsChanged(a){this.items&&!Array.isArray(this.items)&&console.warn('dom-repeat expected array for `items`, found',this.items),this.__handleItemPath(a.path,a.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}__handleObservedPaths(a){if(this.__sortFn||this.__filterFn)if(!a)this.__debounceRender(this.__render,this.delay);else if(this.__observePaths){a=a.substring(a.indexOf('.')+1);let b=this.__observePaths;for(let c=0;c<b.length;c++)0===a.indexOf(b[c])&&this.__debounceRender(this.__render,this.delay)}}__debounceRender(a,b=0){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,0<b?Polymer.Async.timeOut.after(b):Polymer.Async.microTask,a.bind(this)),Polymer.enqueueDebouncer(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Polymer.flush()}__render(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0})),this.__tryRenderChunk())}__applyFullRefresh(){let c=this.items||[],a=Array(c.length);for(let b=0;b<c.length;b++)a[b]=b;this.__filterFn&&(a=a.filter((a,b,d)=>this.__filterFn(c[a],b,d))),this.__sortFn&&a.sort((d,a)=>this.__sortFn(c[d],c[a]));const b=this.__itemsIdxToInstIdx={};let d=0;for(const e=Math.min(a.length,this.__limit);d<e;d++){let e=this.__instances[d],f=a[d],g=c[f];b[f]=d,e&&d<this.__limit?(e._setPendingProperty(this.as,g),e._setPendingProperty(this.indexAs,d),e._setPendingProperty(this.itemsIndexAs,f),e._flushProperties()):this.__insertInstance(g,d,f)}for(let a=this.__instances.length-1;a>=d;a--)this.__detachAndRemoveInstance(a)}__detachInstance(a){let b=this.__instances[a];for(let c,d=0;d<b.children.length;d++)c=b.children[d],b.root.appendChild(c);return b}__attachInstance(a,b){let c=this.__instances[a];b.insertBefore(c.root,this)}__detachAndRemoveInstance(a){let b=this.__detachInstance(a);b&&this.__pool.push(b),this.__instances.splice(a,1)}__stampInstance(a,b,c){let d={};return d[this.as]=a,d[this.indexAs]=b,d[this.itemsIndexAs]=c,new this.__ctor(d)}__insertInstance(a,b,c){let d=this.__pool.pop();d?(d._setPendingProperty(this.as,a),d._setPendingProperty(this.indexAs,b),d._setPendingProperty(this.itemsIndexAs,c),d._flushProperties()):d=this.__stampInstance(a,b,c);let e=this.__instances[b+1],f=e?e.children[0]:this;return this.parentNode.insertBefore(d.root,f),this.__instances[b]=d,d}_showHideChildren(a){for(let b=0;b<this.__instances.length;b++)this.__instances[b]._showHideChildren(a)}__handleItemPath(a,b){let c=a.slice(6),d=c.indexOf('.'),e=0>d?c:c.substring(0,d);if(e==parseInt(e,10)){let a=0>d?'':c.substring(d+1);this.__handleObservedPaths(a);let f=this.__itemsIdxToInstIdx[e],g=this.__instances[f];if(g){let c=this.as+(a?'.'+a:'');g._setPendingPropertyOrPath(c,b,!1,!0),g._flushProperties()}return!0}}itemForElement(a){let b=this.modelForElement(a);return b&&b[this.as]}indexForElement(a){let b=this.modelForElement(a);return b&&b[this.indexAs]}modelForElement(a){return Polymer.Templatize.modelForElement(this.template,a)}}customElements.define(b.is,b),Polymer.DomRepeat=b})();</script><script>(function(){'use strict';class a extends Polymer.Element{static get is(){return'dom-if'}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:'__debounceRender'},restamp:{type:Boolean,observer:'__debounceRender'}}}constructor(){super(),this.__renderDebouncer=null,this.__invalidProps=null,this.__instance=null,this._lastIf=!1,this.__ctor=null}__debounceRender(){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,Polymer.Async.microTask,()=>this.__render()),Polymer.enqueueDebouncer(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback(),this.parentNode&&(this.parentNode.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||this.parentNode.host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),this.style.display='none',this.if&&this.__debounceRender()}render(){Polymer.flush()}__render(){if(this.if){if(!this.__ensureInstance())return;this._showHideChildren()}else this.restamp&&this.__teardownInstance();!this.restamp&&this.__instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0})),this._lastIf=this.if)}__ensureInstance(){let a=this.parentNode;if(a){if(!this.__ctor){let a=this.querySelector('template');if(!a){let a=new MutationObserver(()=>{if(this.querySelector('template'))a.disconnect(),this.__render();else throw new Error('dom-if requires a <template> child')});return a.observe(this,{childList:!0}),!1}this.__ctor=Polymer.Templatize.templatize(a,this,{mutableData:!0,forwardHostProp:function(a,b){this.__instance&&(this.if?this.__instance.forwardHostProp(a,b):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Polymer.Path.root(a)]=!0))}})}if(!this.__instance)this.__instance=new this.__ctor,a.insertBefore(this.__instance.root,this);else{this.__syncHostProperties();let b=this.__instance.children;if(b&&b.length){let c=this.previousSibling;if(c!==b[b.length-1])for(let c,d=0;d<b.length&&(c=b[d]);d++)a.insertBefore(c,this)}}}return!0}__syncHostProperties(){let a=this.__invalidProps;if(a){for(let b in a)this.__instance._setPendingProperty(b,this.__dataHost[b]);this.__invalidProps=null,this.__instance._flushProperties()}}__teardownInstance(){if(this.__instance){let a=this.__instance.children;if(a&&a.length){let b=a[0].parentNode;for(let c,d=0;d<a.length&&(c=a[d]);d++)b.removeChild(c)}this.__instance=null,this.__invalidProps=null}}_showHideChildren(){let a=this.__hideTemplateChildren__||!this.if;this.__instance&&this.__instance._showHideChildren(a)}}customElements.define(a.is,a),Polymer.DomIf=a})();</script><script>(function(){'use strict';let a=Polymer.dedupingMixin((a)=>{let b=Polymer.ElementMixin(a);class c extends b{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return['__updateSelection(multi, items.*)']}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(a,b){let c=b.path;if('items'==c){let c=b.base||[],d=this.__lastItems,e=this.__lastMulti;if(a!==e&&this.clearSelection(),d){let a=Polymer.ArraySplice.calculateSplices(c,d);this.__applySplices(a)}this.__lastItems=c,this.__lastMulti=a}else if('items.splices'==b.path)this.__applySplices(b.value.indexSplices);else{let a=c.slice(6),b=parseInt(a,10);0>a.indexOf('.')&&a==b&&this.__deselectChangedIdx(b)}}__applySplices(a){let b=this.__selectedMap;for(let c,d=0;d<a.length;d++){c=a[d],b.forEach((a,d)=>{a<c.index||(a>=c.index+c.removed.length?b.set(d,a+c.addedCount-c.removed.length):b.set(d,-1))});for(let a,d=0;d<c.addedCount;d++)a=c.index+d,b.has(this.items[a])&&b.set(this.items[a],a)}this.__updateLinks();let c=0;b.forEach((a,d)=>{0>a?(this.multi?this.splice('selected',c,1):this.selected=this.selectedItem=null,b.delete(d)):c++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let a=0;this.__selectedMap.forEach((b)=>{0<=b&&this.linkPaths('items.'+b,'selected.'+a++)})}else this.__selectedMap.forEach((a)=>{this.linkPaths('selected','items.'+a),this.linkPaths('selectedItem','items.'+a)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(a){return this.__selectedMap.has(a)}isIndexSelected(a){return this.isSelected(this.items[a])}__deselectChangedIdx(a){let b=this.__selectedIndexForItemIndex(a);if(0<=b){let a=0;this.__selectedMap.forEach((c,d)=>{b==a++&&this.deselect(d)})}}__selectedIndexForItemIndex(a){let b=this.__dataLinkedPaths['items.'+a];if(b)return parseInt(b.slice(9),10)}deselect(a){let b=this.__selectedMap.get(a);if(0<=b){this.__selectedMap.delete(a);let c;this.multi&&(c=this.__selectedIndexForItemIndex(b)),this.__updateLinks(),this.multi?this.splice('selected',c,1):this.selected=this.selectedItem=null}}deselectIndex(a){this.deselect(this.items[a])}select(a){this.selectIndex(this.items.indexOf(a))}selectIndex(a){let b=this.items[a];this.isSelected(b)?this.toggle&&this.deselectIndex(a):(!this.multi&&this.__selectedMap.clear(),this.__selectedMap.set(b,a),this.__updateLinks(),this.multi?this.push('selected',b):this.selected=this.selectedItem=b)}}return c});Polymer.ArraySelectorMixin=a;let b=a(Polymer.Element);class c extends b{static get is(){return'array-selector'}}customElements.define(c.is,c),Polymer.ArraySelector=c})();</script><script>(function(){"use strict";function a(b){i=b&&b.shimcssproperties?!1:f||!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")}function d(c,a){for(var b in a)null===b?c.style.removeProperty(b):c.style.setProperty(b,a[b])}function b(){var b=o;requestAnimationFrame(function(){l?l(b):(n||(n=new Promise(function(b){k=b}),"complete"===document.readyState?k():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&k()})),n.then(function(){b&&b()}))})}function e(){this.customStyles=[],this.enqueued=!1}function g(c){!c.enqueued&&o&&(c.enqueued=!0,b())}var i,f=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?i=window.ShadyCSS.nativeCss:window.ShadyCSS?(a(window.ShadyCSS),window.ShadyCSS=void 0):a(window.WebComponents&&window.WebComponents.flags);var j=i;var k,n=null,l=window.HTMLImports&&window.HTMLImports.whenReady||null;var m=null,o=null;e.prototype.c=function(b){b.__seenByShadyCSS||(b.__seenByShadyCSS=!0,this.customStyles.push(b),g(this))},e.prototype.b=function(c){if(c.__shadyCSSCachedStyle)return c.__shadyCSSCachedStyle;var a;return a=c.getStyle?c.getStyle():c,a},e.prototype.a=function(){for(var c,d=this.customStyles,a=0;a<d.length;a++)if(c=d[a],!c.__shadyCSSCachedStyle){var b=this.b(c);b&&(b=b.__appliedElement||b,m&&m(b),c.__shadyCSSCachedStyle=b)}return d},e.prototype.addCustomStyle=e.prototype.c,e.prototype.getStyleForCustomStyle=e.prototype.b,e.prototype.processStyles=e.prototype.a,Object.defineProperties(e.prototype,{transformCallback:{get:function(){return m},set:function(b){m=b}},validateCallback:{get:function(){return o},set:function(c){var a=!1;o||(a=!0),o=c,a&&g(this)}}});var p=new e;window.ShadyCSS||(window.ShadyCSS={prepareTemplate:function(){},styleSubtree:function(c,a){p.a(),d(c,a)},styleElement:function(){p.a()},styleDocument:function(b){p.a(),d(document.body,b)},getComputedStyleValue:function(c,a){return(c=window.getComputedStyle(c).getPropertyValue(a))?c.trim():""},nativeCss:j,nativeShadow:f}),window.ShadyCSS.CustomStyleInterface=p}).call(this);</script><script>(function(){'use strict';const a='include',b=window.ShadyCSS.CustomStyleInterface;class c extends HTMLElement{constructor(){super(),this._style=null,b.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const b=this.querySelector('style');if(!b)return null;this._style=b;const c=b.getAttribute(a);return c&&(b.removeAttribute(a),b.textContent=Polymer.StyleGather.cssFromModules(c)+b.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define('custom-style',c),Polymer.CustomStyle=c})();</script><script>(function(){'use strict';let a;(()=>{a=Polymer.MutableData._mutablePropertyChange})(),Polymer.MutableDataBehavior={_shouldPropertyChange(b,c,d){return a(this,b,c,d,!0)}},Polymer.OptionalMutableDataBehavior={properties:{mutableData:Boolean},_shouldPropertyChange(b,c,d){return a(this,b,c,d,this.mutableData)}}})();</script><script>Polymer.Base=Polymer.LegacyElementMixin(HTMLElement).prototype;</script><script>(function(){'use strict';function a(a,f){if(void 0===b){b=!1;try{var g=new URL('b','http://a');g.pathname='c%20d',b='http://a/c%20d'===g.href,b=b&&'http://www.google.com/?foo%20bar'===new URL('http://www.google.com/?foo bar').href}catch(a){}}return b?new URL(a,f):(c||(c=document.implementation.createHTMLDocument('url'),d=c.createElement('base'),c.head.appendChild(d),e=c.createElement('a')),d.href=f,e.href=a.replace(/ /g,'%20'),e)}var b,c,d,e;Polymer({is:'iron-location',properties:{path:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.pathname)}},query:{type:String,notify:!0,value:function(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.hash.slice(1))}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:''},_urlSpaceRegExp:{computed:'_makeRegExp(urlSpaceRegex)'},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:['_updateUrl(path, query, hash)'],created:function(){this.__location=window.location},attached:function(){this.listen(window,'hashchange','_hashChanged'),this.listen(window,'location-changed','_urlChanged'),this.listen(window,'popstate','_urlChanged'),this.listen(document.body,'click','_globalOnClick'),this._lastChangedAt=window.performance.now()-(this.dwellTime-200),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,'hashchange','_hashChanged'),this.unlisten(window,'location-changed','_urlChanged'),this.unlisten(window,'popstate','_urlChanged'),this.unlisten(document.body,'click','_globalOnClick'),this._initialized=!1},_hashChanged:function(){this.hash=window.decodeURIComponent(this.__location.hash.substring(1))},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.decodeURIComponent(this.__location.pathname),this.query=this.__location.search.substring(1),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var a=window.encodeURI(this.path).replace(/\#/g,'%23').replace(/\?/g,'%3F'),b='';this.query&&(b='?'+this.query.replace(/\#/g,'%23'));var c='';return this.hash&&(c='#'+window.encodeURI(this.hash)),a+b+c},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized&&(this.path!==window.decodeURIComponent(this.__location.pathname)||this.query!==this.__location.search.substring(1)||this.hash!==window.decodeURIComponent(this.__location.hash.substring(1)))){var b=this._getUrl(),c=a(b,this.__location.protocol+'//'+this.__location.host).href,d=window.performance.now(),e=this._lastChangedAt+this.dwellTime>d;this._lastChangedAt=d,e?window.history.replaceState({},'',c):window.history.pushState({},'',c),this.fire('location-changed',{},{node:window})}},_globalOnClick:function(a){if(!a.defaultPrevented){var b=this._getSameOriginLinkHref(a);b&&(a.preventDefault(),b===this.__location.href||(window.history.pushState({},'',b),this.fire('location-changed',{},{node:window})))}},_getSameOriginLinkHref:function(b){if(0!==b.button)return null;if(b.metaKey||b.ctrlKey)return null;for(var c,d=Polymer.dom(b).path,e=null,f=0;f<d.length;f++)if(c=d[f],'A'===c.tagName&&c.href){e=c;break}if(!e)return null;if('_blank'===e.target)return null;if(('_top'===e.target||'_parent'===e.target)&&window.top!==window)return null;if(e.download)return null;var g,h=e.href;g=null==document.baseURI?a(h):a(h,document.baseURI);var i=this.__location.origin?this.__location.origin:this.__location.protocol+'//'+this.__location.host;var j;if(g.origin)j=g.origin;else{var k=g.host,l=g.port,m=g.protocol;('https:'===m&&'443'===l||'http:'===m&&'80'===l)&&(k=g.hostname),j=m+'//'+k}if(j!==i)return null;var n=g.pathname+g.search+g.hash;if('/'!==n[0]&&(n='/'+n),this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(n))return null;var o=a(n,this.__location.href).href;return o},_makeRegExp:function(a){return RegExp(a)}})})();</script><script>'use strict';Polymer({is:'iron-query-params',properties:{paramsString:{type:String,notify:!0,observer:'paramsStringChanged'},paramsObject:{type:Object,notify:!0,value:function(){return{}}},_dontReact:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:['paramsObjectChanged(paramsObject.*)'],paramsStringChanged:function(){this._dontReact=!0,this.paramsObject=this._decodeParams(this.paramsString),this._dontReact=!1},paramsObjectChanged:function(){this._dontReact||(this.paramsString=this._encodeParams(this.paramsObject).replace(/%3F/g,'?').replace(/%2F/g,'/').replace(/'/g,'%27'))},_encodeParams:function(a){var b=[];for(var c in a){var d=a[c];''===d?b.push(encodeURIComponent(c)):d&&b.push(encodeURIComponent(c)+'='+encodeURIComponent(d.toString()))}return b.join('&')},_decodeParams:function(a){var b={};a=(a||'').replace(/\+/g,'%20');for(var c,d=a.split('&'),e=0;e<d.length;e++)c=d[e].split('='),c[0]&&(b[decodeURIComponent(c[0])]=decodeURIComponent(c[1]||''));return b}});</script><script>(function(){'use strict';Polymer.AppRouteConverterBehavior={properties:{route:{type:Object,notify:!0},queryParams:{type:Object,notify:!0},path:{type:String,notify:!0}},observers:['_locationChanged(path, queryParams)','_routeChanged(route.prefix, route.path)','_routeQueryParamsChanged(route.__queryParams)'],created:function(){this.linkPaths('route.__queryParams','queryParams'),this.linkPaths('queryParams','route.__queryParams')},_locationChanged:function(){this.route&&this.route.path===this.path&&this.queryParams===this.route.__queryParams||(this.route={prefix:'',path:this.path,__queryParams:this.queryParams})},_routeChanged:function(){this.route&&(this.path=this.route.prefix+this.route.path)},_routeQueryParamsChanged:function(a){this.route&&(this.queryParams=a)}}})();</script><dom-module id="app-location" assetpath="bower_components/app-route/"><template><iron-query-params params-string="{{__query}}" params-object="{{queryParams}}"></iron-query-params><iron-location path="{{__path}}" query="{{__query}}" hash="{{__hash}}" url-space-regex="{{urlSpaceRegex}}"></iron-location></template><script>(function(){'use strict';Polymer({is:'app-location',properties:{route:{type:Object,notify:!0},useHashAsPath:{type:Boolean,value:!1},urlSpaceRegex:{type:String,notify:!0},__queryParams:{type:Object},__path:{type:String},__query:{type:String},__hash:{type:String},path:{type:String,observer:'__onPathChanged'},_isReady:{type:Boolean}},behaviors:[Polymer.AppRouteConverterBehavior],observers:['__computeRoutePath(useHashAsPath, __hash, __path)'],ready:function(){this._isReady=!0},__computeRoutePath:function(){this.path=this.useHashAsPath?this.__hash:this.__path},__onPathChanged:function(){this._isReady&&(this.useHashAsPath?this.__hash=this.path:this.__path=this.path)}})})();</script></dom-module><script>(function(){'use strict';Polymer({is:'app-route',properties:{route:{type:Object,notify:!0},pattern:{type:String},data:{type:Object,value:function(){return{}},notify:!0},queryParams:{type:Object,value:function(){return{}},notify:!0},tail:{type:Object,value:function(){return{path:null,prefix:null,__queryParams:null}},notify:!0},active:{type:Boolean,notify:!0,readOnly:!0},_queryParamsUpdating:{type:Boolean,value:!1},_matched:{type:String,value:''}},observers:['__tryToMatch(route.path, pattern)','__updatePathOnDataChange(data.*)','__tailPathChanged(tail.path)','__routeQueryParamsChanged(route.__queryParams)','__tailQueryParamsChanged(tail.__queryParams)','__queryParamsChanged(queryParams.*)'],created:function(){this.linkPaths('route.__queryParams','tail.__queryParams'),this.linkPaths('tail.__queryParams','route.__queryParams')},__routeQueryParamsChanged:function(a){if(a&&this.tail){if(this.tail.__queryParams!==a&&this.set('tail.__queryParams',a),!this.active||this._queryParamsUpdating)return;var b={},c=!1;for(var d in a)b[d]=a[d],(c||!this.queryParams||a[d]!==this.queryParams[d])&&(c=!0);for(var d in this.queryParams)if(c||!(d in a)){c=!0;break}if(!c)return;this._queryParamsUpdating=!0,this.set('queryParams',b),this._queryParamsUpdating=!1}},__tailQueryParamsChanged:function(a){a&&this.route&&this.route.__queryParams!=a&&this.set('route.__queryParams',a)},__queryParamsChanged:function(a){!this.active||this._queryParamsUpdating||this.set('route.__'+a.path,a.value)},__resetProperties:function(){this._setActive(!1),this._matched=null},__tryToMatch:function(){if(this.route){var a=this.route.path,b=this.pattern;if(b){if(!a)return void this.__resetProperties();for(var c,d,e=a.split('/'),f=b.split('/'),g=[],h={},j=0;j<f.length&&(c=f[j],c||''===c);j++){if(d=e.shift(),!d&&''!==d)return void this.__resetProperties();if(g.push(d),':'==c.charAt(0))h[c.slice(1)]=d;else if(c!==d)return void this.__resetProperties()}this._matched=g.join('/');var i={};this.active||(i.active=!0);var k=this.route.prefix+this._matched,l=e.join('/');for(var m in 0<e.length&&(l='/'+l),this.tail&&this.tail.prefix===k&&this.tail.path===l||(i.tail={prefix:k,path:l,__queryParams:this.route.__queryParams}),i.data=h,this._dataInUrl={},h)this._dataInUrl[m]=h[m];this.setProperties?this.setProperties(i,!0):this.__setMulti(i)}}},__tailPathChanged:function(a){if(this.active){var b=a,c=this._matched;b&&('/'!==b.charAt(0)&&(b='/'+b),c+=b),this.set('route.path',c)}},__updatePathOnDataChange:function(){if(this.route&&this.active){var a=this.__getLink({}),b=this.__getLink(this._dataInUrl);a===b||this.set('route.path',a)}},__getLink:function(a){var b={tail:null};for(var c in this.data)b[c]=this.data[c];for(var c in a)b[c]=a[c];var d=this.pattern.split('/'),e=d.map(function(a){return':'==a[0]&&(a=b[a.slice(1)]),a},this);return b.tail&&b.tail.path&&(0<e.length&&'/'===b.tail.path.charAt(0)?e.push(b.tail.path.slice(1)):e.push(b.tail.path)),e.join('/')},__setMulti:function(a){for(var b in a)this._propertySetter(b,a[b]);a.data!==void 0&&(this._pathEffector('data',this.data),this._notifyChange('data')),a.active!==void 0&&(this._pathEffector('active',this.active),this._notifyChange('active')),a.tail!==void 0&&(this._pathEffector('tail',this.tail),this._notifyChange('tail'))}})})();</script><script>Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:'_parentResizableChanged'},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":'_onIronRequestResizeNotifications'},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):window.removeEventListener('resize',this._boundNotifyResize),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this),this._fireResize())},assignParentResizable:function(a){this._parentResizable=a},stopResizeNotificationsFor:function(a){var b=this._interestedResizables.indexOf(a);-1<b&&(this._interestedResizables.splice(b,1),this.unlisten(a,'iron-resize','_onDescendantIronResize'))},resizerShouldNotify:function(){return!0},_onDescendantIronResize:function(a){return this._notifyingDescendant?void a.stopPropagation():void(!Polymer.Settings.useShadow&&this._fireResize())},_fireResize:function(){this.fire('iron-resize',null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(a){var b=Polymer.dom(a).rootTarget;b===this||(-1===this._interestedResizables.indexOf(b)&&(this._interestedResizables.push(b),this.listen(b,'iron-resize','_onDescendantIronResize')),b.assignParentResizable(this),this._notifyDescendant(b),a.stopPropagation())},_parentResizableChanged:function(a){a&&window.removeEventListener('resize',this._boundNotifyResize)},_notifyDescendant:function(a){this.isAttached&&(this._notifyingDescendant=!0,a.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if('loading'===document.readyState){var a=this._requestResizeNotifications.bind(this);document.addEventListener('readystatechange',function b(){document.removeEventListener('readystatechange',b),a()})}else this.fire('iron-request-resize-notifications',null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable||(window.addEventListener('resize',this._boundNotifyResize),this.notifyResize())}};</script><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&this.setItemSelected(b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},setItemSelected:function(a,b){if(null!=a&&b!==this.isSelected(a)){if(b)this.selection.push(a);else{var c=this.selection.indexOf(a);0<=c&&this.selection.splice(c,1)}this.selectCallback&&this.selectCallback(a,b)}},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(this.setItemSelected(this.get(),!1),this.setItemSelected(a,!0))},toggle:function(a){this.setItemSelected(a,!this.isSelected(a))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(a){return this.items?this.items.indexOf(a):-1},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,b=(+this._valueToIndex(this.selected)-1+a)%a;this.selected=this._indexToValue(b)},selectNext:function(){var a=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,'_activateHandler')},_removeListener:function(a){this.unlisten(this,a,'_activateHandler')},_activateEventChanged:function(a,b){this._removeListener(b),this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||'*');a=Array.prototype.filter.call(a,this._bindFilterItem),this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var a=this._valueToItem(this.selected);a?this._selection.select(a):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected){for(var b,c=0;b=this.items[c];c++)if(this._valueForItem(b)==a)return c;}else return+a},_indexToValue:function(a){if(this.attrForSelected){var b=this.items[a];if(b)return this._valueForItem(b)}else return a},_valueForItem:function(a){if(!a)return null;if(!this.attrForSelected){var b=this.indexOf(a);return-1===b?null:b}var c=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return c==void 0?a.getAttribute(this.attrForSelected):c},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a),this._selectionChange(),this.fire('iron-'+(b?'select':'deselect'),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(a){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',a,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){for(var b=a.target,c=this.items;b&&b!=this;){var d=c.indexOf(b);if(0<=d){var e=this._indexToValue(d);return void this._itemActivate(e,b)}b=b.parentNode}},_itemActivate:function(a,b){this.fire('iron-activate',{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};</script><dom-module id="iron-pages" assetpath="bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(slot):not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><style>[hidden]{display:none !important;}</style><custom-style><style is="custom-style">html{--layout:{display:-ms-flexbox;display:-webkit-flex;display:flex;};--layout-inline:{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex;};--layout-horizontal:{@apply --layout;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;};--layout-horizontal-reverse:{@apply --layout;-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse;};--layout-vertical:{@apply --layout;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;};--layout-vertical-reverse:{@apply --layout;-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;};--layout-wrap:{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;};--layout-wrap-reverse:{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;};--layout-flex-auto:{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;};--layout-flex-none:{-ms-flex:none;-webkit-flex:none;flex:none;};--layout-flex:{-ms-flex:1 1 0.000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:0.000000001px;flex-basis:0.000000001px;};--layout-flex-2:{-ms-flex:2;-webkit-flex:2;flex:2;};--layout-flex-3:{-ms-flex:3;-webkit-flex:3;flex:3;};--layout-flex-4:{-ms-flex:4;-webkit-flex:4;flex:4;};--layout-flex-5:{-ms-flex:5;-webkit-flex:5;flex:5;};--layout-flex-6:{-ms-flex:6;-webkit-flex:6;flex:6;};--layout-flex-7:{-ms-flex:7;-webkit-flex:7;flex:7;};--layout-flex-8:{-ms-flex:8;-webkit-flex:8;flex:8;};--layout-flex-9:{-ms-flex:9;-webkit-flex:9;flex:9;};--layout-flex-10:{-ms-flex:10;-webkit-flex:10;flex:10;};--layout-flex-11:{-ms-flex:11;-webkit-flex:11;flex:11;};--layout-flex-12:{-ms-flex:12;-webkit-flex:12;flex:12;};--layout-start:{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start;};--layout-center:{-ms-flex-align:center;-webkit-align-items:center;align-items:center;};--layout-end:{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end;};--layout-baseline:{-ms-flex-align:baseline;-webkit-align-items:baseline;align-items:baseline;};--layout-start-justified:{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;};--layout-center-justified:{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;};--layout-end-justified:{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;};--layout-around-justified:{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around;};--layout-justified:{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;};--layout-center-center:{@apply --layout-center;@apply --layout-center-justified;};--layout-self-start:{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start;};--layout-self-center:{-ms-align-self:center;-webkit-align-self:center;align-self:center;};--layout-self-end:{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end;};--layout-self-stretch:{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch;};--layout-self-baseline:{-ms-align-self:baseline;-webkit-align-self:baseline;align-self:baseline;};--layout-start-aligned:{-ms-flex-line-pack:start;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;};--layout-end-aligned:{-ms-flex-line-pack:end;-ms-align-content:flex-end;-webkit-align-content:flex-end;align-content:flex-end;};--layout-center-aligned:{-ms-flex-line-pack:center;-ms-align-content:center;-webkit-align-content:center;align-content:center;};--layout-between-aligned:{-ms-flex-line-pack:justify;-ms-align-content:space-between;-webkit-align-content:space-between;align-content:space-between;};--layout-around-aligned:{-ms-flex-line-pack:distribute;-ms-align-content:space-around;-webkit-align-content:space-around;align-content:space-around;};--layout-block:{display:block;};--layout-invisible:{visibility:hidden !important;};--layout-relative:{position:relative;};--layout-fit:{position:absolute;top:0;right:0;bottom:0;left:0;};--layout-scroll:{-webkit-overflow-scrolling:touch;overflow:auto;};--layout-fullbleed:{margin:0;height:100vh;};--layout-fixed-top:{position:fixed;top:0;left:0;right:0;};--layout-fixed-right:{position:fixed;top:0;right:0;bottom:0;};--layout-fixed-bottom:{position:fixed;right:0;bottom:0;left:0;};--layout-fixed-left:{position:fixed;top:0;bottom:0;left:0;};}</style></custom-style><script>(function(){'use strict';function a(a,b){var c='';if(a){var d=a.toLowerCase();' '===d||o.test(d)?c='space':p.test(d)?c='esc':1==d.length?(!b||l.test(d))&&(c=d):n.test(d)?c=d.replace('arrow',''):'multiply'==d?c='*':c=d}return c}function b(a){var b='';return a&&(a in i?b=i[a]:m.test(a)?(a=parseInt(a.replace('U+','0x'),16),b=h(a).toLowerCase()):b=a.toLowerCase()),b}function c(a){var b='';return+a&&(65<=a&&90>=a?b=h(32+a):112<=a&&123>=a?b='f'+(a-112+1):48<=a&&57>=a?b=a-48+'':96<=a&&105>=a?b=a-96+'':b=j[a]),b}function d(d,e){return d.key?a(d.key,e):d.detail&&d.detail.key?a(d.detail.key,e):b(d.keyIdentifier)||c(d.keyCode)||''}function e(a,b){var c=d(b,a.hasModifiers);return c===a.key&&(!a.hasModifiers||!!b.shiftKey===!!a.shiftKey&&!!b.ctrlKey===!!a.ctrlKey&&!!b.altKey===!!a.altKey&&!!b.metaKey===!!a.metaKey)}function f(a){return 1===a.length?{combo:a,key:a,event:'keydown'}:a.split('+').reduce(function(a,b){var c=b.split(':'),d=c[0],e=c[1];return d in k?(a[k[d]]=!0,a.hasModifiers=!0):(a.key=d,a.event=e||'keydown'),a},{combo:a.split(':').shift()})}function g(a){return a.trim().split(' ').map(function(a){return f(a)})}var h=String.fromCharCode,i={"U+0008":'backspace',"U+0009":'tab',"U+001B":'esc',"U+0020":'space',"U+007F":'del'},j={8:'backspace',9:'tab',13:'enter',27:'esc',32:'space',33:'pageup',34:'pagedown',35:'end',36:'home',37:'left',38:'up',39:'right',40:'down',46:'del',106:'*'},k={shift:'shiftKey',ctrl:'ctrlKey',alt:'altKey',meta:'metaKey'},l=/[a-z0-9*]/,m=/U\+/,n=/^arrow/,o=/^space(bar)?/,p=/^escape$/;Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:['_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)'],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(a,b){this._imperativeKeyBindings[a]=b,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(a,b){for(var c=g(b),d=0;d<c.length;++d)if(e(c[d],a))return!0;return!1},_collectKeyBindings:function(){var a=this.behaviors.map(function(a){return a.keyBindings});return-1===a.indexOf(this.keyBindings)&&a.push(this.keyBindings),a},_prepKeyBindings:function(){for(var a in this._keyBindings={},this._collectKeyBindings().forEach(function(a){for(var b in a)this._addKeyBinding(b,a[b])},this),this._imperativeKeyBindings)this._addKeyBinding(a,this._imperativeKeyBindings[a]);for(var b in this._keyBindings)this._keyBindings[b].sort(function(a,b){var c=a[0].hasModifiers,d=b[0].hasModifiers;return c===d?0:c?-1:1})},_addKeyBinding:function(a,b){g(a).forEach(function(a){this._keyBindings[a.event]=this._keyBindings[a.event]||[],this._keyBindings[a.event].push([a,b])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(a){var b=this._keyBindings[a],c=this._onKeyBindingEvent.bind(this,b);this._boundKeyHandlers.push([this.keyEventTarget,a,c]),this.keyEventTarget.addEventListener(a,c)},this)},_unlistenKeyEventListeners:function(){for(var a,b,c,d;this._boundKeyHandlers.length;)a=this._boundKeyHandlers.pop(),b=a[0],c=a[1],d=a[2],b.removeEventListener(c,d)},_onKeyBindingEvent:function(a,b){if(this.stopKeyboardEventPropagation&&b.stopPropagation(),!b.defaultPrevented)for(var c=0;c<a.length;c++){var d=a[c][0],f=a[c][1];if(e(d,b)&&(this._triggerKeyHandler(d,f,b),b.defaultPrevented))return}},_triggerKeyHandler:function(a,b,c){var d=Object.create(a);d.keyboardEvent=c;var e=new CustomEvent(a.event,{detail:d,cancelable:!0});this[b].call(this,e),e.defaultPrevented&&c.preventDefault()}}})();</script><script>Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:'_disabledChanged',reflectToAttribute:!0},_oldTabIndex:{type:Number},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}},__handleEventRetargeting:{type:Boolean,value:function(){return!this.shadowRoot&&!Polymer.Element}}},observers:['_changedControlState(focused, disabled)'],ready:function(){this.addEventListener('focus',this._boundFocusBlurHandler,!0),this.addEventListener('blur',this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(a){if(Polymer.Element)return void this._setFocused('focus'===a.type);if(a.target===this)this._setFocused('focus'===a.type);else if(this.__handleEventRetargeting){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}},_disabledChanged:function(a){this.setAttribute('aria-disabled',a?'true':'false'),this.style.pointerEvents=a?'none':'',a?(this._oldTabIndex=this.tabIndex,this._setFocused(!1),this.tabIndex=-1,this.blur()):this._oldTabIndex!==void 0&&(this.tabIndex=this._oldTabIndex)},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}};</script><script>Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:'_pressedChanged'},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:'aria-pressed',observer:'_ariaActiveAttributeChanged'}},listeners:{down:'_downHandler',up:'_upHandler',tap:'_tapHandler'},observers:['_focusChanged(focused)','_activeChanged(active, ariaActiveAttribute)'],keyBindings:{"enter:keydown":'_asyncClick',"space:keydown":'_spaceKeyDownHandler',"space:keyup":'_spaceKeyUpHandler'},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(a){this._detectKeyboardFocus(a),a||this._setPressed(!1)},_detectKeyboardFocus:function(a){this._setReceivedFocusFromKeyboard(!this.pointerDown&&a)},_userActivate:function(a){this.active!==a&&(this.active=a,this.fire('change'))},_downHandler:function(){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(a){var b=a.detail.keyboardEvent,c=Polymer.dom(b).localTarget;this.isLightDescendant(c)||(b.preventDefault(),b.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(a){var b=a.detail.keyboardEvent,c=Polymer.dom(b).localTarget;this.isLightDescendant(c)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(){this._changedButtonState()},_ariaActiveAttributeChanged:function(a,b){b&&b!=a&&this.hasAttribute(b)&&this.removeAttribute(b)},_activeChanged:function(a){this.toggles?this.setAttribute(this.ariaActiveAttribute,a?'true':'false'):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl];</script><dom-module id="paper-ripple" assetpath="bower_components/paper-ripple/"><template><style>:host{display:block;position:absolute;border-radius:inherit;overflow:hidden;top:0;left:0;right:0;bottom:0;pointer-events:none;}:host([animating]){-webkit-transform:translate(0, 0);transform:translate3d(0, 0, 0);}#background,
      #waves,
      .wave-container,
      .wave{pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%;}#background,
      .wave{opacity:0;}#waves,
      .wave{overflow:hidden;}.wave-container,
      .wave{border-radius:50%;}:host(.circle) #background,
      :host(.circle) #waves{border-radius:50%;}:host(.circle) .wave-container{overflow:hidden;}</style><div id="background"></div><div id="waves"></div></template></dom-module><script>(function(){'use strict';function a(a){this.element=a,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=d(this.width,this.height)}function b(a){this.element=a,this.color=window.getComputedStyle(a).color,this.wave=document.createElement('div'),this.waveContainer=document.createElement('div'),this.wave.style.backgroundColor=this.color,this.wave.classList.add('wave'),this.waveContainer.classList.add('wave-container'),Polymer.dom(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}var c=Math.min,d=Math.max,e=Math.sqrt,f={distance:function(a,b,c,d){var f=a-c,g=b-d;return e(f*f+g*g)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};a.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(a,b){var c=f.distance(a,b,0,0),e=f.distance(a,b,this.width,0),g=f.distance(a,b,0,this.height),h=f.distance(a,b,this.width,this.height);return d(c,e,g,h)}},b.MAX_RADIUS=300,b.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var a;return this.mouseDownStart?(a=f.now()-this.mouseDownStart,this.mouseUpStart&&(a-=this.mouseUpElapsed),a):0},get mouseUpElapsed(){return this.mouseUpStart?f.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var a=this.containerMetrics.width*this.containerMetrics.width,d=this.containerMetrics.height*this.containerMetrics.height,f=1.1*c(e(a+d),b.MAX_RADIUS)+5,g=1.1-0.2*(f/b.MAX_RADIUS),h=this.mouseInteractionSeconds/g,i=f*(1-Math.pow(80,-h));return Math.abs(i)},get opacity(){return this.mouseUpStart?d(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var a=0.3*this.mouseUpElapsedSeconds,b=this.opacity;return d(0,c(a,b))},get isOpacityFullyDecayed(){return 0.01>this.opacity&&this.radius>=c(this.maxRadius,b.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=c(this.maxRadius,b.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return c(1,2*(this.radius/this.containerMetrics.size)/1.4142135623730951)},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new a(this.element)},draw:function(){var a,b,c;this.wave.style.opacity=this.opacity,a=this.radius/(this.containerMetrics.size/2),b=this.xNow-this.containerMetrics.width/2,c=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform='translate('+b+'px, '+c+'px)',this.waveContainer.style.transform='translate3d('+b+'px, '+c+'px, 0)',this.wave.style.webkitTransform='scale('+a+','+a+')',this.wave.style.transform='scale3d('+a+','+a+',1)'},downAction:function(a){var b=this.containerMetrics.width/2,c=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=f.now(),this.center?(this.xStart=b,this.yStart=c,this.slideDistance=f.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=a?a.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=a?a.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=b,this.yEnd=c,this.slideDistance=f.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+'px',this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+'px',this.waveContainer.style.width=this.containerMetrics.size+'px',this.waveContainer.style.height=this.containerMetrics.size+'px'},upAction:function(){this.isMouseDown&&(this.mouseUpStart=f.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}},Polymer({is:'paper-ripple',behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:0.25},opacityDecayVelocity:{type:Number,value:0.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:'_holdDownChanged'},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":'_onEnterKeydown',"space:keydown":'_onSpaceKeydown',"space:keyup":'_onSpaceKeyup'},attached:function(){this.keyEventTarget=11==this.parentNode.nodeType?Polymer.dom(this).getOwnerRoot().host:this.parentNode;var a=this.keyEventTarget;this.listen(a,'up','uiUpAction'),this.listen(a,'down','uiDownAction')},detached:function(){this.unlisten(this.keyEventTarget,'up','uiUpAction'),this.unlisten(this.keyEventTarget,'down','uiDownAction'),this.keyEventTarget=null},get shouldKeepAnimating(){for(var a=0;a<this.ripples.length;++a)if(!this.ripples[a].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async(function(){this.upAction()},1)},uiDownAction:function(a){this.noink||this.downAction(a)},downAction:function(a){if(!(this.holdDown&&0<this.ripples.length)){var b=this.addRipple();b.downAction(a),this._animating||(this._animating=!0,this.animate())}},uiUpAction:function(a){this.noink||this.upAction(a)},upAction:function(a){this.holdDown||(this.ripples.forEach(function(b){b.upAction(a)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor=null,this.fire('transitionend')},addRipple:function(){var a=new b(this);return Polymer.dom(this.$.waves).appendChild(a.waveContainer),this.$.background.style.backgroundColor=a.color,this.ripples.push(a),this._setAnimating(!0),a},removeRipple:function(a){var b=this.ripples.indexOf(a);0>b||(this.ripples.splice(b,1),a.remove(),!this.ripples.length&&this._setAnimating(!1))},animate:function(){if(this._animating){var a,b;for(a=0;a<this.ripples.length;++a)b=this.ripples[a],b.draw(),this.$.background.style.opacity=b.outerOpacity,b.isOpacityFullyDecayed&&!b.isRestingAtMaxRadius&&this.removeRipple(b);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(a,b){void 0===b||(a?this.downAction():this.upAction())}})})();</script><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a),this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;if(b&&Polymer.dom(b).appendChild(this._ripple),a){var c=Polymer.dom(this._rippleContainer||this),d=Polymer.dom(a).rootTarget;c.deepContains(d)&&this._ripple.uiDownAction(a)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){var a=document.createElement('paper-ripple');return a},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};</script><script>Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:['_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)','_computeKeyboardClass(receivedFocusFromKeyboard)'],hostAttributes:{role:'button',tabindex:'0',animated:!0},_calculateElevation:function(){var a=1;this.disabled?a=0:this.active||this.pressed?a=4:this.receivedFocusFromKeyboard&&(a=3),this._setElevation(a)},_computeKeyboardClass:function(a){this.toggleClass('keyboard-focus',a)},_spaceKeyDownHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,a),this.hasRipple()&&1>this.getRipple().ripples.length&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,a),this.hasRipple()&&this._ripple.uiUpAction()}},Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl];</script><custom-style><style is="custom-style">html{--shadow-transition:{transition:box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);};--shadow-none:{box-shadow:none;};--shadow-elevation-2dp:{box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);};--shadow-elevation-3dp:{box-shadow:0 3px 4px 0 rgba(0, 0, 0, 0.14),
                    0 1px 8px 0 rgba(0, 0, 0, 0.12),
                    0 3px 3px -2px rgba(0, 0, 0, 0.4);};--shadow-elevation-4dp:{box-shadow:0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);};--shadow-elevation-6dp:{box-shadow:0 6px 10px 0 rgba(0, 0, 0, 0.14),
                    0 1px 18px 0 rgba(0, 0, 0, 0.12),
                    0 3px 5px -1px rgba(0, 0, 0, 0.4);};--shadow-elevation-8dp:{box-shadow:0 8px 10px 1px rgba(0, 0, 0, 0.14),
                    0 3px 14px 2px rgba(0, 0, 0, 0.12),
                    0 5px 5px -3px rgba(0, 0, 0, 0.4);};--shadow-elevation-12dp:{box-shadow:0 12px 16px 1px rgba(0, 0, 0, 0.14),
                    0 4px 22px 3px rgba(0, 0, 0, 0.12),
                    0 6px 7px -4px rgba(0, 0, 0, 0.4);};--shadow-elevation-16dp:{box-shadow:0 16px 24px 2px rgba(0, 0, 0, 0.14),
                    0  6px 30px 5px rgba(0, 0, 0, 0.12),
                    0  8px 10px -5px rgba(0, 0, 0, 0.4);};--shadow-elevation-24dp:{box-shadow:0 24px 38px 3px rgba(0, 0, 0, 0.14),
                    0 9px 46px 8px rgba(0, 0, 0, 0.12),
                    0 11px 15px -7px rgba(0, 0, 0, 0.4);};}</style></custom-style><dom-module id="paper-material-styles" assetpath="bower_components/paper-styles/element-styles/"><template><style>:host, html{--paper-material:{display:block;position:relative;};--paper-material-elevation-1:{@apply --shadow-elevation-2dp;};--paper-material-elevation-2:{@apply --shadow-elevation-4dp;};--paper-material-elevation-3:{@apply --shadow-elevation-6dp;};--paper-material-elevation-4:{@apply --shadow-elevation-8dp;};--paper-material-elevation-5:{@apply --shadow-elevation-16dp;};}:host(.paper-material), .paper-material{@apply --paper-material;}:host(.paper-material[elevation="1"]), .paper-material[elevation="1"]{@apply --paper-material-elevation-1;}:host(.paper-material[elevation="2"]), .paper-material[elevation="2"]{@apply --paper-material-elevation-2;}:host(.paper-material[elevation="3"]), .paper-material[elevation="3"]{@apply --paper-material-elevation-3;}:host(.paper-material[elevation="4"]), .paper-material[elevation="4"]{@apply --paper-material-elevation-4;}:host(.paper-material[elevation="5"]), .paper-material[elevation="5"]{@apply --paper-material-elevation-5;}</style></template></dom-module><dom-module id="paper-button" assetpath="bower_components/paper-button/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-inline;@apply --layout-center-center;position:relative;box-sizing:border-box;min-width:5.14em;margin:0 0.29em;background:transparent;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;font:inherit;text-transform:uppercase;outline-width:0;border-radius:3px;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:pointer;z-index:0;padding:0.7em 0.57em;@apply --paper-font-common-base;@apply --paper-button;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}:host([hidden]){display:none !important;}:host([raised].keyboard-focus){font-weight:bold;@apply --paper-button-raised-keyboard-focus;}:host(:not([raised]).keyboard-focus){font-weight:bold;@apply --paper-button-flat-keyboard-focus;}:host([disabled]){background:#eaeaea;color:#a8a8a8;cursor:auto;pointer-events:none;@apply --paper-button-disabled;}:host([animated]){@apply --shadow-transition;}paper-ripple{color:var(--paper-button-ink-color);}</style><slot></slot></template><script>Polymer({is:'paper-button',behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:'_calculateElevation'}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}});</script></dom-module><script>Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:'_entryAnimationChanged',type:String},exitAnimation:{observer:'_exitAnimationChanged',type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(a,b){for(var c in b)a[c]=b[c]},_cloneConfig:function(a){var b={isClone:!0};return this._copyProperties(b,a),b},_getAnimationConfigRecursive:function(a,b,c){if(this.animationConfig){if(this.animationConfig.value&&'function'===typeof this.animationConfig.value)return void this._warn(this._logf('playAnimation','Please put \'animationConfig\' inside of your components \'properties\' object instead of outside of it.'));var d;if(d=a?this.animationConfig[a]:this.animationConfig,Array.isArray(d)||(d=[d]),d)for(var e,f=0;e=d[f];f++)if(e.animatable)e.animatable._getAnimationConfigRecursive(e.type||a,b,c);else if(e.id){var g=b[e.id];g?(!g.isClone&&(b[e.id]=this._cloneConfig(g),g=b[e.id]),this._copyProperties(g,e)):b[e.id]=e}else c.push(e)}},getAnimationConfig:function(a){var b={},c=[];for(var d in this._getAnimationConfigRecursive(a,b,c),b)c.push(b[d]);return c}};</script><script>Polymer.NeonAnimationRunnerBehaviorImpl={_configureAnimations:function(a){var b=[],c=[];if(0<a.length)for(var d,e,f=0;d=a[f];f++)if(e=document.createElement(d.name),e.isNeonAnimation){var g=null;e.configure||(e.configure=function(){return null}),g=e.configure(d),c.push({result:g,config:d})}else console.warn(this.is+':',d.name,'not found!');for(var h=0;h<c.length;h++){var g=c[h].result,d=c[h].config;try{'function'!=typeof g.cancel&&(g=document.timeline.play(g))}catch(a){g=null,console.warn('Couldnt play','(',d.name,').',a)}g&&b.push({neonAnimation:e,config:d,animation:g})}return b},_shouldComplete:function(a){for(var b=!0,c=0;c<a.length;c++)if('finished'!=a[c].animation.playState){b=!1;break}return b},_complete:function(a){for(var b=0;b<a.length;b++)a[b].neonAnimation.complete(a[b].config);for(var b=0;b<a.length;b++)a[b].animation.cancel()},playAnimation:function(a,b){var c=this.getAnimationConfig(a);if(c){this._active=this._active||{},this._active[a]&&(this._complete(this._active[a]),delete this._active[a]);var d=this._configureAnimations(c);if(0==d.length)return void this.fire('neon-animation-finish',b,{bubbles:!1});this._active[a]=d;for(var e=0;e<d.length;e++)d[e].animation.onfinish=function(){this._shouldComplete(d)&&(this._complete(d),delete this._active[a],this.fire('neon-animation-finish',b,{bubbles:!1}))}.bind(this)}},cancelAnimation:function(){for(var a in this._active){var b=this._active[a];for(var c in b)b[c].animation.cancel()}this._active={}}},Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl];</script><script>Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){var a;return a=this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width,a},get _fitHeight(){var a;return a=this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height,a},get _fitLeft(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().left,a},get _fitTop(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().top,a},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;return a&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host),a},get _localeHorizontalAlign(){if(this._isRTL){if('right'===this.horizontalAlign)return'left';if('left'===this.horizontalAlign)return'right'}return this.horizontalAlign},get __shouldPosition(){return(this.horizontalAlign||this.verticalAlign)&&('center'!==this.horizontalAlign||'middle'!==this.verticalAlign)},attached:function(){'undefined'===typeof this._isRTL&&(this._isRTL='rtl'==window.getComputedStyle(this).direction),this.positionTarget=this.positionTarget||this._defaultPositionTarget,this.autoFitOnAttach&&('none'===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):(window.ShadyDOM&&ShadyDOM.flush(),this.fit()))},detached:function(){this.__deferredFit&&(clearTimeout(this.__deferredFit),this.__deferredFit=null)},fit:function(){this.position(),this.constrain(),this.center()},_discoverInfo:function(){if(!this._fitInfo){var a=window.getComputedStyle(this),b=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||'',left:this.style.left||'',position:this.style.position||''},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||'',maxHeight:this.sizingTarget.style.maxHeight||'',boxSizing:this.sizingTarget.style.boxSizing||''},positionedBy:{vertically:'auto'===a.top?'auto'===a.bottom?null:'bottom':'top',horizontally:'auto'===a.left?'auto'===a.right?null:'right':'left'},sizedBy:{height:'none'!==b.maxHeight,width:'none'!==b.maxWidth,minWidth:parseInt(b.minWidth,10)||0,minHeight:parseInt(b.minHeight,10)||0},margin:{top:parseInt(a.marginTop,10)||0,right:parseInt(a.marginRight,10)||0,bottom:parseInt(a.marginBottom,10)||0,left:parseInt(a.marginLeft,10)||0}}}},resetFit:function(){var a=this._fitInfo||{};for(var b in a.sizerInlineStyle)this.sizingTarget.style[b]=a.sizerInlineStyle[b];for(var b in a.inlineStyle)this.style[b]=a.inlineStyle[b];this._fitInfo=null},refit:function(){var a=this.sizingTarget.scrollLeft,b=this.sizingTarget.scrollTop;this.resetFit(),this.fit(),this.sizingTarget.scrollLeft=a,this.sizingTarget.scrollTop=b},position:function(){var a=Math.max,b=Math.min;if(this.__shouldPosition){this._discoverInfo(),this.style.position='fixed',this.sizingTarget.style.boxSizing='border-box',this.style.left='0px',this.style.top='0px';var c=this.getBoundingClientRect(),d=this.__getNormalizedRect(this.positionTarget),e=this.__getNormalizedRect(this.fitInto),f=this._fitInfo.margin,g={width:c.width+f.left+f.right,height:c.height+f.top+f.bottom},h=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,g,c,d,e),i=h.left+f.left,j=h.top+f.top,k=b(e.right-f.right,i+c.width),l=b(e.bottom-f.bottom,j+c.height);i=a(e.left+f.left,b(i,k-this._fitInfo.sizedBy.minWidth)),j=a(e.top+f.top,b(j,l-this._fitInfo.sizedBy.minHeight)),this.sizingTarget.style.maxWidth=a(k-i,this._fitInfo.sizedBy.minWidth)+'px',this.sizingTarget.style.maxHeight=a(l-j,this._fitInfo.sizedBy.minHeight)+'px',this.style.left=i-c.left+'px',this.style.top=j-c.top+'px'}},constrain:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo;a.positionedBy.vertically||(this.style.position='fixed',this.style.top='0px'),a.positionedBy.horizontally||(this.style.position='fixed',this.style.left='0px'),this.sizingTarget.style.boxSizing='border-box';var b=this.getBoundingClientRect();a.sizedBy.height||this.__sizeDimension(b,a.positionedBy.vertically,'top','bottom','Height'),a.sizedBy.width||this.__sizeDimension(b,a.positionedBy.horizontally,'left','right','Width')}},_sizeDimension:function(a,b,c,d,e){this.__sizeDimension(a,b,c,d,e)},__sizeDimension:function(a,b,c,d,e){var f=this._fitInfo,g=this.__getNormalizedRect(this.fitInto),h='Width'===e?g.width:g.height,i=b===d,j=i?h-a[d]:a[c],k=f.margin[i?c:d],l='offset'+e,m=this[l]-this.sizingTarget[l];this.sizingTarget.style['max'+e]=h-k-j-m+'px'},center:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo.positionedBy;if(!(a.vertically&&a.horizontally)){this.style.position='fixed',a.vertically||(this.style.top='0px'),a.horizontally||(this.style.left='0px');var b=this.getBoundingClientRect(),c=this.__getNormalizedRect(this.fitInto);if(!a.vertically){var d=c.top-b.top+(c.height-b.height)/2;this.style.top=d+'px'}if(!a.horizontally){var e=c.left-b.left+(c.width-b.width)/2;this.style.left=e+'px'}}}},__getNormalizedRect:function(a){return a===document.documentElement||a===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:a.getBoundingClientRect()},__getOffscreenArea:function(a,b,c){var d=Math.abs,e=Math.min,f=e(0,a.top)+e(0,c.bottom-(a.top+b.height)),g=e(0,a.left)+e(0,c.right-(a.left+b.width));return d(f)*b.width+d(g)*b.height},__getPosition:function(a,b,c,d,e,f){var g=[{verticalAlign:'top',horizontalAlign:'left',top:e.top+this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:'top',horizontalAlign:'right',top:e.top+this.verticalOffset,left:e.right-c.width-this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'left',top:e.bottom-c.height-this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'right',top:e.bottom-c.height-this.verticalOffset,left:e.right-c.width-this.horizontalOffset}];if(this.noOverlap){for(var h,j=0,i=g.length;j<i;j++){for(var k in h={},g[j])h[k]=g[j][k];g.push(h)}g[0].top=g[1].top+=e.height,g[2].top=g[3].top-=e.height,g[4].left=g[6].left+=e.width,g[5].left=g[7].left-=e.width}b='auto'===b?null:b,a='auto'===a?null:a,a&&'center'!==a||(g.push({verticalAlign:'top',horizontalAlign:'center',top:e.top+this.verticalOffset+(this.noOverlap?e.height:0),left:e.left-d.width/2+e.width/2+this.horizontalOffset}),g.push({verticalAlign:'bottom',horizontalAlign:'center',top:e.bottom-c.height-this.verticalOffset-(this.noOverlap?e.height:0),left:e.left-d.width/2+e.width/2+this.horizontalOffset})),b&&'middle'!==b||(g.push({verticalAlign:'middle',horizontalAlign:'left',top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.left+this.horizontalOffset+(this.noOverlap?e.width:0)}),g.push({verticalAlign:'middle',horizontalAlign:'right',top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.right-c.width-this.horizontalOffset-(this.noOverlap?e.width:0)}));for(var l,j=0;j<g.length;j++){var m=g[j],n=m.verticalAlign===b,o=m.horizontalAlign===a;if(!this.dynamicAlign&&!this.noOverlap&&n&&o){l=m;break}var p=(!b||n)&&(!a||o);if(this.dynamicAlign||p){if(m.offscreenArea=this.__getOffscreenArea(m,c,f),0===m.offscreenArea&&p){l=m;break}l=l||m;var q=m.offscreenArea-l.offscreenArea;(0>q||0===q&&(n||o))&&(l=m)}}return l}};</script><dom-module id="iron-overlay-backdrop" assetpath="bower_components/iron-overlay-behavior/"><template><style>:host{position:fixed;top:0;left:0;width:100%;height:100%;background-color:var(--iron-overlay-backdrop-background-color, #000);opacity:0;transition:opacity 0.2s;pointer-events:none;@apply --iron-overlay-backdrop;}:host(.opened){opacity:var(--iron-overlay-backdrop-opacity, 0.6);pointer-events:auto;@apply --iron-overlay-backdrop-opened;}</style><slot></slot></template></dom-module><script>(function(){'use strict';Polymer({is:'iron-overlay-backdrop',properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:'_openedChanged'}},listeners:{transitionend:'_onTransitionend'},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Polymer.dom(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||Polymer.dom(this.parentNode).removeChild(this)},_onTransitionend:function(a){a&&a.target===this&&this.complete()},_openedChanged:function(a){if(a)this.prepare();else{var b=window.getComputedStyle(this);('0s'===b.transitionDuration||0==b.opacity)&&this.complete()}this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null,this.toggleClass('opened',this.opened)}.bind(this)))}})})();</script><script>Polymer.IronOverlayManagerClass=function(){this._overlays=[],this._minimumZ=101,this._backdropElement=null,Polymer.Gestures.add(document.documentElement,'tap',function(){}),document.addEventListener('tap',this._onCaptureClick.bind(this),!0),document.addEventListener('focus',this._onCaptureFocus.bind(this),!0),document.addEventListener('keydown',this._onCaptureKeyDown.bind(this),!0)},Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){return this._backdropElement||(this._backdropElement=document.createElement('iron-overlay-backdrop')),this._backdropElement},get deepActiveElement(){var a=document.activeElement;for(a&&!1!==a instanceof Element||(a=document.body);a.root&&Polymer.dom(a.root).activeElement;)a=Polymer.dom(a.root).activeElement;return a},_bringOverlayAtIndexToFront:function(a){var b=this._overlays[a];if(b){var c=this._overlays.length-1,d=this._overlays[c];if(d&&this._shouldBeBehindOverlay(b,d)&&c--,!(a>=c)){var e=Math.max(this.currentOverlayZ(),this._minimumZ);for(this._getZ(b)<=e&&this._applyOverlayZ(b,e);a<c;)this._overlays[a]=this._overlays[a+1],a++;this._overlays[c]=b}}},addOrRemoveOverlay:function(a){a.opened?this.addOverlay(a):this.removeOverlay(a)},addOverlay:function(a){var b=Math.max,c=this._overlays.indexOf(a);if(0<=c)return this._bringOverlayAtIndexToFront(c),void this.trackBackdrop();var d=this._overlays.length,e=this._overlays[d-1],f=b(this._getZ(e),this._minimumZ),g=this._getZ(a);if(e&&this._shouldBeBehindOverlay(a,e)){this._applyOverlayZ(e,f),d--;var h=this._overlays[d-1];f=b(this._getZ(h),this._minimumZ)}g<=f&&this._applyOverlayZ(a,f),this._overlays.splice(d,0,a),this.trackBackdrop()},removeOverlay:function(a){var b=this._overlays.indexOf(a);-1===b||(this._overlays.splice(b,1),this.trackBackdrop())},currentOverlay:function(){var a=this._overlays.length-1;return this._overlays[a]},currentOverlayZ:function(){return this._getZ(this.currentOverlay())},ensureMinimumZ:function(a){this._minimumZ=Math.max(this._minimumZ,a)},focusOverlay:function(){var a=this.currentOverlay();a&&a._applyFocus()},trackBackdrop:function(){var a=this._overlayWithBackdrop();(a||this._backdropElement)&&(this.backdropElement.style.zIndex=this._getZ(a)-1,this.backdropElement.opened=!!a,this.backdropElement.prepare())},getBackdrops:function(){for(var a=[],b=0;b<this._overlays.length;b++)this._overlays[b].withBackdrop&&a.push(this._overlays[b]);return a},backdropZ:function(){return this._getZ(this._overlayWithBackdrop())-1},_overlayWithBackdrop:function(){for(var a=this._overlays.length-1;0<=a;a--)if(this._overlays[a].withBackdrop)return this._overlays[a]},_getZ:function(a){var b=this._minimumZ;if(a){var c=+(a.style.zIndex||window.getComputedStyle(a).zIndex);c===c&&(b=c)}return b},_setZ:function(a,b){a.style.zIndex=b},_applyOverlayZ:function(a,b){this._setZ(a,b+2)},_overlayInPath:function(a){a=a||[];for(var b=0;b<a.length;b++)if(a[b]._manager===this)return a[b]},_onCaptureClick:function(a){var b=this._overlays.length-1;if(-1!==b)for(var c,d=Polymer.dom(a).path;(c=this._overlays[b])&&this._overlayInPath(d)!==c&&(c._onCaptureClick(a),c.allowClickThrough);)b--},_onCaptureFocus:function(a){var b=this.currentOverlay();b&&b._onCaptureFocus(a)},_onCaptureKeyDown:function(a){var b=this.currentOverlay();b&&(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,'esc')?b._onCaptureEsc(a):Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,'tab')&&b._onCaptureTab(a))},_shouldBeBehindOverlay:function(a,b){return!a.alwaysOnTop&&b.alwaysOnTop}},Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass;</script><script>(function(){'use strict';var a={pageX:0,pageY:0},b=null,c=[],d=['wheel','mousewheel','DOMMouseScroll','touchstart','touchmove'];Polymer.IronScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(a){var b=this.currentLockingElement;if(void 0===b)return!1;var c;return!!this._hasCachedLockedElement(a)||!this._hasCachedUnlockedElement(a)&&(c=!!b&&b!==a&&!this._composedTreeContains(b,a),c?this._lockedElementCache.push(a):this._unlockedElementCache.push(a),c)},pushScrollLock:function(a){0<=this._lockingElements.indexOf(a)||(0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(a),this._lockedElementCache=[],this._unlockedElementCache=[])},removeScrollLock:function(a){var b=this._lockingElements.indexOf(a);-1===b||(this._lockingElements.splice(b,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,_unlockedElementCache:null,_hasCachedLockedElement:function(a){return-1<this._lockedElementCache.indexOf(a)},_hasCachedUnlockedElement:function(a){return-1<this._unlockedElementCache.indexOf(a)},_composedTreeContains:function(a,b){var c,d,e,f;if(a.contains(b))return!0;for(c=Polymer.dom(a).querySelectorAll('content,slot'),e=0;e<c.length;++e)for(d=Polymer.dom(c[e]).getDistributedNodes(),f=0;f<d.length;++f)if(d[f].nodeType===Node.ELEMENT_NODE&&this._composedTreeContains(d[f],b))return!0;return!1},_scrollInteractionHandler:function(b){if(b.cancelable&&this._shouldPreventScrolling(b)&&b.preventDefault(),b.targetTouches){var c=b.targetTouches[0];a.pageX=c.pageX,a.pageY=c.pageY}},_lockScrollInteractions:function(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);for(var a=0,b=d.length;a<b;a++)document.addEventListener(d[a],this._boundScrollHandler,{capture:!0,passive:!1})},_unlockScrollInteractions:function(){for(var a=0,b=d.length;a<b;a++)document.removeEventListener(d[a],this._boundScrollHandler,{capture:!0,passive:!1})},_shouldPreventScrolling:function(a){var d=Polymer.dom(a).rootTarget;if('touchmove'!==a.type&&b!==d&&(b=d,c=this._getScrollableNodes(Polymer.dom(a).path)),!c.length)return!0;if('touchstart'===a.type)return!1;var e=this._getScrollInfo(a);return!this._getScrollingNode(c,e.deltaX,e.deltaY)},_getScrollableNodes:function(a){for(var b=[],c=a.indexOf(this.currentLockingElement),d=0;d<=c;d++)if(a[d].nodeType===Node.ELEMENT_NODE){var e=a[d],f=e.style;'scroll'!==f.overflow&&'auto'!==f.overflow&&(f=window.getComputedStyle(e)),('scroll'===f.overflow||'auto'===f.overflow)&&b.push(e)}return b},_getScrollingNode:function(a,b,c){var d=Math.abs;if(b||c)for(var e=d(c)>=d(b),f=0;f<a.length;f++){var g=a[f],h=!1;if(h=e?0>c?0<g.scrollTop:g.scrollTop<g.scrollHeight-g.clientHeight:0>b?0<g.scrollLeft:g.scrollLeft<g.scrollWidth-g.clientWidth,h)return g}},_getScrollInfo:function(b){var c={deltaX:b.deltaX,deltaY:b.deltaY};if('deltaX'in b);else if('wheelDeltaX'in b&&'wheelDeltaY'in b)c.deltaX=-b.wheelDeltaX,c.deltaY=-b.wheelDeltaY;else if('wheelDelta'in b)c.deltaX=0,c.deltaY=-b.wheelDelta;else if('axis'in b)c.deltaX=1===b.axis?b.detail:0,c.deltaY=2===b.axis?b.detail:0;else if(b.targetTouches){var d=b.targetTouches[0];c.deltaX=a.pageX-d.pageX,c.deltaY=a.pageY-d.pageY}return c}}})();</script><script>(function(){'use strict';var a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function(a){var b=[],c=this._collectTabbableNodes(a,b);return c?this._sortByTabIndex(b):b},isFocusable:function(a){return b.call(a,'input, select, textarea, button, object')?b.call(a,':not([disabled])'):b.call(a,'a[href], area[href], iframe, [tabindex], [contentEditable]')},isTabbable:function(a){return this.isFocusable(a)&&b.call(a,':not([tabindex="-1"])')&&this._isVisible(a)},_normalizedTabIndex:function(a){if(this.isFocusable(a)){var b=a.getAttribute('tabindex')||0;return+b}return-1},_collectTabbableNodes:function(a,b){if(a.nodeType!==Node.ELEMENT_NODE||!this._isVisible(a))return!1;var c=a,d=this._normalizedTabIndex(c),e=0<d;0<=d&&b.push(c);var f='content'===c.localName||'slot'===c.localName?Polymer.dom(c).getDistributedNodes():Polymer.dom(c.root||c).children;for(var g=0;g<f.length;g++)e=this._collectTabbableNodes(f[g],b)||e;return e},_isVisible:function(a){var b=a.style;return'hidden'!==b.visibility&&'none'!==b.display&&(b=window.getComputedStyle(a),'hidden'!==b.visibility&&'none'!==b.display)},_sortByTabIndex:function(a){var b=a.length;if(2>b)return a;var c=Math.ceil(b/2),d=this._sortByTabIndex(a.slice(0,c)),e=this._sortByTabIndex(a.slice(c));return this._mergeSortByTabIndex(d,e)},_mergeSortByTabIndex:function(a,b){for(var c=[];0<a.length&&0<b.length;)this._hasLowerTabOrder(a[0],b[0])?c.push(b.shift()):c.push(a.shift());return c.concat(a,b)},_hasLowerTabOrder:function(c,a){var b=Math.max,d=b(c.tabIndex,0),e=b(a.tabIndex,0);return 0===d||0===e?e>d:d>e}}})();</script><script>(function(){'use strict';Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:'_openedChanged',type:Boolean,value:!1,notify:!0},canceled:{observer:'_canceledChanged',readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:'_withBackdropChanged',type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},allowClickThrough:{type:Boolean},alwaysOnTop:{type:Boolean},scrollAction:{type:String},_manager:{type:Object,value:Polymer.IronOverlayManager},_focusedChild:{type:Object}},listeners:{"iron-resize":'_onIronResize'},observers:['__updateScrollObservers(isAttached, opened, scrollAction)'],get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector('[autofocus]')||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function(){this.__isAnimating=!1,this.__shouldRemoveTabIndex=!1,this.__firstFocusableNode=this.__lastFocusableNode=null,this.__rafs={},this.__restoreFocusNode=null,this.__scrollTop=this.__scrollLeft=null,this.__onCaptureScroll=this.__onCaptureScroll.bind(this),this.__rootNodes=null,this._ensureSetup()},attached:function(){this.opened&&this._openedChanged(this.opened),this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function(){for(var a in Polymer.dom(this).unobserveNodes(this._observer),this._observer=null,this.__rafs)null!==this.__rafs[a]&&cancelAnimationFrame(this.__rafs[a]);this.__rafs={},this._manager.removeOverlay(this),this.__isAnimating&&(this.opened?this._finishRenderOpened():(this._applyFocus(),this._finishRenderClosed()))},toggle:function(){this._setCanceled(!1),this.opened=!this.opened},open:function(){this._setCanceled(!1),this.opened=!0},close:function(){this._setCanceled(!1),this.opened=!1},cancel:function(a){var b=this.fire('iron-overlay-canceled',a,{cancelable:!0});b.defaultPrevented||(this._setCanceled(!0),this.opened=!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline='none',this.style.display='none')},_openedChanged:function(a){a?this.removeAttribute('aria-hidden'):this.setAttribute('aria-hidden','true');this.isAttached&&(this.__isAnimating=!0,this.__deraf('__openedChanged',this.__openedChanged))},_canceledChanged:function(){this.closingReason=this.closingReason||{},this.closingReason.canceled=this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute('tabindex')?(this.setAttribute('tabindex','-1'),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute('tabindex'),this.__shouldRemoveTabIndex=!1),this.opened&&this.isAttached&&this._manager.trackBackdrop()},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement,this._preparePositioning(),this.refit(),this._finishPositioning(),this.noAutoFocus&&document.activeElement===this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize(),this.__isAnimating=!1,this.fire('iron-overlay-opened')},_finishRenderClosed:function(){this.style.display='none',this.style.zIndex='',this.notifyResize(),this.__isAnimating=!1,this.fire('iron-overlay-closed',this.closingReason)},_preparePositioning:function(){this.style.transition=this.style.webkitTransition='none',this.style.transform=this.style.webkitTransform='none',this.style.display=''},_finishPositioning:function(){this.style.display='none',this.scrollTop=this.scrollTop,this.style.transition=this.style.webkitTransition='',this.style.transform=this.style.webkitTransform='',this.style.display='',this.scrollTop=this.scrollTop},_applyFocus:function(){if(this.opened)this.noAutoFocus||this._focusNode.focus();else{if(this._focusNode.blur(),this._focusedChild=null,this.restoreFocusOnClose&&this.__restoreFocusNode){var a=this._manager.deepActiveElement;(a===document.body||Polymer.dom(this).deepContains(a))&&this.__restoreFocusNode.focus()}this.__restoreFocusNode=null;var b=this._manager.currentOverlay();b&&this!==b&&b._applyFocus()}},_onCaptureClick:function(a){this.noCancelOnOutsideClick||this.cancel(a)},_onCaptureFocus:function(a){if(this.withBackdrop){var b=Polymer.dom(a).path;-1===b.indexOf(this)?(a.stopPropagation(),this._applyFocus()):this._focusedChild=b[0]}},_onCaptureEsc:function(a){this.noCancelOnEscKey||this.cancel(a)},_onCaptureTab:function(a){if(this.withBackdrop){this.__ensureFirstLastFocusables();var b=a.shiftKey,c=b?this.__firstFocusableNode:this.__lastFocusableNode,d=b?this.__lastFocusableNode:this.__firstFocusableNode,e=!1;if(c===d)e=!0;else{var f=this._manager.deepActiveElement;e=f===c||f===this}e&&(a.preventDefault(),this._focusedChild=d,this._applyFocus())}},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__deraf('refit',this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){if(!this.__firstFocusableNode||!this.__lastFocusableNode){var a=this._focusableNodes;this.__firstFocusableNode=a[0],this.__lastFocusableNode=a[a.length-1]}},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),this._manager.addOverlay(this),this._applyFocus(),this._renderOpened()):(this._manager.removeOverlay(this),this._applyFocus(),this._renderClosed())},__deraf:function(a,b){var c=this.__rafs;null!==c[a]&&cancelAnimationFrame(c[a]),c[a]=requestAnimationFrame(function(){c[a]=null,b.call(this)}.bind(this))},__updateScrollObservers:function(a,b,c){a&&b&&this.__isValidScrollAction(c)?('lock'===c&&(this.__saveScrollPosition(),Polymer.IronScrollManager.pushScrollLock(this)),this.__addScrollListeners()):(Polymer.IronScrollManager.removeScrollLock(this),this.__removeScrollListeners())},__addScrollListeners:function(){if(!this.__rootNodes){if(this.__rootNodes=[],'attachShadow'in Element.prototype&&'getRootNode'in Element.prototype)for(var a=this;a;)a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&a.host&&this.__rootNodes.push(a),a=a.host||a.assignedSlot||a.parentNode;this.__rootNodes.push(document)}this.__rootNodes.forEach(function(a){a.addEventListener('scroll',this.__onCaptureScroll,{capture:!0,passive:!0})},this)},__removeScrollListeners:function(){this.__rootNodes&&this.__rootNodes.forEach(function(a){a.removeEventListener('scroll',this.__onCaptureScroll,{capture:!0,passive:!0})},this),this.isAttached||(this.__rootNodes=null)},__isValidScrollAction:function(a){return'lock'===a||'refit'===a||'cancel'===a},__onCaptureScroll:function(a){if(!this.__isAnimating&&!(0<=Polymer.dom(a).path.indexOf(this)))switch(this.scrollAction){case'lock':this.__restoreScrollPosition();break;case'refit':this.__deraf('refit',this.refit);break;case'cancel':this.cancel(a);}},__saveScrollPosition:function(){var a=Math.max;document.scrollingElement?(this.__scrollTop=document.scrollingElement.scrollTop,this.__scrollLeft=document.scrollingElement.scrollLeft):(this.__scrollTop=a(document.documentElement.scrollTop,document.body.scrollTop),this.__scrollLeft=a(document.documentElement.scrollLeft,document.body.scrollLeft))},__restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=this.__scrollTop,document.scrollingElement.scrollLeft=this.__scrollLeft):(document.documentElement.scrollTop=document.body.scrollTop=this.__scrollTop,document.documentElement.scrollLeft=document.body.scrollLeft=this.__scrollLeft)}},Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl]})();</script><script>(function(){'use strict';Polymer.PaperDialogBehaviorImpl={hostAttributes:{role:'dialog',tabindex:'-1'},properties:{modal:{type:Boolean,value:!1},__readied:{type:Boolean,value:!1}},observers:['_modalChanged(modal, __readied)'],listeners:{tap:'_onDialogClick'},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop,this.__readied=!0},_modalChanged:function(a,b){b&&(a?(this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop,this.noCancelOnOutsideClick=!0,this.noCancelOnEscKey=!0,this.withBackdrop=!0):(this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick,this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey,this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop))},_updateClosingReasonConfirmed:function(a){this.closingReason=this.closingReason||{},this.closingReason.confirmed=a},_onDialogClick:function(a){for(var b,c=Polymer.dom(a).path,d=0,e=c.indexOf(this);d<e;d++)if(b=c[d],b.hasAttribute&&(b.hasAttribute('dialog-dismiss')||b.hasAttribute('dialog-confirm'))){this._updateClosingReasonConfirmed(b.hasAttribute('dialog-confirm')),this.close(),a.stopPropagation();break}}},Polymer.PaperDialogBehavior=[Polymer.IronOverlayBehavior,Polymer.PaperDialogBehaviorImpl]})();</script><custom-style><style is="custom-style">html{--google-red-100:#f4c7c3;--google-red-300:#e67c73;--google-red-500:#db4437;--google-red-700:#c53929;--google-blue-100:#c6dafc;--google-blue-300:#7baaf7;--google-blue-500:#4285f4;--google-blue-700:#3367d6;--google-green-100:#b7e1cd;--google-green-300:#57bb8a;--google-green-500:#0f9d58;--google-green-700:#0b8043;--google-yellow-100:#fce8b2;--google-yellow-300:#f7cb4d;--google-yellow-500:#f4b400;--google-yellow-700:#f09300;--google-grey-100:#f5f5f5;--google-grey-300:#e0e0e0;--google-grey-500:#9e9e9e;--google-grey-700:#616161;--paper-red-50:#ffebee;--paper-red-100:#ffcdd2;--paper-red-200:#ef9a9a;--paper-red-300:#e57373;--paper-red-400:#ef5350;--paper-red-500:#f44336;--paper-red-600:#e53935;--paper-red-700:#d32f2f;--paper-red-800:#c62828;--paper-red-900:#b71c1c;--paper-red-a100:#ff8a80;--paper-red-a200:#ff5252;--paper-red-a400:#ff1744;--paper-red-a700:#d50000;--paper-pink-50:#fce4ec;--paper-pink-100:#f8bbd0;--paper-pink-200:#f48fb1;--paper-pink-300:#f06292;--paper-pink-400:#ec407a;--paper-pink-500:#e91e63;--paper-pink-600:#d81b60;--paper-pink-700:#c2185b;--paper-pink-800:#ad1457;--paper-pink-900:#880e4f;--paper-pink-a100:#ff80ab;--paper-pink-a200:#ff4081;--paper-pink-a400:#f50057;--paper-pink-a700:#c51162;--paper-purple-50:#f3e5f5;--paper-purple-100:#e1bee7;--paper-purple-200:#ce93d8;--paper-purple-300:#ba68c8;--paper-purple-400:#ab47bc;--paper-purple-500:#9c27b0;--paper-purple-600:#8e24aa;--paper-purple-700:#7b1fa2;--paper-purple-800:#6a1b9a;--paper-purple-900:#4a148c;--paper-purple-a100:#ea80fc;--paper-purple-a200:#e040fb;--paper-purple-a400:#d500f9;--paper-purple-a700:#aa00ff;--paper-deep-purple-50:#ede7f6;--paper-deep-purple-100:#d1c4e9;--paper-deep-purple-200:#b39ddb;--paper-deep-purple-300:#9575cd;--paper-deep-purple-400:#7e57c2;--paper-deep-purple-500:#673ab7;--paper-deep-purple-600:#5e35b1;--paper-deep-purple-700:#512da8;--paper-deep-purple-800:#4527a0;--paper-deep-purple-900:#311b92;--paper-deep-purple-a100:#b388ff;--paper-deep-purple-a200:#7c4dff;--paper-deep-purple-a400:#651fff;--paper-deep-purple-a700:#6200ea;--paper-indigo-50:#e8eaf6;--paper-indigo-100:#c5cae9;--paper-indigo-200:#9fa8da;--paper-indigo-300:#7986cb;--paper-indigo-400:#5c6bc0;--paper-indigo-500:#3f51b5;--paper-indigo-600:#3949ab;--paper-indigo-700:#303f9f;--paper-indigo-800:#283593;--paper-indigo-900:#1a237e;--paper-indigo-a100:#8c9eff;--paper-indigo-a200:#536dfe;--paper-indigo-a400:#3d5afe;--paper-indigo-a700:#304ffe;--paper-blue-50:#e3f2fd;--paper-blue-100:#bbdefb;--paper-blue-200:#90caf9;--paper-blue-300:#64b5f6;--paper-blue-400:#42a5f5;--paper-blue-500:#2196f3;--paper-blue-600:#1e88e5;--paper-blue-700:#1976d2;--paper-blue-800:#1565c0;--paper-blue-900:#0d47a1;--paper-blue-a100:#82b1ff;--paper-blue-a200:#448aff;--paper-blue-a400:#2979ff;--paper-blue-a700:#2962ff;--paper-light-blue-50:#e1f5fe;--paper-light-blue-100:#b3e5fc;--paper-light-blue-200:#81d4fa;--paper-light-blue-300:#4fc3f7;--paper-light-blue-400:#29b6f6;--paper-light-blue-500:#03a9f4;--paper-light-blue-600:#039be5;--paper-light-blue-700:#0288d1;--paper-light-blue-800:#0277bd;--paper-light-blue-900:#01579b;--paper-light-blue-a100:#80d8ff;--paper-light-blue-a200:#40c4ff;--paper-light-blue-a400:#00b0ff;--paper-light-blue-a700:#0091ea;--paper-cyan-50:#e0f7fa;--paper-cyan-100:#b2ebf2;--paper-cyan-200:#80deea;--paper-cyan-300:#4dd0e1;--paper-cyan-400:#26c6da;--paper-cyan-500:#00bcd4;--paper-cyan-600:#00acc1;--paper-cyan-700:#0097a7;--paper-cyan-800:#00838f;--paper-cyan-900:#006064;--paper-cyan-a100:#84ffff;--paper-cyan-a200:#18ffff;--paper-cyan-a400:#00e5ff;--paper-cyan-a700:#00b8d4;--paper-teal-50:#e0f2f1;--paper-teal-100:#b2dfdb;--paper-teal-200:#80cbc4;--paper-teal-300:#4db6ac;--paper-teal-400:#26a69a;--paper-teal-500:#009688;--paper-teal-600:#00897b;--paper-teal-700:#00796b;--paper-teal-800:#00695c;--paper-teal-900:#004d40;--paper-teal-a100:#a7ffeb;--paper-teal-a200:#64ffda;--paper-teal-a400:#1de9b6;--paper-teal-a700:#00bfa5;--paper-green-50:#e8f5e9;--paper-green-100:#c8e6c9;--paper-green-200:#a5d6a7;--paper-green-300:#81c784;--paper-green-400:#66bb6a;--paper-green-500:#4caf50;--paper-green-600:#43a047;--paper-green-700:#388e3c;--paper-green-800:#2e7d32;--paper-green-900:#1b5e20;--paper-green-a100:#b9f6ca;--paper-green-a200:#69f0ae;--paper-green-a400:#00e676;--paper-green-a700:#00c853;--paper-light-green-50:#f1f8e9;--paper-light-green-100:#dcedc8;--paper-light-green-200:#c5e1a5;--paper-light-green-300:#aed581;--paper-light-green-400:#9ccc65;--paper-light-green-500:#8bc34a;--paper-light-green-600:#7cb342;--paper-light-green-700:#689f38;--paper-light-green-800:#558b2f;--paper-light-green-900:#33691e;--paper-light-green-a100:#ccff90;--paper-light-green-a200:#b2ff59;--paper-light-green-a400:#76ff03;--paper-light-green-a700:#64dd17;--paper-lime-50:#f9fbe7;--paper-lime-100:#f0f4c3;--paper-lime-200:#e6ee9c;--paper-lime-300:#dce775;--paper-lime-400:#d4e157;--paper-lime-500:#cddc39;--paper-lime-600:#c0ca33;--paper-lime-700:#afb42b;--paper-lime-800:#9e9d24;--paper-lime-900:#827717;--paper-lime-a100:#f4ff81;--paper-lime-a200:#eeff41;--paper-lime-a400:#c6ff00;--paper-lime-a700:#aeea00;--paper-yellow-50:#fffde7;--paper-yellow-100:#fff9c4;--paper-yellow-200:#fff59d;--paper-yellow-300:#fff176;--paper-yellow-400:#ffee58;--paper-yellow-500:#ffeb3b;--paper-yellow-600:#fdd835;--paper-yellow-700:#fbc02d;--paper-yellow-800:#f9a825;--paper-yellow-900:#f57f17;--paper-yellow-a100:#ffff8d;--paper-yellow-a200:#ffff00;--paper-yellow-a400:#ffea00;--paper-yellow-a700:#ffd600;--paper-amber-50:#fff8e1;--paper-amber-100:#ffecb3;--paper-amber-200:#ffe082;--paper-amber-300:#ffd54f;--paper-amber-400:#ffca28;--paper-amber-500:#ffc107;--paper-amber-600:#ffb300;--paper-amber-700:#ffa000;--paper-amber-800:#ff8f00;--paper-amber-900:#ff6f00;--paper-amber-a100:#ffe57f;--paper-amber-a200:#ffd740;--paper-amber-a400:#ffc400;--paper-amber-a700:#ffab00;--paper-orange-50:#fff3e0;--paper-orange-100:#ffe0b2;--paper-orange-200:#ffcc80;--paper-orange-300:#ffb74d;--paper-orange-400:#ffa726;--paper-orange-500:#ff9800;--paper-orange-600:#fb8c00;--paper-orange-700:#f57c00;--paper-orange-800:#ef6c00;--paper-orange-900:#e65100;--paper-orange-a100:#ffd180;--paper-orange-a200:#ffab40;--paper-orange-a400:#ff9100;--paper-orange-a700:#ff6500;--paper-deep-orange-50:#fbe9e7;--paper-deep-orange-100:#ffccbc;--paper-deep-orange-200:#ffab91;--paper-deep-orange-300:#ff8a65;--paper-deep-orange-400:#ff7043;--paper-deep-orange-500:#ff5722;--paper-deep-orange-600:#f4511e;--paper-deep-orange-700:#e64a19;--paper-deep-orange-800:#d84315;--paper-deep-orange-900:#bf360c;--paper-deep-orange-a100:#ff9e80;--paper-deep-orange-a200:#ff6e40;--paper-deep-orange-a400:#ff3d00;--paper-deep-orange-a700:#dd2c00;--paper-brown-50:#efebe9;--paper-brown-100:#d7ccc8;--paper-brown-200:#bcaaa4;--paper-brown-300:#a1887f;--paper-brown-400:#8d6e63;--paper-brown-500:#795548;--paper-brown-600:#6d4c41;--paper-brown-700:#5d4037;--paper-brown-800:#4e342e;--paper-brown-900:#3e2723;--paper-grey-50:#fafafa;--paper-grey-100:#f5f5f5;--paper-grey-200:#eeeeee;--paper-grey-300:#e0e0e0;--paper-grey-400:#bdbdbd;--paper-grey-500:#9e9e9e;--paper-grey-600:#757575;--paper-grey-700:#616161;--paper-grey-800:#424242;--paper-grey-900:#212121;--paper-blue-grey-50:#eceff1;--paper-blue-grey-100:#cfd8dc;--paper-blue-grey-200:#b0bec5;--paper-blue-grey-300:#90a4ae;--paper-blue-grey-400:#78909c;--paper-blue-grey-500:#607d8b;--paper-blue-grey-600:#546e7a;--paper-blue-grey-700:#455a64;--paper-blue-grey-800:#37474f;--paper-blue-grey-900:#263238;--dark-divider-opacity:0.12;--dark-disabled-opacity:0.38;--dark-secondary-opacity:0.54;--dark-primary-opacity:0.87;--light-divider-opacity:0.12;--light-disabled-opacity:0.3;--light-secondary-opacity:0.7;--light-primary-opacity:1.0;}</style></custom-style><custom-style><style is="custom-style">html{--primary-text-color:var(--light-theme-text-color);--primary-background-color:var(--light-theme-background-color);--secondary-text-color:var(--light-theme-secondary-color);--disabled-text-color:var(--light-theme-disabled-color);--divider-color:var(--light-theme-divider-color);--error-color:var(--paper-deep-orange-a700);--primary-color:var(--paper-indigo-500);--light-primary-color:var(--paper-indigo-100);--dark-primary-color:var(--paper-indigo-700);--accent-color:var(--paper-pink-a200);--light-accent-color:var(--paper-pink-a100);--dark-accent-color:var(--paper-pink-a400);--light-theme-background-color:#ffffff;--light-theme-base-color:#000000;--light-theme-text-color:var(--paper-grey-900);--light-theme-secondary-color:#737373;--light-theme-disabled-color:#9b9b9b;--light-theme-divider-color:#dbdbdb;--dark-theme-background-color:var(--paper-grey-900);--dark-theme-base-color:#ffffff;--dark-theme-text-color:#ffffff;--dark-theme-secondary-color:#bcbcbc;--dark-theme-disabled-color:#646464;--dark-theme-divider-color:#3c3c3c;--text-primary-color:var(--dark-theme-text-color);--default-primary-color:var(--primary-color);}</style></custom-style><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic" crossorigin="anonymous"><custom-style><style is="custom-style">html{--paper-font-common-base:{font-family:'Roboto', 'Noto', sans-serif;-webkit-font-smoothing:antialiased;};--paper-font-common-code:{font-family:'Roboto Mono', 'Consolas', 'Menlo', monospace;-webkit-font-smoothing:antialiased;};--paper-font-common-expensive-kerning:{text-rendering:optimizeLegibility;};--paper-font-common-nowrap:{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;};--paper-font-display4:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:112px;font-weight:300;letter-spacing:-.044em;line-height:120px;};--paper-font-display3:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:56px;font-weight:400;letter-spacing:-.026em;line-height:60px;};--paper-font-display2:{@apply --paper-font-common-base;font-size:45px;font-weight:400;letter-spacing:-.018em;line-height:48px;};--paper-font-display1:{@apply --paper-font-common-base;font-size:34px;font-weight:400;letter-spacing:-.01em;line-height:40px;};--paper-font-headline:{@apply --paper-font-common-base;font-size:24px;font-weight:400;letter-spacing:-.012em;line-height:32px;};--paper-font-title:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:20px;font-weight:500;line-height:28px;};--paper-font-subhead:{@apply --paper-font-common-base;font-size:16px;font-weight:400;line-height:24px;};--paper-font-body2:{@apply --paper-font-common-base;font-size:14px;font-weight:500;line-height:24px;};--paper-font-body1:{@apply --paper-font-common-base;font-size:14px;font-weight:400;line-height:20px;};--paper-font-caption:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:12px;font-weight:400;letter-spacing:0.011em;line-height:20px;};--paper-font-menu:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:13px;font-weight:500;line-height:24px;};--paper-font-button:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:14px;font-weight:500;letter-spacing:0.018em;line-height:24px;text-transform:uppercase;};--paper-font-code2:{@apply --paper-font-common-code;font-size:14px;font-weight:700;line-height:20px;};--paper-font-code1:{@apply --paper-font-common-code;font-size:14px;font-weight:500;line-height:20px;};}</style></custom-style><dom-module id="paper-dialog-shared-styles" assetpath="bower_components/paper-dialog-behavior/"><template><style>:host{display:block;margin:24px 40px;background:var(--paper-dialog-background-color, var(--primary-background-color));color:var(--paper-dialog-color, var(--primary-text-color));@apply --paper-font-body1;@apply --shadow-elevation-16dp;@apply --paper-dialog;}:host > ::slotted(*){margin-top:20px;padding:0 24px;}:host > ::slotted(.no-padding){padding:0;}:host > ::slotted(h2){position:relative;margin:0;@apply --paper-font-title;@apply --paper-dialog-title;}:host > ::slotted(*:first-child){margin-top:24px;}:host > ::slotted(*:last-child){margin-bottom:24px;}:host > ::slotted(.buttons){position:relative;padding:8px 8px 8px 24px;margin:0;color:var(--paper-dialog-button-color, var(--primary-color));@apply --layout-horizontal;@apply --layout-end-justified;}</style></template></dom-module><dom-module id="paper-dialog" assetpath="bower_components/paper-dialog/"><template><style include="paper-dialog-shared-styles"></style><slot></slot></template></dom-module><script>Polymer({is:'paper-dialog',behaviors:[Polymer.PaperDialogBehavior,Polymer.NeonAnimationRunnerBehavior],listeners:{"neon-animation-finish":'_onNeonAnimationFinish'},_renderOpened:function(){this.cancelAnimation(),this.playAnimation('entry')},_renderClosed:function(){this.cancelAnimation(),this.playAnimation('exit')},_onNeonAnimationFinish:function(){this.opened?this._finishRenderOpened():this._finishRenderClosed()}});</script><script>Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:Polymer.Element?null:function(){this.fire('iron-form-element-register')},detached:Polymer.Element?null:function(){this._parentForm&&this._parentForm.fire('iron-form-element-unregister',{target:this})}};</script><dom-module id="iron-a11y-announcer" assetpath="bower_components/iron-a11y-announcer/"><template><style>:host{display:inline-block;position:fixed;clip:rect(0px,0px,0px,0px);}</style><div aria-live$="[[mode]]">[[_text]]</div></template><script>(function(){'use strict';Polymer.IronA11yAnnouncer=Polymer({is:'iron-a11y-announcer',properties:{mode:{type:String,value:'polite'},_text:{type:String,value:''}},created:function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=this),document.body.addEventListener('iron-announce',this._onIronAnnounce.bind(this))},announce:function(a){this._text='',this.async(function(){this._text=a},100)},_onIronAnnounce:function(a){a.detail&&a.detail.text&&this.announce(a.detail.text)}}),Polymer.IronA11yAnnouncer.instance=null,Polymer.IronA11yAnnouncer.requestAvailability=function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=document.createElement('iron-a11y-announcer')),document.body.appendChild(Polymer.IronA11yAnnouncer.instance)}})();</script></dom-module><script>(function(){function a(a){this.type=a&&a.type||'default',this.key=a&&a.key,a&&'value'in a&&(this.value=a.value)}a.types={},a.prototype={get value(){var b=this.type,c=this.key;if(b&&c)return a.types[b]&&a.types[b][c]},set value(b){var c=this.type,d=this.key;c&&d&&(c=a.types[c]=a.types[c]||{},null==b?delete c[d]:c[d]=b)},get list(){var c=this.type;if(c){const c=a.types[this.type];return c?Object.keys(c).map(function(a){return b[this.type][a]},this):[]}},byKey:function(a){return this.key=a,this.value}},Polymer.IronMeta=a;var b=Polymer.IronMeta.types;Polymer({is:'iron-meta',properties:{type:{type:String,value:'default'},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:'_selfChanged'},__meta:{type:Boolean,computed:'__computeMeta(type, key, value)'}},hostAttributes:{hidden:!0},__computeMeta:function(a,b,c){var d=new Polymer.IronMeta({type:a,key:b});return void 0!==c&&c!==d.value?d.value=c:this.value!==d.value&&(this.value=d.value),d},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(a){a&&(this.value=this)},byKey:function(a){return new Polymer.IronMeta({type:this.type,key:a}).value}})})();</script><script>Polymer.IronValidatableBehaviorMeta=null,Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1,observer:'_invalidChanged'}},registered:function(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:'validator'})},_invalidChanged:function(){this.invalid?this.setAttribute('aria-invalid','true'):this.removeAttribute('aria-invalid')},get _validator(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)},hasValidator:function(){return null!=this._validator},validate:function(a){return this.invalid=void 0===a&&void 0!==this.value?!this._getValidity(this.value):!this._getValidity(a),!this.invalid},_getValidity:function(a){return!this.hasValidator()||this._validator.validate(a)}};</script><dom-module id="iron-input" assetpath="bower_components/iron-input/"><template><style>:host{display:inline-block;}</style><slot id="content"></slot></template><script>Polymer({is:'iron-input',behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{type:String},value:{computed:'_computeValue(bindValue)'},allowedPattern:{type:String},autoValidate:{type:Boolean,value:!1},_inputElement:Object},observers:['_bindValueChanged(bindValue, _inputElement)'],listeners:{input:'_onInput',keypress:'_onKeypress'},created:function(){Polymer.IronA11yAnnouncer.requestAvailability(),this._previousValidInput='',this._patternAlreadyChecked=!1},attached:function(){this._observer=Polymer.dom(this).observeNodes(function(){this._initSlottedInput()}.bind(this))},detached:function(){this._observer&&(Polymer.dom(this).unobserveNodes(this._observer),this._observer=null)},get inputElement(){return this._inputElement},_initSlottedInput:function(){this._inputElement=this.getEffectiveChildren()[0],this.inputElement&&this.inputElement.value&&(this.bindValue=this.inputElement.value),this.fire('iron-input-ready')},get _patternRegExp(){var a;if(this.allowedPattern)a=new RegExp(this.allowedPattern);else switch(this.type){case'number':a=/[0-9.,e-]/;}return a},_bindValueChanged:function(a,b){b&&(a===void 0?b.value=null:a!==b.value&&(this.inputElement.value=a),this.autoValidate&&this.validate(),this.fire('bind-value-changed',{value:a}))},_onInput:function(){if(this.allowedPattern&&!this._patternAlreadyChecked){var a=this._checkPatternValidity();a||(this._announceInvalidCharacter('Invalid string of characters not entered.'),this.inputElement.value=this._previousValidInput)}this.bindValue=this._previousValidInput=this.inputElement.value,this._patternAlreadyChecked=!1},_isPrintable:function(a){var b=8==a.keyCode||9==a.keyCode||13==a.keyCode||27==a.keyCode,c=19==a.keyCode||20==a.keyCode||45==a.keyCode||46==a.keyCode||144==a.keyCode||145==a.keyCode||32<a.keyCode&&41>a.keyCode||111<a.keyCode&&124>a.keyCode;return!b&&!(0==a.charCode&&c)},_onKeypress:function(a){if(this.allowedPattern||'number'===this.type){var b=this._patternRegExp;if(b&&!(a.metaKey||a.ctrlKey||a.altKey)){this._patternAlreadyChecked=!0;var c=String.fromCharCode(a.charCode);this._isPrintable(a)&&!b.test(c)&&(a.preventDefault(),this._announceInvalidCharacter('Invalid character '+c+' not entered.'))}}},_checkPatternValidity:function(){var a=this._patternRegExp;if(!a)return!0;for(var b=0;b<this.inputElement.value.length;b++)if(!a.test(this.inputElement.value[b]))return!1;return!0},validate:function(){if(!this.inputElement)return this.invalid=!1,!0;var a=this.inputElement.checkValidity();return a&&(this.required&&''===this.bindValue?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.bindValue))),this.invalid=!a,this.fire('iron-input-validate'),a},_announceInvalidCharacter:function(a){this.fire('iron-announce',{text:a})},_computeValue:function(a){return a}});</script></dom-module><script>Polymer.PaperInputHelper={},Polymer.PaperInputHelper.NextLabelID=1,Polymer.PaperInputHelper.NextAddonID=1,Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:'off'},autofocus:{type:Boolean,observer:'_autofocusChanged'},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:''},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:'none'},autocorrect:{type:String,value:'off'},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:''},_ariaLabelledBy:{type:String,value:''}},listeners:{"addon-attached":'_onAddonAttached'},keyBindings:{"shift+tab:keydown":'_onShiftTabDown'},hostAttributes:{tabindex:0},get inputElement(){return this.$.input},get _focusableElement(){return this.inputElement},created:function(){this._typesThatHaveText=['date','datetime','datetime-local','month','time','week','file']},attached:function(){this._updateAriaLabelledBy(),!Polymer.Element&&this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(a,b){return a=a?a+' '+b:b,a},_onAddonAttached:function(a){var b=Polymer.dom(a).rootTarget;if(b.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,b.id);else{var c='paper-input-add-on-'+Polymer.PaperInputHelper.NextAddonID++;b.id=c,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,c)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(a){Polymer.IronControlState._focusBlurHandler.call(this,a),this.focused&&!this._shiftTabPressed&&this._focusableElement&&this._focusableElement.focus()},_onShiftTabDown:function(){var a=this.getAttribute('tabindex');this._shiftTabPressed=!0,this.setAttribute('tabindex','-1'),this.async(function(){this.setAttribute('tabindex',a),this._shiftTabPressed=!1},1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(a){try{var b=this.inputElement.selectionStart;this.value=a,this.inputElement.selectionStart=b,this.inputElement.selectionEnd=b}catch(b){this.value=a}},_computeAlwaysFloatLabel:function(a,b){return b||a},_updateAriaLabelledBy:function(){var a=Polymer.dom(this.root).querySelector('label');if(!a)return void(this._ariaLabelledBy='');var b;a.id?b=a.id:(b='paper-input-label-'+Polymer.PaperInputHelper.NextLabelID++,a.id=b),this._ariaLabelledBy=b},_onChange:function(a){this.shadowRoot&&this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var a=document.activeElement,b=a instanceof HTMLElement,c=b&&a!==document.body&&a!==document.documentElement;c||this._focusableElement.focus()}}},Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl];</script><script>Polymer.PaperInputAddonBehavior={attached:function(){Polymer.dom.flush(),this.fire('addon-attached')},update:function(){}};</script><dom-module id="paper-input-char-counter" assetpath="bower_components/paper-input/"><template><style>:host{display:inline-block;float:right;@apply --paper-font-caption;@apply --paper-input-char-counter;}:host([hidden]){display:none !important;}:host(:dir(rtl)){float:left;}</style><span>[[_charCounterStr]]</span></template></dom-module><script>Polymer({is:'paper-input-char-counter',behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:'0'}},update:function(a){if(a.inputElement){a.value=a.value||'';var b=a.value.toString().length.toString();a.inputElement.hasAttribute('maxlength')&&(b+='/'+a.inputElement.getAttribute('maxlength')),this._charCounterStr=b}}});</script><dom-module id="paper-input-container" assetpath="bower_components/paper-input/"><template><style>:host{display:block;padding:8px 0;--paper-input-container-shared-input-style:{position:relative;outline:none;box-shadow:none;padding:0;width:100%;max-width:100%;background:transparent;border:none;color:var(--paper-input-container-input-color, var(--primary-text-color));-webkit-appearance:none;text-align:inherit;vertical-align:bottom;@apply --paper-font-subhead;};@apply --paper-input-container;}:host([inline]){display:inline-block;}:host([disabled]){pointer-events:none;opacity:0.33;@apply --paper-input-container-disabled;}:host([hidden]){display:none !important;}[hidden]{display:none !important;}.floated-label-placeholder{@apply --paper-font-caption;}.underline{height:2px;position:relative;}.focused-line{@apply --layout-fit;border-bottom:2px solid var(--paper-input-container-focus-color, var(--primary-color));-webkit-transform-origin:center center;transform-origin:center center;-webkit-transform:scale3d(0,1,1);transform:scale3d(0,1,1);@apply --paper-input-container-underline-focus;}.underline.is-highlighted .focused-line{-webkit-transform:none;transform:none;-webkit-transition:-webkit-transform 0.25s;transition:transform 0.25s;@apply --paper-transition-easing;}.underline.is-invalid .focused-line{border-color:var(--paper-input-container-invalid-color, var(--error-color));-webkit-transform:none;transform:none;-webkit-transition:-webkit-transform 0.25s;transition:transform 0.25s;@apply --paper-transition-easing;}.unfocused-line{@apply --layout-fit;border-bottom:1px solid var(--paper-input-container-color, var(--secondary-text-color));@apply --paper-input-container-underline;}:host([disabled]) .unfocused-line{border-bottom:1px dashed;border-color:var(--paper-input-container-color, var(--secondary-text-color));@apply --paper-input-container-underline-disabled;}.input-wrapper{@apply --layout-horizontal;@apply --layout-center;position:relative;}.input-content{@apply --layout-flex-auto;@apply --layout-relative;max-width:100%;}.input-content ::slotted(label),
      .input-content ::slotted(.paper-input-label){position:absolute;top:0;left:0;width:100%;font:inherit;color:var(--paper-input-container-color, var(--secondary-text-color));-webkit-transition:-webkit-transform 0.25s, width 0.25s;transition:transform 0.25s, width 0.25s;-webkit-transform-origin:left top;transform-origin:left top;min-height:1px;@apply --paper-font-common-nowrap;@apply --paper-font-subhead;@apply --paper-input-container-label;@apply --paper-transition-easing;}.input-content.label-is-floating ::slotted(label),
      .input-content.label-is-floating ::slotted(.paper-input-label){-webkit-transform:translateY(-75%) scale(0.75);transform:translateY(-75%) scale(0.75);width:133%;@apply --paper-input-container-label-floating;}:host(:dir(rtl)) .input-content.label-is-floating ::slotted(label),
      :host(:dir(rtl)) .input-content.label-is-floating ::slotted(.paper-input-label){right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;}.input-content.label-is-highlighted ::slotted(label),
      .input-content.label-is-highlighted ::slotted(.paper-input-label){color:var(--paper-input-container-focus-color, var(--primary-color));@apply --paper-input-container-label-focus;}.input-content.is-invalid ::slotted(label),
      .input-content.is-invalid ::slotted(.paper-input-label){color:var(--paper-input-container-invalid-color, var(--error-color));}.input-content.label-is-hidden ::slotted(label),
      .input-content.label-is-hidden ::slotted(.paper-input-label){visibility:hidden;}.input-content ::slotted(iron-input){@apply --paper-input-container-shared-input-style;}.input-content ::slotted(input),
      .input-content ::slotted(textarea),
      .input-content ::slotted(iron-autogrow-textarea),
      .input-content ::slotted(.paper-input-input){@apply --paper-input-container-shared-input-style;@apply --paper-input-container-input;}.input-content ::slotted(input)::-webkit-outer-spin-button,
      .input-content ::slotted(input)::-webkit-inner-spin-button{@apply --paper-input-container-input-webkit-spinner;}.input-content.focused ::slotted(input),
      .input-content.focused ::slotted(textarea),
      .input-content.focused ::slotted(iron-autogrow-textarea),
      .input-content.focused ::slotted(.paper-input-input){@apply --paper-input-container-input-focus;}.input-content.is-invalid ::slotted(input),
      .input-content.is-invalid ::slotted(textarea),
      .input-content.is-invalid ::slotted(iron-autogrow-textarea),
      .input-content.is-invalid ::slotted(.paper-input-input){@apply --paper-input-container-input-invalid;}.prefix ::slotted(*){display:inline-block;@apply --paper-font-subhead;@apply --layout-flex-none;@apply --paper-input-prefix;}.suffix ::slotted(*){display:inline-block;@apply --paper-font-subhead;@apply --layout-flex-none;@apply --paper-input-suffix;}.input-content ::slotted(input){min-width:0;}.input-content ::slotted(textarea){resize:none;}.add-on-content{position:relative;}.add-on-content.is-invalid ::slotted(*){color:var(--paper-input-container-invalid-color, var(--error-color));}.add-on-content.is-highlighted ::slotted(*){color:var(--paper-input-container-focus-color, var(--primary-color));}</style><div class="floated-label-placeholder" aria-hidden="true" hidden="[[noLabelFloat]]">&nbsp;</div><div class="input-wrapper"><span class="prefix"><slot name="prefix"></slot></span><div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]" id="labelAndInputContainer"><slot name="label"></slot><slot name="input"></slot></div><span class="suffix"><slot name="suffix"></slot></span></div><div class$="[[_computeUnderlineClass(focused,invalid)]]"><div class="unfocused-line"></div><div class="focused-line"></div></div><div class$="[[_computeAddOnContentClass(focused,invalid)]]"><slot name="add-on"></slot></div></template></dom-module><script>Polymer({is:'paper-input-container',properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:'bind-value'},autoValidate:{type:Boolean,value:!1},invalid:{observer:'_invalidChanged',type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:'input,iron-input,textarea,.paper-input-input'},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":'_onAddonAttached',"iron-input-validate":'_onIronInputValidate'},get _valueChangedEvent(){return this.attrForValue+'-changed'},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this._addons||(this._addons=[]),this.addEventListener('focus',this._boundOnFocus,!0),this.addEventListener('blur',this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener('input',this._onInput),this._inputElementValue&&''!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement)},_onAddonAttached:function(a){this._addons||(this._addons=[]);var b=a.target;-1===this._addons.indexOf(b)&&(this._addons.push(b),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(a){this._handleValueAndAutoValidate(a.target)},_onValueChanged:function(a){var b=a.target;void 0===b.value||this._handleValueAndAutoValidate(a.target)},_handleValue:function(a){var b=this._inputElementValue;this._inputHasContent=b||0===b||'number'===a.type&&!a.checkValidity(),this.updateAddons({inputElement:a,value:b,invalid:this.invalid})},_handleValueAndAutoValidate:function(a){if(this.autoValidate&&a){var b;b=a.validate?a.validate(this._inputElementValue):a.checkValidity(),this.invalid=!b}this._handleValue(a)},_onIronInputValidate:function(){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(a){for(var b,c=0;b=this._addons[c];c++)b.update(a)},_computeInputContentClass:function(a,b,c,d,e){var f='input-content';if(!a){var g=this.querySelector('label');b||e?(f+=' label-is-floating',this.$.labelAndInputContainer.style.position='static',d?f+=' is-invalid':c&&(f+=' label-is-highlighted')):(g&&(this.$.labelAndInputContainer.style.position='relative'),d&&(f+=' is-invalid'))}else e&&(f+=' label-is-hidden'),d&&(f+=' is-invalid');return c&&(f+=' focused'),f},_computeUnderlineClass:function(a,b){var c='underline';return b?c+=' is-invalid':a&&(c+=' is-highlighted'),c},_computeAddOnContentClass:function(a,b){var c='add-on-content';return b?c+=' is-invalid':a&&(c+=' is-highlighted'),c}});</script><dom-module id="paper-input-error" assetpath="bower_components/paper-input/"><template><style>:host{display:inline-block;visibility:hidden;color:var(--paper-input-container-invalid-color, var(--error-color));@apply --paper-font-caption;@apply --paper-input-error;position:absolute;left:0;right:0;}:host([invalid]){visibility:visible;}</style><slot></slot></template></dom-module><script>Polymer({is:'paper-input-error',behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(a){this._setInvalid(a.invalid)}});</script><dom-module id="paper-input" assetpath="bower_components/paper-input/"><template><style>:host{display:block;}:host([focused]){outline:none;}:host([hidden]){display:none !important;}input{position:relative;outline:none;box-shadow:none;margin:0;padding:0;width:100%;max-width:100%;background:transparent;border:none;color:var(--paper-input-container-input-color, var(--primary-text-color));-webkit-appearance:none;text-align:inherit;vertical-align:bottom;min-width:0;@apply --paper-font-subhead;@apply --paper-input-container-input;}input:disabled{@apply --paper-input-container-input-disabled;}input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button{@apply --paper-input-container-input-webkit-spinner;}input::-webkit-clear-button{@apply --paper-input-container-input-webkit-clear;}input::-webkit-input-placeholder{color:var(--paper-input-container-color, var(--secondary-text-color));}input:-moz-placeholder{color:var(--paper-input-container-color, var(--secondary-text-color));}input::-moz-placeholder{color:var(--paper-input-container-color, var(--secondary-text-color));}input::-ms-clear{@apply --paper-input-container-ms-clear;}input::-ms-reveal{@apply --paper-input-container-ms-reveal;}input:-ms-input-placeholder{color:var(--paper-input-container-color, var(--secondary-text-color));}label{pointer-events:none;}</style><paper-input-container id="container" no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]"><slot name="prefix" slot="prefix"></slot><label hidden$="[[!label]]" aria-hidden="true" for="input" slot="label">[[label]]</label><span id="template-placeholder"></span><slot name="suffix" slot="suffix"></slot><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error></template><template is="dom-if" if="[[charCounter]]"><paper-input-char-counter slot="add-on"></paper-input-char-counter></template></paper-input-container></template><template id="v0"><input is="iron-input" id="input" slot="input" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" bind-value="{{value}}" invalid="{{invalid}}" prevent-invalid-input="[[preventInvalidInput]]" allowed-pattern="[[allowedPattern]]" validator="[[validator]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]"></template><template id="v1"><iron-input bind-value="{{value}}" id="input" slot="input" maxlength$="[[maxlength]]" allowed-pattern="[[allowedPattern]]" invalid="{{invalid}}" validator="[[validator]]"><input id="nativeInput" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]"></iron-input></template></dom-module><script>Polymer({is:'paper-input',behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],beforeRegister:function(){var a=document.createElement('iron-input'),b='function'==typeof a._initSlottedInput?'v1':'v0',c=Polymer.DomModule.import('paper-input','template'),d=Polymer.DomModule.import('paper-input','template#'+b),e=c.content.querySelector('#template-placeholder');e&&e.parentNode.replaceChild(d.content,e)},get _focusableElement(){return Polymer.Element?this.inputElement._inputElement:this.inputElement},listeners:{"iron-input-ready":'_onIronInputReady'},_onIronInputReady:function(){this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.$.nativeInput.type)&&(this.alwaysFloatLabel=!0),!this.inputElement.bindValue||this.$.container._handleValueAndAutoValidate(this.inputElement)}});</script><script>!function(){function a(){this._events={},this._conf&&b.call(this,this._conf)}function b(a){a&&(this._conf=a,a.delimiter&&(this.delimiter=a.delimiter),a.maxListeners&&(this._events.maxListeners=a.maxListeners),a.wildcard&&(this.wildcard=a.wildcard),a.newListener&&(this.newListener=a.newListener),this.wildcard&&(this.listenerTree={}))}function c(a){this._events={},this.newListener=!1,b.call(this,a)}function d(a,b,c,e){if(!c)return[];var f,g,h,i,j,k,l,m=[],n=b.length,o=b[e],p=b[e+1];if(e===n&&c._listeners){if('function'===typeof c._listeners)return a&&a.push(c._listeners),[c];for(f=0,g=c._listeners.length;f<g;f++)a&&a.push(c._listeners[f]);return[c]}if('*'===o||'**'===o||c[o]){if('*'===o){for(h in c)'_listeners'!==h&&c.hasOwnProperty(h)&&(m=m.concat(d(a,b,c[h],e+1)));return m}if('**'===o){for(h in l=e+1===n||e+2===n&&'*'===p,l&&c._listeners&&(m=m.concat(d(a,b,c,n))),c)'_listeners'!==h&&c.hasOwnProperty(h)&&('*'===h||'**'===h?(c[h]._listeners&&!l&&(m=m.concat(d(a,b,c[h],n))),m=m.concat(d(a,b,c[h],e))):h===p?m=m.concat(d(a,b,c[h],e+2)):m=m.concat(d(a,b,c[h],e)));return m}m=m.concat(d(a,b,c[o],e+1))}if(i=c['*'],i&&d(a,b,i,e+1),j=c['**'],j)if(e<n)for(h in j._listeners&&d(a,b,j,n),j)'_listeners'!==h&&j.hasOwnProperty(h)&&(h===p?d(a,b,j[h],e+2):h===o?d(a,b,j[h],e+1):(k={},k[h]=j[h],d(a,b,{"**":k},e+1)));else j._listeners?d(a,b,j,n):j['*']&&j['*']._listeners&&d(a,b,j['*'],n);return m}function e(a,b){a='string'===typeof a?a.split(this.delimiter):a.slice();for(var c=0,d=a.length;c+1<d;c++)if('**'===a[c]&&'**'===a[c+1])return;for(var e=this.listenerTree,h=a.shift();h;){if(e[h]||(e[h]={}),e=e[h],0===a.length){if(!e._listeners)e._listeners=b;else if('function'===typeof e._listeners)e._listeners=[e._listeners,b];else if(f(e._listeners)&&(e._listeners.push(b),!e._listeners.warned)){var i=g;'undefined'!==typeof this._events.maxListeners&&(i=this._events.maxListeners),0<i&&e._listeners.length>i&&(e._listeners.warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',e._listeners.length),console.trace())}return!0}h=a.shift()}return!0}var f=Array.isArray?Array.isArray:function(a){return'[object Array]'===Object.prototype.toString.call(a)},g=10;c.prototype.delimiter='.',c.prototype.setMaxListeners=function(b){this._events||a.call(this),this._events.maxListeners=b,this._conf||(this._conf={}),this._conf.maxListeners=b},c.prototype.event='',c.prototype.once=function(a,b){return this.many(a,1,b),this},c.prototype.many=function(a,b,c){function d(){0===--b&&e.off(a,d),c.apply(this,arguments)}var e=this;if('function'!==typeof c)throw new Error('many only accepts instances of Function');return d._origin=c,this.on(a,d),e},c.prototype.emit=function(){this._events||a.call(this);var b=arguments[0];if('newListener'===b&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var c=arguments.length,e=Array(c-1),f=1;f<c;f++)e[f-1]=arguments[f];for(f=0,c=this._all.length;f<c;f++)this.event=b,this._all[f].apply(this,e)}if('error'===b&&!this._all&&!this._events.error&&!(this.wildcard&&this.listenerTree.error)){if(arguments[1]instanceof Error)throw arguments[1];else throw new Error('Uncaught, unspecified \'error\' event.');return!1}var g;if(this.wildcard){g=[];var h='string'===typeof b?b.split(this.delimiter):b.slice();d.call(this,g,h,this.listenerTree,0)}else g=this._events[b];if('function'===typeof g){if(this.event=b,1===arguments.length)g.call(this);else if(1<arguments.length)switch(arguments.length){case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],arguments[2]);break;default:for(var c=arguments.length,e=Array(c-1),f=1;f<c;f++)e[f-1]=arguments[f];g.apply(this,e);}return!0}if(g){for(var c=arguments.length,e=Array(c-1),f=1;f<c;f++)e[f-1]=arguments[f];for(var i=g.slice(),f=0,c=i.length;f<c;f++)this.event=b,i[f].apply(this,e);return 0<i.length||!!this._all}return!!this._all},c.prototype.on=function(b,c){if('function'===typeof b)return this.onAny(b),this;if('function'!==typeof c)throw new Error('on only accepts instances of Function');if(this._events||a.call(this),this.emit('newListener',b,c),this.wildcard)return e.call(this,b,c),this;if(!this._events[b])this._events[b]=c;else if('function'===typeof this._events[b])this._events[b]=[this._events[b],c];else if(f(this._events[b])&&(this._events[b].push(c),!this._events[b].warned)){var d=g;'undefined'!==typeof this._events.maxListeners&&(d=this._events.maxListeners),0<d&&this._events[b].length>d&&(this._events[b].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[b].length),console.trace())}return this},c.prototype.onAny=function(a){if('function'!==typeof a)throw new Error('onAny only accepts instances of Function');return this._all||(this._all=[]),this._all.push(a),this},c.prototype.addListener=c.prototype.on,c.prototype.off=function(a,b){if('function'!==typeof b)throw new Error('removeListener only takes instances of Function');var c,e=[];if(this.wildcard){var g='string'===typeof a?a.split(this.delimiter):a.slice();e=d.call(this,null,g,this.listenerTree,0)}else{if(!this._events[a])return this;c=this._events[a],e.push({_listeners:c})}for(var h,j=0;j<e.length;j++){if(h=e[j],c=h._listeners,f(c)){for(var k=-1,l=0,i=c.length;l<i;l++)if(c[l]===b||c[l].listener&&c[l].listener===b||c[l]._origin&&c[l]._origin===b){k=l;break}if(0>k)continue;return this.wildcard?h._listeners.splice(k,1):this._events[a].splice(k,1),0===c.length&&(this.wildcard?delete h._listeners:delete this._events[a]),this}(c===b||c.listener&&c.listener===b||c._origin&&c._origin===b)&&(this.wildcard?delete h._listeners:delete this._events[a])}return this},c.prototype.offAny=function(a){var b,c=0,d=0;if(a&&this._all&&0<this._all.length){for(b=this._all,c=0,d=b.length;c<d;c++)if(a===b[c])return b.splice(c,1),this;}else this._all=[];return this},c.prototype.removeListener=c.prototype.off,c.prototype.removeAllListeners=function(b){if(0===arguments.length)return this._events&&a.call(this),this;if(this.wildcard)for(var c,e='string'===typeof b?b.split(this.delimiter):b.slice(),f=d.call(this,null,e,this.listenerTree,0),g=0;g<f.length;g++)c=f[g],c._listeners=null;else{if(!this._events[b])return this;this._events[b]=null}return this},c.prototype.listeners=function(b){if(this.wildcard){var c=[],e='string'===typeof b?b.split(this.delimiter):b.slice();return d.call(this,c,e,this.listenerTree,0),c}return this._events||a.call(this),this._events[b]||(this._events[b]=[]),f(this._events[b])||(this._events[b]=[this._events[b]]),this._events[b]},c.prototype.listenersAny=function(){return this._all?this._all:[]},'function'===typeof define&&define.amd?define(function(){return c}):'object'===typeof exports?exports.EventEmitter2=c:window.EventEmitter2=c}();</script><script>(function c(p,e,t){function r(i,o){if(!e[i]){if(!p[i]){var n="function"==typeof require&&require;if(!o&&n)return n(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var m=e[i]={exports:{}};p[i][0].call(m.exports,function(t){var e=p[i][1][t];return r(e?e:t)},m,m.exports,c,p,e,t)}return e[i].exports}for(var s="function"==typeof require&&require,i=0;i<t.length;i++)r(t[i]);return r})({1:[function(e,t){"use strict";function r(e){if(null===e||e===void 0)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e){for(var t,a,n=r(e),l=1;l<arguments.length;l++){for(var c in t=Object(arguments[l]),t)o.call(t,c)&&(n[c]=t[c]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(t);for(var p=0;p<a.length;p++)s.call(t,a[p])&&(n[a[p]]=t[a[p]])}}return n}},{}],2:[function(e,t){var r=this.ROSLIB||{REVISION:"0.18.0"},s=e("object-assign");s(r,e("./core")),s(r,e("./actionlib")),s(r,e("./math")),s(r,e("./tf")),s(r,e("./urdf")),t.exports=r},{"./actionlib":7,"./core":16,"./math":21,"./tf":24,"./urdf":36,"object-assign":1}],3:[function(e){(function(t){t.ROSLIB=e("./RosLib")}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"./RosLib":2}],4:[function(e,t){function r(e){var t=this;e=e||{},this.ros=e.ros,this.serverName=e.serverName,this.actionName=e.actionName,this.timeout=e.timeout,this.omitFeedback=e.omitFeedback,this.omitStatus=e.omitStatus,this.omitResult=e.omitResult,this.goals={};var r=!1,o=new s({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),i=new s({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),a=new s({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});this.goalTopic=new s({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new s({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||i.subscribe(function(e){r=!0,e.status_list.forEach(function(e){var r=t.goals[e.goal_id.id];r&&r.emit("status",e)})}),this.omitFeedback||o.subscribe(function(e){var r=t.goals[e.status.goal_id.id];r&&(r.emit("status",e.status),r.emit("feedback",e.feedback))}),this.omitResult||a.subscribe(function(e){var r=t.goals[e.status.goal_id.id];r&&(r.emit("status",e.status),r.emit("result",e.result))}),this.timeout&&setTimeout(function(){r||t.emit("timeout")},this.timeout)}var s=e("../core/Topic"),o=e("../core/Message"),i=e("eventemitter2").EventEmitter2;r.prototype.__proto__=i.prototype,r.prototype.cancel=function(){var e=new o;this.cancelTopic.publish(e)},t.exports=r},{"../core/Message":8,"../core/Topic":15,eventemitter2:37}],5:[function(e,t){function r(e){var t=this;this.actionClient=e.actionClient,this.goalMessage=e.goalMessage,this.isFinished=!1;var r=new Date;this.goalID="goal_"+Math.random()+"_"+r.getTime(),this.goalMessage=new s({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(e){t.status=e}),this.on("result",function(e){t.isFinished=!0,t.result=e}),this.on("feedback",function(e){t.feedback=e}),this.actionClient.goals[this.goalID]=this}var s=e("../core/Message"),o=e("eventemitter2").EventEmitter2;r.prototype.__proto__=o.prototype,r.prototype.send=function(e){var t=this;t.actionClient.goalTopic.publish(t.goalMessage),e&&setTimeout(function(){t.isFinished||t.emit("timeout")},e)},r.prototype.cancel=function(){var e=new s({id:this.goalID});this.actionClient.cancelTopic.publish(e)},t.exports=r},{"../core/Message":8,eventemitter2:37}],6:[function(e,t){function r(e){var t=this;e=e||{},this.ros=e.ros,this.serverName=e.serverName,this.actionName=e.actionName,this.feedbackPublisher=new s({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var r=new s({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});r.advertise(),this.resultPublisher=new s({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var i=new s({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),a=new s({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new o({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,i.subscribe(function(e){t.currentGoal?(t.nextGoal=e,t.emit("cancel")):(t.statusMessage.status_list=[{goal_id:e.goal_id,status:1}],t.currentGoal=e,t.emit("goal",e.goal))});var n=function(e,t){return!(e.secs>t.secs)&&(!!(e.secs<t.secs)||!!(e.nsecs<t.nsecs))};a.subscribe(function(e){0===e.stamp.secs&&0===e.stamp.secs&&""===e.id?(t.nextGoal=null,t.currentGoal&&t.emit("cancel")):(t.currentGoal&&e.id===t.currentGoal.goal_id.id?t.emit("cancel"):t.nextGoal&&e.id===t.nextGoal.goal_id.id&&(t.nextGoal=null),t.nextGoal&&n(t.nextGoal.goal_id.stamp,e.stamp)&&(t.nextGoal=null),t.currentGoal&&n(t.currentGoal.goal_id.stamp,e.stamp)&&t.emit("cancel"))});setInterval(function(){var e=new Date,s=Math.floor(e.getTime()/1e3),o=Math.round(1e9*(e.getTime()/1e3-s));t.statusMessage.header.stamp.secs=s,t.statusMessage.header.stamp.nsecs=o,r.publish(t.statusMessage)},500)}var s=e("../core/Topic"),o=e("../core/Message"),i=e("eventemitter2").EventEmitter2;r.prototype.__proto__=i.prototype,r.prototype.setSucceeded=function(e){var t=new o({status:{goal_id:this.currentGoal.goal_id,status:3},result:e});this.resultPublisher.publish(t),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},r.prototype.sendFeedback=function(e){var t=new o({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:e});this.feedbackPublisher.publish(t)},r.prototype.setPreempted=function(){this.statusMessage.status_list=[];var e=new o({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(e),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},t.exports=r},{"../core/Message":8,"../core/Topic":15,eventemitter2:37}],7:[function(e,t){var r=e("../core/Ros"),s=e("../mixin"),o=t.exports={ActionClient:e("./ActionClient"),Goal:e("./Goal"),SimpleActionServer:e("./SimpleActionServer")};s(r,["ActionClient","SimpleActionServer"],o)},{"../core/Ros":10,"../mixin":22,"./ActionClient":4,"./Goal":5,"./SimpleActionServer":6}],8:[function(e,t){var r=e("object-assign");t.exports=function(e){r(this,e)}},{"object-assign":1}],9:[function(e,t){function r(e){e=e||{},this.ros=e.ros,this.name=e.name}var s=e("./Service"),o=e("./ServiceRequest");r.prototype.get=function(e){var t=new s({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),r=new o({name:this.name});t.callService(r,function(t){var r=JSON.parse(t.value);e(r)})},r.prototype.set=function(e,t){var r=new s({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),i=new o({name:this.name,value:JSON.stringify(e)});r.callService(i,t)},r.prototype.delete=function(e){var t=new s({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),r=new o({name:this.name});t.callService(r,e)},t.exports=r},{"./Service":11,"./ServiceRequest":12}],10:[function(e,t){function r(e){e=e||{},this.socket=null,this.idCounter=0,this.isConnected=!1,this.groovyCompatibility=!("undefined"!==typeof e.groovyCompatibility)||e.groovyCompatibility,this.setMaxListeners(0),e.url&&this.connect(e.url)}var s=e("ws"),o=e("./SocketAdapter.js"),i=e("./Service"),a=e("./ServiceRequest"),n=e("object-assign"),l=e("eventemitter2").EventEmitter2;r.prototype.__proto__=l.prototype,r.prototype.connect=function(e){this.socket=n(new s(e),o(this))},r.prototype.close=function(){this.socket&&this.socket.close()},r.prototype.authenticate=function(e,r,s,o,i,a,n){this.callOnConnection({op:"auth",mac:e,client:r,dest:s,rand:o,t:i,level:a,end:n})},r.prototype.callOnConnection=function(e){var t=this,r=JSON.stringify(e);this.isConnected?t.socket.send(r):t.once("connection",function(){t.socket.send(r)})},r.prototype.getTopics=function(e,t){var r=new i({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),s=new a;"function"===typeof t?r.callService(s,function(t){e(t.topics)},function(e){t(e)}):r.callService(s,function(t){e(t.topics)})},r.prototype.getTopicsForType=function(e,t,r){var s=new i({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),o=new a({type:e});"function"===typeof r?s.callService(o,function(e){t(e.topics)},function(e){r(e)}):s.callService(o,function(e){t(e.topics)})},r.prototype.getServices=function(e,t){var r=new i({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),s=new a;"function"===typeof t?r.callService(s,function(t){e(t.services)},function(e){t(e)}):r.callService(s,function(t){e(t.services)})},r.prototype.getServicesForType=function(e,t,r){var s=new i({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),o=new a({type:e});"function"===typeof r?s.callService(o,function(e){t(e.services)},function(e){r(e)}):s.callService(o,function(e){t(e.services)})},r.prototype.getNodes=function(e,t){var r=new i({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),s=new a;"function"===typeof t?r.callService(s,function(t){e(t.nodes)},function(e){t(e)}):r.callService(s,function(t){e(t.nodes)})},r.prototype.getParams=function(e,t){var r=new i({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),s=new a;"function"===typeof t?r.callService(s,function(t){e(t.names)},function(e){t(e)}):r.callService(s,function(t){e(t.names)})},r.prototype.getTopicType=function(e,t,r){var s=new i({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),o=new a({topic:e});"function"===typeof r?s.callService(o,function(e){t(e.type)},function(e){r(e)}):s.callService(o,function(e){t(e.type)})},r.prototype.getServiceType=function(e,t,r){var s=new i({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),o=new a({service:e});"function"===typeof r?s.callService(o,function(e){t(e.type)},function(e){r(e)}):s.callService(o,function(e){t(e.type)})},r.prototype.getMessageDetails=function(e,t,r){var s=new i({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),o=new a({type:e});"function"===typeof r?s.callService(o,function(e){t(e.typedefs)},function(e){r(e)}):s.callService(o,function(e){t(e.typedefs)})},r.prototype.decodeTypeDefs=function(e){var t=this,r=function(e,s){for(var o={},a=0;a<e.fieldnames.length;a++){var i=e.fieldarraylen[a],n=e.fieldnames[a],l=e.fieldtypes[a];if(-1===l.indexOf("/"))o[n]=-1===i?l:[l];else{for(var c=!1,p=0;p<s.length;p++)if(s[p].type.toString()===l.toString()){c=s[p];break}if(c){var m=r(c,s);o[n]=-1===i?m:[m]}else t.emit("error","Cannot find "+l+" in decodeTypeDefs")}}return o};return r(e[0],e)},t.exports=r},{"./Service":11,"./ServiceRequest":12,"./SocketAdapter.js":14,eventemitter2:37,"object-assign":1,ws:38}],11:[function(e,t){function r(e){e=e||{},this.ros=e.ros,this.name=e.name,this.serviceType=e.serviceType,this.isAdvertised=!1,this._serviceCallback=null}var s=e("./ServiceResponse"),o=e("./ServiceRequest"),i=e("eventemitter2").EventEmitter2;r.prototype.__proto__=i.prototype,r.prototype.callService=function(e,t,r){if(!this.isAdvertised){var o="call_service:"+this.name+":"+ ++this.ros.idCounter;(t||r)&&this.ros.once(o,function(e){void 0!==e.result&&!1===e.result?"function"===typeof r&&r(e.values):"function"===typeof t&&t(new s(e.values))});var i={op:"call_service",id:o,service:this.name,args:e};this.ros.callOnConnection(i)}},r.prototype.advertise=function(e){this.isAdvertised||"function"!==typeof e||(this._serviceCallback=e,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},r.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},r.prototype._serviceResponse=function(e){var t={},r=this._serviceCallback(e.args,t),o={op:"service_response",service:this.name,values:new s(t),result:r};e.id&&(o.id=e.id),this.ros.callOnConnection(o)},t.exports=r},{"./ServiceRequest":12,"./ServiceResponse":13,eventemitter2:37}],12:[function(e,t){var r=e("object-assign");t.exports=function(e){r(this,e)}},{"object-assign":1}],13:[function(e,t){var r=e("object-assign");t.exports=function(e){r(this,e)}},{"object-assign":1}],14:[function(e,t){"use strict";var r=e("../util/decompressPng"),s=e("ws"),o=null;"undefined"!==typeof bson&&(o=bson().BSON),t.exports=function(e){function t(t){"publish"===t.op?e.emit(t.topic,t.msg):"service_response"===t.op?e.emit(t.id,t):"call_service"===t.op&&e.emit(t.service,t)}function s(e,t){"png"===e.op?r(e.data,t):t(e)}function i(e,t){if(!o)throw"Cannot process BSON encoded message without BSON header.";var r=new FileReader;r.onload=function(){var e=new Uint8Array(this.result),r=o.deserialize(e);t(r)},r.readAsArrayBuffer(e)}return{onopen:function(t){e.isConnected=!0,e.emit("connection",t)},onclose:function(t){e.isConnected=!1,e.emit("close",t)},onerror:function(t){e.emit("error",t)},onmessage:function(e){if("undefined"!==typeof Blob&&e.data instanceof Blob)i(e.data,function(e){s(e,t)});else{var r=JSON.parse("string"===typeof e?e:e.data);s(r,t)}}}}},{"../util/decompressPng":40,ws:38}],15:[function(e,t){function r(e){e=e||{},this.ros=e.ros,this.name=e.name,this.messageType=e.messageType,this.isAdvertised=!1,this.compression=e.compression||"none",this.throttle_rate=e.throttle_rate||0,this.latch=e.latch||!1,this.queue_size=e.queue_size||100,this.queue_length=e.queue_length||0,this.compression&&"png"!==this.compression&&"none"!==this.compression&&this.emit("warning",this.compression+" compression is not supported. No compression will be used."),0>this.throttle_rate&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var t=this;this._messageCallback=function(e){t.emit("message",new o(e))}}var s=e("eventemitter2").EventEmitter2,o=e("./Message");r.prototype.__proto__=s.prototype,r.prototype.subscribe=function(e){"function"===typeof e&&this.on("message",e);this.subscribeId||(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.ros.callOnConnection({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},r.prototype.unsubscribe=function(e){e&&(this.off("message",e),this.listeners("message").length)||!this.subscribeId||(this.ros.off(this.name,this._messageCallback),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},r.prototype.advertise=function(){this.isAdvertised||(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.ros.callOnConnection({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0)},r.prototype.unadvertise=function(){this.isAdvertised&&(this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},r.prototype.publish=function(e){this.isAdvertised||this.advertise(),this.ros.idCounter++;var t={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:e,latch:this.latch};this.ros.callOnConnection(t)},t.exports=r},{"./Message":8,eventemitter2:37}],16:[function(e,t){var r=e("../mixin"),s=t.exports={Ros:e("./Ros"),Topic:e("./Topic"),Message:e("./Message"),Param:e("./Param"),Service:e("./Service"),ServiceRequest:e("./ServiceRequest"),ServiceResponse:e("./ServiceResponse")};r(s.Ros,["Param","Service","Topic"],s)},{"../mixin":22,"./Message":8,"./Param":9,"./Ros":10,"./Service":11,"./ServiceRequest":12,"./ServiceResponse":13,"./Topic":15}],17:[function(e,t){function r(e){e=e||{},this.position=new s(e.position),this.orientation=new o(e.orientation)}var s=e("./Vector3"),o=e("./Quaternion");r.prototype.applyTransform=function(e){this.position.multiplyQuaternion(e.rotation),this.position.add(e.translation);var t=e.rotation.clone();t.multiply(this.orientation),this.orientation=t},r.prototype.clone=function(){return new r(this)},t.exports=r},{"./Quaternion":18,"./Vector3":20}],18:[function(e,t){function r(e){e=e||{},this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w="number"===typeof e.w?e.w:1}var s=Math.sqrt;r.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},r.prototype.norm=function(){return s(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},r.prototype.normalize=function(){var e=s(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e)},r.prototype.invert=function(){this.conjugate(),this.normalize()},r.prototype.multiply=function(e){var t=this.x*e.w+this.y*e.z-this.z*e.y+this.w*e.x,r=-this.x*e.z+this.y*e.w+this.z*e.x+this.w*e.y,s=this.x*e.y-this.y*e.x+this.z*e.w+this.w*e.z,o=-this.x*e.x-this.y*e.y-this.z*e.z+this.w*e.w;this.x=t,this.y=r,this.z=s,this.w=o},r.prototype.clone=function(){return new r(this)},t.exports=r},{}],19:[function(e,t){function r(e){e=e||{},this.translation=new s(e.translation),this.rotation=new o(e.rotation)}var s=e("./Vector3"),o=e("./Quaternion");r.prototype.clone=function(){return new r(this)},t.exports=r},{"./Quaternion":18,"./Vector3":20}],20:[function(e,t){function r(e){e=e||{},this.x=e.x||0,this.y=e.y||0,this.z=e.z||0}r.prototype.add=function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z},r.prototype.subtract=function(e){this.x-=e.x,this.y-=e.y,this.z-=e.z},r.prototype.multiplyQuaternion=function(e){var t=e.w*this.x+e.y*this.z-e.z*this.y,r=e.w*this.y+e.z*this.x-e.x*this.z,s=e.w*this.z+e.x*this.y-e.y*this.x,o=-e.x*this.x-e.y*this.y-e.z*this.z;this.x=t*e.w+o*-e.x+r*-e.z-s*-e.y,this.y=r*e.w+o*-e.y+s*-e.x-t*-e.z,this.z=s*e.w+o*-e.z+t*-e.y-r*-e.x},r.prototype.clone=function(){return new r(this)},t.exports=r},{}],21:[function(e,t){t.exports={Pose:e("./Pose"),Quaternion:e("./Quaternion"),Transform:e("./Transform"),Vector3:e("./Vector3")}},{"./Pose":17,"./Quaternion":18,"./Transform":19,"./Vector3":20}],22:[function(e,t){t.exports=function(e,t,r){t.forEach(function(t){var s=r[t];e.prototype[t]=function(e){return e.ros=this,new s(e)}})}},{}],23:[function(e,t){function r(e){e=e||{},this.ros=e.ros,this.fixedFrame=e.fixedFrame||"/base_link",this.angularThres=e.angularThres||2,this.transThres=e.transThres||0.01,this.rate=e.rate||10,this.updateDelay=e.updateDelay||50;var t=e.topicTimeout||2,r=s(t),o=s(1e9*(t-r));this.topicTimeout={secs:r,nsecs:o},this.serverName=e.serverName||"/tf2_web_republisher",this.repubServiceName=e.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this.actionClient=this.ros.ActionClient({serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=this.ros.Service({name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}var s=Math.floor,o=e("../actionlib/ActionClient"),i=e("../actionlib/Goal"),a=e("../core/Service.js"),n=e("../core/ServiceRequest.js"),l=e("../math/Transform");r.prototype.processTFArray=function(e){this;e.transforms.forEach(function(e){var t=e.child_frame_id;"/"===t[0]&&(t=t.substring(1));var r=this.frameInfos[t];r&&(r.transform=new l({translation:e.transform.translation,rotation:e.transform.rotation}),r.cbs.forEach(function(e){e(r.transform)}))},this)},r.prototype.updateGoal=function(){var e={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};if(this.ros.groovyCompatibility)this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new i({actionClient:this.actionClient,goalMessage:e}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send();else{e.timeout=this.topicTimeout;var t=new n(e);this.serviceClient.callService(t,this.processResponse.bind(this))}this.republisherUpdateRequested=!1},r.prototype.processResponse=function(e){this.currentTopic&&this.currentTopic.unsubscribe(),this.currentTopic=this.ros.Topic({name:e.topic_name,messageType:"tf2_web_republisher/TFArray"}),this.currentTopic.subscribe(this.processTFArray.bind(this))},r.prototype.subscribe=function(e,t){"/"===e[0]&&(e=e.substring(1)),this.frameInfos[e]?this.frameInfos[e].transform&&t(this.frameInfos[e].transform):(this.frameInfos[e]={cbs:[]},!this.republisherUpdateRequested&&(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[e].cbs.push(t)},r.prototype.unsubscribe=function(e,t){"/"===e[0]&&(e=e.substring(1));for(var r=this.frameInfos[e],s=r&&r.cbs||[],o=s.length;o--;)s[o]===t&&s.splice(o,1);t&&0!==s.length||delete this.frameInfos[e]},t.exports=r},{"../actionlib/ActionClient":4,"../actionlib/Goal":5,"../core/Service.js":11,"../core/ServiceRequest.js":12,"../math/Transform":19}],24:[function(e,t){var r=e("../core/Ros"),s=e("../mixin"),o=t.exports={TFClient:e("./TFClient")};s(r,["TFClient"],o)},{"../core/Ros":10,"../mixin":22,"./TFClient":23}],25:[function(e,t){var r=e("../math/Vector3"),s=e("./UrdfTypes");t.exports=function(e){this.dimension=null,this.type=s.URDF_BOX;var t=e.xml.getAttribute("size").split(" ");this.dimension=new r({x:parseFloat(t[0]),y:parseFloat(t[1]),z:parseFloat(t[2])})}},{"../math/Vector3":20,"./UrdfTypes":34}],26:[function(e,t){t.exports=function(e){var t=e.xml.getAttribute("rgba").split(" ");this.r=parseFloat(t[0]),this.g=parseFloat(t[1]),this.b=parseFloat(t[2]),this.a=parseFloat(t[3])}},{}],27:[function(e,t){var r=e("./UrdfTypes");t.exports=function(e){this.type=r.URDF_CYLINDER,this.length=parseFloat(e.xml.getAttribute("length")),this.radius=parseFloat(e.xml.getAttribute("radius"))}},{"./UrdfTypes":34}],28:[function(e,t){t.exports=function(e){this.name=e.xml.getAttribute("name"),this.type=e.xml.getAttribute("type");var t=e.xml.getElementsByTagName("limit");0<t.length&&(this.minval=parseFloat(t[0].getAttribute("lower")),this.maxval=parseFloat(t[0].getAttribute("upper")))}},{}],29:[function(e,t){var r=e("./UrdfVisual");t.exports=function(e){this.name=e.xml.getAttribute("name"),this.visuals=[];for(var t=e.xml.getElementsByTagName("visual"),s=0;s<t.length;s++)this.visuals.push(new r({xml:t[s]}))}},{"./UrdfVisual":35}],30:[function(e,t){function r(e){this.textureFilename=null,this.color=null,this.name=e.xml.getAttribute("name");var t=e.xml.getElementsByTagName("texture");0<t.length&&(this.textureFilename=t[0].getAttribute("filename"));var r=e.xml.getElementsByTagName("color");0<r.length&&(this.color=new s({xml:r[0]}))}var s=e("./UrdfColor");r.prototype.isLink=function(){return null===this.color&&null===this.textureFilename};var o=e("object-assign");r.prototype.assign=function(e){return o(this,e)},t.exports=r},{"./UrdfColor":26,"object-assign":1}],31:[function(e,t){var r=e("../math/Vector3"),s=e("./UrdfTypes");t.exports=function(e){this.scale=null,this.type=s.URDF_MESH,this.filename=e.xml.getAttribute("filename");var t=e.xml.getAttribute("scale");if(t){var o=t.split(" ");this.scale=new r({x:parseFloat(o[0]),y:parseFloat(o[1]),z:parseFloat(o[2])})}}},{"../math/Vector3":20,"./UrdfTypes":34}],32:[function(e,t){var r=e("./UrdfMaterial"),s=e("./UrdfLink"),o=e("./UrdfJoint"),i=e("xmldom").DOMParser;t.exports=function(e){e=e||{};var t=e.xml,a=e.string;if(this.materials={},this.links={},this.joints={},a){var n=new i;t=n.parseFromString(a,"text/xml")}var l=t.documentElement;this.name=l.getAttribute("name");for(var c,p=l.childNodes,m=0;m<p.length;m++)if(c=p[m],"material"===c.tagName){var d=new r({xml:c});void 0===this.materials[d.name]?this.materials[d.name]=d:this.materials[d.name].isLink()?this.materials[d.name].assign(d):console.warn("Material "+d.name+"is not unique.")}else if("link"===c.tagName){var u=new s({xml:c});if(void 0!==this.links[u.name])console.warn("Link "+u.name+" is not unique.");else{for(var g,y=0;y<u.visuals.length;y++)g=u.visuals[y].material,null!==g&&(void 0===this.materials[g.name]?this.materials[g.name]=g:u.visuals[y].material=this.materials[g.name]);this.links[u.name]=u}}else if("joint"===c.tagName){var f=new o({xml:c});this.joints[f.name]=f}}},{"./UrdfJoint":28,"./UrdfLink":29,"./UrdfMaterial":30,xmldom:41}],33:[function(e,t){var r=e("./UrdfTypes");t.exports=function(e){this.type=r.URDF_SPHERE,this.radius=parseFloat(e.xml.getAttribute("radius"))}},{"./UrdfTypes":34}],34:[function(e,t){t.exports={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}},{}],35:[function(e,t){var r=e("../math/Pose"),s=e("../math/Vector3"),o=e("../math/Quaternion"),a=e("./UrdfCylinder"),n=e("./UrdfBox"),l=e("./UrdfMaterial"),c=e("./UrdfMesh"),p=e("./UrdfSphere");t.exports=function(e){var t=Math.cos,m=Math.sin,d=e.xml;this.origin=null,this.geometry=null,this.material=null;var u=d.getElementsByTagName("origin");if(0===u.length)this.origin=new r;else{var g=u[0].getAttribute("xyz"),f=new s;g&&(g=g.split(" "),f=new s({x:parseFloat(g[0]),y:parseFloat(g[1]),z:parseFloat(g[2])}));var v=u[0].getAttribute("rpy"),b=new o;if(v){v=v.split(" ");var h=parseFloat(v[0]),_=parseFloat(v[1]),T=parseFloat(v[2]),S=h/2,U=_/2,C=T/2,N=m(S)*t(U)*t(C)-t(S)*m(U)*m(C),R=t(S)*m(U)*t(C)+m(S)*t(U)*m(C),M=t(S)*t(U)*m(C)-m(S)*m(U)*t(C),G=t(S)*t(U)*t(C)+m(S)*m(U)*m(C);b=new o({x:N,y:R,z:M,w:G}),b.normalize()}this.origin=new r({position:f,orientation:b})}var A=d.getElementsByTagName("geometry");if(0<A.length){for(var k,I=A[0],E=null,D=0;D<I.childNodes.length;D++)if(k=I.childNodes[D],1===k.nodeType){E=k;break}var i=E.nodeName;"sphere"===i?this.geometry=new p({xml:E}):"box"===i?this.geometry=new n({xml:E}):"cylinder"===i?this.geometry=new a({xml:E}):"mesh"===i?this.geometry=new c({xml:E}):console.warn("Unknown geometry type "+i)}var F=d.getElementsByTagName("material");0<F.length&&(this.material=new l({xml:F[0]}))}},{"../math/Pose":17,"../math/Quaternion":18,"../math/Vector3":20,"./UrdfBox":25,"./UrdfCylinder":27,"./UrdfMaterial":30,"./UrdfMesh":31,"./UrdfSphere":33}],36:[function(e,t){t.exports=e("object-assign")({UrdfBox:e("./UrdfBox"),UrdfColor:e("./UrdfColor"),UrdfCylinder:e("./UrdfCylinder"),UrdfLink:e("./UrdfLink"),UrdfMaterial:e("./UrdfMaterial"),UrdfMesh:e("./UrdfMesh"),UrdfModel:e("./UrdfModel"),UrdfSphere:e("./UrdfSphere"),UrdfVisual:e("./UrdfVisual")},e("./UrdfTypes"))},{"./UrdfBox":25,"./UrdfColor":26,"./UrdfCylinder":27,"./UrdfLink":29,"./UrdfMaterial":30,"./UrdfMesh":31,"./UrdfModel":32,"./UrdfSphere":33,"./UrdfTypes":34,"./UrdfVisual":35,"object-assign":1}],37:[function(e,t){(function(e){t.exports={EventEmitter2:e.EventEmitter2}}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],38:[function(e,t){(function(e){t.exports=e.WebSocket}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],39:[function(e,t){t.exports=function(){return document.createElement("canvas")}},{}],40:[function(e,t){(function(r){"use strict";var s=e("canvas"),o=s.Image||r.Image;t.exports=function(e,t){var r=new o;r.onload=function(){var e=new s,o=e.getContext("2d");e.width=r.width,e.height=r.height,o.imageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1,o.mozImageSmoothingEnabled=!1,o.drawImage(r,0,0);for(var a=o.getImageData(0,0,r.width,r.height).data,n="",l=0;l<a.length;l+=4)n+=String.fromCharCode(a[l],a[l+1],a[l+2]);t(JSON.parse(n))},r.src="data:image/png;base64,"+e}}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{canvas:39}],41:[function(e,t,r){(function(e){r.DOMImplementation=e.DOMImplementation,r.XMLSerializer=e.XMLSerializer,r.DOMParser=e.DOMParser}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}]},{},[3]);</script><dom-module id="ros-websocket" assetpath="bower_components/ros-websocket/"><template></template><script>Polymer({is:'ros-websocket',properties:{auto:{type:Boolean,value:!1},url:{type:String,value:function(){var a=window.location.hostname,b='ws:';return'https:'==window.location.protocol&&(b='wss:'),b+'//'+a+':9090'},observer:'_onUrlChanged',notify:!0},ros:{type:Object,notify:!0}},connect:function(){this.ros&&this.ros.isConnected&&this.ros.close(),this.ros=new ROSLIB.Ros({url:this.url});var a=this;this.ros.on('connection',function(){a.fire('connection')}),this.ros.on('error',function(b){a.fire('error',b)}),this.ros.on('close',function(){a.fire('close')})},_onUrlChanged:function(){this.auto&&this.connect()}});</script></dom-module><dom-module id="ros-param" assetpath="bower_components/ros-param/"><template><style>:host{display:block;}</style></template><script>class RosParam extends Polymer.Element{static get is(){return'ros-param'}static get properties(){return{ros:{type:Object},name:{type:String},stringVal:{type:String,notify:!0,observer:'_stringValChanged'}}}static get observers(){return['_init(ros, name)']}_init(a,b){if(a&&b){this._param=new ROSLIB.Param({ros:a,name:b});var c=this;this._param.get(function(a){c.stringVal=a})}}get(a){if(this._param){var b=this;this._param.get(function(c){b.stringVal=c,a(c)})}else console.warn('Param is not initialized')}set(a){this.stringVal=a}delete(){this._param?this._param.delete():console.warn('Param is not initialized')}_stringValChanged(a){this._param?this._param.set(a):console.warn('Param is not initialized')}}window.customElements.define(RosParam.is,RosParam);</script></dom-module><dom-module id="ros-topic" assetpath="bower_components/ros-topic/"><template><style>:host{display:block;}</style></template><script>Polymer({is:'ros-topic',properties:{auto:{type:Boolean,default:!1},compression:{type:String,default:'none'},lastMessage:{type:Object,default:null,notify:!0,readOnly:!0},latch:{type:Boolean,default:!1},msgType:{type:String,observer:'_initTopic'},bridgePublishQueue:{type:Number,default:100},bridgeSubscribeQueue:{type:Number,default:0},ros:{type:Object,default:null,observer:'_initTopic'},throttleRate:{type:Number,default:0},topic:{type:String,observer:'_initTopic'},_topic:Object},publish:function(a){var b=new ROSLIB.Message(a);this._topic.publish(b)},publishMessage:function(a){this._topic.publish(a)},subscribe:function(){if(this._topic){var a=this;this._topic.subscribe(function(b){a._setLastMessage(b),a.fire('message',b)})}else console.error('ros-topic not initialized before subscribe()')},unsubscribe:function(){this._topic?this._topic.unsubscribe():console.error('ros-topic not initialized before unsubscribe()')},_initTopic:function(){this.ros&&this.topic&&this.msgType&&(this._topic=new ROSLIB.Topic({ros:this.ros,name:this.topic,messageType:this.msgType,compression:this.compression,latch:this.latch,queue_size:this.bridgePublishQueue,queue_length:this.bridgeSubscribeQueue,throttle_rate:this.throttleRate}),this._setLastMessage(null),this.auto&&this.subscribe())}});</script></dom-module><dom-module id="iron-flex" assetpath="bower_components/iron-flex-layout/"><template><style>.layout.horizontal,
      .layout.vertical{display:-ms-flexbox;display:-webkit-flex;display:flex;}.layout.inline{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex;}.layout.horizontal{-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;}.layout.vertical{-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}.layout.wrap{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;}.layout.no-wrap{-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;}.layout.center,
      .layout.center-center{-ms-flex-align:center;-webkit-align-items:center;align-items:center;}.layout.center-justified,
      .layout.center-center{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.flex{-ms-flex:1 1 0.000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:0.000000001px;flex-basis:0.000000001px;}.flex-auto{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;}.flex-none{-ms-flex:none;-webkit-flex:none;flex:none;}</style></template></dom-module><dom-module id="iron-flex-reverse" assetpath="bower_components/iron-flex-layout/"><template><style>.layout.horizontal-reverse,
      .layout.vertical-reverse{display:-ms-flexbox;display:-webkit-flex;display:flex;}.layout.horizontal-reverse{-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse;}.layout.vertical-reverse{-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;}.layout.wrap-reverse{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;}</style></template></dom-module><dom-module id="iron-flex-alignment" assetpath="bower_components/iron-flex-layout/"><template><style>.layout.start{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start;}.layout.center,
      .layout.center-center{-ms-flex-align:center;-webkit-align-items:center;align-items:center;}.layout.end{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end;}.layout.baseline{-ms-flex-align:baseline;-webkit-align-items:baseline;align-items:baseline;}.layout.start-justified{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.layout.center-justified,
      .layout.center-center{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.layout.end-justified{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}.layout.around-justified{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around;}.layout.justified{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}.self-start{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start;}.self-center{-ms-align-self:center;-webkit-align-self:center;align-self:center;}.self-end{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end;}.self-stretch{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch;}.self-baseline{-ms-align-self:baseline;-webkit-align-self:baseline;align-self:baseline;}.layout.start-aligned{-ms-flex-line-pack:start;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;}.layout.end-aligned{-ms-flex-line-pack:end;-ms-align-content:flex-end;-webkit-align-content:flex-end;align-content:flex-end;}.layout.center-aligned{-ms-flex-line-pack:center;-ms-align-content:center;-webkit-align-content:center;align-content:center;}.layout.between-aligned{-ms-flex-line-pack:justify;-ms-align-content:space-between;-webkit-align-content:space-between;align-content:space-between;}.layout.around-aligned{-ms-flex-line-pack:distribute;-ms-align-content:space-around;-webkit-align-content:space-around;align-content:space-around;}</style></template></dom-module><dom-module id="iron-flex-factors" assetpath="bower_components/iron-flex-layout/"><template><style>.flex,
      .flex-1{-ms-flex:1 1 0.000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:0.000000001px;flex-basis:0.000000001px;}.flex-2{-ms-flex:2;-webkit-flex:2;flex:2;}.flex-3{-ms-flex:3;-webkit-flex:3;flex:3;}.flex-4{-ms-flex:4;-webkit-flex:4;flex:4;}.flex-5{-ms-flex:5;-webkit-flex:5;flex:5;}.flex-6{-ms-flex:6;-webkit-flex:6;flex:6;}.flex-7{-ms-flex:7;-webkit-flex:7;flex:7;}.flex-8{-ms-flex:8;-webkit-flex:8;flex:8;}.flex-9{-ms-flex:9;-webkit-flex:9;flex:9;}.flex-10{-ms-flex:10;-webkit-flex:10;flex:10;}.flex-11{-ms-flex:11;-webkit-flex:11;flex:11;}.flex-12{-ms-flex:12;-webkit-flex:12;flex:12;}</style></template></dom-module><dom-module id="iron-positioning" assetpath="bower_components/iron-flex-layout/"><template><style>.block{display:block;}[hidden]{display:none !important;}.invisible{visibility:hidden !important;}.relative{position:relative;}.fit{position:absolute;top:0;right:0;bottom:0;left:0;}body.fullbleed{margin:0;height:100vh;}.scroll{-webkit-overflow-scrolling:touch;overflow:auto;}.fixed-bottom,
      .fixed-left,
      .fixed-right,
      .fixed-top{position:fixed;}.fixed-top{top:0;left:0;right:0;}.fixed-right{top:0;right:0;bottom:0;}.fixed-bottom{right:0;bottom:0;left:0;}.fixed-left{top:0;bottom:0;left:0;}</style></template></dom-module><dom-module id="iron-icon" assetpath="bower_components/iron-icon/"><template><style>:host{@apply --layout-inline;@apply --layout-center-center;position:relative;vertical-align:middle;fill:var(--iron-icon-fill-color, currentcolor);stroke:var(--iron-icon-stroke-color, none);width:var(--iron-icon-width, 24px);height:var(--iron-icon-height, 24px);@apply --iron-icon;}:host([hidden]){display:none;}</style></template><script>Polymer({is:'iron-icon',properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create('iron-meta',{type:'iconset'})}},observers:['_updateIcon(_meta, isAttached)','_updateIcon(theme, isAttached)','_srcChanged(src, isAttached)','_iconChanged(icon, isAttached)'],_DEFAULT_ICONSET:'icons',_iconChanged:function(a){var b=(a||'').split(':');this._iconName=b.pop(),this._iconsetName=b.pop()||this._DEFAULT_ICONSET,this._updateIcon()},_srcChanged:function(){this._updateIcon()},_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Polymer.dom(this.root).removeChild(this._img),''===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&(this._iconset=this._meta.byKey(this._iconsetName),this._iconset?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,'iron-iconset-added','_updateIcon')):this.listen(window,'iron-iconset-added','_updateIcon'))):(this._iconset&&this._iconset.removeIcon(this),!this._img&&(this._img=document.createElement('img'),this._img.style.width='100%',this._img.style.height='100%',this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}});</script></dom-module><script>Polymer({is:'iron-iconset-svg',properties:{name:{type:String,observer:'_nameChanged'},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1},useGlobalRtlAttribute:{type:Boolean,value:!1}},created:function(){this._meta=new Polymer.IronMeta({type:'iconset',key:null,value:null})},attached:function(){this.style.display='none'},getIconNames:function(){return this._icons=this._createIconMap(),Object.keys(this._icons).map(function(a){return this.name+':'+a},this)},applyIcon:function(a,b){this.removeIcon(a);var c=this._cloneIcon(b,this.rtlMirroring&&this._targetIsRTL(a));if(c){var d=Polymer.dom(a.root||a);return d.insertBefore(c,d.childNodes[0]),a._svgIcon=c}return null},removeIcon:function(a){a._svgIcon&&(Polymer.dom(a.root||a).removeChild(a._svgIcon),a._svgIcon=null)},_targetIsRTL:function(a){if(null==this.__targetIsRTL)if(this.useGlobalRtlAttribute){var b=document.body&&document.body.hasAttribute('dir')?document.body:document.documentElement;this.__targetIsRTL='rtl'===b.getAttribute('dir')}else a&&a.nodeType!==Node.ELEMENT_NODE&&(a=a.host),this.__targetIsRTL=a&&'rtl'===window.getComputedStyle(a).direction;return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null,this._meta.key=this.name,this._meta.value=this,this.async(function(){this.fire('iron-iconset-added',this,{node:window})})},_createIconMap:function(){var a=Object.create(null);return Polymer.dom(this).querySelectorAll('[id]').forEach(function(b){a[b.id]=b}),a},_cloneIcon:function(a,b){return this._icons=this._icons||this._createIconMap(),this._prepareSvgClone(this._icons[a],this.size,b)},_prepareSvgClone:function(a,b,c){if(a){var d=a.cloneNode(!0),e=document.createElementNS('http://www.w3.org/2000/svg','svg'),f=d.getAttribute('viewBox')||'0 0 '+b+' '+b,g='pointer-events: none; display: block; width: 100%; height: 100%;';return c&&d.hasAttribute('mirror-in-rtl')&&(g+='-webkit-transform:scale(-1,1);transform:scale(-1,1);'),e.setAttribute('viewBox',f),e.setAttribute('preserveAspectRatio','xMidYMid meet'),e.setAttribute('focusable','false'),e.style.cssText=g,e.appendChild(d).removeAttribute('id'),e}return null}});</script><iron-iconset-svg name="icons" size="24"><svg><defs><g id="3d-rotation"><path d="M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72c.13-.29.2-.61.2-.97 0-.19-.02-.38-.07-.56-.05-.18-.12-.35-.23-.51-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33.15-.13.27-.27.37-.42.1-.15.17-.3.22-.46.05-.16.07-.32.07-.48 0-.36-.06-.68-.18-.96-.12-.28-.29-.51-.51-.69-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34c.11-.09.23-.17.38-.22.15-.05.3-.08.48-.08.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49-.05.15-.14.27-.25.37-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4.07.16.1.35.1.57 0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27.45-.18.84-.43 1.16-.76.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57-.18-.47-.43-.87-.75-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0z"></path></g><g id="accessibility"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z"></path></g><g id="accessible"><circle cx="12" cy="4" r="2"></circle><path d="M19 13v-2c-1.54.02-3.09-.75-4.07-1.83l-1.29-1.43c-.17-.19-.38-.34-.61-.45-.01 0-.01-.01-.02-.01H13c-.35-.2-.75-.3-1.19-.26C10.76 7.11 10 8.04 10 9.09V15c0 1.1.9 2 2 2h5v5h2v-5.5c0-1.1-.9-2-2-2h-3v-3.45c1.29 1.07 3.25 1.94 5 1.95zm-6.17 5c-.41 1.16-1.52 2-2.83 2-1.66 0-3-1.34-3-3 0-1.31.84-2.41 2-2.83V12.1c-2.28.46-4 2.48-4 4.9 0 2.76 2.24 5 5 5 2.42 0 4.44-1.72 4.9-4h-2.07z"></path></g><g id="account-balance"><path d="M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zm-4.5-9L2 6v2h19V6l-9.5-5z"></path></g><g id="account-balance-wallet"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="account-box"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z"></path></g><g id="account-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></g><g id="add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></g><g id="add-alert"><path d="M10.01 21.01c0 1.1.89 1.99 1.99 1.99s1.99-.89 1.99-1.99h-3.98zm8.87-4.19V11c0-3.25-2.25-5.97-5.29-6.69v-.72C13.59 2.71 12.88 2 12 2s-1.59.71-1.59 1.59v.72C7.37 5.03 5.12 7.75 5.12 11v5.82L3 18.94V20h18v-1.06l-2.12-2.12zM16 13.01h-3v3h-2v-3H8V11h3V8h2v3h3v2.01z"></path></g><g id="add-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></g><g id="add-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></g><g id="add-circle-outline"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="add-shopping-cart"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z"></path></g><g id="alarm"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path></g><g id="alarm-add"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm1-11h-2v3H8v2h3v3h2v-3h3v-2h-3V9z"></path></g><g id="alarm-off"><path d="M12 6c3.87 0 7 3.13 7 7 0 .84-.16 1.65-.43 2.4l1.52 1.52c.58-1.19.91-2.51.91-3.92 0-4.97-4.03-9-9-9-1.41 0-2.73.33-3.92.91L9.6 6.43C10.35 6.16 11.16 6 12 6zm10-.28l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM2.92 2.29L1.65 3.57 2.98 4.9l-1.11.93 1.42 1.42 1.11-.94.8.8C3.83 8.69 3 10.75 3 13c0 4.97 4.02 9 9 9 2.25 0 4.31-.83 5.89-2.2l2.2 2.2 1.27-1.27L3.89 3.27l-.97-.98zm13.55 16.1C15.26 19.39 13.7 20 12 20c-3.87 0-7-3.13-7-7 0-1.7.61-3.26 1.61-4.47l9.86 9.86zM8.02 3.28L6.6 1.86l-.86.71 1.42 1.42.86-.71z"></path></g><g id="alarm-on"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-1.46-5.47L8.41 12.4l-1.06 1.06 3.18 3.18 6-6-1.06-1.06-4.93 4.95z"></path></g><g id="all-out"><path d="M16.21 4.16l4 4v-4zm4 12l-4 4h4zm-12 4l-4-4v4zm-4-12l4-4h-4zm12.95-.95c-2.73-2.73-7.17-2.73-9.9 0s-2.73 7.17 0 9.9 7.17 2.73 9.9 0 2.73-7.16 0-9.9zm-1.1 8.8c-2.13 2.13-5.57 2.13-7.7 0s-2.13-5.57 0-7.7 5.57-2.13 7.7 0 2.13 5.57 0 7.7z"></path></g><g id="android"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z"></path></g><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g><g id="apps"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"></path></g><g id="archive"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z"></path></g><g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></g><g id="arrow-downward"><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"></path></g><g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g><g id="arrow-drop-down-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 12l-4-4h8l-4 4z"></path></g><g id="arrow-drop-up"><path d="M7 14l5-5 5 5z"></path></g><g id="arrow-forward"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></g><g id="arrow-upward"><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"></path></g><g id="aspect-ratio"><path d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"></path></g><g id="assessment"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path></g><g id="assignment"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"></path></g><g id="assignment-ind"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"></path></g><g id="assignment-late"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-4h-2V8h2v6zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path></g><g id="assignment-return"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm4 12h-4v3l-5-5 5-5v3h4v4z"></path></g><g id="assignment-returned"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 15l-5-5h3V9h4v4h3l-5 5z"></path></g><g id="assignment-turned-in"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"></path></g><g id="attachment"><path d="M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z"></path></g><g id="autorenew"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"></path></g><g id="backspace"><path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z"></path></g><g id="backup"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"></path></g><g id="block"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"></path></g><g id="book"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"></path></g><g id="bookmark"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"></path></g><g id="bookmark-border"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"></path></g><g id="bug-report"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"></path></g><g id="build"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"></path></g><g id="cached"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"></path></g><g id="camera-enhance"><path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-1l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z"></path></g><g id="cancel"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></g><g id="card-giftcard"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"></path></g><g id="card-membership"><path d="M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z"></path></g><g id="card-travel"><path d="M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z"></path></g><g id="change-history"><path d="M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z"></path></g><g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g><g id="check-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></g><g id="check-box-outline-blank"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="check-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></g><g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g><g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g><g id="chrome-reader-mode"><path d="M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z"></path></g><g id="class"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"></path></g><g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="cloud"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></g><g id="cloud-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 14H8c-1.66 0-3-1.34-3-3s1.34-3 3-3l.14.01C8.58 8.28 10.13 7 12 7c2.21 0 4 1.79 4 4h.5c1.38 0 2.5 1.12 2.5 2.5S17.88 16 16.5 16z"></path></g><g id="cloud-done"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z"></path></g><g id="cloud-download"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"></path></g><g id="cloud-off"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"></path></g><g id="cloud-queue"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z"></path></g><g id="cloud-upload"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"></path></g><g id="code"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></g><g id="compare-arrows"><path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"></path></g><g id="content-copy"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></g><g id="content-cut"><path d="M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"></path></g><g id="content-paste"><path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"></path></g><g id="copyright"><path d="M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91 1.05.34 1.7.34c.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="create"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></g><g id="create-new-folder"><path d="M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z"></path></g><g id="credit-card"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"></path></g><g id="dashboard"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"></path></g><g id="date-range"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path></g><g id="delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g><g id="delete-forever"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path></g><g id="delete-sweep"><path d="M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z"></path></g><g id="description"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"></path></g><g id="dns"><path d="M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g><g id="done"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path></g><g id="done-all"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path></g><g id="donut-large"><path d="M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z"></path></g><g id="donut-small"><path d="M11 9.16V2c-5 .5-9 4.79-9 10s4 9.5 9 10v-7.16c-1-.41-2-1.52-2-2.84s1-2.43 2-2.84zM14.86 11H22c-.48-4.75-4-8.53-9-9v7.16c1 .3 1.52.98 1.86 1.84zM13 14.84V22c5-.47 8.52-4.25 9-9h-7.14c-.34.86-.86 1.54-1.86 1.84z"></path></g><g id="drafts"><path d="M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13L3.74 7.84 12 3l8.26 4.84L12 13z"></path></g><g id="eject"><path d="M5 17h14v2H5zm7-12L5.33 15h13.34z"></path></g><g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g><g id="error-outline"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="euro-symbol"><path d="M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1 0 .34.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z"></path></g><g id="event"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"></path></g><g id="event-seat"><path d="M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z"></path></g><g id="exit-to-app"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g><g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g><g id="explore"><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z"></path></g><g id="extension"><path d="M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"></path></g><g id="face"><path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"></path></g><g id="favorite"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></g><g id="favorite-border"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"></path></g><g id="feedback"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"></path></g><g id="file-download"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></g><g id="file-upload"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"></path></g><g id="filter-list"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"></path></g><g id="find-in-page"><path d="M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"></path></g><g id="find-replace"><path d="M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4zm5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20l-4.85-4.86z"></path></g><g id="fingerprint"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z"></path></g><g id="first-page"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"></path></g><g id="flag"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"></path></g><g id="flight-land"><path d="M2.5 19h19v2h-19zm7.18-5.73l4.35 1.16 5.31 1.42c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l1.6.43 5.31 1.43z"></path></g><g id="flight-takeoff"><path d="M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 1.82 3.16.77 1.33 1.6-.43 5.31-1.42 4.35-1.16L21 11.49c.81-.23 1.28-1.05 1.07-1.85z"></path></g><g id="flip-to-back"><path d="M9 7H7v2h2V7zm0 4H7v2h2v-2zm0-8c-1.11 0-2 .9-2 2h2V3zm4 12h-2v2h2v-2zm6-12v2h2c0-1.1-.9-2-2-2zm-6 0h-2v2h2V3zM9 17v-2H7c0 1.1.89 2 2 2zm10-4h2v-2h-2v2zm0-4h2V7h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zM5 7H3v12c0 1.1.89 2 2 2h12v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z"></path></g><g id="flip-to-front"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z"></path></g><g id="folder"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path></g><g id="folder-open"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></g><g id="folder-shared"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z"></path></g><g id="font-download"><path d="M9.93 13.5h4.14L12 7.98zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z"></path></g><g id="forward"><path d="M12 8V4l8 8-8 8v-4H4V8z"></path></g><g id="fullscreen"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></g><g id="fullscreen-exit"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"></path></g><g id="g-translate"><path d="M20 5h-9.12L10 2H4c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h7l1 3h8c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zM7.17 14.59c-2.25 0-4.09-1.83-4.09-4.09s1.83-4.09 4.09-4.09c1.04 0 1.99.37 2.74 1.07l.07.06-1.23 1.18-.06-.05c-.29-.27-.78-.59-1.52-.59-1.31 0-2.38 1.09-2.38 2.42s1.07 2.42 2.38 2.42c1.37 0 1.96-.87 2.12-1.46H7.08V9.91h3.95l.01.07c.04.21.05.4.05.61 0 2.35-1.61 4-3.92 4zm6.03-1.71c.33.6.74 1.18 1.19 1.7l-.54.53-.65-2.23zm.77-.76h-.99l-.31-1.04h3.99s-.34 1.31-1.56 2.74c-.52-.62-.89-1.23-1.13-1.7zM21 20c0 .55-.45 1-1 1h-7l2-2-.81-2.77.92-.92L17.79 18l.73-.73-2.71-2.68c.9-1.03 1.6-2.25 1.92-3.51H19v-1.04h-3.64V9h-1.04v1.04h-1.96L11.18 6H20c.55 0 1 .45 1 1v13z"></path></g><g id="gavel"><path d="M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z"></path></g><g id="gesture"><path d="M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93l1.75 1.71zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48z"></path></g><g id="get-app"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></g><g id="gif"><path d="M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"></path></g><g id="grade"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></g><g id="group-work"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g><g id="help-outline"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"></path></g><g id="highlight-off"><path d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="history"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></g><g id="home"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></g><g id="hourglass-empty"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z"></path></g><g id="hourglass-full"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z"></path></g><g id="http"><path d="M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zm9-1.5H18v6h1.5v-2h2c.8 0 1.5-.7 1.5-1.5v-1c0-.8-.7-1.5-1.5-1.5zm0 2.5h-2v-1h2v1z"></path></g><g id="https"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></g><g id="important-devices"><path d="M23 11.01L18 11c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5c.55 0 1-.45 1-1v-9c0-.55-.45-.99-1-.99zM23 20h-5v-7h5v7zM20 2H2C.89 2 0 2.89 0 4v12c0 1.1.89 2 2 2h7v2H7v2h8v-2h-2v-2h2v-2H2V4h18v5h2V4c0-1.11-.9-2-2-2zm-8.03 7L11 6l-.97 3H7l2.47 1.76-.94 2.91 2.47-1.8 2.47 1.8-.94-2.91L15 9h-3.03z"></path></g><g id="inbox"><path d="M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z"></path></g><g id="indeterminate-check-box"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"></path></g><g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></g><g id="info-outline"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"></path></g><g id="input"><path d="M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z"></path></g><g id="invert-colors"><path d="M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"></path></g><g id="label"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"></path></g><g id="label-outline"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z"></path></g><g id="language"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"></path></g><g id="last-page"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"></path></g><g id="launch"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></g><g id="lightbulb-outline"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path></g><g id="line-style"><path d="M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z"></path></g><g id="line-weight"><path d="M3 17h18v-2H3v2zm0 3h18v-1H3v1zm0-7h18v-3H3v3zm0-9v4h18V4H3z"></path></g><g id="link"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></g><g id="list"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"></path></g><g id="lock"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></g><g id="lock-open"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path></g><g id="lock-outline"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"></path></g><g id="low-priority"><path d="M14 5h8v2h-8zm0 5.5h8v2h-8zm0 5.5h8v2h-8zM2 11.5C2 15.08 4.92 18 8.5 18H9v2l3-3-3-3v2h-.5C6.02 16 4 13.98 4 11.5S6.02 7 8.5 7H12V5H8.5C4.92 5 2 7.92 2 11.5z"></path></g><g id="loyalty"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7zm11.77 8.27L13 19.54l-4.27-4.27C8.28 14.81 8 14.19 8 13.5c0-1.38 1.12-2.5 2.5-2.5.69 0 1.32.28 1.77.74l.73.72.73-.73c.45-.45 1.08-.73 1.77-.73 1.38 0 2.5 1.12 2.5 2.5 0 .69-.28 1.32-.73 1.77z"></path></g><g id="mail"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="markunread"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="markunread-mailbox"><path d="M20 6H10v6H8V4h6V0H6v6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"></path></g><g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></g><g id="more-horiz"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="motorcycle"><path d="M19.44 9.03L15.41 5H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97zM7.82 15C7.4 16.15 6.28 17 5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path></g><g id="move-to-inbox"><path d="M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z"></path></g><g id="next-week"><path d="M20 7h-4V5c0-.55-.22-1.05-.59-1.41C15.05 3.22 14.55 3 14 3h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm1 13.5l-1-1 3-3-3-3 1-1 4 4-4 4z"></path></g><g id="note-add"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"></path></g><g id="offline-pin"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm5 16H7v-2h10v2zm-6.7-4L7 10.7l1.4-1.4 1.9 1.9 5.3-5.3L17 7.3 10.3 14z"></path></g><g id="opacity"><path d="M17.66 8L12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8zM6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14H6z"></path></g><g id="open-in-browser"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z"></path></g><g id="open-in-new"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></g><g id="open-with"><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path></g><g id="pageview"><path d="M11.5 9C10.12 9 9 10.12 9 11.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S12.88 9 11.5 9zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-3.21 14.21l-2.91-2.91c-.69.44-1.51.7-2.39.7C9.01 16 7 13.99 7 11.5S9.01 7 11.5 7 16 9.01 16 11.5c0 .88-.26 1.69-.7 2.39l2.91 2.9-1.42 1.42z"></path></g><g id="pan-tool"><path d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"></path></g><g id="payment"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"></path></g><g id="perm-camera-mic"><path d="M20 5h-3.17L15 3H9L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v-2.09c-2.83-.48-5-2.94-5-5.91h2c0 2.21 1.79 4 4 4s4-1.79 4-4h2c0 2.97-2.17 5.43-5 5.91V21h7c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-6 8c0 1.1-.9 2-2 2s-2-.9-2-2V9c0-1.1.9-2 2-2s2 .9 2 2v4z"></path></g><g id="perm-contact-calendar"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1z"></path></g><g id="perm-data-setting"><path d="M18.99 11.5c.34 0 .67.03 1 .07L20 0 0 20h11.56c-.04-.33-.07-.66-.07-1 0-4.14 3.36-7.5 7.5-7.5zm3.71 7.99c.02-.16.04-.32.04-.49 0-.17-.01-.33-.04-.49l1.06-.83c.09-.08.12-.21.06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83c-.02.16-.03.32-.03.49 0 .17.01.33.03.49l-1.06.83c-.09.08-.12.21-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73c.06-.11.03-.24-.06-.32l-1.07-.83zm-3.71 1.01c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="perm-device-information"><path d="M13 7h-2v2h2V7zm0 4h-2v6h2v-6zm4-9.99L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g><g id="perm-identity"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"></path></g><g id="perm-media"><path d="M2 6H0v5h.01L0 20c0 1.1.9 2 2 2h18v-2H2V6zm20-2h-8l-2-2H6c-1.1 0-1.99.9-1.99 2L4 16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7 15l4.5-6 3.5 4.51 2.5-3.01L21 15H7z"></path></g><g id="perm-phone-msg"><path d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM12 3v10l3-3h6V3h-9z"></path></g><g id="perm-scan-wifi"><path d="M12 3C6.95 3 3.15 4.85 0 7.23L12 22 24 7.25C20.85 4.87 17.05 3 12 3zm1 13h-2v-6h2v6zm-2-8V6h2v2h-2z"></path></g><g id="pets"><circle cx="4.5" cy="9.5" r="2.5"></circle><circle cx="9" cy="5.5" r="2.5"></circle><circle cx="15" cy="5.5" r="2.5"></circle><circle cx="19.5" cy="9.5" r="2.5"></circle><path d="M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z"></path></g><g id="picture-in-picture"><path d="M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z"></path></g><g id="picture-in-picture-alt"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"></path></g><g id="play-for-work"><path d="M11 5v5.59H7.5l4.5 4.5 4.5-4.5H13V5h-2zm-5 9c0 3.31 2.69 6 6 6s6-2.69 6-6h-2c0 2.21-1.79 4-4 4s-4-1.79-4-4H6z"></path></g><g id="polymer"><path d="M19 4h-4L7.11 16.63 4.5 12 9 4H5L.5 12 5 20h4l7.89-12.63L19.5 12 15 20h4l4.5-8z"></path></g><g id="power-settings-new"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"></path></g><g id="pregnant-woman"><path d="M9 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm7 9c-.01-1.34-.83-2.51-2-3 0-1.66-1.34-3-3-3s-3 1.34-3 3v7h2v5h3v-5h3v-4z"></path></g><g id="print"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"></path></g><g id="query-builder"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></g><g id="question-answer"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></g><g id="radio-button-checked"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="radio-button-unchecked"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="receipt"><path d="M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"></path></g><g id="record-voice-over"><circle cx="9" cy="9" r="4"></circle><path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"></path></g><g id="redeem"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"></path></g><g id="redo"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"></path></g><g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></g><g id="remove"><path d="M19 13H5v-2h14v2z"></path></g><g id="remove-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"></path></g><g id="remove-circle-outline"><path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="remove-shopping-cart"><path d="M22.73 22.73L2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24l1.27-1.27zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2H7.42zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54l9.01 9zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z"></path></g><g id="reorder"><path d="M3 15h18v-2H3v2zm0 4h18v-2H3v2zm0-8h18V9H3v2zm0-6v2h18V5H3z"></path></g><g id="reply"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path></g><g id="reply-all"><path d="M7 8V5l-7 7 7 7v-3l-4-4 4-4zm6 1V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path></g><g id="report"><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zm1-4.3h-2V7h2v6z"></path></g><g id="report-problem"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g><g id="restore"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></g><g id="restore-page"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z"></path></g><g id="room"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="rounded-corner"><path d="M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z"></path></g><g id="rowing"><path d="M8.5 14.5L4 19l1.5 1.5L9 17h2l-2.5-2.5zM15 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 20.01L18 24l-2.99-3.01V19.5l-7.1-7.09c-.31.05-.61.07-.91.07v-2.16c1.66.03 3.61-.87 4.67-2.04l1.4-1.55c.19-.21.43-.38.69-.5.29-.14.62-.23.96-.23h.03C15.99 6.01 17 7.02 17 8.26v5.75c0 .84-.35 1.61-.92 2.16l-3.58-3.58v-2.27c-.63.52-1.43 1.02-2.29 1.39L16.5 18H18l3 3.01z"></path></g><g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></path></g><g id="schedule"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></g><g id="search"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></g><g id="select-all"><path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z"></path></g><g id="send"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></g><g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g><g id="settings-applications"><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm7-7H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-1.75 9c0 .23-.02.46-.05.68l1.48 1.16c.13.11.17.3.08.45l-1.4 2.42c-.09.15-.27.21-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.26 1.85c-.03.17-.18.3-.35.3h-2.8c-.17 0-.32-.13-.35-.29l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.74.7c-.16.06-.34 0-.43-.15l-1.4-2.42c-.09-.15-.05-.34.08-.45l1.48-1.16c-.03-.23-.05-.46-.05-.69 0-.23.02-.46.05-.68l-1.48-1.16c-.13-.11-.17-.3-.08-.45l1.4-2.42c.09-.15.27-.21.43-.15l1.74.7c.36-.28.76-.51 1.18-.69l.26-1.85c.03-.17.18-.3.35-.3h2.8c.17 0 .32.13.35.29l.26 1.85c.43.18.82.41 1.18.69l1.74-.7c.16-.06.34 0 .43.15l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.16c.03.23.05.46.05.69z"></path></g><g id="settings-backup-restore"><path d="M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9c-4.97 0-9 4.03-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.44C8.04 20.3 9.94 21 12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"></path></g><g id="settings-bluetooth"><path d="M11 24h2v-2h-2v2zm-4 0h2v-2H7v2zm8 0h2v-2h-2v2zm2.71-18.29L12 0h-1v7.59L6.41 3 5 4.41 10.59 10 5 15.59 6.41 17 11 12.41V20h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 3.83l1.88 1.88L13 7.59V3.83zm1.88 10.46L13 16.17v-3.76l1.88 1.88z"></path></g><g id="settings-brightness"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02zM8 16h2.5l1.5 1.5 1.5-1.5H16v-2.5l1.5-1.5-1.5-1.5V8h-2.5L12 6.5 10.5 8H8v2.5L6.5 12 8 13.5V16zm4-7c1.66 0 3 1.34 3 3s-1.34 3-3 3V9z"></path></g><g id="settings-cell"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 16H8V4h8v12z"></path></g><g id="settings-ethernet"><path d="M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z"></path></g><g id="settings-input-antenna"><path d="M12 5c-3.87 0-7 3.13-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.87-3.13-7-7-7zm1 9.29c.88-.39 1.5-1.26 1.5-2.29 0-1.38-1.12-2.5-2.5-2.5S9.5 10.62 9.5 12c0 1.02.62 1.9 1.5 2.29v3.3L7.59 21 9 22.41l3-3 3 3L16.41 21 13 17.59v-3.3zM12 1C5.93 1 1 5.93 1 12h2c0-4.97 4.03-9 9-9s9 4.03 9 9h2c0-6.07-4.93-11-11-11z"></path></g><g id="settings-input-component"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z"></path></g><g id="settings-input-composite"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z"></path></g><g id="settings-input-hdmi"><path d="M18 7V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v3H5v6l3 6v3h8v-3l3-6V7h-1zM8 4h8v3h-2V5h-1v2h-2V5h-1v2H8V4z"></path></g><g id="settings-input-svideo"><path d="M8 11.5c0-.83-.67-1.5-1.5-1.5S5 10.67 5 11.5 5.67 13 6.5 13 8 12.33 8 11.5zm7-5c0-.83-.67-1.5-1.5-1.5h-3C9.67 5 9 5.67 9 6.5S9.67 8 10.5 8h3c.83 0 1.5-.67 1.5-1.5zM8.5 15c-.83 0-1.5.67-1.5 1.5S7.67 18 8.5 18s1.5-.67 1.5-1.5S9.33 15 8.5 15zM12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9zm5.5-11c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-2 5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path></g><g id="settings-overscan"><path d="M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"></path></g><g id="settings-phone"><path d="M13 9h-2v2h2V9zm4 0h-2v2h2V9zm3 6.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM19 9v2h2V9h-2z"></path></g><g id="settings-power"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm2-22h-2v10h2V2zm3.56 2.44l-1.45 1.45C16.84 6.94 18 8.83 18 11c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2.17 1.16-4.06 2.88-5.12L7.44 4.44C5.36 5.88 4 8.28 4 11c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.72-1.36-5.12-3.44-6.56zM15 24h2v-2h-2v2z"></path></g><g id="settings-remote"><path d="M15 9H9c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1zm-3 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7.05 6.05l1.41 1.41C9.37 6.56 10.62 6 12 6s2.63.56 3.54 1.46l1.41-1.41C15.68 4.78 13.93 4 12 4s-3.68.78-4.95 2.05zM12 0C8.96 0 6.21 1.23 4.22 3.22l1.41 1.41C7.26 3.01 9.51 2 12 2s4.74 1.01 6.36 2.64l1.41-1.41C17.79 1.23 15.04 0 12 0z"></path></g><g id="settings-voice"><path d="M7 24h2v-2H7v2zm5-11c1.66 0 2.99-1.34 2.99-3L15 4c0-1.66-1.34-3-3-3S9 2.34 9 4v6c0 1.66 1.34 3 3 3zm-1 11h2v-2h-2v2zm4 0h2v-2h-2v2zm4-14h-1.7c0 3-2.54 5.1-5.3 5.1S6.7 13 6.7 10H5c0 3.41 2.72 6.23 6 6.72V20h2v-3.28c3.28-.49 6-3.31 6-6.72z"></path></g><g id="shop"><path d="M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z"></path></g><g id="shop-two"><path d="M3 9H1v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2H3V9zm15-4V3c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H5v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5h-5zm-6-2h4v2h-4V3zm0 12V8l5.5 3-5.5 4z"></path></g><g id="shopping-basket"><path d="M17.21 9l-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g><g id="shopping-cart"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="sort"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"></path></g><g id="speaker-notes"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 14H6v-2h2v2zm0-3H6V9h2v2zm0-3H6V6h2v2zm7 6h-5v-2h5v2zm3-3h-8V9h8v2zm0-3h-8V6h8v2z"></path></g><g id="speaker-notes-off"><path d="M10.54 11l-.54-.54L7.54 8 6 6.46 2.38 2.84 1.27 1.73 0 3l2.01 2.01L2 22l4-4h9l5.73 5.73L22 22.46 17.54 18l-7-7zM8 14H6v-2h2v2zm-2-3V9l2 2H6zm14-9H4.08L10 7.92V6h8v2h-7.92l1 1H18v2h-4.92l6.99 6.99C21.14 17.95 22 17.08 22 16V4c0-1.1-.9-2-2-2z"></path></g><g id="spellcheck"><path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z"></path></g><g id="star"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></g><g id="star-border"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></g><g id="star-half"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></g><g id="stars"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z"></path></g><g id="store"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"></path></g><g id="subdirectory-arrow-left"><path d="M11 9l1.42 1.42L8.83 14H18V4h2v12H8.83l3.59 3.58L11 21l-6-6 6-6z"></path></g><g id="subdirectory-arrow-right"><path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z"></path></g><g id="subject"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"></path></g><g id="supervisor-account"><path d="M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7C15.12 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z"></path></g><g id="swap-horiz"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"></path></g><g id="swap-vert"><path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"></path></g><g id="swap-vertical-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6.5 9L10 5.5 13.5 9H11v4H9V9H6.5zm11 6L14 18.5 10.5 15H13v-4h2v4h2.5z"></path></g><g id="system-update-alt"><path d="M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z"></path></g><g id="tab"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z"></path></g><g id="tab-unselected"><path d="M1 9h2V7H1v2zm0 4h2v-2H1v2zm0-8h2V3c-1.1 0-2 .9-2 2zm8 16h2v-2H9v2zm-8-4h2v-2H1v2zm2 4v-2H1c0 1.1.9 2 2 2zM21 3h-8v6h10V5c0-1.1-.9-2-2-2zm0 14h2v-2h-2v2zM9 5h2V3H9v2zM5 21h2v-2H5v2zM5 5h2V3H5v2zm16 16c1.1 0 2-.9 2-2h-2v2zm0-8h2v-2h-2v2zm-8 8h2v-2h-2v2zm4 0h2v-2h-2v2z"></path></g><g id="text-format"><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z"></path></g><g id="theaters"><path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"></path></g><g id="thumb-down"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"></path></g><g id="thumb-up"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"></path></g><g id="thumbs-up-down"><path d="M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm10.5 4h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5z"></path></g><g id="timeline"><path d="M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z"></path></g><g id="toc"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"></path></g><g id="today"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></g><g id="toll"><path d="M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zM3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65z"></path></g><g id="touch-app"><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z"></path></g><g id="track-changes"><path d="M19.07 4.93l-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z"></path></g><g id="translate"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></g><g id="trending-down"><path d="M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"></path></g><g id="trending-flat"><path d="M22 12l-4-4v3H3v2h15v3z"></path></g><g id="trending-up"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"></path></g><g id="turned-in"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"></path></g><g id="turned-in-not"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"></path></g><g id="unarchive"><path d="M20.55 5.22l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28zM12 9.5l5.5 5.5H14v2h-4v-2H6.5L12 9.5zM5.12 5l.82-1h12l.93 1H5.12z"></path></g><g id="undo"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"></path></g><g id="unfold-less"><path d="M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z"></path></g><g id="unfold-more"><path d="M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"></path></g><g id="update"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"></path></g><g id="verified-user"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"></path></g><g id="view-agenda"><path d="M20 13H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm0-10H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z"></path></g><g id="view-array"><path d="M4 18h3V5H4v13zM18 5v13h3V5h-3zM8 18h9V5H8v13z"></path></g><g id="view-carousel"><path d="M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z"></path></g><g id="view-column"><path d="M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z"></path></g><g id="view-day"><path d="M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z"></path></g><g id="view-headline"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></g><g id="view-list"><path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z"></path></g><g id="view-module"><path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"></path></g><g id="view-quilt"><path d="M10 18h5v-6h-5v6zm-6 0h5V5H4v13zm12 0h5v-6h-5v6zM10 5v6h11V5H10z"></path></g><g id="view-stream"><path d="M4 18h17v-6H4v6zM4 5v6h17V5H4z"></path></g><g id="view-week"><path d="M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"></path></g><g id="visibility"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></g><g id="visibility-off"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"></path></g><g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g><g id="watch-later"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"></path></g><g id="weekend"><path d="M21 10c-1.1 0-2 .9-2 2v3H5v-3c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zm-3-5H6c-1.1 0-2 .9-2 2v2.15c1.16.41 2 1.51 2 2.82V14h12v-2.03c0-1.3.84-2.4 2-2.82V7c0-1.1-.9-2-2-2z"></path></g><g id="work"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"></path></g><g id="youtube-searched-for"><path d="M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19l-4.99-5z"></path></g><g id="zoom-in"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></g><g id="zoom-out"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"></path></g></defs></svg></iron-iconset-svg><iron-iconset-svg name="av" size="24"><svg><defs><g id="add-to-queue"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12zm-5-7v2h-3v3h-2v-3H8v-2h3V7h2v3h3z"></path></g><g id="airplay"><path d="M6 22h12l-6-6zM21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v-2H3V5h18v12h-4v2h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="album"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path></g><g id="art-track"><path d="M22 13h-8v-2h8v2zm0-6h-8v2h8V7zm-8 10h8v-2h-8v2zm-2-8v6c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V9c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2zm-1.5 6l-2.25-3-1.75 2.26-1.25-1.51L3.5 15h7z"></path></g><g id="av-timer"><path d="M11 17c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1zm0-14v4h2V5.08c3.39.49 6 3.39 6 6.92 0 3.87-3.13 7-7 7s-7-3.13-7-7c0-1.68.59-3.22 1.58-4.42L12 13l1.41-1.41-6.8-6.8v.02C4.42 6.45 3 9.05 3 12c0 4.97 4.02 9 9 9 4.97 0 9-4.03 9-9s-4.03-9-9-9h-1zm7 9c0-.55-.45-1-1-1s-1 .45-1 1 .45 1 1 1 1-.45 1-1zM6 12c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1z"></path></g><g id="branding-watermark"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16h-9v-6h9v6z"></path></g><g id="call-to-action"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3v-3h18v3z"></path></g><g id="closed-caption"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z"></path></g><g id="equalizer"><path d="M10 20h4V4h-4v16zm-6 0h4v-8H4v8zM16 9v11h4V9h-4z"></path></g><g id="explicit"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h4v2h-4v2h4v2H9V7h6v2z"></path></g><g id="fast-forward"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"></path></g><g id="fast-rewind"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"></path></g><g id="featured-play-list"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 8H3V9h9v2zm0-4H3V5h9v2z"></path></g><g id="featured-video"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 9H3V5h9v7z"></path></g><g id="fiber-dvr"><path d="M17.5 10.5h2v1h-2zm-13 0h2v3h-2zM21 3H3c-1.11 0-2 .89-2 2v14c0 1.1.89 2 2 2h18c1.11 0 2-.9 2-2V5c0-1.11-.89-2-2-2zM8 13.5c0 .85-.65 1.5-1.5 1.5H3V9h3.5c.85 0 1.5.65 1.5 1.5v3zm4.62 1.5h-1.5L9.37 9h1.5l1 3.43 1-3.43h1.5l-1.75 6zM21 11.5c0 .6-.4 1.15-.9 1.4L21 15h-1.5l-.85-2H17.5v2H16V9h3.5c.85 0 1.5.65 1.5 1.5v1z"></path></g><g id="fiber-manual-record"><circle cx="12" cy="12" r="8"></circle></g><g id="fiber-new"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM8.5 15H7.3l-2.55-3.5V15H3.5V9h1.25l2.5 3.5V9H8.5v6zm5-4.74H11v1.12h2.5v1.26H11v1.11h2.5V15h-4V9h4v1.26zm7 3.74c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1V9h1.25v4.51h1.13V9.99h1.25v3.51h1.12V9h1.25v5z"></path></g><g id="fiber-pin"><path d="M5.5 10.5h2v1h-2zM20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM9 11.5c0 .85-.65 1.5-1.5 1.5h-2v2H4V9h3.5c.85 0 1.5.65 1.5 1.5v1zm3.5 3.5H11V9h1.5v6zm7.5 0h-1.2l-2.55-3.5V15H15V9h1.25l2.5 3.5V9H20v6z"></path></g><g id="fiber-smart-record"><g><circle cx="9" cy="12" r="8"></circle><path d="M17 4.26v2.09c2.33.82 4 3.04 4 5.65s-1.67 4.83-4 5.65v2.09c3.45-.89 6-4.01 6-7.74s-2.55-6.85-6-7.74z"></path></g></g><g id="forward-10"><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.8 3H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.8-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z"></path></g><g id="forward-30"><path d="M9.6 13.5h.4c.2 0 .4-.1.5-.2s.2-.2.2-.4v-.2s-.1-.1-.1-.2-.1-.1-.2-.1h-.5s-.1.1-.2.1-.1.1-.1.2v.2h-1c0-.2 0-.3.1-.5s.2-.3.3-.4.3-.2.4-.2.4-.1.5-.1c.2 0 .4 0 .6.1s.3.1.5.2.2.2.3.4.1.3.1.5v.3s-.1.2-.1.3-.1.2-.2.2-.2.1-.3.2c.2.1.4.2.5.4s.2.4.2.6c0 .2 0 .4-.1.5s-.2.3-.3.4-.3.2-.5.2-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.4-.1-.6h.8v.2s.1.1.1.2.1.1.2.1h.5s.1-.1.2-.1.1-.1.1-.2v-.5s-.1-.1-.1-.2-.1-.1-.2-.1h-.6v-.7zm5.7.7c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5zM4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8z"></path></g><g id="forward-5"><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.7.9l.2-2.2h2.4v.7h-1.7l-.1.9s.1 0 .1-.1.1 0 .1-.1.1 0 .2 0h.2c.2 0 .4 0 .5.1s.3.2.4.3.2.3.3.5.1.4.1.6c0 .2 0 .4-.1.5s-.1.3-.3.5-.3.2-.5.3-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.3-.1-.5h.8c0 .2.1.3.2.4s.2.1.4.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-.6l-.1-.2-.2-.2s-.2-.1-.3-.1h-.2s-.1 0-.2.1-.1 0-.1.1-.1.1-.1.1h-.6z"></path></g><g id="games"><path d="M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z"></path></g><g id="hd"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path></g><g id="hearing"><path d="M17 20c-.29 0-.56-.06-.76-.15-.71-.37-1.21-.88-1.71-2.38-.51-1.56-1.47-2.29-2.39-3-.79-.61-1.61-1.24-2.32-2.53C9.29 10.98 9 9.93 9 9c0-2.8 2.2-5 5-5s5 2.2 5 5h2c0-3.93-3.07-7-7-7S7 5.07 7 9c0 1.26.38 2.65 1.07 3.9.91 1.65 1.98 2.48 2.85 3.15.81.62 1.39 1.07 1.71 2.05.6 1.82 1.37 2.84 2.73 3.55.51.23 1.07.35 1.64.35 2.21 0 4-1.79 4-4h-2c0 1.1-.9 2-2 2zM7.64 2.64L6.22 1.22C4.23 3.21 3 5.96 3 9s1.23 5.79 3.22 7.78l1.41-1.41C6.01 13.74 5 11.49 5 9s1.01-4.74 2.64-6.36zM11.5 9c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5-2.5 1.12-2.5 2.5z"></path></g><g id="high-quality"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 11H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm7-1c0 .55-.45 1-1 1h-.75v1.5h-1.5V15H14c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v4zm-3.5-.5h2v-3h-2v3z"></path></g><g id="library-add"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"></path></g><g id="library-books"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"></path></g><g id="library-music"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4v2zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"></path></g><g id="loop"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path></g><g id="mic"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"></path></g><g id="mic-none"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1.2-9.1c0-.66.54-1.2 1.2-1.2.66 0 1.2.54 1.2 1.2l-.01 6.2c0 .66-.53 1.2-1.19 1.2-.66 0-1.2-.54-1.2-1.2V4.9zm6.5 6.1c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"></path></g><g id="mic-off"><path d="M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"></path></g><g id="movie"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"></path></g><g id="music-video"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z"></path></g><g id="new-releases"><path d="M23 12l-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g><g id="not-interested"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"></path></g><g id="note"><path d="M22 10l-6-6H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99l16-.01c1.1 0 2-.89 2-1.99v-8zm-7-4.5l5.5 5.5H15V5.5z"></path></g><g id="pause"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></g><g id="pause-circle-filled"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"></path></g><g id="pause-circle-outline"><path d="M9 16h2V8H9v8zm3-14C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm1-4h2V8h-2v8z"></path></g><g id="play-arrow"><path d="M8 5v14l11-7z"></path></g><g id="play-circle-filled"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"></path></g><g id="play-circle-outline"><path d="M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="playlist-add"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"></path></g><g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g><g id="playlist-play"><path d="M19 9H2v2h17V9zm0-4H2v2h17V5zM2 15h13v-2H2v2zm15-2v6l5-3-5-3z"></path></g><g id="queue"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"></path></g><g id="queue-music"><path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"></path></g><g id="queue-play-next"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h2v-2H3V5h18v8h2V5c0-1.11-.9-2-2-2zm-8 7V7h-2v3H8v2h3v3h2v-3h3v-2h-3zm11 8l-4.5 4.5L18 21l3-3-3-3 1.5-1.5L24 18z"></path></g><g id="radio"><path d="M3.24 6.15C2.51 6.43 2 7.17 2 8v12c0 1.1.89 2 2 2h16c1.11 0 2-.9 2-2V8c0-1.11-.89-2-2-2H8.3l8.26-3.34L15.88 1 3.24 6.15zM7 20c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm13-8h-2v-2h-2v2H4V8h16v4z"></path></g><g id="recent-actors"><path d="M21 5v14h2V5h-2zm-4 14h2V5h-2v14zM14 5H2c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zM8 7.75c1.24 0 2.25 1.01 2.25 2.25S9.24 12.25 8 12.25 5.75 11.24 5.75 10 6.76 7.75 8 7.75zM12.5 17h-9v-.75c0-1.5 3-2.25 4.5-2.25s4.5.75 4.5 2.25V17z"></path></g><g id="remove-from-queue"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12zm-5-7v2H8v-2h8z"></path></g><g id="repeat"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"></path></g><g id="repeat-one"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4zm-4-2V9h-1l-2 1v1h1.5v4H13z"></path></g><g id="replay"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></g><g id="replay-10"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1c.2.1.3.2.5.3s.2.3.3.6.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z"></path></g><g id="replay-30"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-2.4 8.5h.4c.2 0 .4-.1.5-.2s.2-.2.2-.4v-.2s-.1-.1-.1-.2-.1-.1-.2-.1h-.5s-.1.1-.2.1-.1.1-.1.2v.2h-1c0-.2 0-.3.1-.5s.2-.3.3-.4.3-.2.4-.2.4-.1.5-.1c.2 0 .4 0 .6.1s.3.1.5.2.2.2.3.4.1.3.1.5v.3s-.1.2-.1.3-.1.2-.2.2-.2.1-.3.2c.2.1.4.2.5.4s.2.4.2.6c0 .2 0 .4-.1.5s-.2.3-.3.4-.3.2-.5.2-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.4-.1-.6h.8v.2s.1.1.1.2.1.1.2.1h.5s.1-.1.2-.1.1-.1.1-.2v-.5s-.1-.1-.1-.2-.1-.1-.2-.1h-.6v-.7zm5.7.7c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.8-.8v-.5c0-.1-.1-.2-.1-.3s-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z"></path></g><g id="replay-5"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.3 8.9l.2-2.2h2.4v.7h-1.7l-.1.9s.1 0 .1-.1.1 0 .1-.1.1 0 .2 0h.2c.2 0 .4 0 .5.1s.3.2.4.3.2.3.3.5.1.4.1.6c0 .2 0 .4-.1.5s-.1.3-.3.5-.3.2-.4.3-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.3-.1-.5h.8c0 .2.1.3.2.4s.2.1.4.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-.6l-.1-.2-.2-.2s-.2-.1-.3-.1h-.2s-.1 0-.2.1-.1 0-.1.1-.1.1-.1.1h-.7z"></path></g><g id="shuffle"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"></path></g><g id="skip-next"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></g><g id="skip-previous"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></g><g id="slow-motion-video"><path d="M13.05 9.79L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zM11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zm1.61 6.74C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43zM22 12c0 5.16-3.92 9.42-8.95 9.95v-2.02C16.97 19.41 20 16.05 20 12s-3.03-7.41-6.95-7.93V2.05C18.08 2.58 22 6.84 22 12z"></path></g><g id="snooze"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-3-9h3.63L9 15.2V17h6v-2h-3.63L15 10.8V9H9v2z"></path></g><g id="sort-by-alpha"><path d="M14.94 4.66h-4.72l2.36-2.36zm-4.69 14.71h4.66l-2.33 2.33zM6.1 6.27L1.6 17.73h1.84l.92-2.45h5.11l.92 2.45h1.84L7.74 6.27H6.1zm-1.13 7.37l1.94-5.18 1.94 5.18H4.97zm10.76 2.5h6.12v1.59h-8.53v-1.29l5.92-8.56h-5.88v-1.6h8.3v1.26l-5.93 8.6z"></path></g><g id="stop"><path d="M6 6h12v12H6z"></path></g><g id="subscriptions"><path d="M20 8H4V6h16v2zm-2-6H6v2h12V2zm4 10v8c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2v-8c0-1.1.9-2 2-2h16c1.1 0 2 .9 2 2zm-6 4l-6-3.27v6.53L16 16z"></path></g><g id="subtitles"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z"></path></g><g id="surround-sound"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.76 16.24l-1.41 1.41C4.78 16.1 4 14.05 4 12c0-2.05.78-4.1 2.34-5.66l1.41 1.41C6.59 8.93 6 10.46 6 12s.59 3.07 1.76 4.24zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm5.66 1.66l-1.41-1.41C17.41 15.07 18 13.54 18 12s-.59-3.07-1.76-4.24l1.41-1.41C19.22 7.9 20 9.95 20 12c0 2.05-.78 4.1-2.34 5.66zM12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="video-call"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3v2z"></path></g><g id="video-label"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H3V5h18v11z"></path></g><g id="video-library"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8 12.5v-9l6 4.5-6 4.5z"></path></g><g id="videocam"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"></path></g><g id="videocam-off"><path d="M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"></path></g><g id="volume-down"><path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"></path></g><g id="volume-mute"><path d="M7 9v6h4l5 5V4l-5 5H7z"></path></g><g id="volume-off"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"></path></g><g id="volume-up"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></g><g id="web"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"></path></g><g id="web-asset"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm0 14H5V8h14v10z"></path></g></defs></svg></iron-iconset-svg><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=a||[];var b=(this._valuesToItems(a)||[]).filter(function(a){return null!==a&&a!==void 0});this._selection.clear(b);for(var c=0;c<b.length;c++)this._selection.setItemSelected(b[c],!0);if(this.fallbackSelection&&!this._selection.get().length){var d=this._valueToItem(this.fallbackSelection);d&&this.select(this.fallbackSelection)}},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&a!==void 0?(this._setSelectedItems([a]),this._setSelectedItem(a)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push('selectedValues',a):this.splice('selectedValues',b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(a){return this._valueToItem(a)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><dom-module id="ros-action-client" assetpath="bower_components/ros-action-client/"><template><style>:host{display:block;}</style></template><script>Polymer({is:'ros-action-client',properties:{auto:{type:Boolean,default:!1},server:{type:String,observer:'_initClient'},actionType:{type:String,observer:'_initClient'},goal:{type:Object,default:null,observer:'_goalChanged'},lastFeedback:{type:Object,default:null,notify:!0,readOnly:!0},lastResult:{type:String,default:null,notify:!0,readOnly:!0},ros:{type:Object,default:null,observer:'_initClient'},_client:{type:Object,default:null},_actionGoal:{type:Object,default:null}},_goalChanged:function(){this._client&&this.goal&&this.auto&&this.send(this.goal)},_initClient:function(){if(this.ros&&this.server&&this.actionType){var a=this;this._client=new ROSLIB.ActionClient({ros:a.ros,serverName:a.server,actionName:a.actionType})}},cancel:function(){if(!this._client){return void console.error('ros-action-client was not initialized before cancelling.')}this._actionGoal&&this._actionGoal.cancel()},send:function(a){if(this._client&&a){var b=this;this._actionGoal=new ROSLIB.Goal({actionClient:b._client,goalMessage:a}),this._actionGoal.on('feedback',function(a){b._setLastFeedback(a),b.fire('feedback',a)}),this._actionGoal.on('result',function(a){b._setLastResult(a),b._actionGoal=null,b.fire('result',a)}),this._actionGoal.send()}else{console.error('ros-action-client was not initialized before sending goal.')}}});</script></dom-module><dom-module id="iron-collapse" assetpath="bower_components/iron-collapse/"><template><style>:host{display:block;transition-duration:var(--iron-collapse-transition-duration, 300ms);-webkit-transition-duration:var(--iron-collapse-transition-duration, 300ms);overflow:visible;}:host(.iron-collapse-closed){display:none;}:host(:not(.iron-collapse-opened)){overflow:hidden;}</style><slot></slot></template></dom-module><script>Polymer({is:'iron-collapse',behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:'_horizontalChanged'},opened:{type:Boolean,value:!1,notify:!0,observer:'_openedChanged'},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:''}},get dimension(){return this.horizontal?'width':'height'},get _dimensionMax(){return this.horizontal?'maxWidth':'maxHeight'},get _dimensionMaxCss(){return this.horizontal?'max-width':'max-height'},hostAttributes:{role:'group',"aria-hidden":'true',"aria-expanded":'false'},listeners:{transitionend:'_onTransitionEnd'},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(a,b){a='auto'===a?'':a;var c=b&&!this.noAnimation&&this.isAttached&&this._desiredSize!==a;if(this._desiredSize=a,this._updateTransition(!1),c){var d=this._calcSize();''===a&&(this.style[this._dimensionMax]='',a=this._calcSize()),this.style[this._dimensionMax]=d,this.scrollTop=this.scrollTop,this._updateTransition(!0),c=a!==d}this.style[this._dimensionMax]=a,c||this._transitionEnd()},enableTransition:function(a){Polymer.Base._warn('`enableTransition()` is deprecated, use `noAnimation` instead.'),this.noAnimation=!a},_updateTransition:function(a){this.style.transitionDuration=a&&!this.noAnimation?'':'0s'},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;var a='maxWidth'===this._dimensionMax?'maxHeight':'maxWidth';this.style[a]='',this.updateSize(this.opened?'auto':'0px',!1)},_openedChanged:function(){this.setAttribute('aria-expanded',this.opened),this.setAttribute('aria-hidden',!this.opened),this._setTransitioning(!0),this.toggleClass('iron-collapse-closed',!1),this.toggleClass('iron-collapse-opened',!1),this.updateSize(this.opened?'auto':'0px',!0),this.opened&&this.focus()},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize,this.toggleClass('iron-collapse-closed',!this.opened),this.toggleClass('iron-collapse-opened',this.opened),this._updateTransition(!1),this.notifyResize(),this._setTransitioning(!1)},_onTransitionEnd:function(a){Polymer.dom(a).rootTarget===this&&this._transitionEnd()},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+'px'}});</script><script>!function(f,a){var g=Math.max,h=Math.min,i={},c={},b={};!function(g){function a(d){if("number"==typeof d)return d;var e={};for(var b in d)e[b]=d[b];return e}function m(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=u}function c(){return g.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function d(a,d){var e=new m;return d&&(e.fill="both",e.duration="auto"),"number"!=typeof a||isNaN(a)?void 0!==a&&Object.getOwnPropertyNames(a).forEach(function(b){if("auto"!=a[b]){if(("number"==typeof e[b]||"duration"==b)&&("number"!=typeof a[b]||isNaN(a[b])))return;if("fill"==b&&-1==s.indexOf(a[b]))return;if("direction"==b&&-1==t.indexOf(a[b]))return;if("playbackRate"==b&&1!==a[b]&&g.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;e[b]=a[b]}}):e.duration=a,e}function e(m,a,n,c){return 0>m||1<m||0>n||1<n?u:function(d){function e(d,a,b){return 3*d*(1-b)*(1-b)*b+3*a*(1-b)*b*b+b*b*b}if(0>=d){var f=0;return 0<m?f=a/m:!a&&0<n&&(f=c/n),f*d}if(1<=d){var g=0;return 1>n?g=(c-1)/(n-1):1==n&&1>m&&(g=(a-1)/(m-1)),1+g*(d-1)}for(var h=0,i=1;h<i;){var j=(h+i)/2,k=e(m,n,j);if(1e-5>r(d-k))return e(a,c,j);k<d?h=j:i=j}return e(a,c,j)}}function f(e,a){return function(b){if(1<=b)return 1;var c=1/e;return(b+=a*c)-b%c}}function b(d){B||(B=document.createElement("div").style),B.animationTimingFunction="",B.animationTimingFunction=d;var a=B.animationTimingFunction;if(""==a&&c())throw new TypeError(d+" is not a valid value for easing");return a}function i(d){if("linear"==d)return u;var a=C.exec(d);if(a)return e.apply(this,a.slice(1).map(Number));var b=E.exec(d);return b?f(+b[1],{start:v,middle:w,end:x}[b[2]]):D[d]||u}function j(b){return 0===b.duration||0===b.iterations?0:b.duration*b.iterations}function k(e,a,b){if(null==a)return F;var c=b.delay+e+b.endDelay;return a<h(b.delay,c)?G:a>=h(b.delay+e,c)?H:I}function l(f,a,b,c,d){return c===G?"backwards"==a||"both"==a?0:null:c===I?b-d:c===H?"forwards"==a||"both"==a?f:null:c===F?null:void 0}function n(g,a,b,c,d){var e=d;return 0===g?a!==G&&(e+=b):e+=c/g,e}function o(h,a,b,c,d,e){var f=h===1/0?a%1:h%1;return 0!==f||b!==H||0===c||0===d&&0!==e||(f=1),f}function p(e,a,b,c){var d=Math.floor;return e===H&&a===1/0?1/0:1===b?d(c)-1:d(c)}function q(f,a,b){var c=f;if("normal"!==f&&"reverse"!==f){var d=a;"alternate-reverse"===f&&(d+=1),c="normal",d!==1/0&&0!=d%2&&(c="reverse")}return"normal"===c?b:1-b}var r=Math.abs,s=["backwards","forwards","both","none"],t=["reverse","alternate","alternate-reverse"],u=function(b){return b};m.prototype={_setMember:function(a,b){this["_"+a]=b,this._effect&&(this._effect._timingInput[a]=b,this._effect._timing=g.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=g.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(b){this._setMember("delay",b)},get delay(){return this._delay},set endDelay(b){this._setMember("endDelay",b)},get endDelay(){return this._endDelay},set fill(b){this._setMember("fill",b)},get fill(){return this._fill},set iterationStart(b){if((isNaN(b)||0>b)&&c())throw new TypeError("iterationStart must be a non-negative number, received: "+timing.iterationStart);this._setMember("iterationStart",b)},get iterationStart(){return this._iterationStart},set duration(b){if("auto"!=b&&(isNaN(b)||0>b)&&c())throw new TypeError("duration must be non-negative or auto, received: "+b);this._setMember("duration",b)},get duration(){return this._duration},set direction(b){this._setMember("direction",b)},get direction(){return this._direction},set easing(c){this._easingFunction=i(b(c)),this._setMember("easing",c)},get easing(){return this._easing},set iterations(b){if((isNaN(b)||0>b)&&c())throw new TypeError("iterations must be non-negative, received: "+b);this._setMember("iterations",b)},get iterations(){return this._iterations}};var v=1,w=.5,x=0,D={ease:e(.25,.1,.25,1),"ease-in":e(.42,0,1,1),"ease-out":e(0,0,.58,1),"ease-in-out":e(.42,0,.58,1),"step-start":f(1,v),"step-middle":f(1,w),"step-end":f(1,x)},B=null,C=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,E=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,F=0,G=1,H=2,I=3;g.cloneTimingInput=a,g.makeTiming=d,g.numericTimingToObject=function(b){return"number"==typeof b&&(b=isNaN(b)?{duration:0}:{duration:b}),b},g.normalizeTimingInput=function(a,b){return a=g.numericTimingToObject(a),d(a,b)},g.calculateActiveDuration=function(b){return r(j(b)/b.playbackRate)},g.calculateIterationProgress=function(j,a,b){var c=k(j,a,b),d=l(j,b.fill,a,c,b.delay);if(null===d)return null;var e=n(b.duration,c,b.iterations,d,b.iterationStart),f=o(e,b.iterationStart,c,b.iterations,d,b.duration),g=p(c,b.iterations,f,e),h=q(b.direction,g,f);return b._easingFunction(h)},g.calculatePhase=k,g.normalizeEasing=b,g.parseEasingFunction=i}(i),function(l){function m(c,a){return c in g?g[c][a]||a:a}function c(b){return"display"===b||0===b.lastIndexOf("animation",0)||0===b.lastIndexOf("transition",0)}function a(i,a,b){if(!c(i)){var l=d[i];if(l)for(var f in h.style[i]=a,l){var g=l[f],j=h.style[g];b[g]=m(g,j)}else b[i]=m(i,a)}}function e(h){var a=[];for(var b in h)if(!(b in["easing","offset","composite"])){var c=h[b];Array.isArray(c)||(c=[c]);for(var d,e=c.length,i=0;i<e;i++)d={},d.offset="offset"in h?h.offset:1==e?1:i/(e-1),"easing"in h&&(d.easing=h.easing),"composite"in h&&(d.composite=h.composite),d[b]=c[i],a.push(d)}return a.sort(function(c,a){return c.offset-a.offset}),a}function b(f){function b(){var d=j.length;null==j[d-1].offset&&(j[d-1].offset=1),1<d&&null==j[0].offset&&(j[0].offset=0);for(var a,f=0,b=j[0].offset,h=1;h<d;h++)if(a=j[h].offset,null!=a){for(var e=1;e<h-f;e++)j[f+e].offset=b+(a-b)*e/(h-f);f=h,b=a}}if(null==f)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&f[Symbol.iterator]&&(f=Array.from(f)),Array.isArray(f)||(f=e(f));for(var c,j=f.map(function(e){var b={};for(var c in e){var d=e[c];if("offset"==c){if(null!=d){if(d=+d,!isFinite(d))throw new TypeError("Keyframe offsets must be numbers.");if(0>d||1<d)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else if("composite"==c){if("add"==d||"accumulate"==d)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=d)throw new TypeError("Invalid composite mode "+d+".")}else d="easing"==c?l.normalizeEasing(d):""+d;a(c,d,b)}return void 0==b.offset&&(b.offset=null),void 0==b.easing&&(b.easing="linear"),b}),d=!0,k=-1/0,h=0;h<j.length;h++)if(c=j[h].offset,null!=c){if(c<k)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");k=c}else d=!1;return j=j.filter(function(b){return 0<=b.offset&&1>=b.offset}),d||b(),j}var d={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},h=document.createElementNS("http://www.w3.org/1999/xhtml","div"),f={thin:"1px",medium:"3px",thick:"5px"},g={borderBottomWidth:f,borderLeftWidth:f,borderRightWidth:f,borderTopWidth:f,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:f,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};l.convertToArrayForm=e,l.normalizeKeyframes=b}(i),function(g){var i={};g.isDeprecated=function(b,a,c,d){var e=d?"are":"is",f=new Date,g=new Date(a);return g.setMonth(g.getMonth()+3),!(f<g&&(b in i||console.warn("Web Animations: "+b+" "+e+" deprecated and will stop working on "+g.toDateString()+". "+c),i[b]=!0,1))},g.deprecated=function(a,b,c,d){var e=d?"are":"is";if(g.isDeprecated(a,b,c,d))throw new Error(a+" "+e+" no longer supported. "+c)}}(i),function(){var e=Math.round;if(document.documentElement.animate){var d=document.documentElement.animate([],0),a=!0;if(d&&(a=!1,["play","currentTime","pause","reverse","playbackRate","cancel","finish","startTime","playState"].forEach(function(b){void 0===d[b]&&(a=!0)})),!a)return}!function(n,o){function a(h){for(var a={},b=0;b<h.length;b++)for(var c in h[b])if("offset"!=c&&"easing"!=c&&"composite"!=c){var i={offset:h[b].offset,easing:h[b].easing,value:h[b][c]};a[c]=a[c]||[],a[c].push(i)}for(var e in a){var f=a[e];if(0!=f[0].offset||1!=f[f.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return a}function b(a){var b=[];for(var c in a)for(var d=a[c],f=0;f<d.length-1;f++){var g=f,h=f+1,i=d[g].offset,j=d[h].offset,k=i,p=j;0==f&&(k=-1/0,0==j&&(h=g)),f==d.length-2&&(p=1/0,1==i&&(g=h)),b.push({applyFrom:k,applyTo:p,startOffset:d[g].offset,endOffset:d[h].offset,easingFunction:n.parseEasingFunction(d[g].easing),property:c,interpolation:o.propertyInterpolation(c,d[g].value,d[h].value)})}return b.sort(function(c,a){return c.startOffset-a.startOffset}),b}o.convertEffectInput=function(d){var c=n.normalizeKeyframes(d),e=a(c),f=b(e);return function(b,h){if(null!=h)f.filter(function(b){return h>=b.applyFrom&&h<b.applyTo}).forEach(function(a){var c=h-a.startOffset,d=a.endOffset-a.startOffset,e=0==d?0:a.easingFunction(c/d);o.apply(b,a.property,a.interpolation(e))});else for(var a in e)"offset"!=a&&"easing"!=a&&"composite"!=a&&o.clear(b,a)}}}(i,c),function(p,a){function q(b){return b.replace(/-(.)/g,function(c,a){return a.toUpperCase()})}function d(d,a,b){r[b]=r[b]||[],r[b].push([d,a])}function b(e,a,b){for(var c=0;c<b.length;c++)d(e,a,q(b[c]))}function c(b,c,d){var e=b;/-/.test(b)&&!p.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(e=q(b)),"initial"!=c&&"initial"!=d||("initial"==c&&(c=h[e]),"initial"==d&&(d=h[e]));for(var f=c==d?[]:r[e],i=0;f&&i<f.length;i++){var j=f[i][0](c),k=f[i][0](d);if(void 0!==j&&void 0!==k){var l=f[i][1](j,k);if(l){var m=a.Interpolation.apply(null,l);return function(b){return 0==b?c:1==b?d:m(b)}}}}return a.Interpolation(!1,!0,function(b){return b?d:c})}var r={};a.addPropertiesHandler=b;var h={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};a.propertyInterpolation=c}(i,c),function(l,a){function b(a){var b=l.calculateActiveDuration(a),c=function(c){return l.calculateIterationProgress(b,c,a)};return c._totalDuration=a.delay+b+a.endDelay,c}a.KeyframeEffect=function(d,c,e,f){var g,h=b(l.normalizeTimingInput(e)),i=a.convertEffectInput(c),j=function(){i(d,g)};return j._update=function(b){return null!==(g=h(b))},j._clear=function(){i(d,null)},j._hasSameTarget=function(b){return d===b},j._target=d,j._totalDuration=h._totalDuration,j._id=f,j}}(i,c),function(e){e.apply=function(a,b,c){a.style[e.propertyName(b)]=c},e.clear=function(a,b){a.style[e.propertyName(b)]=""}}(c),function(e){window.Element.prototype.animate=function(a,b){var c="";return b&&b.id&&(c=b.id),e.timeline._play(e.KeyframeEffect(this,a,b,c))}}(c),function(b){function g(c,h,i){if("number"==typeof c&&"number"==typeof h)return c*(1-i)+h*i;if("boolean"==typeof c&&"boolean"==typeof h)return .5>i?c:h;if(c.length==h.length){for(var d=[],e=0;e<c.length;e++)d.push(g(c[e],h[e],i));return d}throw"Mismatched interpolation arguments "+c+":"+h}b.Interpolation=function(c,a,b){return function(d){return b(g(c,a,d))}}}(c),function(c,e){c.sequenceNumber=0;var f=function(d,a,b){this.target=d,this.currentTime=a,this.timelineTime=b,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=d,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};e.Animation=function(a){this.id="",a&&a._id&&(this.id=a._id),this._sequenceNumber=c.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=a,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},e.Animation.prototype={_ensureAlive:function(){this._inEffect=0>this.playbackRate&&0===this.currentTime?this._effect._update(-1):this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,e.timeline._animations.push(this))},_tickCurrentTime:function(c,a){c!=this._currentTime&&(this._currentTime=c,this._isFinished&&!a&&(this._currentTime=0<this._playbackRate?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(b){b=+b,isNaN(b)||(e.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-b/this._playbackRate),this._currentTimePending=!1,this._currentTime!=b&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(b,!0),e.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(b){b=+b,isNaN(b)||this._paused||this._idle||(this._startTime=b,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),e.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(b){if(b!=this._playbackRate){var a=this.currentTime;this._playbackRate=b,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),e.applyDirtiedAnimation(this)),null!=a&&(this.currentTime=a)}},get _isFinished(){return!this._idle&&(0<this._playbackRate&&this._currentTime>=this._totalDuration||0>this._playbackRate&&0>=this._currentTime)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(0<=this._playbackRate)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),e.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=0<this._playbackRate?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,e.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._isFinished=!0,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),e.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(c,a){"function"==typeof a&&"finish"==c&&this._finishHandlers.push(a)},removeEventListener:function(d,a){if("finish"==d){var b=this._finishHandlers.indexOf(a);0<=b&&this._finishHandlers.splice(b,1)}},_fireEvents:function(d){if(!this._isFinished)this._finishedFlag=!1;else if(!this._finishedFlag){var e=new f(this,this._currentTime,d),a=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){a.forEach(function(b){b.call(e.target,e)})},0),this._finishedFlag=!0}},_tick:function(c,a){this._idle||this._paused||(null==this._startTime?a&&(this.startTime=c-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((c-this._startTime)*this.playbackRate)),a&&(this._currentTimePending=!1,this._fireEvents(c))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var b=this._effect._target;return b._activeAnimations||(b._activeAnimations=[]),b._activeAnimations},_markTarget:function(){var b=this._targetAnimations();-1===b.indexOf(this)&&b.push(this)},_unmarkTarget:function(){var c=this._targetAnimations(),a=c.indexOf(this);-1!==a&&c.splice(a,1)}}}(i,c),function(r,s){function c(c){var a=h;h=[],c<n.currentTime&&(c=n.currentTime),n._animations.sort(d),n._animations=f(c,!0,n._animations)[0],a.forEach(function(a){a[1](c)}),e(),j=void 0}function d(c,a){return c._sequenceNumber-a._sequenceNumber}function a(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function e(){l.forEach(function(b){b()}),l.length=0}function f(i,a,c){m=!0,b=!1,s.timeline.currentTime=i,k=!1;var j=[],e=[],f=[],g=[];return c.forEach(function(c){c._tick(i,a),c._inEffect?(e.push(c._effect),c._markTarget()):(j.push(c._effect),c._unmarkTarget()),c._needsTick&&(k=!0);var b=c._inEffect||c._needsTick;c._inTimeline=b,b?f.push(c):g.push(c)}),l.push.apply(l,j),l.push.apply(l,e),k&&requestAnimationFrame(function(){}),m=!1,[f,g]}var g=window.requestAnimationFrame,h=[],i=0;window.requestAnimationFrame=function(d){var a=i++;return 0==h.length&&g(c),h.push([a,d]),a},window.cancelAnimationFrame=function(c){h.forEach(function(a){a[0]==c&&(a[1]=function(){})})},a.prototype={_play:function(a){a._timing=r.normalizeTimingInput(a.timing);var b=new s.Animation(a);return b._idle=!1,b._timeline=this,this._animations.push(b),s.restart(),s.applyDirtiedAnimation(b),b}};var j=void 0,k=!1,b=!1;s.restart=function(){return k||(k=!0,requestAnimationFrame(function(){}),b=!0),b},s.applyDirtiedAnimation=function(b){if(!m){b._markTarget();var a=b._targetAnimations();a.sort(d),f(s.timeline.currentTime,!1,a.slice())[1].forEach(function(c){var a=n._animations.indexOf(c);-1!==a&&n._animations.splice(a,1)}),e()}};var l=[],m=!1,n=new a;s.timeline=n}(i,c),function(g){function h(d,a){var e=d.exec(a);if(e)return e=d.ignoreCase?e[0].toLowerCase():e[0],[e,a.substr(e.length)]}function b(d,a){a=a.replace(/^\s*/,"");var b=d(a);if(b)return[b[0],b[1].replace(/^\s*/,"")]}function a(c,a,i){c=b.bind(null,c);for(var e,j=[];;){if(e=c(i),!e)return[j,i];if(j.push(e[0]),i=e[1],!(e=h(a,i))||""==e[1])return[j,i];i=e[1]}}function c(f,a){for(var b=0,c=0;c<a.length&&(!/\s|,/.test(a[c])||0!=b);c++)if("("==a[c])b++;else if(")"==a[c]&&(b--,0==b&&c++,0>=b))break;var d=f(a.substr(0,c));return void 0==d?void 0:[d,a.substr(c)]}function m(e,a){for(var b=e,c=a;b&&c;)b>c?b%=c:c%=b;return b=e*a/(b+c)}function d(f,a,n,b,c){for(var d,e=[],g=[],h=[],i=m(b.length,c.length),o=0;o<i;o++){if(d=a(b[o%b.length],c[o%c.length]),!d)return;e.push(d[0]),g.push(d[1]),h.push(d[2])}return[e,g,function(a){var b=a.map(function(c,a){return h[a](c)}).join(n);return f?f(b):b}]}g.consumeToken=h,g.consumeTrimmed=b,g.consumeRepeated=a,g.consumeParenthesised=c,g.ignore=function(d){return function(a){var b=d(a);return b&&(b[0]=void 0),b}},g.optional=function(d,a){return function(b){return d(b)||[a,b]}},g.consumeList=function(a,b){for(var c,h=[],d=0;d<a.length;d++){if(c=g.consumeTrimmed(a[d],b),!c||""==c[0])return;void 0!==c[0]&&h.push(c[0]),b=c[1]}if(""==b)return h},g.mergeNestedRepeated=d.bind(null,null),g.mergeWrappedNestedRepeated=d,g.mergeList=function(j,a,b){for(var c=[],d=[],e=[],f=0,g=0;g<b.length;g++)if("function"==typeof b[g]){var h=b[g](j[f],a[f++]);c.push(h[0]),d.push(h[1]),e.push(h[2])}else!function(f){c.push(!1),d.push(!1),e.push(function(){return b[f]})}(g);return[c,d,function(d){for(var a="",b=0;b<d.length;b++)a+=e[b](d[b]);return a}]}}(c),function(l){function a(a){function f(a){var b=l.consumeToken(/^inset/i,a);if(b)return g.inset=!0,b;var b=l.consumeLengthOrPercent(a);if(b)return g.lengths.push(b[0]),b;var b=l.consumeColor(a);return b?(g.color=b[0],b):void 0}var g={inset:!1,lengths:[],color:null},c=l.consumeRepeated(f,/^/,a);if(c&&c[0].length)return[g,c[1]]}function b(b){var e=l.consumeRepeated(a,/^,/,b);if(e&&""==e[1])return e[0]}function c(k,a){for(;k.lengths.length<g(k.lengths.length,a.lengths.length);)k.lengths.push({px:0});for(;a.lengths.length<g(k.lengths.length,a.lengths.length);)a.lengths.push({px:0});if(k.inset==a.inset&&!!k.color==!!a.color){for(var b,c,i=[],e=[[],0],f=[[],0],m=0;m<k.lengths.length;m++)c=l.mergeDimensions(k.lengths[m],a.lengths[m],2==m),e[0].push(c[0]),f[0].push(c[1]),i.push(c[2]);if(k.color&&a.color){var h=l.mergeColors(k.color,a.color);e[1]=h[0],f[1]=h[1],b=h[2]}return[e,f,function(d){for(var a=k.inset?"inset ":" ",c=0;c<i.length;c++)a+=i[c](d[0][c])+" ";return b&&(a+=b(d[1])),a}]}}function d(a,b,c,d){function m(b){return{inset:b,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var f=[],g=[],h=0;h<c.length||h<d.length;h++){var i=c[h]||m(d[h].inset),j=d[h]||m(c[h].inset);f.push(i),g.push(j)}return l.mergeNestedRepeated(a,b,f,g)}var e=d.bind(null,c,", ");l.addPropertiesHandler(b,e,["box-shadow","text-shadow"])}(c),function(b){function f(b){return b.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function c(d,a,b){return h(a,g(d,b))}function a(b){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(b))return+b}function d(d,a){return function(b,e){return[b,e,function(b){return f(c(d,a,b))}]}}function i(e){var g=e.trim().split(/\s*[\s,]\s*/);if(0!==g.length){for(var b,f=[],c=0;c<g.length;c++){if(b=a(g[c]),void 0===b)return;f.push(b)}return f}}b.clamp=c,b.addPropertiesHandler(i,function(c,a){if(c.length==a.length)return[c,a,function(b){return b.map(f).join(" ")}]},["stroke-dasharray"]),b.addPropertiesHandler(a,d(0,1/0),["border-image-width","line-height"]),b.addPropertiesHandler(a,d(0,1),["opacity","shape-image-threshold"]),b.addPropertiesHandler(a,function(c,a){if(0!=c)return d(0,1/0)(c,a)},["flex-grow","flex-shrink"]),b.addPropertiesHandler(a,function(d,a){return[d,a,function(b){return e(c(1,1/0,b))}]},["orphans","widows"]),b.addPropertiesHandler(a,function(c,a){return[c,a,e]},["z-index"]),b.parseNumber=a,b.parseNumberList=i,b.mergeNumbers=function(c,a){return[c,a,f]},b.numberToString=f}(c),function(b){b.addPropertiesHandler(String,function(d,a){if("visible"==d||"visible"==a)return[0,1,function(b){return 0>=b?d:1<=b?a:"visible"}]},["visibility"])}(c),function(i){function a(e){e=e.trim(),j.fillStyle="#000",j.fillStyle=e;var a=j.fillStyle;if(j.fillStyle="#fff",j.fillStyle=e,a==j.fillStyle){j.fillRect(0,0,1,1);var b=j.getImageData(0,0,1,1).data;j.clearRect(0,0,1,1);var f=b[3]/255;return[b[0]*f,b[1]*f,b[2]*f,f]}}function b(a,b){return[a,b,function(a){function b(b){return g(0,h(255,b))}if(a[3])for(var c=0;3>c;c++)a[c]=e(b(a[c]/a[3]));return a[3]=i.numberToString(i.clamp(0,1,a[3])),"rgba("+a.join(",")+")"}]}var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=c.height=1;var j=c.getContext("2d");i.addPropertiesHandler(a,b,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","fill","flood-color","lighting-color","outline-color","stop-color","stroke","text-decoration-color"]),i.consumeColor=i.consumeParenthesised.bind(null,a),i.mergeColors=b}(c),function(n){function a(i){function j(){var c=a.exec(i);f=c?c[0]:void 0}function b(){var b=+f;return j(),b}function k(){if("("!==f)return b();j();var c=d();return")"===f?(j(),c):NaN}function l(){for(var b,c=k();"*"===f||"/"===f;){b=f,j();var a=k();"*"===b?c*=a:c/=a}return c}function d(){for(var b,c=l();"+"===f||"-"===f;){b=f,j();var a=l();"+"===b?c+=a:c-=a}return c}var f,a=/([\+\-\w\.]+|[\(\)\*\/])/g;return j(),d()}function b(c,k){if("0"==(k=k.trim().toLowerCase())&&0<="px".search(c))return{px:0};if(/^[^(]*$|^calc/.test(k)){k=k.replace(/calc\(/g,"(");var b={};k=k.replace(c,function(c){return b[c]=null,"U"+c});for(var l="U("+c.source+")",e=k.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+l,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(e)?(e=e.replace(f[g],"$1"),g=0):g++;if("D"==e){for(var h in b){var i=a(k.replace(new RegExp("U"+h,"g"),"").replace(new RegExp(l,"g"),"*0"));if(!isFinite(i))return;b[h]=i}return b}}}function c(c,a){return d(c,a,!0)}function d(h,b,a){var c,d=[];for(c in h)d.push(c);for(c in b)0>d.indexOf(c)&&d.push(c);return h=d.map(function(b){return h[b]||0}),b=d.map(function(c){return b[c]||0}),[h,b,function(f){var b=f.map(function(b,c){return 1==f.length&&a&&(b=g(b,0)),n.numberToString(b)+d[c]}).join(" + ");return 1<f.length?"calc("+b+")":b}]}var e=b.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g),f=b.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g),h=b.bind(null,/deg|rad|grad|turn/g);n.parseLength=e,n.parseLengthOrPercent=f,n.consumeLengthOrPercent=n.consumeParenthesised.bind(null,f),n.parseAngle=h,n.mergeDimensions=d;var i=n.consumeParenthesised.bind(null,e),j=n.consumeRepeated.bind(void 0,i,/^/),k=n.consumeRepeated.bind(void 0,j,/^,/);n.consumeSizePairList=k;var l=n.mergeNestedRepeated.bind(void 0,c," "),m=n.mergeNestedRepeated.bind(void 0,l,",");n.mergeNonNegativeSizePair=l,n.addPropertiesHandler(function(c){var a=k(c);if(a&&""==a[1])return a[0]},m,["background-size"]),n.addPropertiesHandler(f,c,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),n.addPropertiesHandler(f,d,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","stroke-dashoffset","text-indent","top","vertical-align","word-spacing"])}(c),function(h){function a(a){return h.consumeLengthOrPercent(a)||h.consumeToken(/^auto/,a)}function b(c){var b=h.consumeList([h.ignore(h.consumeToken.bind(null,/^rect/)),h.ignore(h.consumeToken.bind(null,/^\(/)),h.consumeRepeated.bind(null,a,/^,/),h.ignore(h.consumeToken.bind(null,/^\)/))],c);if(b&&4==b[0].length)return b[0]}var c=h.mergeWrappedNestedRepeated.bind(null,function(b){return"rect("+b+")"},function(a,b){return"auto"==a||"auto"==b?[!0,!1,function(c){var d=c?a:b;if("auto"==d)return"auto";var e=h.mergeDimensions(d,d);return e[2](e[0])}]:h.mergeDimensions(a,b)},", ");h.parseBox=b,h.mergeBoxes=c,h.addPropertiesHandler(b,c,["clip"])}(c),function(E){function a(d){return function(e){var b=0;return d.map(function(c){return c===h?e[b++]:c})}}function b(b){return b}function d(a){if("none"==(a=a.toLowerCase().trim()))return[];for(var b,c=/\s*(\w+)\(([^)]*)\)/g,d=[],n=0;b=c.exec(a);){if(b.index!=n)return;n=b.index+b[0].length;var f=b[1],u=D[f];if(!u)return;var v=b[2].split(","),i=u[0];if(i.length<v.length)return;for(var j=[],w=0;w<i.length;w++){var o,p=v[w],q=i[w];if(void 0===(o=p?{A:function(a){return"0"==a.trim()?t:E.parseAngle(a)},N:E.parseNumber,T:E.parseLengthOrPercent,L:E.parseLength}[q.toUpperCase()](p):{a:t,n:j[0],t:s}[q]))return;j.push(o)}if(d.push({t:f,d:j}),c.lastIndex==a.length)return d}}function o(b){return b.toFixed(6).replace(".000000","")}function e(f,b){if(f.decompositionPair!==b){f.decompositionPair=b;var a=E.makeMatrixDecomposition(f)}if(b.decompositionPair!==f){b.decompositionPair=f;var d=E.makeMatrixDecomposition(b)}return null==a[0]||null==d[0]?[[!1],[!0],function(c){return c?b[0].d:f[0].d}]:(a[0].push(0),d[0].push(1),[a,d,function(e){var b=E.quat(a[0][3],d[0][3],e[5]);return E.composeMatrix(e[0],e[1],e[2],b,e[4]).map(o).join(",")}])}function f(b){return b.replace(/[xy]/,"")}function g(b){return b.replace(/(x|y|z|3d)?$/,"3d")}function c(a,b){var c=E.makeMatrixDecomposition&&!0,h=!1;if(!a.length||!b.length){a.length||(h=!0,a=b,b=[]);for(var i=0;i<a.length;i++){var n=a[i].t,F=a[i].d,k="scale"==n.substr(0,5)?1:0;b.push({t:n,d:F.map(function(d){if("number"==typeof d)return k;var e={};for(var b in d)e[b]=k;return e})})}}var l=function(c,a){return"perspective"==c&&"perspective"==a||("matrix"==c||"matrix3d"==c)&&("matrix"==a||"matrix3d"==a)},m=[],o=[],p=[];if(a.length!=b.length){if(!c)return;var q=e(a,b);m=[q[0]],o=[q[1]],p=[["matrix",[q[2]]]]}else for(var i=0;i<a.length;i++){var n,r=a[i].t,s=b[i].t,t=a[i].d,u=b[i].d,v=D[r],w=D[s];if(l(r,s)){if(!c)return;var q=e([a[i]],[b[i]]);m.push(q[0]),o.push(q[1]),p.push(["matrix",[q[2]]])}else{if(r==s)n=r;else if(v[2]&&w[2]&&f(r)==f(s))n=f(r),t=v[2](t),u=w[2](u);else{if(!v[1]||!w[1]||g(r)!=g(s)){if(!c)return;var q=e(a,b);m=[q[0]],o=[q[1]],p=[["matrix",[q[2]]]];break}n=g(r),t=v[1](t),u=w[1](u)}for(var x=[],y=[],z=[],A=0;A<t.length;A++){var B="number"==typeof t[A]?E.mergeNumbers:E.mergeDimensions,q=B(t[A],u[A]);x[A]=q[0],y[A]=q[1],z.push(q[2])}m.push(x),o.push(y),p.push([n,z])}}if(h){var C=m;m=o,o=C}return[m,o,function(b){return b.map(function(d,e){var a=d.map(function(b,a){return p[e][1][a](b)}).join(",");return"matrix"==p[e][0]&&16==a.split(",").length&&(p[e][0]="matrix3d"),p[e][0]+"("+a+")"}).join(" ")}]}var h=null,s={px:0},t={deg:0},D={matrix:["NNNNNN",[h,h,0,0,h,h,0,0,0,0,1,0,h,h,0,1],b],matrix3d:["NNNNNNNNNNNNNNNN",b],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",a([h,h,1]),b],scalex:["N",a([h,1,1]),a([h,1])],scaley:["N",a([1,h,1]),a([1,h])],scalez:["N",a([1,1,h])],scale3d:["NNN",b],skew:["Aa",null,b],skewx:["A",null,a([h,t])],skewy:["A",null,a([t,h])],translate:["Tt",a([h,h,s]),b],translatex:["T",a([h,s,s]),a([h,s])],translatey:["T",a([s,h,s]),a([s,h])],translatez:["L",a([s,s,h])],translate3d:["TTL",b]};E.addPropertiesHandler(d,c,["transform"]),E.transformToSvgMatrix=function(a){var b=E.transformListToMatrix(d(a));return"matrix("+o(b[0])+" "+o(b[1])+" "+o(b[4])+" "+o(b[5])+" "+o(b[12])+" "+o(b[13])+")"}}(c),function(b){function a(e,a){a.concat([e]).forEach(function(a){a in document.documentElement.style&&(c[e]=a),d[a]=e})}var c={},d={};a("transform",["webkitTransform","msTransform"]),a("transformOrigin",["webkitTransformOrigin"]),a("perspective",["webkitPerspective"]),a("perspectiveOrigin",["webkitPerspectiveOrigin"]),b.propertyName=function(b){return c[b]||b},b.unprefixedPropertyName=function(b){return d[b]||b}}(c)}(),function(){if(void 0===document.createElement("div").animate([]).oncancel){var e;if(window.performance&&performance.now)var e=function(){return performance.now()};else var e=function(){return Date.now()};var a=function(d,a,b){this.target=d,this.currentTime=a,this.timelineTime=b,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=d,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},b=window.Element.prototype.animate;window.Element.prototype.animate=function(c,d){var j=b.call(this,c,d);j._cancelHandlers=[],j.oncancel=null;var f=j.cancel;j.cancel=function(){f.call(this);var b=new a(this,null,e()),c=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){c.forEach(function(c){c.call(b.target,b)})},0)};var g=j.addEventListener;j.addEventListener=function(c,a){"function"==typeof a&&"cancel"==c?this._cancelHandlers.push(a):g.call(this,c,a)};var h=j.removeEventListener;return j.removeEventListener=function(d,a){if("cancel"==d){var b=this._cancelHandlers.indexOf(a);0<=b&&this._cancelHandlers.splice(b,1)}else h.call(this,d,a)},j}}}(),function(h){var a=document.documentElement,b=null,c=!1;try{var i=getComputedStyle(a).getPropertyValue("opacity"),e="0"==i?"1":"0";b=a.animate({opacity:[e,e]},{duration:1}),b.currentTime=0,c=getComputedStyle(a).getPropertyValue("opacity")==e}catch(b){}finally{b&&b.cancel()}if(!c){var f=window.Element.prototype.animate;window.Element.prototype.animate=function(a,b){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&a[Symbol.iterator]&&(a=Array.from(a)),Array.isArray(a)||null===a||(a=h.convertToArrayForm(a)),f.call(this,a,b)}}}(i),function(c,h){function b(d){var a=h.timeline;a.currentTime=d,a._discardAnimations(),0==a._animations.length?e=!1:requestAnimationFrame(b)}var d=window.requestAnimationFrame;window.requestAnimationFrame=function(b){return d(function(a){h.timeline._updateAnimationsPromises(),b(a),h.timeline._updateAnimationsPromises()})},h.AnimationTimeline=function(){this._animations=[],this.currentTime=void 0},h.AnimationTimeline.prototype={getAnimations:function(){return this._discardAnimations(),this._animations.slice()},_updateAnimationsPromises:function(){h.animationsWithPromises=h.animationsWithPromises.filter(function(b){return b._updatePromises()})},_discardAnimations:function(){this._updateAnimationsPromises(),this._animations=this._animations.filter(function(b){return"finished"!=b.playState&&"idle"!=b.playState})},_play:function(b){var a=new h.Animation(b,this);return this._animations.push(a),h.restartWebAnimationsNextTick(),a._updatePromises(),a._animation.play(),a._updatePromises(),a},play:function(b){return b&&b.remove(),this._play(b)}};var e=!1;h.restartWebAnimationsNextTick=function(){e||(e=!0,requestAnimationFrame(b))};var a=new h.AnimationTimeline;h.timeline=a;try{Object.defineProperty(window.document,"timeline",{configurable:!0,get:function(){return a}})}catch(b){}try{window.document.timeline=a}catch(b){}}(0,b),function(f,g){var b=Number.MAX_VALUE,c=Math.sign;g.animationsWithPromises=[],g.Animation=function(a,b){if(this.id="",a&&a._id&&(this.id=a._id),this.effect=a,a&&(a._animation=this),!b)throw new Error("Animation with null timeline is not supported");this._timeline=b,this._sequenceNumber=f.sequenceNumber++,this._holdTime=0,this._paused=!1,this._isGroup=!1,this._animation=null,this._childAnimations=[],this._callback=null,this._oldPlayState="idle",this._rebuildUnderlyingAnimation(),this._animation.cancel(),this._updatePromises()},g.Animation.prototype={_updatePromises:function(){var c=this._oldPlayState,a=this.playState;return this._readyPromise&&a!==c&&("idle"==a?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==c?this._resolveReadyPromise():"pending"==a&&(this._readyPromise=void 0)),this._finishedPromise&&a!==c&&("idle"==a?(this._rejectFinishedPromise(),this._finishedPromise=void 0):"finished"==a?this._resolveFinishedPromise():"finished"==c&&(this._finishedPromise=void 0)),this._oldPlayState=this.playState,this._readyPromise||this._finishedPromise},_rebuildUnderlyingAnimation:function(){this._updatePromises();var b,a,c,d,e=!!this._animation;e&&(b=this.playbackRate,a=this._paused,c=this.startTime,d=this.currentTime,this._animation.cancel(),this._animation._wrapper=null,this._animation=null),(!this.effect||this.effect instanceof window.KeyframeEffect)&&(this._animation=g.newUnderlyingAnimationForKeyframeEffect(this.effect),g.bindAnimationForKeyframeEffect(this)),(this.effect instanceof window.SequenceEffect||this.effect instanceof window.GroupEffect)&&(this._animation=g.newUnderlyingAnimationForGroup(this.effect),g.bindAnimationForGroup(this)),this.effect&&this.effect._onsample&&g.bindAnimationForCustomEffect(this),e&&(1!=b&&(this.playbackRate=b),null===c?null===d?null!==this._holdTime&&(this.currentTime=this._holdTime):this.currentTime=d:this.startTime=c,a&&this.pause()),this._updatePromises()},_updateChildren:function(){if(this.effect&&"idle"!=this.playState){var b=this.effect._timing.delay;this._childAnimations.forEach(function(a){this._arrangeChildren(a,b),this.effect instanceof window.SequenceEffect&&(b+=g.groupChildDuration(a.effect))}.bind(this))}},_setExternalAnimation:function(c){if(this.effect&&this._isGroup)for(var a=0;a<this.effect.children.length;a++)this.effect.children[a]._animation=c,this._childAnimations[a]._setExternalAnimation(c)},_constructChildAnimations:function(){if(this.effect&&this._isGroup){var b=this.effect._timing.delay;this._removeChildAnimations(),this.effect.children.forEach(function(a){var c=g.timeline._play(a);this._childAnimations.push(c),c.playbackRate=this.playbackRate,this._paused&&c.pause(),a._animation=this.effect._animation,this._arrangeChildren(c,b),this.effect instanceof window.SequenceEffect&&(b+=g.groupChildDuration(a))}.bind(this))}},_arrangeChildren:function(c,a){null===this.startTime?c.currentTime=this.currentTime-a/this.playbackRate:c.startTime!==this.startTime+a/this.playbackRate&&(c.startTime=this.startTime+a/this.playbackRate)},get timeline(){return this._timeline},get playState(){return this._animation?this._animation.playState:"idle"},get finished(){return window.Promise?(this._finishedPromise||(-1==g.animationsWithPromises.indexOf(this)&&g.animationsWithPromises.push(this),this._finishedPromise=new Promise(function(c,a){this._resolveFinishedPromise=function(){c(this)},this._rejectFinishedPromise=function(){a({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"finished"==this.playState&&this._resolveFinishedPromise()),this._finishedPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get ready(){return window.Promise?(this._readyPromise||(-1==g.animationsWithPromises.indexOf(this)&&g.animationsWithPromises.push(this),this._readyPromise=new Promise(function(c,a){this._resolveReadyPromise=function(){c(this)},this._rejectReadyPromise=function(){a({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"pending"!==this.playState&&this._resolveReadyPromise()),this._readyPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get onfinish(){return this._animation.onfinish},set onfinish(c){this._animation.onfinish="function"==typeof c?function(a){a.target=this,c.call(this,a)}.bind(this):c},get oncancel(){return this._animation.oncancel},set oncancel(c){this._animation.oncancel="function"==typeof c?function(a){a.target=this,c.call(this,a)}.bind(this):c},get currentTime(){this._updatePromises();var b=this._animation.currentTime;return this._updatePromises(),b},set currentTime(d){this._updatePromises(),this._animation.currentTime=isFinite(d)?d:c(d)*b,this._register(),this._forEachChild(function(a,b){a.currentTime=d-b}),this._updatePromises()},get startTime(){return this._animation.startTime},set startTime(d){this._updatePromises(),this._animation.startTime=isFinite(d)?d:c(d)*b,this._register(),this._forEachChild(function(a,b){a.startTime=d+b}),this._updatePromises()},get playbackRate(){return this._animation.playbackRate},set playbackRate(c){this._updatePromises();var a=this.currentTime;this._animation.playbackRate=c,this._forEachChild(function(a){a.playbackRate=c}),null!==a&&(this.currentTime=a),this._updatePromises()},play:function(){this._updatePromises(),this._paused=!1,this._animation.play(),-1==this._timeline._animations.indexOf(this)&&this._timeline._animations.push(this),this._register(),g.awaitStartTime(this),this._forEachChild(function(c){var a=c.currentTime;c.play(),c.currentTime=a}),this._updatePromises()},pause:function(){this._updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._animation.pause(),this._register(),this._forEachChild(function(b){b.pause()}),this._paused=!0,this._updatePromises()},finish:function(){this._updatePromises(),this._animation.finish(),this._register(),this._updatePromises()},cancel:function(){this._updatePromises(),this._animation.cancel(),this._register(),this._removeChildAnimations(),this._updatePromises()},reverse:function(){this._updatePromises();var b=this.currentTime;this._animation.reverse(),this._forEachChild(function(b){b.reverse()}),null!==b&&(this.currentTime=b),this._updatePromises()},addEventListener:function(d,e){var a=e;"function"==typeof e&&(a=function(b){b.target=this,e.call(this,b)}.bind(this),e._wrapper=a),this._animation.addEventListener(d,a)},removeEventListener:function(c,a){this._animation.removeEventListener(c,a&&a._wrapper||a)},_removeChildAnimations:function(){for(;this._childAnimations.length;)this._childAnimations.pop().cancel()},_forEachChild:function(g){var b=0;if(this.effect.children&&this._childAnimations.length<this.effect.children.length&&this._constructChildAnimations(),this._childAnimations.forEach(function(c){g.call(this,c,b),this.effect instanceof window.SequenceEffect&&(b+=c.effect.activeDuration)}.bind(this)),"pending"!=this.playState){var a=this.effect._timing,c=this.currentTime;null!==c&&(c=f.calculateIterationProgress(f.calculateActiveDuration(a),c,a)),(null==c||isNaN(c))&&this._removeChildAnimations()}}},window.Animation=g.Animation}(i,b),function(k,l){function a(a){this._frames=k.normalizeKeyframes(a)}function b(){for(var b=!1;c.length;)c.shift()._updateChildren(),b=!0;return b}var e=function(c){if(c._animation=void 0,c instanceof window.SequenceEffect||c instanceof window.GroupEffect)for(var a=0;a<c.children.length;a++)e(c.children[a])};l.removeMulti=function(f){for(var a,d=[],b=0;b<f.length;b++)a=f[b],a._parent?(-1==d.indexOf(a._parent)&&d.push(a._parent),a._parent.children.splice(a._parent.children.indexOf(a),1),a._parent=null,e(a)):a._animation&&a._animation.effect==a&&(a._animation.cancel(),a._animation.effect=new KeyframeEffect(null,[]),a._animation._callback&&(a._animation._callback._animation=null),a._animation._rebuildUnderlyingAnimation(),e(a));for(b=0;b<d.length;b++)d[b]._rebuild()},l.KeyframeEffect=function(d,b,g,e){return this.target=d,this._parent=null,g=k.numericTimingToObject(g),this._timingInput=k.cloneTimingInput(g),this._timing=k.normalizeTimingInput(g),this.timing=k.makeTiming(g,!1,this),this.timing._effect=this,"function"==typeof b?(k.deprecated("Custom KeyframeEffect","2015-06-22","Use KeyframeEffect.onsample instead."),this._normalizedKeyframes=b):this._normalizedKeyframes=new a(b),this._keyframes=b,this.activeDuration=k.calculateActiveDuration(this._timing),this._id=e,this},l.KeyframeEffect.prototype={getFrames:function(){return"function"==typeof this._normalizedKeyframes?this._normalizedKeyframes:this._normalizedKeyframes._frames},set onsample(b){if("function"==typeof this.getFrames())throw new Error("Setting onsample on custom effect KeyframeEffect is not supported.");this._onsample=b,this._animation&&this._animation._rebuildUnderlyingAnimation()},get parent(){return this._parent},clone:function(){if("function"==typeof this.getFrames())throw new Error("Cloning custom effects is not supported.");var a=new KeyframeEffect(this.target,[],k.cloneTimingInput(this._timingInput),this._id);return a._normalizedKeyframes=this._normalizedKeyframes,a._keyframes=this._keyframes,a},remove:function(){l.removeMulti([this])}};var f=Element.prototype.animate;Element.prototype.animate=function(b,a){var c="";return a&&a.id&&(c=a.id),l.timeline._play(new l.KeyframeEffect(this,b,a,c))};var g=document.createElementNS("http://www.w3.org/1999/xhtml","div");l.newUnderlyingAnimationForKeyframeEffect=function(e){if(e){var a=e.target||g,b=e._keyframes;"function"==typeof b&&(b=[]);var h=e._timingInput;h.id=e._id}else var a=g,b=[],h=0;return f.apply(a,[b,h])},l.bindAnimationForKeyframeEffect=function(b){b.effect&&"function"==typeof b.effect._normalizedKeyframes&&l.bindAnimationForCustomEffect(b)};var c=[];l.awaitStartTime=function(d){null===d.startTime&&d._isGroup&&(0==c.length&&requestAnimationFrame(b),c.push(d))};var d=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){l.timeline._updateAnimationsPromises();var c=d.apply(this,arguments);return b()&&(c=d.apply(this,arguments)),l.timeline._updateAnimationsPromises(),c}}),window.KeyframeEffect=l.KeyframeEffect,window.Element.prototype.getAnimations=function(){return document.timeline.getAnimations().filter(function(b){return null!==b.effect&&b.effect.target==this}.bind(this))}}(i,b),function(k,a){function l(b){b._registered||(b._registered=!0,e.push(b),f||(f=!0,requestAnimationFrame(c)))}function c(){var a=e;e=[],a.sort(function(c,a){return c._sequenceNumber-a._sequenceNumber}),a=a.filter(function(c){c();var a=c._animation?c._animation.playState:"idle";return"running"!=a&&"pending"!=a&&(c._registered=!1),c._registered}),e.push.apply(e,a),e.length?(f=!0,requestAnimationFrame(c)):f=!1}var d=(document.createElementNS("http://www.w3.org/1999/xhtml","div"),0);a.bindAnimationForCustomEffect=function(a){var b,c=a.effect.target,e="function"==typeof a.effect.getFrames();b=e?a.effect.getFrames():a.effect._onsample;var f=a.effect.timing,g=null;f=k.normalizeTimingInput(f);var h=function(){var i=h._animation?h._animation.currentTime:null;null!==i&&(i=k.calculateIterationProgress(k.calculateActiveDuration(f),i,f),isNaN(i)&&(i=null)),i!==g&&(e?b(i,c,a.effect):b(i,a.effect,a.effect._animation)),g=i};h._animation=a,h._registered=!1,h._sequenceNumber=d++,a._callback=h,l(h)};var e=[],f=!1;a.Animation.prototype._register=function(){this._callback&&l(this._callback)}}(i,b),function(f,h){function c(b){return b._timing.delay+b.activeDuration+b._timing.endDelay}function a(a,b,c){this._id=c,this._parent=null,this.children=a||[],this._reparent(this.children),b=f.numericTimingToObject(b),this._timingInput=f.cloneTimingInput(b),this._timing=f.normalizeTimingInput(b,!0),this.timing=f.makeTiming(b,!0,this),this.timing._effect=this,"auto"===this._timing.duration&&(this._timing.duration=this.activeDuration)}window.SequenceEffect=function(){a.apply(this,arguments)},window.GroupEffect=function(){a.apply(this,arguments)},a.prototype={_isAncestor:function(c){for(var a=this;null!==a;){if(a==c)return!0;a=a._parent}return!1},_rebuild:function(){for(var b=this;b;)"auto"===b.timing.duration&&(b._timing.duration=b.activeDuration),b=b._parent;this._animation&&this._animation._rebuildUnderlyingAnimation()},_reparent:function(b){h.removeMulti(b);for(var a=0;a<b.length;a++)b[a]._parent=this},_putChild:function(e,a){for(var b=a?"Cannot append an ancestor or self":"Cannot prepend an ancestor or self",f=0;f<e.length;f++)if(this._isAncestor(e[f]))throw{type:DOMException.HIERARCHY_REQUEST_ERR,name:"HierarchyRequestError",message:b};for(var f=0;f<e.length;f++)a?this.children.push(e[f]):this.children.unshift(e[f]);this._reparent(e),this._rebuild()},append:function(){this._putChild(arguments,!0)},prepend:function(){this._putChild(arguments,!1)},get parent(){return this._parent},get firstChild(){return this.children.length?this.children[0]:null},get lastChild(){return this.children.length?this.children[this.children.length-1]:null},clone:function(){for(var a=f.cloneTimingInput(this._timingInput),b=[],c=0;c<this.children.length;c++)b.push(this.children[c].clone());return this instanceof GroupEffect?new GroupEffect(b,a):new SequenceEffect(b,a)},remove:function(){h.removeMulti([this])}},window.SequenceEffect.prototype=Object.create(a.prototype),Object.defineProperty(window.SequenceEffect.prototype,"activeDuration",{get:function(){var d=0;return this.children.forEach(function(a){d+=c(a)}),g(d,0)}}),window.GroupEffect.prototype=Object.create(a.prototype),Object.defineProperty(window.GroupEffect.prototype,"activeDuration",{get:function(){var d=0;return this.children.forEach(function(a){d=g(d,c(a))}),d}}),h.newUnderlyingAnimationForGroup=function(a){var i,d=null,b=new KeyframeEffect(null,[],a._timing,a._id);return b.onsample=function(a){var b=i._wrapper;if(b&&"pending"!=b.playState&&b.effect)return null==a?void b._removeChildAnimations():0==a&&0>b.playbackRate&&(d||(d=f.normalizeTimingInput(b.effect.timing)),a=f.calculateIterationProgress(f.calculateActiveDuration(d),-1,d),isNaN(a)||null==a)?(b._forEachChild(function(b){b.currentTime=-1}),void b._removeChildAnimations()):void 0},i=h.timeline._play(b)},h.bindAnimationForGroup=function(b){b._animation._wrapper=b,b._isGroup=!0,h.awaitStartTime(b),b._constructChildAnimations(),b._setExternalAnimation(b)},h.groupChildDuration=c}(i,b),a.true=f}({},function(){return this}());</script><script>Polymer.AppLayout=Polymer.AppLayout||{},Polymer.AppLayout._scrollEffects={},Polymer.AppLayout._scrollTimer=null,Polymer.AppLayout.scrollTimingFunction=function(a,e,b,f){return a/=f,-b*a*(a-2)+e},Polymer.AppLayout.registerEffect=function(a,b){if(null!=Polymer.AppLayout._scrollEffects[a])throw new Error('effect `'+a+'` is already registered.');Polymer.AppLayout._scrollEffects[a]=b},Polymer.AppLayout.queryAllRoot=function(a,b){for(var c=[b],d=[];0<c.length;){var e=c.shift();d.push.apply(d,e.querySelectorAll(a));for(var f=0;e.children[f];f++)e.children[f].shadowRoot&&c.push(e.children[f].shadowRoot)}return d},Polymer.AppLayout.scroll=function(a){a=a||{};var b=document.documentElement,c=a.target||b,d='scrollBehavior'in c.style&&c.scroll,e=a.top||0,f=a.left||0,g=c===b?window.scrollTo:function(a,b){c.scrollLeft=a,c.scrollTop=b};if('smooth'===a.behavior){if(d)c.scroll(a);else{var h=Polymer.AppLayout.scrollTimingFunction,i=Date.now(),j=c===b?window.pageYOffset:c.scrollTop,k=c===b?window.pageXOffset:c.scrollLeft,l=300,m=function a(){var b=Date.now(),c=b-i;c<l?(g(h(c,k,f-k,l),h(c,j,e-j,l)),requestAnimationFrame(a)):g(f,e)}.bind(this);m()}}else if('silent'===a.behavior){var n=Polymer.AppLayout.queryAllRoot('app-header',document.body);n.forEach(function(a){a.setAttribute('silent-scroll','')}),Polymer.AppLayout._scrollTimer&&window.cancelAnimationFrame(Polymer.AppLayout._scrollTimer),Polymer.AppLayout._scrollTimer=window.requestAnimationFrame(function(){n.forEach(function(a){a.removeAttribute('silent-scroll')}),Polymer.AppLayout._scrollTimer=null}),g(f,e)}else g(f,e)};</script><dom-module id="app-drawer" assetpath="bower_components/app-layout/app-drawer/"><template><style>:host{position:fixed;top:-120px;right:0;bottom:-120px;left:0;visibility:hidden;transition-property:visibility;}:host([opened]){visibility:visible;}:host([persistent]){width:var(--app-drawer-width, 256px);}:host([persistent][position=left]){right:auto;}:host([persistent][position=right]){left:auto;}#contentContainer{position:absolute;top:0;bottom:0;left:0;width:var(--app-drawer-width, 256px);padding:120px 0;transition-property:-webkit-transform;transition-property:transform;-webkit-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0);background-color:#FFF;@apply --app-drawer-content-container;}#contentContainer[persistent]{width:100%;}#contentContainer[position=right]{right:0;left:auto;-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);}#contentContainer[swipe-open]::after{position:fixed;top:0;bottom:0;left:100%;visibility:visible;width:20px;content:'';}#contentContainer[swipe-open][position=right]::after{right:100%;left:auto;}#contentContainer[opened]{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);}#scrim{position:absolute;top:0;right:0;bottom:0;left:0;transition-property:opacity;-webkit-transform:translateZ(0);transform:translateZ(0);opacity:0;background:var(--app-drawer-scrim-background, rgba(0, 0, 0, 0.5));}#scrim.visible{opacity:1;}:host([no-transition]) #contentContainer{transition-property:none;}</style><div id="scrim" on-click="close"></div><div id="contentContainer" opened$="[[opened]]" persistent$="[[persistent]]" position$="[[position]]" swipe-open$="[[swipeOpen]]"><slot></slot></div></template><script>Polymer({is:'app-drawer',properties:{opened:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},persistent:{type:Boolean,value:!1,reflectToAttribute:!0},transitionDuration:{type:Number,value:200},align:{type:String,value:'left'},position:{type:String,readOnly:!0,reflectToAttribute:!0},swipeOpen:{type:Boolean,value:!1,reflectToAttribute:!0},noFocusTrap:{type:Boolean,value:!1},disableSwipe:{type:Boolean,value:!1}},observers:['resetLayout(position, isAttached)','_resetPosition(align, isAttached)','_styleTransitionDuration(transitionDuration)','_openedPersistentChanged(opened, persistent)'],_translateOffset:0,_trackDetails:null,_drawerState:0,_boundEscKeydownHandler:null,_firstTabStop:null,_lastTabStop:null,attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){this._boundEscKeydownHandler=this._escKeydownHandler.bind(this),this.addEventListener('keydown',this._tabKeydownHandler.bind(this)),this.listen(this,'track','_track'),this.setScrollDirection('y')}),this.fire('app-reset-layout')},detached:function(){document.removeEventListener('keydown',this._boundEscKeydownHandler)},open:function(){this.opened=!0},close:function(){this.opened=!1},toggle:function(){this.opened=!this.opened},getWidth:function(){return this._savedWidth||this.$.contentContainer.offsetWidth},_isRTL:function(){return'rtl'===window.getComputedStyle(this).direction},_resetPosition:function(){switch(this.align){case'start':return void this._setPosition(this._isRTL()?'right':'left');case'end':return void this._setPosition(this._isRTL()?'left':'right');}this._setPosition(this.align)},_escKeydownHandler:function(a){a.keyCode===27&&(a.preventDefault(),this.close())},_track:function(a){if(!(this.persistent||this.disableSwipe))switch(a.preventDefault(),a.detail.state){case'start':this._trackStart(a);break;case'track':this._trackMove(a);break;case'end':this._trackEnd(a);}},_trackStart:function(){this._drawerState=this._DRAWER_STATE.TRACKING;var a=this.$.contentContainer.getBoundingClientRect();this._savedWidth=a.width,this._translateOffset='left'===this.position?a.left:a.right-window.innerWidth,this._trackDetails=[],this._styleTransitionDuration(0),this.style.visibility='visible'},_trackMove:function(a){this._translateDrawer(a.detail.dx+this._translateOffset),this._trackDetails.push({dx:a.detail.dx,timeStamp:Date.now()})},_trackEnd:function(a){var b=a.detail.dx+this._translateOffset,c=this.getWidth(),d='left'===this.position,e=d?0<=b||b<=-c:0>=b||b>=c;if(!e){var f=this._trackDetails;if(this._trackDetails=null,this._flingDrawer(a,f),this._drawerState===this._DRAWER_STATE.FLINGING)return}var g=c/2;a.detail.dx<-g?this.opened='right'===this.position:a.detail.dx>g&&(this.opened='left'===this.position),e?this.debounce('_resetDrawerState',this._resetDrawerState):this.debounce('_resetDrawerState',this._resetDrawerState,this.transitionDuration),this._styleTransitionDuration(this.transitionDuration),this._resetDrawerTranslate(),this.style.visibility=''},_calculateVelocity:function(a,b){for(var c,e=Date.now(),f=0,g=b.length-1;f<=g;){var h=f+g>>1,i=b[h];i.timeStamp>=e-100?(c=i,g=h-1):f=h+1}if(c){var d=a.detail.dx-c.dx,j=e-c.timeStamp||1;return d/j}return 0},_flingDrawer:function(a,b){var c=this._calculateVelocity(a,b);if(!(Math.abs(c)<this._MIN_FLING_THRESHOLD)){this._drawerState=this._DRAWER_STATE.FLINGING;var d,e=a.detail.dx+this._translateOffset,f=this.getWidth(),g='left'===this.position,h=0<c;d=!h&&g?-(e+f):h&&!g?f-e:-e,h?(c=Math.max(c,this._MIN_TRANSITION_VELOCITY),this.opened='left'===this.position):(c=Math.min(c,-this._MIN_TRANSITION_VELOCITY),this.opened='right'===this.position);var i=this._FLING_INITIAL_SLOPE*d/c;this._styleTransitionDuration(i),this._styleTransitionTimingFunction(this._FLING_TIMING_FUNCTION),this._resetDrawerTranslate(),this.debounce('_resetDrawerState',this._resetDrawerState,i)}},_styleTransitionDuration:function(a){this.style.transitionDuration=a+'ms',this.$.contentContainer.style.transitionDuration=a+'ms',this.$.scrim.style.transitionDuration=a+'ms'},_styleTransitionTimingFunction:function(a){this.$.contentContainer.style.transitionTimingFunction=a,this.$.scrim.style.transitionTimingFunction=a},_translateDrawer:function(a){var b=Math.min,c=Math.max,d=this.getWidth();'left'===this.position?(a=c(-d,b(a,0)),this.$.scrim.style.opacity=1+a/d):(a=c(0,b(a,d)),this.$.scrim.style.opacity=1-a/d),this.translate3d(a+'px','0','0',this.$.contentContainer)},_resetDrawerTranslate:function(){this.$.scrim.style.opacity='',this.transform('',this.$.contentContainer)},_resetDrawerState:function(){var a=this._drawerState;a===this._DRAWER_STATE.FLINGING&&(this._styleTransitionDuration(this.transitionDuration),this._styleTransitionTimingFunction(''),this.style.visibility=''),this._savedWidth=null,this._drawerState=this.opened?this.persistent?this._DRAWER_STATE.OPENED_PERSISTENT:this._DRAWER_STATE.OPENED:this._DRAWER_STATE.CLOSED,a!==this._drawerState&&(this._drawerState===this._DRAWER_STATE.OPENED?(this._setKeyboardFocusTrap(),document.addEventListener('keydown',this._boundEscKeydownHandler),document.body.style.overflow='hidden'):(document.removeEventListener('keydown',this._boundEscKeydownHandler),document.body.style.overflow=''),a!==this._DRAWER_STATE.INIT&&this.fire('app-drawer-transitioned'))},resetLayout:function(){this.fire('app-reset-layout')},_setKeyboardFocusTrap:function(){if(!this.noFocusTrap){var a=Polymer.dom(this).querySelectorAll('a[href]:not([tabindex="-1"]),area[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),iframe:not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])');0<a.length?(this._firstTabStop=a[0],this._lastTabStop=a[a.length-1]):(this._firstTabStop=null,this._lastTabStop=null);var b=this.getAttribute('tabindex');b&&-1<parseInt(b,10)?this.focus():this._firstTabStop&&this._firstTabStop.focus()}},_tabKeydownHandler:function(a){if(!this.noFocusTrap){this._drawerState===this._DRAWER_STATE.OPENED&&a.keyCode===9&&(a.shiftKey?this._firstTabStop&&Polymer.dom(a).localTarget===this._firstTabStop&&(a.preventDefault(),this._lastTabStop.focus()):this._lastTabStop&&Polymer.dom(a).localTarget===this._lastTabStop&&(a.preventDefault(),this._firstTabStop.focus()))}},_openedPersistentChanged:function(a,b){this.toggleClass('visible',a&&!b,this.$.scrim),this.debounce('_resetDrawerState',this._resetDrawerState,this.transitionDuration)},_MIN_FLING_THRESHOLD:0.2,_MIN_TRANSITION_VELOCITY:1.2,_FLING_TIMING_FUNCTION:'cubic-bezier(0.667, 1, 0.667, 1)',_FLING_INITIAL_SLOPE:1.5,_DRAWER_STATE:{INIT:0,OPENED:1,OPENED_PERSISTENT:2,CLOSED:3,TRACKING:4,FLINGING:5}});</script></dom-module><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var a=this.query;a&&(!this.full&&'('!==a[0]&&(a='('+a+')'),this._mq=window.matchMedia(a),this._add(),this.queryHandler(this._mq))},queryHandler:function(a){this._setQueryMatches(a.matches)}});</script><script>Polymer.AppLayoutBehavior=[Polymer.IronResizableBehavior,{listeners:{"app-reset-layout":'_appResetLayoutHandler',"iron-resize":'resetLayout'},attached:function(){this.fire('app-reset-layout')},_appResetLayoutHandler:function(a){Polymer.dom(a).path[0]===this||(this.resetLayout(),a.stopPropagation())},_updateLayoutStates:function(){console.error('unimplemented')},resetLayout:function(){var a=this,b=this._updateLayoutStates.bind(this);Polymer.Async&&Polymer.Async.animationFrame?(this._layoutDebouncer=Polymer.Debouncer.debounce(this._layoutDebouncer,Polymer.Async.animationFrame,b),Polymer.enqueueDebouncer(this._layoutDebouncer)):this.debounce('resetLayout',b),this._notifyDescendantResize()},_notifyLayoutChanged:function(){var a=this;requestAnimationFrame(function(){a.fire('app-reset-layout')})},_notifyDescendantResize:function(){this.isAttached&&this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this)}}];</script><dom-module id="app-drawer-layout" assetpath="bower_components/app-layout/app-drawer-layout/"><template><style>:host{display:block;position:relative;z-index:0;}:host ::slotted([slot=drawer]){z-index:1;}:host([fullbleed]){@apply --layout-fit;}#contentContainer{position:relative;z-index:0;height:100%;transition:var(--app-drawer-layout-content-transition, none);}#contentContainer[drawer-position=left]{margin-left:var(--app-drawer-width, 256px);}#contentContainer[drawer-position=right]{margin-right:var(--app-drawer-width, 256px);}</style><slot id="drawerSlot" name="drawer"></slot><div id="contentContainer" drawer-position$="[[_drawerPosition]]"><slot></slot></div><iron-media-query query="[[_computeMediaQuery(forceNarrow, responsiveWidth)]]" on-query-matches-changed="_onQueryMatchesChanged"></iron-media-query></template><script>Polymer({is:'app-drawer-layout',behaviors:[Polymer.AppLayoutBehavior],properties:{forceNarrow:{type:Boolean,value:!1},responsiveWidth:{type:String,value:'640px'},narrow:{type:Boolean,reflectToAttribute:!0,readOnly:!0,notify:!0},openedWhenNarrow:{type:Boolean,value:!1},_drawerPosition:{type:String}},listeners:{click:'_clickHandler'},observers:['_narrowChanged(narrow)'],get drawer(){return Polymer.dom(this.$.drawerSlot).getDistributedNodes()[0]},attached:function(){var a=this.drawer;a&&a.setAttribute('no-transition','')},_clickHandler:function(a){var b=Polymer.dom(a).localTarget;if(b&&b.hasAttribute('drawer-toggle')){var c=this.drawer;c&&!c.persistent&&c.toggle()}},_updateLayoutStates:function(){var a=this.drawer;this.isAttached&&a&&(this._drawerPosition=this.narrow?null:a.position,this._drawerNeedsReset&&(this.narrow?(a.opened=this.openedWhenNarrow,a.persistent=!1):a.opened=a.persistent=!0,a.hasAttribute('no-transition')&&Polymer.RenderStatus.afterNextRender(this,function(){a.removeAttribute('no-transition')}),this._drawerNeedsReset=!1))},_narrowChanged:function(){this._drawerNeedsReset=!0,this.resetLayout()},_onQueryMatchesChanged:function(a){this._setNarrow(a.detail.value)},_computeMediaQuery:function(a,b){return a?'(min-width: 0px)':'(max-width: '+b+')'}});</script></dom-module><dom-module id="app-grid-style" assetpath="bower_components/app-layout/app-grid/"><template><style>:host{--app-grid-expandible-item:{-webkit-flex-basis:calc((100% - 0.1px) / var(--app-grid-columns, 1) * var(--app-grid-expandible-item-columns, 1) - var(--app-grid-gutter, 0px)) !important;flex-basis:calc((100% - 0.1px) / var(--app-grid-columns, 1) * var(--app-grid-expandible-item-columns, 1) - var(--app-grid-gutter, 0px)) !important;max-width:calc((100% - 0.1px) / var(--app-grid-columns, 1) * var(--app-grid-expandible-item-columns, 1) - var(--app-grid-gutter, 0px)) !important;};}.app-grid{display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding-top:var(--app-grid-gutter, 0px);padding-left:var(--app-grid-gutter, 0px);box-sizing:border-box;}.app-grid > *{-ms-flex:1 1 100%;-webkit-flex:1;flex:1;-webkit-flex-basis:calc((100% - 0.1px - (var(--app-grid-gutter, 0px) * var(--app-grid-columns, 1))) / var(--app-grid-columns, 1));flex-basis:calc((100% - 0.1px - (var(--app-grid-gutter, 0px) * var(--app-grid-columns, 1))) / var(--app-grid-columns, 1));max-width:calc((100% - 0.1px - (var(--app-grid-gutter, 0px) * var(--app-grid-columns, 1))) / var(--app-grid-columns, 1));margin-bottom:var(--app-grid-gutter, 0px);margin-right:var(--app-grid-gutter, 0px);height:var(--app-grid-item-height);box-sizing:border-box;}.app-grid[has-aspect-ratio] > *{position:relative;}.app-grid[has-aspect-ratio] > *::before{display:block;content:"";padding-top:var(--app-grid-item-height, 100%);}.app-grid[has-aspect-ratio] > * > *{position:absolute;top:0;right:0;bottom:0;left:0;}</style></template></dom-module><script>Polymer.IronScrollTargetBehavior={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:['_scrollTargetChanged(scrollTarget, isAttached)'],_shouldHaveListener:!0,_scrollTargetChanged:function(a,b){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),!!b)if('document'===a)this.scrollTarget=this._doc;else if('string'===typeof a){var c=this.domHost;this.scrollTarget=c&&c.$?c.$[a]:Polymer.dom(this.ownerDocument).querySelector('#'+a)}else this._isValidScrollTarget()&&(this._oldScrollTarget=a,this._toggleScrollListener(this._shouldHaveListener,a))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(a){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,a):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=a)},set _scrollLeft(a){this.scrollTarget===this._doc?window.scrollTo(a,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=a)},scroll:function(a,b){this.scrollTarget===this._doc?window.scrollTo(a,b):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=a,this.scrollTarget.scrollTop=b)},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(a,b){var c=b===this._doc?window:b;a?!this._boundScrollHandler&&(this._boundScrollHandler=this._scrollHandler.bind(this),c.addEventListener('scroll',this._boundScrollHandler)):this._boundScrollHandler&&(c.removeEventListener('scroll',this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(a){this._shouldHaveListener=a,this._toggleScrollListener(a,this.scrollTarget)}};</script><script>Polymer.AppScrollEffectsBehavior=[Polymer.IronScrollTargetBehavior,{properties:{effects:{type:String},effectsConfig:{type:Object,value:function(){return{}}},disabled:{type:Boolean,reflectToAttribute:!0,value:!1},threshold:{type:Number,value:0},thresholdTriggered:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0}},observers:['_effectsChanged(effects, effectsConfig, isAttached)'],_updateScrollState:function(){},isOnScreen:function(){return!1},isContentBelow:function(){return!1},_effectsRunFn:null,_effects:null,get _clampedScrollTop(){return Math.max(0,this._scrollTop)},detached:function(){this._tearDownEffects()},createEffect:function(a,b){var c=Polymer.AppLayout._scrollEffects[a];if(!c)throw new ReferenceError(this._getUndefinedMsg(a));var d=this._boundEffect(c,b||{});return d.setUp(),d},_effectsChanged:function(a,b,c){this._tearDownEffects();a&&c&&(a.split(' ').forEach(function(a){var c;''!==a&&((c=Polymer.AppLayout._scrollEffects[a])?this._effects.push(this._boundEffect(c,b[a])):console.warn(this._getUndefinedMsg(a)))},this),this._setUpEffect())},_layoutIfDirty:function(){return this.offsetWidth},_boundEffect:function(a,b){b=b||{};var c=parseFloat(b.startsAt||0),d=parseFloat(b.endsAt||1),e=function(){},f=0===c&&1===d?a.run:function(b,e){a.run.call(this,Math.max(0,(b-c)/(d-c)),e)};return{setUp:a.setUp?a.setUp.bind(this,b):e,run:a.run?f.bind(this):e,tearDown:a.tearDown?a.tearDown.bind(this):e}},_setUpEffect:function(){this.isAttached&&this._effects&&(this._effectsRunFn=[],this._effects.forEach(function(a){!1!==a.setUp()&&this._effectsRunFn.push(a.run)},this))},_tearDownEffects:function(){this._effects&&this._effects.forEach(function(a){a.tearDown()}),this._effectsRunFn=[],this._effects=[]},_runEffects:function(a,b){this._effectsRunFn&&this._effectsRunFn.forEach(function(c){c(a,b)})},_scrollHandler:function(){if(!this.disabled){var a=this._clampedScrollTop;this._updateScrollState(a),0<this.threshold&&this._setThresholdTriggered(a>=this.threshold)}},_getDOMRef:function(a){console.warn('_getDOMRef','`'+a+'` is undefined')},_getUndefinedMsg:function(a){return'Scroll effect `'+a+'` is undefined. Did you forget to import app-layout/app-scroll-effects/effects/'+a+'.html ?'}}];</script><dom-module id="app-header" assetpath="bower_components/app-layout/app-header/"><template><style>:host{position:relative;display:block;transition-timing-function:linear;transition-property:-webkit-transform;transition-property:transform;}:host::before{position:absolute;right:0px;bottom:-5px;left:0px;width:100%;height:5px;content:"";transition:opacity 0.4s;pointer-events:none;opacity:0;box-shadow:inset 0px 5px 6px -3px rgba(0, 0, 0, 0.4);will-change:opacity;@apply --app-header-shadow;}:host([shadow])::before{opacity:1;}#background{@apply --layout-fit;overflow:hidden;}#backgroundFrontLayer,
      #backgroundRearLayer{@apply --layout-fit;height:100%;pointer-events:none;background-size:cover;}#backgroundFrontLayer{@apply --app-header-background-front-layer;}#backgroundRearLayer{opacity:0;@apply --app-header-background-rear-layer;}#contentContainer{position:relative;width:100%;height:100%;}:host([disabled]),
      :host([disabled])::after,
      :host([disabled]) #backgroundFrontLayer,
      :host([disabled]) #backgroundRearLayer,
      /* Silent scrolling should not run CSS transitions */
      :host([silent-scroll]),
      :host([silent-scroll])::after,
      :host([silent-scroll]) #backgroundFrontLayer,
      :host([silent-scroll]) #backgroundRearLayer{transition:none !important;}:host([disabled]) ::slotted(app-toolbar:first-of-type),
      :host([disabled]) ::slotted([sticky]),
      /* Silent scrolling should not run CSS transitions */
      :host([silent-scroll]) ::slotted(app-toolbar:first-of-type),
      :host([silent-scroll]) ::slotted([sticky]){transition:none !important;}</style><div id="contentContainer"><slot id="slot"></slot></div></template><script>Polymer({is:'app-header',behaviors:[Polymer.AppScrollEffectsBehavior,Polymer.AppLayoutBehavior],properties:{condenses:{type:Boolean,value:!1},fixed:{type:Boolean,value:!1},reveals:{type:Boolean,value:!1},shadow:{type:Boolean,reflectToAttribute:!0,value:!1}},observers:['_configChanged(isAttached, condenses, fixed)'],_height:0,_dHeight:0,_stickyElTop:0,_stickyElRef:null,_top:0,_progress:0,_wasScrollingDown:!1,_initScrollTop:0,_initTimestamp:0,_lastTimestamp:0,_lastScrollTop:0,get _maxHeaderTop(){return this.fixed?this._dHeight:this._height+5},get _stickyEl(){if(this._stickyElRef)return this._stickyElRef;for(var a,b=Polymer.dom(this.$.slot).getDistributedNodes(),c=0;a=b[c];c++)if(a.nodeType===Node.ELEMENT_NODE)if(a.hasAttribute('sticky')){this._stickyElRef=a;break}else this._stickyElRef||(this._stickyElRef=a);return this._stickyElRef},_configChanged:function(){this.resetLayout(),this._notifyLayoutChanged()},_updateLayoutStates:function(){if(0!==this.offsetWidth||0!==this.offsetHeight){var a=this._clampedScrollTop,b=0===this._height||0===a,c=this.disabled;this._height=this.offsetHeight,this._stickyElRef=null,this.disabled=!0,b||this._updateScrollState(0,!0),this._dHeight=this._mayMove()?this._stickyEl?this._height-this._stickyEl.offsetHeight:0:0,this._stickyElTop=this._stickyEl?this._stickyEl.offsetTop:0,this._setUpEffect(),b?this._updateScrollState(a,!0):(this._updateScrollState(this._lastScrollTop,!0),this._layoutIfDirty()),this.disabled=c}},_updateScrollState:function(a,b){var c=Math.abs;if(0!==this._height){var d=0,e=0,f=this._top,g=this._lastScrollTop,h=this._maxHeaderTop,i=a-this._lastScrollTop,j=c(i),k=a>this._lastScrollTop,l=performance.now();if(this._mayMove()&&(e=this._clamp(this.reveals?f+i:a,0,h)),a>=this._dHeight&&(e=this.condenses&&!this.fixed?Math.max(this._dHeight,e):e,this.style.transitionDuration='0ms'),this.reveals&&!this.disabled&&100>j&&((300<l-this._initTimestamp||this._wasScrollingDown!==k)&&(this._initScrollTop=a,this._initTimestamp=l),a>=h))if(30<c(this._initScrollTop-a)||10<j){k&&a>=h?e=h:!k&&a>=this._dHeight&&(e=this.condenses&&!this.fixed?this._dHeight:0);var m=i/(l-this._lastTimestamp);this.style.transitionDuration=this._clamp((e-f)/m,0,300)+'ms'}else e=this._top;d=0===this._dHeight?0<a?1:0:e/this._dHeight,b||(this._lastScrollTop=a,this._top=e,this._wasScrollingDown=k,this._lastTimestamp=l),(b||d!==this._progress||f!==e||0===a)&&(this._progress=d,this._runEffects(d,e),this._transformHeader(e))}},_mayMove:function(){return this.condenses||!this.fixed},willCondense:function(){return 0<this._dHeight&&this.condenses},isOnScreen:function(){return 0!==this._height&&this._top<this._height},isContentBelow:function(){return 0===this._top?0<this._clampedScrollTop:0<=this._clampedScrollTop-this._maxHeaderTop},_transformHeader:function(a){this.translate3d(0,-a+'px',0),this._stickyEl&&this.translate3d(0,this.condenses&&a>=this._stickyElTop?Math.min(a,this._dHeight)-this._stickyElTop+'px':0,0,this._stickyEl)},_clamp:function(a,b,c){return Math.min(c,Math.max(b,a))},_ensureBgContainers:function(){this._bgContainer||(this._bgContainer=document.createElement('div'),this._bgContainer.id='background',this._bgRear=document.createElement('div'),this._bgRear.id='backgroundRearLayer',this._bgContainer.appendChild(this._bgRear),this._bgFront=document.createElement('div'),this._bgFront.id='backgroundFrontLayer',this._bgContainer.appendChild(this._bgFront),Polymer.dom(this.root).insertBefore(this._bgContainer,this.$.contentContainer))},_getDOMRef:function(a){return'backgroundFrontLayer'===a?(this._ensureBgContainers(),this._bgFront):'backgroundRearLayer'===a?(this._ensureBgContainers(),this._bgRear):'background'===a?(this._ensureBgContainers(),this._bgContainer):'mainTitle'===a?Polymer.dom(this).querySelector('[main-title]'):'condensedTitle'===a?Polymer.dom(this).querySelector('[condensed-title]'):null},getScrollState:function(){return{progress:this._progress,top:this._top}}});</script></dom-module><dom-module id="app-header-layout" assetpath="bower_components/app-layout/app-header-layout/"><template><style>:host{display:block;position:relative;z-index:0;}#wrapper ::slotted([slot=header]){@apply --layout-fixed-top;z-index:1;}#wrapper.initializing ::slotted([slot=header]){position:relative;}:host([has-scrolling-region]){height:100%;}:host([has-scrolling-region]) #wrapper ::slotted([slot=header]){position:absolute;}:host([has-scrolling-region]) #wrapper.initializing ::slotted([slot=header]){position:relative;}:host([has-scrolling-region]) #wrapper #contentContainer{@apply --layout-fit;overflow-y:auto;-webkit-overflow-scrolling:touch;}:host([has-scrolling-region]) #wrapper.initializing #contentContainer{position:relative;}:host([fullbleed]){@apply --layout-vertical;@apply --layout-fit;}:host([fullbleed]) #wrapper,
      :host([fullbleed]) #wrapper #contentContainer{@apply --layout-vertical;@apply --layout-flex;}#contentContainer{position:relative;z-index:0;}@media print{:host([has-scrolling-region]) #wrapper #contentContainer{overflow-y:visible;}}</style><div id="wrapper" class="initializing"><slot id="headerSlot" name="header"></slot><div id="contentContainer"><slot></slot></div></div></template><script>Polymer({is:'app-header-layout',behaviors:[Polymer.AppLayoutBehavior],properties:{hasScrollingRegion:{type:Boolean,value:!1,reflectToAttribute:!0}},observers:['resetLayout(isAttached, hasScrollingRegion)'],get header(){return Polymer.dom(this.$.headerSlot).getDistributedNodes()[0]},_updateLayoutStates:function(){var a=this.header;if(this.isAttached&&a){this.$.wrapper.classList.remove('initializing'),a.scrollTarget=this.hasScrollingRegion?this.$.contentContainer:this.ownerDocument.documentElement;var b=a.offsetHeight;this.hasScrollingRegion?(a.style.left='',a.style.right=''):requestAnimationFrame(function(){var b=this.getBoundingClientRect(),c=document.documentElement.clientWidth-b.right;a.style.left=b.left+'px',a.style.right=c+'px'}.bind(this));var c=this.$.contentContainer.style;a.fixed&&!a.condenses&&this.hasScrollingRegion?(c.marginTop=b+'px',c.paddingTop=''):(c.paddingTop=b+'px',c.marginTop='')}}});</script></dom-module><dom-module id="app-toolbar" assetpath="bower_components/app-layout/app-toolbar/"><template><style>:host{@apply --layout-horizontal;@apply --layout-center;position:relative;height:64px;padding:0 16px;pointer-events:none;font-size:var(--app-toolbar-font-size, 20px);}:host ::slotted(*){pointer-events:auto;}:host ::slotted(paper-icon-button){font-size:0;}:host ::slotted([main-title]),
      :host ::slotted([condensed-title]){pointer-events:none;@apply --layout-flex;}:host ::slotted([bottom-item]){position:absolute;right:0;bottom:0;left:0;}:host ::slotted([top-item]){position:absolute;top:0;right:0;left:0;}:host ::slotted([spacer]){margin-left:64px;}</style><slot></slot></template><script>Polymer({is:'app-toolbar'});</script></dom-module><dom-module id="app-box" assetpath="bower_components/app-layout/app-box/"><template><style>:host{position:relative;display:block;}#background{@apply --layout-fit;overflow:hidden;height:100%;}#backgroundFrontLayer{min-height:100%;pointer-events:none;background-size:cover;@apply --app-box-background-front-layer;}#contentContainer{position:relative;width:100%;height:100%;}:host([disabled]),
      :host([disabled]) #backgroundFrontLayer{transition:none !important;}</style><div id="background"><div id="backgroundFrontLayer"><slot name="background"></slot></div></div><div id="contentContainer"><slot></slot></div></template><script>Polymer({is:'app-box',behaviors:[Polymer.AppScrollEffectsBehavior,Polymer.IronResizableBehavior],listeners:{"iron-resize":'_resizeHandler'},_progress:0,attached:function(){this.resetLayout()},_debounceRaf:function(a){var b=this;this._raf&&window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(function(){b._raf=null,a.call(b)})},resetLayout:function(){this._debounceRaf(function(){if(0!==this.offsetWidth||0!==this.offsetHeight){var a=this._clampedScrollTop,b=this.disabled;this.disabled=!0,this._elementTop=this._getElementTop(),this._elementHeight=this.offsetHeight,this._cachedScrollTargetHeight=this._scrollTargetHeight,this._setUpEffect(),this._updateScrollState(a),this.disabled=b}})},_getElementTop:function(){for(var a=this,b=0;a&&a!==this.scrollTarget;)b+=a.offsetTop,a=a.offsetParent;return b},_updateScrollState:function(a){if(this.isOnScreen()){var b=this._elementTop-a;this._progress=1-(b+this._elementHeight)/this._cachedScrollTargetHeight,this._runEffects(this._progress,a)}},isOnScreen:function(){return this._elementTop<this._scrollTop+this._cachedScrollTargetHeight&&this._elementTop+this._elementHeight>this._scrollTop},_resizeHandler:function(){this.resetLayout()},_getDOMRef:function(a){return'background'===a?this.$.background:'backgroundFrontLayer'===a?this.$.backgroundFrontLayer:void 0},getScrollState:function(){return{progress:this._progress}}});</script></dom-module><dom-module id="paper-drawer-panel" assetpath="bower_components/paper-drawer-panel/"><template><style>:host{display:block;position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;}#drawer{position:absolute;top:0;left:0;height:100%;background-color:white;-moz-box-sizing:border-box;box-sizing:border-box;@apply --paper-drawer-panel-drawer-container;}.transition-drawer{transition:-webkit-transform ease-in-out 0.3s, width ease-in-out 0.3s, visibility 0.3s;transition:transform ease-in-out 0.3s, width ease-in-out 0.3s, visibility 0.3s;}.left-drawer > #drawer{@apply --paper-drawer-panel-left-drawer-container;}.right-drawer > #drawer{left:auto;right:0;@apply --paper-drawer-panel-right-drawer-container;}#main{position:absolute;top:0;right:0;bottom:0;@apply --paper-drawer-panel-main-container;}.transition > #main{transition:left ease-in-out 0.3s, padding ease-in-out 0.3s;}.right-drawer > #main{left:0;}.right-drawer.transition > #main{transition:right ease-in-out 0.3s, padding ease-in-out 0.3s;}#main > ::slotted(*){height:100%;}#drawer > ::slotted(*){height:100%;}#scrim{position:absolute;top:0;right:0;bottom:0;left:0;visibility:hidden;opacity:0;transition:opacity ease-in-out 0.38s, visibility ease-in-out 0.38s;background-color:rgba(0, 0, 0, 0.3);@apply --paper-drawer-panel-scrim;}.narrow-layout > #drawer{will-change:transform;}.narrow-layout > #drawer.iron-selected{box-shadow:2px 2px 4px rgba(0, 0, 0, 0.15);}.right-drawer.narrow-layout > #drawer.iron-selected{box-shadow:-2px 2px 4px rgba(0, 0, 0, 0.15);}.narrow-layout > #drawer > ::slotted(*){border:0;}.left-drawer.narrow-layout > #drawer:not(.iron-selected){visibility:hidden;-webkit-transform:translateX(-100%);transform:translateX(-100%);}.right-drawer.narrow-layout > #drawer:not(.iron-selected){left:auto;visibility:hidden;-webkit-transform:translateX(100%);transform:translateX(100%);}.left-drawer.dragging > #drawer:not(.iron-selected),
      .left-drawer.peeking > #drawer:not(.iron-selected),
      .right-drawer.dragging > #drawer:not(.iron-selected),
      .right-drawer.peeking > #drawer:not(.iron-selected){visibility:visible;}.narrow-layout > #main{padding:0;}.right-drawer.narrow-layout > #main{left:0;right:0;}.narrow-layout > #main:not(.iron-selected) > #scrim,
      .dragging > #main > #scrim{visibility:visible;opacity:var(--paper-drawer-panel-scrim-opacity, 1);}.narrow-layout > #main > *{margin:0;min-height:100%;left:0;right:0;-moz-box-sizing:border-box;box-sizing:border-box;}</style><iron-media-query id="mq" on-query-matches-changed="_onQueryMatchesChanged" query="[[_computeMediaQuery(forceNarrow, responsiveWidth)]]"></iron-media-query><iron-selector attr-for-selected="id" class$="[[_computeIronSelectorClass(narrow, _transition, dragging, rightDrawer, peeking)]]" on-transitionend="_onTransitionEnd" activate-event="" selected="[[selected]]"><div id="main" style$="[[_computeMainStyle(narrow, rightDrawer, drawerWidth)]]"><slot name="main"></slot><div id="scrim" on-tap="closeDrawer"></div></div><div id="drawer" style$="[[_computeDrawerStyle(drawerWidth)]]"><slot id="drawerSlot" name="drawer"></slot></div></iron-selector></template><script>(function(){'use strict';function a(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&a[c]&&b.push(c);return b.join(' ')}var b=null;Polymer({is:'paper-drawer-panel',behaviors:[Polymer.IronResizableBehavior],properties:{defaultSelected:{type:String,value:'main'},disableEdgeSwipe:{type:Boolean,value:!1},disableSwipe:{type:Boolean,value:!1},dragging:{type:Boolean,value:!1,readOnly:!0,notify:!0},drawerWidth:{type:String,value:'256px'},edgeSwipeSensitivity:{type:Number,value:30},forceNarrow:{type:Boolean,value:!1},hasTransform:{type:Boolean,value:function(){return'transform'in this.style}},hasWillChange:{type:Boolean,value:function(){return'willChange'in this.style}},narrow:{reflectToAttribute:!0,type:Boolean,value:!1,readOnly:!0,notify:!0},peeking:{type:Boolean,value:!1,readOnly:!0,notify:!0},responsiveWidth:{type:String,value:'768px'},rightDrawer:{type:Boolean,value:!1},selected:{reflectToAttribute:!0,notify:!0,type:String,value:null},drawerFocusSelector:{type:String,value:'a[href]:not([tabindex="-1"]),area[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),iframe:not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'},_transition:{type:Boolean,value:!1}},listeners:{tap:'_onTap',track:'_onTrack',down:'_downHandler',up:'_upHandler'},observers:['_forceNarrowChanged(forceNarrow, defaultSelected)','_toggleFocusListener(selected)'],ready:function(){this._transition=!0,this._boundFocusListener=this._didFocus.bind(this),console.warn(this.is,'is deprecated. Please use app-layout instead!')},togglePanel:function(){this._isMainSelected()?this.openDrawer():this.closeDrawer()},openDrawer:function(){requestAnimationFrame(function(){this.toggleClass('transition-drawer',!0,this.$.drawer),this.selected='drawer'}.bind(this))},closeDrawer:function(){requestAnimationFrame(function(){this.toggleClass('transition-drawer',!0,this.$.drawer),this.selected='main'}.bind(this))},_onTransitionEnd:function(a){var b=Polymer.dom(a).localTarget;if(b===this.$.drawer&&(('left'===a.propertyName||'right'===a.propertyName)&&this.notifyResize(),'transform'===a.propertyName&&(requestAnimationFrame(function(){this.toggleClass('transition-drawer',!1,this.$.drawer)}.bind(this)),'drawer'===this.selected))){var c=this._getAutoFocusedNode();c&&c.focus()}},_computeIronSelectorClass:function(b,c,d,e,f){return a({dragging:d,"narrow-layout":b,"right-drawer":e,"left-drawer":!e,transition:c,peeking:f})},_computeDrawerStyle:function(a){return'width:'+a+';'},_computeMainStyle:function(a,b,c){var d='';return d+='left:'+(a||b?'0':c)+';',b&&(d+='right:'+(a?'':c)+';'),d},_computeMediaQuery:function(a,b){return a?'':'(max-width: '+b+')'},_computeSwipeOverlayHidden:function(a,b){return!a||b},_onTrack:function(a){if(!(b&&this!==b))switch(a.detail.state){case'start':this._trackStart(a);break;case'track':this._trackX(a);break;case'end':this._trackEnd(a);}},_responsiveChange:function(a){this._setNarrow(a),this.selected=this.narrow?this.defaultSelected:null,this.setScrollDirection(this._swipeAllowed()?'y':'all'),this.fire('paper-responsive-change',{narrow:this.narrow})},_onQueryMatchesChanged:function(a){this._responsiveChange(a.detail.value)},_forceNarrowChanged:function(){this._responsiveChange(this.forceNarrow||this.$.mq.queryMatches)},_swipeAllowed:function(){return this.narrow&&!this.disableSwipe},_isMainSelected:function(){return'main'===this.selected},_startEdgePeek:function(){this.width=this.$.drawer.offsetWidth,this._moveDrawer(this._translateXForDeltaX(this.rightDrawer?-this.edgeSwipeSensitivity:this.edgeSwipeSensitivity)),this._setPeeking(!0)},_stopEdgePeek:function(){this.peeking&&(this._setPeeking(!1),this._moveDrawer(null))},_downHandler:function(a){!this.dragging&&this._isMainSelected()&&this._isEdgeTouch(a)&&!b&&(this._startEdgePeek(),a.preventDefault(),b=this)},_upHandler:function(){this._stopEdgePeek(),b=null},_onTap:function(a){var b=Polymer.dom(a).localTarget,c=b&&this.drawerToggleAttribute&&b.hasAttribute(this.drawerToggleAttribute);c&&this.togglePanel()},_isEdgeTouch:function(a){var b=a.detail.x;return!this.disableEdgeSwipe&&this._swipeAllowed()&&(this.rightDrawer?b>=this.offsetWidth-this.edgeSwipeSensitivity:b<=this.edgeSwipeSensitivity)},_trackStart:function(a){this._swipeAllowed()&&(b=this,this._setDragging(!0),this._isMainSelected()&&this._setDragging(this.peeking||this._isEdgeTouch(a)),this.dragging&&(this.width=this.$.drawer.offsetWidth,this._transition=!1))},_translateXForDeltaX:function(a){var b=this._isMainSelected();return this.rightDrawer?Math.max(0,b?this.width+a:a):Math.min(0,b?a-this.width:a)},_trackX:function(a){if(this.dragging){var b=a.detail.dx;if(this.peeking){if(Math.abs(b)<=this.edgeSwipeSensitivity)return;this._setPeeking(!1)}this._moveDrawer(this._translateXForDeltaX(b))}},_trackEnd:function(a){if(this.dragging){var c=0<a.detail.dx;this._setDragging(!1),this._transition=!0,b=null,this._moveDrawer(null),this.rightDrawer?this[c?'closeDrawer':'openDrawer']():this[c?'openDrawer':'closeDrawer']()}},_transformForTranslateX:function(a){return null===a?'':this.hasWillChange?'translateX('+a+'px)':'translate3d('+a+'px, 0, 0)'},_moveDrawer:function(a){this.transform(this._transformForTranslateX(a),this.$.drawer)},_getDrawerSlot:function(){return Polymer.dom(this.$.drawerSlot).getDistributedNodes()[0]},_getAutoFocusedNode:function(){return this.drawerFocusSelector?Polymer.dom(this._getDrawerSlot()).querySelector(this.drawerFocusSelector):null},_toggleFocusListener:function(a){'drawer'===a?this.addEventListener('focus',this._boundFocusListener,!0):this.removeEventListener('focus',this._boundFocusListener,!0)},_didFocus:function(a){var b=this._getAutoFocusedNode();if(b){var c=Polymer.dom(a).path,d=c[0],e=this._getDrawerSlot(),f=-1!==c.indexOf(e);f||(a.stopPropagation(),b.focus())}},_isDrawerClosed:function(a,b){return!a||'drawer'!==b}})})();</script></dom-module><dom-module id="paper-fab" assetpath="bower_components/paper-fab/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-vertical;@apply --layout-center-center;background:var(--paper-fab-background, var(--accent-color));border-radius:50%;box-sizing:border-box;color:var(--text-primary-color);cursor:pointer;height:56px;min-width:0;outline:none;padding:16px;position:relative;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;width:56px;z-index:0;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;@apply --paper-fab;}[hidden]{display:none !important;}:host([mini]){width:40px;height:40px;padding:8px;@apply --paper-fab-mini;}:host([disabled]){color:var(--paper-fab-disabled-text, var(--paper-grey-500));background:var(--paper-fab-disabled-background, var(--paper-grey-300));@apply --paper-fab-disabled;}iron-icon{@apply --paper-fab-iron-icon;}span{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;@apply --paper-fab-label;}:host(.keyboard-focus){background:var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><iron-icon id="icon" hidden$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon><span hidden$="{{_computeIsIconFab(icon, src)}}">{{label}}</span></template><script>Polymer({is:'paper-fab',behaviors:[Polymer.PaperButtonBehavior],properties:{src:{type:String,value:''},icon:{type:String,value:''},mini:{type:Boolean,value:!1,reflectToAttribute:!0},label:{type:String,observer:'_labelChanged'}},_labelChanged:function(){this.setAttribute('aria-label',this.label)},_computeIsIconFab:function(a,b){return 0<a.length||0<b.length}});</script></dom-module><script>Polymer.PaperItemBehaviorImpl={hostAttributes:{role:'option',tabindex:'0'}},Polymer.PaperItemBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperItemBehaviorImpl];</script><dom-module id="paper-item-shared-styles" assetpath="bower_components/paper-item/"><template><style>:host, .paper-item{display:block;position:relative;min-height:var(--paper-item-min-height, 48px);padding:0px 16px;}.paper-item{@apply --paper-font-subhead;border:none;outline:none;background:white;width:100%;text-align:left;}:host([hidden]), .paper-item[hidden]{display:none !important;}:host(.iron-selected), .paper-item.iron-selected{font-weight:var(--paper-item-selected-weight, bold);@apply --paper-item-selected;}:host([disabled]), .paper-item[disabled]{color:var(--paper-item-disabled-color, var(--disabled-text-color));@apply --paper-item-disabled;}:host(:focus), .paper-item:focus{position:relative;outline:0;@apply --paper-item-focused;}:host(:focus):before, .paper-item:focus:before{@apply --layout-fit;background:currentColor;content:'';opacity:var(--dark-divider-opacity);pointer-events:none;@apply --paper-item-focused-before;}</style></template></dom-module><dom-module id="paper-item" assetpath="bower_components/paper-item/"><template><style include="paper-item-shared-styles"></style><style>:host{@apply --layout-horizontal;@apply --layout-center;@apply --paper-font-subhead;@apply --paper-item;}</style><slot></slot></template><script>Polymer({is:'paper-item',behaviors:[Polymer.PaperItemBehavior]});</script></dom-module><script>Polymer.IronMenuBehaviorImpl={properties:{focusedItem:{observer:'_focusedItemChanged',readOnly:!0,type:Object},attrForItemTitle:{type:String},disabled:{type:Boolean,value:!1,observer:'_disabledChanged'}},_MODIFIER_KEYS:['Alt','AltGraph','CapsLock','Control','Fn','FnLock','Hyper','Meta','NumLock','OS','ScrollLock','Shift','Super','Symbol','SymbolLock'],_SEARCH_RESET_TIMEOUT_MS:1e3,_previousTabIndex:0,hostAttributes:{role:'menu'},observers:['_updateMultiselectable(multi)'],listeners:{focus:'_onFocus',keydown:'_onKeydown',"iron-items-changed":'_onIronItemsChanged'},keyBindings:{up:'_onUpKey',down:'_onDownKey',esc:'_onEscKey',"shift+tab:keydown":'_onShiftTabDown'},attached:function(){this._resetTabindices()},select:function(a){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null);var b=this._valueToItem(a);b&&b.hasAttribute('disabled')||(this._setFocusedItem(b),Polymer.IronMultiSelectableBehaviorImpl.select.apply(this,arguments))},_resetTabindices:function(){var a=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this.items.forEach(function(b){b.setAttribute('tabindex',b===a?'0':'-1')},this)},_updateMultiselectable:function(a){a?this.setAttribute('aria-multiselectable','true'):this.removeAttribute('aria-multiselectable')},_focusWithKeyboardEvent:function(a){if(-1===this._MODIFIER_KEYS.indexOf(a.key)){this.cancelDebouncer('_clearSearchText');var b=this._searchText||'',c=a.key&&1==a.key.length?a.key:String.fromCharCode(a.keyCode);b+=c.toLocaleLowerCase();for(var d,e=b.length,f=0;d=this.items[f];f++)if(!d.hasAttribute('disabled')){var g=this.attrForItemTitle||'textContent',h=(d[g]||d.getAttribute(g)||'').trim();if(!(h.length<e)&&h.slice(0,e).toLocaleLowerCase()==b){this._setFocusedItem(d);break}}this._searchText=b,this.debounce('_clearSearchText',this._clearSearchText,this._SEARCH_RESET_TIMEOUT_MS)}},_clearSearchText:function(){this._searchText=''},_focusPrevious:function(){for(var a,b=this.items.length,c=+this.indexOf(this.focusedItem),d=1;d<b+1;d++)if(a=this.items[(c-d+b)%b],!a.hasAttribute('disabled')){var e=Polymer.dom(a).getOwnerRoot()||document;if(this._setFocusedItem(a),Polymer.dom(e).activeElement==a)return}},_focusNext:function(){for(var a,b=this.items.length,c=+this.indexOf(this.focusedItem),d=1;d<b+1;d++)if(a=this.items[(c+d)%b],!a.hasAttribute('disabled')){var e=Polymer.dom(a).getOwnerRoot()||document;if(this._setFocusedItem(a),Polymer.dom(e).activeElement==a)return}},_applySelection:function(a,b){b?a.setAttribute('aria-selected','true'):a.removeAttribute('aria-selected'),Polymer.IronSelectableBehavior._applySelection.apply(this,arguments)},_focusedItemChanged:function(a,b){b&&b.setAttribute('tabindex','-1'),!a||a.hasAttribute('disabled')||this.disabled||(a.setAttribute('tabindex','0'),a.focus())},_onIronItemsChanged:function(a){a.detail.addedNodes.length&&this._resetTabindices()},_onShiftTabDown:function(){var a=this.getAttribute('tabindex');Polymer.IronMenuBehaviorImpl._shiftTabPressed=!0,this._setFocusedItem(null),this.setAttribute('tabindex','-1'),this.async(function(){this.setAttribute('tabindex',a),Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1},1)},_onFocus:function(a){if(!Polymer.IronMenuBehaviorImpl._shiftTabPressed){var b=Polymer.dom(a).rootTarget;(b===this||'undefined'===typeof b.tabIndex||this.isLightDescendant(b))&&(this._defaultFocusAsync=this.async(function(){var a=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this._setFocusedItem(null),a?this._setFocusedItem(a):this.items[0]&&this._focusNext()}))}},_onUpKey:function(a){this._focusPrevious(),a.detail.keyboardEvent.preventDefault()},_onDownKey:function(a){this._focusNext(),a.detail.keyboardEvent.preventDefault()},_onEscKey:function(){var a=this.focusedItem;a&&a.blur()},_onKeydown:function(a){this.keyboardEventMatchesKeys(a,'up down esc')||this._focusWithKeyboardEvent(a),a.stopPropagation()},_activateHandler:function(a){Polymer.IronSelectableBehavior._activateHandler.call(this,a),a.stopPropagation()},_disabledChanged:function(a){a?(this._previousTabIndex=this.hasAttribute('tabindex')?this.tabIndex:0,this.removeAttribute('tabindex')):!this.hasAttribute('tabindex')&&this.setAttribute('tabindex',this._previousTabIndex)}},Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1,Polymer.IronMenuBehavior=[Polymer.IronMultiSelectableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronMenuBehaviorImpl];</script><dom-module id="paper-listbox" assetpath="bower_components/paper-listbox/"><template><style>:host{display:block;padding:8px 0;background:var(--paper-listbox-background-color, var(--primary-background-color));color:var(--paper-listbox-color, var(--primary-text-color));@apply --paper-listbox;}</style><slot></slot></template><script>(function(){Polymer({is:'paper-listbox',behaviors:[Polymer.IronMenuBehavior],hostAttributes:{role:'listbox'}})})();</script></dom-module><script>(function(){'use strict';Polymer.IronDropdownScrollManager=Polymer.IronScrollManager})();</script><dom-module id="iron-dropdown" assetpath="bower_components/iron-dropdown/"><template><style>:host{position:fixed;}#contentWrapper ::slotted(*){overflow:auto;}#contentWrapper.animating ::slotted(*){overflow:hidden;}</style><div id="contentWrapper"><slot id="content" name="dropdown-content"></slot></div></template><script>(function(){'use strict';Polymer({is:'iron-dropdown',behaviors:[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.IronOverlayBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{horizontalAlign:{type:String,value:'left',reflectToAttribute:!0},verticalAlign:{type:String,value:'top',reflectToAttribute:!0},openAnimationConfig:{type:Object},closeAnimationConfig:{type:Object},focusTarget:{type:Object},noAnimations:{type:Boolean,value:!1},allowOutsideScroll:{type:Boolean,value:!1,observer:'_allowOutsideScrollChanged'}},listeners:{"neon-animation-finish":'_onNeonAnimationFinish'},observers:['_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)'],get containedElement(){for(var a=Polymer.dom(this.$.content).getDistributedNodes(),b=0,c=a.length;b<c;b++)if(a[b].nodeType===Node.ELEMENT_NODE)return a[b]},ready:function(){this.scrollAction||(this.scrollAction=this.allowOutsideScroll?'refit':'lock'),this._readied=!0},attached:function(){this.sizingTarget&&this.sizingTarget!==this||(this.sizingTarget=this.containedElement||this)},detached:function(){this.cancelAnimation()},_openedChanged:function(){this.opened&&this.disabled?this.cancel():(this.cancelAnimation(),this._updateAnimationConfig(),Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments))},_renderOpened:function(){!this.noAnimations&&this.animationConfig.open?(this.$.contentWrapper.classList.add('animating'),this.playAnimation('open')):Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this,arguments)},_renderClosed:function(){!this.noAnimations&&this.animationConfig.close?(this.$.contentWrapper.classList.add('animating'),this.playAnimation('close')):Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this,arguments)},_onNeonAnimationFinish:function(){this.$.contentWrapper.classList.remove('animating'),this.opened?this._finishRenderOpened():this._finishRenderClosed()},_updateAnimationConfig:function(){for(var a=this.containedElement,b=[].concat(this.openAnimationConfig||[]).concat(this.closeAnimationConfig||[]),c=0;c<b.length;c++)b[c].node=a;this.animationConfig={open:this.openAnimationConfig,close:this.closeAnimationConfig}},_updateOverlayPosition:function(){this.isAttached&&this.notifyResize()},_allowOutsideScrollChanged:function(a){this._readied&&(a?(!this.scrollAction||'lock'===this.scrollAction)&&(this.scrollAction='refit'):this.scrollAction='lock')},_applyFocus:function(){var a=this.focusTarget||this.containedElement;a&&this.opened&&!this.noAutoFocus?a.focus():Polymer.IronOverlayBehaviorImpl._applyFocus.apply(this,arguments)}})})();</script></dom-module><script>Polymer.NeonAnimationBehavior={properties:{animationTiming:{type:Object,value:function(){return{duration:500,easing:'cubic-bezier(0.4, 0, 0.2, 1)',fill:'both'}}}},isNeonAnimation:!0,created:function(){document.body.animate||console.warn('No web animations detected. This element will not function without a web animations polyfill.')},timingFromConfig:function(a){if(a.timing)for(var b in a.timing)this.animationTiming[b]=a.timing[b];return this.animationTiming},setPrefixedProperty:function(a,b,c){for(var d,e={transform:['webkitTransform'],transformOrigin:['mozTransformOrigin','webkitTransformOrigin']},f=e[b],g=0;d=f[g];g++)a.style[d]=c;a.style[b]=c},complete:function(){}};</script><script>Polymer({is:'fade-in-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{opacity:'0'},{opacity:'1'}],this.timingFromConfig(a)),this._effect}});</script><script>Polymer({is:'fade-out-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{opacity:'1'},{opacity:'0'}],this.timingFromConfig(a)),this._effect}});</script><script>Polymer({is:'paper-menu-grow-height-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.height;return this._effect=new KeyframeEffect(b,[{height:d/2+'px'},{height:d+'px'}],this.timingFromConfig(a)),this._effect}}),Polymer({is:'paper-menu-grow-width-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.width;return this._effect=new KeyframeEffect(b,[{width:d/2+'px'},{width:d+'px'}],this.timingFromConfig(a)),this._effect}}),Polymer({is:'paper-menu-shrink-width-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.width;return this._effect=new KeyframeEffect(b,[{width:d+'px'},{width:d-d/20+'px'}],this.timingFromConfig(a)),this._effect}}),Polymer({is:'paper-menu-shrink-height-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.height,e=c.top;return this.setPrefixedProperty(b,'transformOrigin','0 0'),this._effect=new KeyframeEffect(b,[{height:d+'px',transform:'translateY(0)'},{height:d/2+'px',transform:'translateY(-20px)'}],this.timingFromConfig(a)),this._effect}});</script><dom-module id="paper-menu-button" assetpath="bower_components/paper-menu-button/"><template><style>:host{display:inline-block;position:relative;padding:8px;outline:none;@apply --paper-menu-button;}:host([disabled]){cursor:auto;color:var(--disabled-text-color);@apply --paper-menu-button-disabled;}iron-dropdown{@apply --paper-menu-button-dropdown;}.dropdown-content{@apply --shadow-elevation-2dp;position:relative;border-radius:2px;background-color:var(--paper-menu-button-dropdown-background, var(--primary-background-color));@apply --paper-menu-button-content;}:host([vertical-align="top"]) .dropdown-content{margin-bottom:20px;margin-top:-10px;top:10px;}:host([vertical-align="bottom"]) .dropdown-content{bottom:10px;margin-bottom:-10px;margin-top:20px;}#trigger{cursor:pointer;}</style><div id="trigger" on-tap="toggle"><slot name="dropdown-trigger"></slot></div><iron-dropdown id="dropdown" opened="{{opened}}" horizontal-align="[[horizontalAlign]]" vertical-align="[[verticalAlign]]" dynamic-align="[[dynamicAlign]]" horizontal-offset="[[horizontalOffset]]" vertical-offset="[[verticalOffset]]" no-overlap="[[noOverlap]]" open-animation-config="[[openAnimationConfig]]" close-animation-config="[[closeAnimationConfig]]" no-animations="[[noAnimations]]" focus-target="[[_dropdownContent]]" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]" on-iron-overlay-canceled="__onIronOverlayCanceled"><div slot="dropdown-content" class="dropdown-content"><slot id="content" name="dropdown-content"></slot></div></iron-dropdown></template><script>(function(){'use strict';var a={ANIMATION_CUBIC_BEZIER:'cubic-bezier(.3,.95,.5,1)',MAX_ANIMATION_TIME_MS:400},b=Polymer({is:'paper-menu-button',behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronControlState],properties:{opened:{type:Boolean,value:!1,notify:!0,observer:'_openedChanged'},horizontalAlign:{type:String,value:'left',reflectToAttribute:!0},verticalAlign:{type:String,value:'top',reflectToAttribute:!0},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},noOverlap:{type:Boolean},noAnimations:{type:Boolean,value:!1},ignoreSelect:{type:Boolean,value:!1},closeOnActivate:{type:Boolean,value:!1},openAnimationConfig:{type:Object,value:function(){return[{name:'fade-in-animation',timing:{delay:100,duration:200}},{name:'paper-menu-grow-width-animation',timing:{delay:100,duration:150,easing:a.ANIMATION_CUBIC_BEZIER}},{name:'paper-menu-grow-height-animation',timing:{delay:100,duration:275,easing:a.ANIMATION_CUBIC_BEZIER}}]}},closeAnimationConfig:{type:Object,value:function(){return[{name:'fade-out-animation',timing:{duration:150}},{name:'paper-menu-shrink-width-animation',timing:{delay:100,duration:50,easing:a.ANIMATION_CUBIC_BEZIER}},{name:'paper-menu-shrink-height-animation',timing:{duration:200,easing:'ease-in'}}]}},allowOutsideScroll:{type:Boolean,value:!1},restoreFocusOnClose:{type:Boolean,value:!0},_dropdownContent:{type:Object}},hostAttributes:{role:'group',"aria-haspopup":'true'},listeners:{"iron-activate":'_onIronActivate',"iron-select":'_onIronSelect'},get contentElement(){for(var a=Polymer.dom(this.$.content).getDistributedNodes(),b=0,c=a.length;b<c;b++)if(a[b].nodeType===Node.ELEMENT_NODE)return a[b]},toggle:function(){this.opened?this.close():this.open()},open:function(){this.disabled||this.$.dropdown.open()},close:function(){this.$.dropdown.close()},_onIronSelect:function(){this.ignoreSelect||this.close()},_onIronActivate:function(){this.closeOnActivate&&this.close()},_openedChanged:function(a,b){a?(this._dropdownContent=this.contentElement,this.fire('paper-dropdown-open')):null!=b&&this.fire('paper-dropdown-close')},_disabledChanged:function(a){Polymer.IronControlState._disabledChanged.apply(this,arguments),a&&this.opened&&this.close()},__onIronOverlayCanceled:function(a){var b=a.detail,c=Polymer.dom(b).rootTarget,d=this.$.trigger,e=Polymer.dom(b).path;-1<e.indexOf(d)&&a.preventDefault()}});Object.keys(a).forEach(function(c){b[c]=a[c]}),Polymer.PaperMenuButton=b})();</script></dom-module><dom-module id="paper-tooltip" assetpath="bower_components/paper-tooltip/"><template><style>:host{display:block;position:absolute;outline:none;z-index:1002;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:default;}#tooltip{display:block;outline:none;@apply --paper-font-common-base;font-size:10px;line-height:1;background-color:var(--paper-tooltip-background, #616161);opacity:var(--paper-tooltip-opacity, 0.9);color:var(--paper-tooltip-text-color, white);padding:8px;border-radius:2px;@apply --paper-tooltip;}.hidden{display:none !important;}</style><div id="tooltip" class="hidden"><slot></slot></div></template><script>Polymer({is:'paper-tooltip',hostAttributes:{role:'tooltip',tabindex:-1},behaviors:[Polymer.NeonAnimationRunnerBehavior],properties:{for:{type:String,observer:'_findTarget'},manualMode:{type:Boolean,value:!1,observer:'_manualModeChanged'},position:{type:String,value:'bottom'},fitToVisibleBounds:{type:Boolean,value:!1},offset:{type:Number,value:14},marginTop:{type:Number,value:14},animationDelay:{type:Number,value:500},animationConfig:{type:Object,value:function(){return{entry:[{name:'fade-in-animation',node:this,timing:{delay:0}}],exit:[{name:'fade-out-animation',node:this}]}}},_showing:{type:Boolean,value:!1}},listeners:{"neon-animation-finish":'_onAnimationFinish'},get target(){var a,b=Polymer.dom(this).parentNode,c=Polymer.dom(this).getOwnerRoot();return a=this.for?Polymer.dom(c).querySelector('#'+this.for):b.nodeType==Node.DOCUMENT_FRAGMENT_NODE?c.host:b,a},attached:function(){this._findTarget()},detached:function(){this.manualMode||this._removeListeners()},show:function(){if(!this._showing){if(''===Polymer.dom(this).textContent.trim()){for(var a=!0,b=Polymer.dom(this).getEffectiveChildNodes(),c=0;c<b.length;c++)if(''!==b[c].textContent.trim()){a=!1;break}if(a)return}this.cancelAnimation(),this._showing=!0,this.toggleClass('hidden',!1,this.$.tooltip),this.updatePosition(),this.animationConfig.entry[0].timing=this.animationConfig.entry[0].timing||{},this.animationConfig.entry[0].timing.delay=this.animationDelay,this._animationPlaying=!0,this.playAnimation('entry')}},hide:function(){return this._showing?this._animationPlaying?(this.cancelAnimation(),this._showing=!1,void this._onAnimationFinish()):void(this._showing=!1,this._animationPlaying=!0,this.playAnimation('exit')):void 0},updatePosition:function(){var a=Math.max;if(this._target&&this.offsetParent){var b=this.offset;14!=this.marginTop&&14==this.offset&&(b=this.marginTop);var c,d,e=this.offsetParent.getBoundingClientRect(),f=this._target.getBoundingClientRect(),g=this.getBoundingClientRect(),h=(f.width-g.width)/2,i=(f.height-g.height)/2,j=f.left-e.left,k=f.top-e.top;switch(this.position){case'top':c=j+h,d=k-g.height-b;break;case'bottom':c=j+h,d=k+f.height+b;break;case'left':c=j-g.width-b,d=k+i;break;case'right':c=j+f.width+b,d=k+i;}this.fitToVisibleBounds?(e.left+c+g.width>window.innerWidth?(this.style.right='0px',this.style.left='auto'):(this.style.left=a(0,c)+'px',this.style.right='auto'),e.top+d+g.height>window.innerHeight?(this.style.bottom=e.height+'px',this.style.top='auto'):(this.style.top=a(-e.top,d)+'px',this.style.bottom='auto')):(this.style.left=c+'px',this.style.top=d+'px')}},_addListeners:function(){this._target&&(this.listen(this._target,'mouseenter','show'),this.listen(this._target,'focus','show'),this.listen(this._target,'mouseleave','hide'),this.listen(this._target,'blur','hide'),this.listen(this._target,'tap','hide')),this.listen(this,'mouseenter','hide')},_findTarget:function(){this.manualMode||this._removeListeners(),this._target=this.target,this.manualMode||this._addListeners()},_manualModeChanged:function(){this.manualMode?this._removeListeners():this._addListeners()},_onAnimationFinish:function(){this._animationPlaying=!1,this._showing||this.toggleClass('hidden',!0,this.$.tooltip)},_removeListeners:function(){this._target&&(this.unlisten(this._target,'mouseenter','show'),this.unlisten(this._target,'focus','show'),this.unlisten(this._target,'mouseleave','hide'),this.unlisten(this._target,'blur','hide'),this.unlisten(this._target,'tap','hide')),this.unlisten(this,'mouseenter','hide')}});</script></dom-module><script>!function(){function a(){this._events={},this._conf&&b.call(this,this._conf)}function b(a){a&&(this._conf=a,a.delimiter&&(this.delimiter=a.delimiter),a.maxListeners&&(this._events.maxListeners=a.maxListeners),a.wildcard&&(this.wildcard=a.wildcard),a.newListener&&(this.newListener=a.newListener),this.wildcard&&(this.listenerTree={}))}function c(a){this._events={},this.newListener=!1,b.call(this,a)}function d(a,b,c,e){if(!c)return[];var f,g,h,i,j,k,l,m=[],n=b.length,o=b[e],p=b[e+1];if(e===n&&c._listeners){if('function'===typeof c._listeners)return a&&a.push(c._listeners),[c];for(f=0,g=c._listeners.length;f<g;f++)a&&a.push(c._listeners[f]);return[c]}if('*'===o||'**'===o||c[o]){if('*'===o){for(h in c)'_listeners'!==h&&c.hasOwnProperty(h)&&(m=m.concat(d(a,b,c[h],e+1)));return m}if('**'===o){for(h in l=e+1===n||e+2===n&&'*'===p,l&&c._listeners&&(m=m.concat(d(a,b,c,n))),c)'_listeners'!==h&&c.hasOwnProperty(h)&&('*'===h||'**'===h?(c[h]._listeners&&!l&&(m=m.concat(d(a,b,c[h],n))),m=m.concat(d(a,b,c[h],e))):h===p?m=m.concat(d(a,b,c[h],e+2)):m=m.concat(d(a,b,c[h],e)));return m}m=m.concat(d(a,b,c[o],e+1))}if(i=c['*'],i&&d(a,b,i,e+1),j=c['**'],j)if(e<n)for(h in j._listeners&&d(a,b,j,n),j)'_listeners'!==h&&j.hasOwnProperty(h)&&(h===p?d(a,b,j[h],e+2):h===o?d(a,b,j[h],e+1):(k={},k[h]=j[h],d(a,b,{"**":k},e+1)));else j._listeners?d(a,b,j,n):j['*']&&j['*']._listeners&&d(a,b,j['*'],n);return m}function e(a,b){a='string'===typeof a?a.split(this.delimiter):a.slice();for(var c=0,d=a.length;c+1<d;c++)if('**'===a[c]&&'**'===a[c+1])return;for(var e=this.listenerTree,h=a.shift();h;){if(e[h]||(e[h]={}),e=e[h],0===a.length){if(!e._listeners)e._listeners=b;else if('function'===typeof e._listeners)e._listeners=[e._listeners,b];else if(f(e._listeners)&&(e._listeners.push(b),!e._listeners.warned)){var i=g;'undefined'!==typeof this._events.maxListeners&&(i=this._events.maxListeners),0<i&&e._listeners.length>i&&(e._listeners.warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',e._listeners.length),console.trace())}return!0}h=a.shift()}return!0}var f=Array.isArray?Array.isArray:function(a){return'[object Array]'===Object.prototype.toString.call(a)},g=10;c.prototype.delimiter='.',c.prototype.setMaxListeners=function(b){this._events||a.call(this),this._events.maxListeners=b,this._conf||(this._conf={}),this._conf.maxListeners=b},c.prototype.event='',c.prototype.once=function(a,b){return this.many(a,1,b),this},c.prototype.many=function(a,b,c){function d(){0===--b&&e.off(a,d),c.apply(this,arguments)}var e=this;if('function'!==typeof c)throw new Error('many only accepts instances of Function');return d._origin=c,this.on(a,d),e},c.prototype.emit=function(){this._events||a.call(this);var b=arguments[0];if('newListener'===b&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var c=arguments.length,e=Array(c-1),f=1;f<c;f++)e[f-1]=arguments[f];for(f=0,c=this._all.length;f<c;f++)this.event=b,this._all[f].apply(this,e)}if('error'===b&&!this._all&&!this._events.error&&!(this.wildcard&&this.listenerTree.error)){if(arguments[1]instanceof Error)throw arguments[1];else throw new Error('Uncaught, unspecified \'error\' event.');return!1}var g;if(this.wildcard){g=[];var h='string'===typeof b?b.split(this.delimiter):b.slice();d.call(this,g,h,this.listenerTree,0)}else g=this._events[b];if('function'===typeof g){if(this.event=b,1===arguments.length)g.call(this);else if(1<arguments.length)switch(arguments.length){case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],arguments[2]);break;default:for(var c=arguments.length,e=Array(c-1),f=1;f<c;f++)e[f-1]=arguments[f];g.apply(this,e);}return!0}if(g){for(var c=arguments.length,e=Array(c-1),f=1;f<c;f++)e[f-1]=arguments[f];for(var i=g.slice(),f=0,c=i.length;f<c;f++)this.event=b,i[f].apply(this,e);return 0<i.length||!!this._all}return!!this._all},c.prototype.on=function(b,c){if('function'===typeof b)return this.onAny(b),this;if('function'!==typeof c)throw new Error('on only accepts instances of Function');if(this._events||a.call(this),this.emit('newListener',b,c),this.wildcard)return e.call(this,b,c),this;if(!this._events[b])this._events[b]=c;else if('function'===typeof this._events[b])this._events[b]=[this._events[b],c];else if(f(this._events[b])&&(this._events[b].push(c),!this._events[b].warned)){var d=g;'undefined'!==typeof this._events.maxListeners&&(d=this._events.maxListeners),0<d&&this._events[b].length>d&&(this._events[b].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[b].length),console.trace())}return this},c.prototype.onAny=function(a){if('function'!==typeof a)throw new Error('onAny only accepts instances of Function');return this._all||(this._all=[]),this._all.push(a),this},c.prototype.addListener=c.prototype.on,c.prototype.off=function(a,b){if('function'!==typeof b)throw new Error('removeListener only takes instances of Function');var c,e=[];if(this.wildcard){var g='string'===typeof a?a.split(this.delimiter):a.slice();e=d.call(this,null,g,this.listenerTree,0)}else{if(!this._events[a])return this;c=this._events[a],e.push({_listeners:c})}for(var h,j=0;j<e.length;j++){if(h=e[j],c=h._listeners,f(c)){for(var k=-1,l=0,i=c.length;l<i;l++)if(c[l]===b||c[l].listener&&c[l].listener===b||c[l]._origin&&c[l]._origin===b){k=l;break}if(0>k)continue;return this.wildcard?h._listeners.splice(k,1):this._events[a].splice(k,1),0===c.length&&(this.wildcard?delete h._listeners:delete this._events[a]),this}(c===b||c.listener&&c.listener===b||c._origin&&c._origin===b)&&(this.wildcard?delete h._listeners:delete this._events[a])}return this},c.prototype.offAny=function(a){var b,c=0,d=0;if(a&&this._all&&0<this._all.length){for(b=this._all,c=0,d=b.length;c<d;c++)if(a===b[c])return b.splice(c,1),this;}else this._all=[];return this},c.prototype.removeListener=c.prototype.off,c.prototype.removeAllListeners=function(b){if(0===arguments.length)return this._events&&a.call(this),this;if(this.wildcard)for(var c,e='string'===typeof b?b.split(this.delimiter):b.slice(),f=d.call(this,null,e,this.listenerTree,0),g=0;g<f.length;g++)c=f[g],c._listeners=null;else{if(!this._events[b])return this;this._events[b]=null}return this},c.prototype.listeners=function(b){if(this.wildcard){var c=[],e='string'===typeof b?b.split(this.delimiter):b.slice();return d.call(this,c,e,this.listenerTree,0),c}return this._events||a.call(this),this._events[b]||(this._events[b]=[]),f(this._events[b])||(this._events[b]=[this._events[b]]),this._events[b]},c.prototype.listenersAny=function(){return this._all?this._all:[]},'function'===typeof define&&define.amd?define(function(){return c}):'object'===typeof exports?exports.EventEmitter2=c:window.EventEmitter2=c}();</script><script>var THREE={REVISION:'64'};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,'')},THREE.extend=function(e,t){if(Object.keys)for(var r=Object.keys(t),a=0,o=r.length,i;a<o;a++)i=r[a],Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i));else{var n={}.hasOwnProperty;for(var i in t)n.call(t,i)&&(e[i]=t[i])}return e},function(){for(var e=0,t=['ms','moz','webkit','o'],r=0;r<t.length&&!self.requestAnimationFrame;++r)self.requestAnimationFrame=self[t[r]+'RequestAnimationFrame'],self.cancelAnimationFrame=self[t[r]+'CancelAnimationFrame']||self[t[r]+'CancelRequestAnimationFrame'];self.requestAnimationFrame===void 0&&self.setTimeout!==void 0&&(self.requestAnimationFrame=function(t){var r=Date.now(),a=Math.max(0,16-(r-e)),o=self.setTimeout(function(){t(r+a)},a);return e=r+a,o}),self.cancelAnimationFrame===void 0&&self.clearTimeout!==void 0&&(self.cancelAnimationFrame=function(e){self.clearTimeout(e)})}(),THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.Color=function(e){return void 0!==e&&this.set(e),this},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):'number'===typeof e?this.setHex(e):'string'===typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(255&e>>16)/255,this.g=(255&e>>8)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(e,t,r){if(0===t)this.r=this.g=this.b=r;else{var a=function(e,r,a){return 0>a&&(a+=1),1<a&&(a-=1),a<1/6?e+6*(r-e)*a:a<1/2?r:a<2/3?e+6*(r-e)*(2/3-a):e},o=0.5>=r?r*(1+t):r+t-r*t,i=2*r-o;this.r=a(i,o,e+1/3),this.g=a(i,o,e),this.b=a(i,o,e-1/3)}return this},setStyle:function(e){var t=Math.min;if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var r=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=t(255,parseInt(r[1],10))/255,this.g=t(255,parseInt(r[2],10))/255,this.b=t(255,parseInt(r[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var r=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return this.r=t(100,parseInt(r[1],10))/100,this.g=t(100,parseInt(r[2],10))/100,this.b=t(100,parseInt(r[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){var r=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(r[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var r=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(r[1]+r[1]+r[2]+r[2]+r[3]+r[3],16)),this}return /^(\w+)$/i.test(e)?(this.setHex(THREE.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){var t=Math.sqrt;return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){var e=Math.sqrt;return this.r=e(this.r),this.g=e(this.g),this.b=e(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return('000000'+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},a=this.r,r=this.g,o=this.b,i=Math.max(a,r,o),n=Math.min(a,r,o),s=(n+i)/2,l,p;if(n===i)l=0,p=0;else{var c=i-n;p=0.5>=s?c/(i+n):c/(2-i-n),i===a?l=(r-o)/c+(r<o?6:0):i===r?l=(o-a)/c+2:i===o?l=(a-r)/c+4:void 0,l/=6}return t.h=l,t.s=p,t.l=s,t},getStyle:function(){return'rgb('+(0|255*this.r)+','+(0|255*this.g)+','+(0|255*this.b)+')'},offsetHSL:function(e,t,r){var a=this.getHSL();return a.h+=e,a.s+=t,a.l+=r,this.setHSL(a.h,a.s,a.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return new THREE.Color().setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,r,a){this._x=e||0,this._y=t||0,this._z=r||0,this._w=a===void 0?1:a},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(){this._euler!==void 0&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(e){this._x=e,this._updateEuler()},get y(){return this._y},set y(e){this._y=e,this._updateEuler()},get z(){return this._z},set z(e){this._z=e,this._updateEuler()},get w(){return this._w},set w(e){this._w=e,this._updateEuler()},set:function(e,t,r,a){return this._x=e,this._y=t,this._z=r,this._w=a,this._updateEuler(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._w=e._w,this._updateEuler(),this},setFromEuler:function(e,t){var r=Math.sin,a=Math.cos;if(!1===e instanceof THREE.Euler)throw new Error('ERROR: Quaternion\'s .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.');var o=a(e._x/2),i=a(e._y/2),n=a(e._z/2),s=r(e._x/2),l=r(e._y/2),p=r(e._z/2);return'XYZ'===e.order?(this._x=s*i*n+o*l*p,this._y=o*l*n-s*i*p,this._z=o*i*p+s*l*n,this._w=o*i*n-s*l*p):'YXZ'===e.order?(this._x=s*i*n+o*l*p,this._y=o*l*n-s*i*p,this._z=o*i*p-s*l*n,this._w=o*i*n+s*l*p):'ZXY'===e.order?(this._x=s*i*n-o*l*p,this._y=o*l*n+s*i*p,this._z=o*i*p+s*l*n,this._w=o*i*n-s*l*p):'ZYX'===e.order?(this._x=s*i*n-o*l*p,this._y=o*l*n+s*i*p,this._z=o*i*p-s*l*n,this._w=o*i*n+s*l*p):'YZX'===e.order?(this._x=s*i*n+o*l*p,this._y=o*l*n+s*i*p,this._z=o*i*p-s*l*n,this._w=o*i*n-s*l*p):'XZY'===e.order&&(this._x=s*i*n-o*l*p,this._y=o*l*n-s*i*p,this._z=o*i*p+s*l*n,this._w=o*i*n+s*l*p),!1!==t&&this._updateEuler(),this},setFromAxisAngle:function(e,t){var r=t/2,a=Math.sin(r);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(r),this._updateEuler(),this},setFromRotationMatrix:function(e){var t=Math.sqrt,r=e.elements,a=r[0],o=r[4],i=r[8],n=r[1],l=r[5],p=r[9],c=r[2],d=r[6],m=r[10],u=a+l+m,h;return 0<u?(h=0.5/t(u+1),this._w=0.25/h,this._x=(d-p)*h,this._y=(i-c)*h,this._z=(n-o)*h):a>l&&a>m?(h=2*t(1+a-l-m),this._w=(d-p)/h,this._x=0.25*h,this._y=(o+n)/h,this._z=(i+c)/h):l>m?(h=2*t(1+l-a-m),this._w=(i-c)/h,this._x=(o+n)/h,this._y=0.25*h,this._z=(p+d)/h):(h=2*t(1+m-a-l),this._w=(n-o)/h,this._x=(i+c)/h,this._y=(p+d)/h,this._z=0.25*h),this._updateEuler(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._updateEuler(),this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this},multiply:function(e,t){return void 0===t?this.multiplyQuaternions(this,e):(console.warn('DEPRECATED: Quaternion\'s .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.'),this.multiplyQuaternions(e,t))},multiplyQuaternions:function(e,t){var r=e._x,a=e._y,o=e._z,i=e._w,n=t._x,s=t._y,l=t._z,p=t._w;return this._x=r*p+i*n+a*l-o*s,this._y=a*p+i*s+o*n-r*l,this._z=o*p+i*l+r*s-a*n,this._w=i*p-r*n-a*s-o*l,this._updateEuler(),this},multiplyVector3:function(e){return console.warn('DEPRECATED: Quaternion\'s .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.'),e.applyQuaternion(this)},slerp:function(e,r){var t=Math.sin,a=this._x,o=this._y,i=this._z,n=this._w,s=n*e._w+a*e._x+o*e._y+i*e._z;if(0>s?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=n,this._x=a,this._y=o,this._z=i,this;var l=Math.acos(s),p=Math.sqrt(1-s*s);if(1e-3>Math.abs(p))return this._w=0.5*(n+this._w),this._x=0.5*(a+this._x),this._y=0.5*(o+this._y),this._z=0.5*(i+this._z),this;var c=t((1-r)*l)/p,d=t(r*l)/p;return this._w=n*c+this._w*d,this._x=a*c+this._x*d,this._y=o*c+this._y*d,this._z=i*c+this._z*d,this._updateEuler(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],this._w=e[3],this._updateEuler(),this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,r,a,o){return a.copy(e).slerp(r,o)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error('index is out of range: '+e);}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error('index is out of range: '+e);}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this):(console.warn('DEPRECATED: Vector2\'s .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this):(console.warn('DEPRECATED: Vector2\'s .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e){return this.x=e[0],this.y=e[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error('index is out of range: '+e);}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error('index is out of range: '+e);}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this):(console.warn('DEPRECATED: Vector3\'s .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this):(console.warn('DEPRECATED: Vector3\'s .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0===t?(this.x*=e.x,this.y*=e.y,this.z*=e.z,this):(console.warn('DEPRECATED: Vector3\'s .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.'),this.multiplyVectors(e,t))},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyMatrix3:function(t){var r=this.x,a=this.y,o=this.z,i=t.elements;return this.x=i[0]*r+i[3]*a+i[6]*o,this.y=i[1]*r+i[4]*a+i[7]*o,this.z=i[2]*r+i[5]*a+i[8]*o,this},applyMatrix4:function(t){var r=this.x,a=this.y,o=this.z,i=t.elements;return this.x=i[0]*r+i[4]*a+i[8]*o+i[12],this.y=i[1]*r+i[5]*a+i[9]*o+i[13],this.z=i[2]*r+i[6]*a+i[10]*o+i[14],this},applyProjection:function(t){var r=this.x,a=this.y,o=this.z,i=t.elements,e=1/(i[3]*r+i[7]*a+i[11]*o+i[15]);return this.x=(i[0]*r+i[4]*a+i[8]*o+i[12])*e,this.y=(i[1]*r+i[5]*a+i[9]*o+i[13])*e,this.z=(i[2]*r+i[6]*a+i[10]*o+i[14])*e,this},applyQuaternion:function(e){var t=this.x,r=this.y,a=this.z,o=e.x,i=e.y,n=e.z,s=e.w,l=s*t+i*a-n*r,p=s*r+n*t-o*a,c=s*a+o*r-i*t,d=-o*t-i*r-n*a;return this.x=l*s+d*-o+p*-n-c*-i,this.y=p*s+d*-i+c*-o-l*-n,this.z=c*s+d*-n+l*-i-p*-o,this},transformDirection:function(t){var r=this.x,a=this.y,o=this.z,i=t.elements;return this.x=i[0]*r+i[4]*a+i[8]*o,this.y=i[1]*r+i[5]*a+i[9]*o,this.z=i[2]*r+i[6]*a+i[10]*o,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){var e=Math.abs;return e(this.x)+e(this.y)+e(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn('DEPRECATED: Vector3\'s .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.'),this.crossVectors(e,t);var r=this.x,a=this.y,o=this.z;return this.x=a*e.z-o*e.y,this.y=o*e.x-r*e.z,this.z=r*e.y-a*e.x,this},crossVectors:function(e,t){var r=e.x,a=e.y,o=e.z,i=t.x,n=t.y,s=t.z;return this.x=a*s-o*n,this.y=o*i-r*s,this.z=r*n-a*i,this},angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,a=this.z-e.z;return t*t+r*r+a*a},setEulerFromRotationMatrix:function(){console.error('REMOVED: Vector3\'s setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.')},setEulerFromQuaternion:function(){console.error('REMOVED: Vector3\'s setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.')},getPositionFromMatrix:function(e){return console.warn('DEPRECATED: Vector3\'s .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code.'),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn('DEPRECATED: Vector3\'s .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code.'),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn('DEPRECATED: Vector3\'s .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code.'),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),r=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),a=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=r,this.z=a,this},setFromMatrixColumn:function(e,t){var r=4*e,a=t.elements;return this.x=a[r],this.y=a[r+1],this.z=a[r+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var e=new THREE.Quaternion;return function(t){return!1===t instanceof THREE.Euler&&console.error('ERROR: Vector3\'s .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.'),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e=new THREE.Quaternion;return function(t,r){return this.applyQuaternion(e.setFromAxisAngle(t,r)),this}}(),projectOnVector:function(){var e=new THREE.Vector3;return function(t){e.copy(t).normalize();var r=this.dot(e);return this.copy(e).multiplyScalar(r)}}(),projectOnPlane:function(){var e=new THREE.Vector3;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new THREE.Vector3;return function(t){return e.copy(this).projectOnVector(t).multiplyScalar(2),this.subVectors(e,this)}}()}),THREE.Vector4=function(e,t,r,a){this.x=e||0,this.y=t||0,this.z=r||0,this.w=a===void 0?1:a},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,r,a){return this.x=e,this.y=t,this.z=r,this.w=a,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error('index is out of range: '+e);}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error('index is out of range: '+e);}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0===e.w?1:e.w,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this):(console.warn('DEPRECATED: Vector4\'s .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this):(console.warn('DEPRECATED: Vector4\'s .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(t){var r=this.x,a=this.y,o=this.z,i=this.w,n=t.elements;return this.x=n[0]*r+n[4]*a+n[8]*o+n[12]*i,this.y=n[1]*r+n[5]*a+n[9]*o+n[13]*i,this.z=n[2]*r+n[6]*a+n[10]*o+n[14]*i,this.w=n[3]*r+n[7]*a+n[11]*o+n[15]*i,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t=Math.abs,r=Math.sqrt,a=0.01,o=0.1,i=e.elements,n=i[0],l=i[4],p=i[8],c=i[1],d=i[5],m=i[9],u=i[2],h=i[6],g=i[10],f,v,x,y;if(t(l-c)<a&&t(p-u)<a&&t(m-h)<a){if(t(l+c)<o&&t(p+u)<o&&t(m+h)<o&&t(n+d+g-3)<o)return this.set(1,0,0,0),this;f=Math.PI;var _=(n+1)/2,b=(d+1)/2,S=(g+1)/2,M=(l+c)/4,T=(p+u)/4,C=(m+h)/4;return _>b&&_>S?_<a?(v=0,x=0.707106781,y=0.707106781):(v=r(_),x=M/v,y=T/v):b>S?b<a?(v=0.707106781,x=0,y=0.707106781):(x=r(b),v=M/x,y=C/x):S<a?(v=0.707106781,x=0.707106781,y=0):(y=r(S),v=T/y,x=C/y),this.set(v,x,y,f),this}var A=r((h-m)*(h-m)+(p-u)*(p-u)+(c-l)*(c-l));return 1e-3>t(A)&&(A=1),this.x=(h-m)/A,this.y=(p-u)/A,this.z=(c-l)/A,this.w=Math.acos((n+d+g-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){var e=Math.abs;return e(this.x)+e(this.y)+e(this.z)+e(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3],this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,r,a){this._x=e||0,this._y=t||0,this._z=r||0,this._order=a||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=['XYZ','YZX','ZXY','XZY','YXZ','ZYX'],THREE.Euler.DefaultOrder='XYZ',THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){this._quaternion!==void 0&&this._quaternion.setFromEuler(this,!1)},get x(){return this._x},set x(e){this._x=e,this._updateQuaternion()},get y(){return this._y},set y(e){this._y=e,this._updateQuaternion()},get z(){return this._z},set z(e){this._z=e,this._updateQuaternion()},get order(){return this._order},set order(e){this._order=e,this._updateQuaternion()},set:function(e,t,r,a){return this._x=e,this._y=t,this._z=r,this._order=a||this._order,this._updateQuaternion(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._updateQuaternion(),this},setFromRotationMatrix:function(e,t){function r(e){return Math.min(Math.max(e,-1),1)}var a=Math.atan2,o=Math.asin,i=Math.abs,n=e.elements,s=n[0],l=n[4],p=n[8],c=n[1],d=n[5],m=n[9],u=n[2],h=n[6],g=n[10];return t=t||this._order,'XYZ'===t?(this._y=o(r(p)),0.99999>i(p)?(this._x=a(-m,g),this._z=a(-l,s)):(this._x=a(h,d),this._z=0)):'YXZ'===t?(this._x=o(-r(m)),0.99999>i(m)?(this._y=a(p,g),this._z=a(c,d)):(this._y=a(-u,s),this._z=0)):'ZXY'===t?(this._x=o(r(h)),0.99999>i(h)?(this._y=a(-u,g),this._z=a(-l,d)):(this._y=0,this._z=a(c,s))):'ZYX'===t?(this._y=o(-r(u)),0.99999>i(u)?(this._x=a(h,g),this._z=a(c,s)):(this._x=0,this._z=a(-l,d))):'YZX'===t?(this._z=o(r(c)),0.99999>i(c)?(this._x=a(-m,d),this._y=a(-u,s)):(this._x=0,this._y=a(p,g))):'XZY'===t?(this._z=o(-r(l)),0.99999>i(l)?(this._x=a(h,d),this._y=a(p,s)):(this._x=a(-m,g),this._y=0)):console.warn('WARNING: Euler.setFromRotationMatrix() given unsupported order: '+t),this._order=t,this._updateQuaternion(),this},setFromQuaternion:function(e,t,r){function a(e){return Math.min(Math.max(e,-1),1)}var o=Math.atan2,i=Math.asin,n=e.x*e.x,s=e.y*e.y,l=e.z*e.z,p=e.w*e.w;return t=t||this._order,'XYZ'===t?(this._x=o(2*(e.x*e.w-e.y*e.z),p-n-s+l),this._y=i(a(2*(e.x*e.z+e.y*e.w))),this._z=o(2*(e.z*e.w-e.x*e.y),p+n-s-l)):'YXZ'===t?(this._x=i(a(2*(e.x*e.w-e.y*e.z))),this._y=o(2*(e.x*e.z+e.y*e.w),p-n-s+l),this._z=o(2*(e.x*e.y+e.z*e.w),p-n+s-l)):'ZXY'===t?(this._x=i(a(2*(e.x*e.w+e.y*e.z))),this._y=o(2*(e.y*e.w-e.z*e.x),p-n-s+l),this._z=o(2*(e.z*e.w-e.x*e.y),p-n+s-l)):'ZYX'===t?(this._x=o(2*(e.x*e.w+e.z*e.y),p-n-s+l),this._y=i(a(2*(e.y*e.w-e.x*e.z))),this._z=o(2*(e.x*e.y+e.z*e.w),p+n-s-l)):'YZX'===t?(this._x=o(2*(e.x*e.w-e.z*e.y),p-n+s-l),this._y=o(2*(e.y*e.w-e.x*e.z),p+n-s-l),this._z=i(a(2*(e.x*e.y+e.z*e.w)))):'XZY'===t?(this._x=o(2*(e.x*e.w+e.y*e.z),p-n+s-l),this._y=o(2*(e.x*e.z+e.y*e.w),p+n-s-l),this._z=i(a(2*(e.z*e.w-e.x*e.y)))):console.warn('WARNING: Euler.setFromQuaternion() given unsupported order: '+t),this._order=t,!1!==r&&this._updateQuaternion(),this},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._updateQuaternion(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=e===void 0?new THREE.Vector3:e,this.end=t===void 0?new THREE.Vector3:t},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new THREE.Vector3;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,r=new THREE.Vector3;return function(a,o){e.subVectors(a,this.start),r.subVectors(this.end,this.start);var i=r.dot(r),n=r.dot(e),s=n/i;return o&&(s=THREE.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,r,a){var o=this.closestPointToPointParameter(e,r),t=a||new THREE.Vector3;return this.delta(t).multiplyScalar(o).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return new THREE.Line3().copy(this)}},THREE.Box2=function(e,t){this.min=e===void 0?new THREE.Vector2(Infinity,Infinity):e,this.max=t===void 0?new THREE.Vector2(-Infinity,-Infinity):t},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){if(0<e.length){var t=e[0];this.min.copy(t),this.max.copy(t);for(var r=1,a=e.length;r<a;r++)t=e[r],t.x<this.min.x?this.min.x=t.x:t.x>this.max.x&&(this.max.x=t.x),t.y<this.min.y?this.min.y=t.y:t.y>this.max.y&&(this.max.y=t.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,r){var a=e.copy(r).multiplyScalar(0.5);return this.min.copy(t).sub(a),this.max.copy(t).add(a),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new THREE.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(e){var t=e||new THREE.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var r=t||new THREE.Vector2;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var r=t||new THREE.Vector2;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return new THREE.Box2().copy(this)}},THREE.Box3=function(e,t){this.min=e===void 0?new THREE.Vector3(Infinity,Infinity,Infinity):e,this.max=t===void 0?new THREE.Vector3(-Infinity,-Infinity,-Infinity):t},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},addPoint:function(e){e.x<this.min.x?this.min.x=e.x:e.x>this.max.x&&(this.max.x=e.x),e.y<this.min.y?this.min.y=e.y:e.y>this.max.y&&(this.max.y=e.y),e.z<this.min.z?this.min.z=e.z:e.z>this.max.z&&(this.max.z=e.z)},setFromPoints:function(e){if(0<e.length){var t=e[0];this.min.copy(t),this.max.copy(t);for(var r=1,a=e.length;r<a;r++)this.addPoint(e[r])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,r){var a=e.copy(r).multiplyScalar(0.5);return this.min.copy(t).sub(a),this.max.copy(t).add(a),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){if(void 0!==t.geometry&&void 0!==t.geometry.vertices)for(var a=t.geometry.vertices,o=0,i=a.length;o<i;o++)e.copy(a[o]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var r=t||new THREE.Vector3;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){var r=t||new THREE.Vector3;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){var r=t||new THREE.Sphere;return r.center=this.center(),r.radius=0.5*this.size(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return new THREE.Box3().copy(this)}},THREE.Matrix3=function(e,t,r,a,o,i,n,s,l){this.elements=new Float32Array(9),this.set(e===void 0?1:e,t||0,r||0,a||0,o===void 0?1:o,i||0,n||0,s||0,l===void 0?1:l)},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,r,a,o,i,n,s,l){var p=this.elements;return p[0]=e,p[3]=t,p[6]=r,p[1]=a,p[4]=o,p[7]=i,p[2]=n,p[5]=s,p[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn('DEPRECATED: Matrix3\'s .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.'),e.applyMatrix3(this)},multiplyVector3Array:function(){var e=new THREE.Vector3;return function(t){for(var r=0,a=t.length;r<a;r+=3)e.x=t[r],e.y=t[r+1],e.z=t[r+2],e.applyMatrix3(this),t[r]=e.x,t[r+1]=e.y,t[r+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var t=this.elements,r=t[0],a=t[1],o=t[2],n=t[3],s=t[4],e=t[5],l=t[6],p=t[7],c=t[8];return r*s*c-r*e*p-a*n*c+a*e*l+o*n*p-o*s*l},getInverse:function(e,t){var r=e.elements,a=this.elements;a[0]=r[10]*r[5]-r[6]*r[9],a[1]=-r[10]*r[1]+r[2]*r[9],a[2]=r[6]*r[1]-r[2]*r[5],a[3]=-r[10]*r[4]+r[6]*r[8],a[4]=r[10]*r[0]-r[2]*r[8],a[5]=-r[6]*r[0]+r[2]*r[4],a[6]=r[9]*r[4]-r[5]*r[8],a[7]=-r[9]*r[0]+r[1]*r[8],a[8]=r[5]*r[0]-r[1]*r[4];var o=r[0]*a[0]+r[1]*a[3]+r[2]*a[6];if(0===o){var i='Matrix3.getInverse(): can\'t invert matrix, determinant is 0';if(t||!1)throw new Error(i);else console.warn(i);return this.identity(),this}return this.multiplyScalar(1/o),this},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},clone:function(){var e=this.elements;return new THREE.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},THREE.Matrix4=function(e,t,r,a,o,i,n,s,l,p,c,d,m,u,h,g){this.elements=new Float32Array(16);var f=this.elements;f[0]=e===void 0?1:e,f[4]=t||0,f[8]=r||0,f[12]=a||0,f[1]=o||0,f[5]=i===void 0?1:i,f[9]=n||0,f[13]=s||0,f[2]=l||0,f[6]=p||0,f[10]=c===void 0?1:c,f[14]=d||0,f[3]=m||0,f[7]=u||0,f[11]=h||0,f[15]=g===void 0?1:g},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,r,a,o,i,n,s,l,p,c,d,m,u,h,g){var f=this.elements;return f[0]=e,f[4]=t,f[8]=r,f[12]=a,f[1]=o,f[5]=i,f[9]=n,f[13]=s,f[2]=l,f[6]=p,f[10]=c,f[14]=d,f[3]=m,f[7]=u,f[11]=h,f[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn('DEPRECATED: Matrix4\'s .extractPosition() has been renamed to .copyPosition().'),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var r=this.elements,a=t.elements,o=1/e.set(a[0],a[1],a[2]).length(),i=1/e.set(a[4],a[5],a[6]).length(),n=1/e.set(a[8],a[9],a[10]).length();return r[0]=a[0]*o,r[1]=a[1]*o,r[2]=a[2]*o,r[4]=a[4]*i,r[5]=a[5]*i,r[6]=a[6]*i,r[8]=a[8]*n,r[9]=a[9]*n,r[10]=a[10]*n,this}}(),makeRotationFromEuler:function(t){var r=Math.sin,o=Math.cos;!1===t instanceof THREE.Euler&&console.error('ERROR: Matrix\'s .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.');var i=this.elements,n=t.x,s=t.y,l=t.z,p=o(n),m=r(n),u=o(s),h=r(s),g=o(l),e=r(l);if('XYZ'===t.order){var y=p*g,x=p*e,v=m*g,_=m*e;i[0]=u*g,i[4]=-u*e,i[8]=h,i[1]=x+v*h,i[5]=y-_*h,i[9]=-m*u,i[2]=_-y*h,i[6]=v+x*h,i[10]=p*u}else if('YXZ'===t.order){var S=u*g,M=u*e,T=h*g,C=h*e;i[0]=S+C*m,i[4]=T*m-M,i[8]=p*h,i[1]=p*e,i[5]=p*g,i[9]=-m,i[2]=M*m-T,i[6]=C+S*m,i[10]=p*u}else if('ZXY'===t.order){var S=u*g,M=u*e,T=h*g,C=h*e;i[0]=S-C*m,i[4]=-p*e,i[8]=T+M*m,i[1]=M+T*m,i[5]=p*g,i[9]=C-S*m,i[2]=-p*h,i[6]=m,i[10]=p*u}else if('ZYX'===t.order){var y=p*g,x=p*e,v=m*g,_=m*e;i[0]=u*g,i[4]=v*h-x,i[8]=y*h+_,i[1]=u*e,i[5]=_*h+y,i[9]=x*h-v,i[2]=-h,i[6]=m*u,i[10]=p*u}else if('YZX'===t.order){var A=p*u,E=p*h,w=m*u,L=m*h;i[0]=u*g,i[4]=L-A*e,i[8]=w*e+E,i[1]=e,i[5]=p*g,i[9]=-m*g,i[2]=-h*g,i[6]=E*e+w,i[10]=A-L*e}else if('XZY'===t.order){var A=p*u,E=p*h,w=m*u,L=m*h;i[0]=u*g,i[4]=-e,i[8]=h*g,i[1]=A*e+L,i[5]=p*g,i[9]=E*e-w,i[2]=w*e-E,i[6]=m*g,i[10]=L*e+A}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},setRotationFromQuaternion:function(e){return console.warn('DEPRECATED: Matrix4\'s .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.'),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,a=e.y,o=e.z,i=e.w,n=r+r,s=a+a,l=o+o,p=r*n,c=r*s,d=r*l,m=a*s,u=a*l,h=o*l,g=i*n,f=i*s,y=i*l;return t[0]=1-(m+h),t[4]=c-y,t[8]=d+f,t[1]=c+y,t[5]=1-(p+h),t[9]=u-g,t[2]=d-f,t[6]=u+g,t[10]=1-(p+m),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3;return function(a,o,i){var n=this.elements;return r.subVectors(a,o).normalize(),0===r.length()&&(r.z=1),e.crossVectors(i,r).normalize(),0===e.length()&&(r.x+=1e-4,e.crossVectors(i,r).normalize()),t.crossVectors(r,e),n[0]=e.x,n[4]=t.x,n[8]=r.x,n[1]=e.y,n[5]=t.y,n[9]=r.y,n[2]=e.z,n[6]=t.z,n[10]=r.z,this}}(),multiply:function(e,t){return void 0===t?this.multiplyMatrices(this,e):(console.warn('DEPRECATED: Matrix4\'s .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.'),this.multiplyMatrices(e,t))},multiplyMatrices:function(e,t){var r=e.elements,a=t.elements,o=this.elements,i=r[0],n=r[4],s=r[8],l=r[12],p=r[1],c=r[5],d=r[9],m=r[13],u=r[2],h=r[6],g=r[10],f=r[14],y=r[3],x=r[7],v=r[11],_=r[15],b=a[0],S=a[4],M=a[8],T=a[12],C=a[1],A=a[5],E=a[9],w=a[13],L=a[2],P=a[6],D=a[10],R=a[14],F=a[3],V=a[7],U=a[11],z=a[15];return o[0]=i*b+n*C+s*L+l*F,o[4]=i*S+n*A+s*P+l*V,o[8]=i*M+n*E+s*D+l*U,o[12]=i*T+n*w+s*R+l*z,o[1]=p*b+c*C+d*L+m*F,o[5]=p*S+c*A+d*P+m*V,o[9]=p*M+c*E+d*D+m*U,o[13]=p*T+c*w+d*R+m*z,o[2]=u*b+h*C+g*L+f*F,o[6]=u*S+h*A+g*P+f*V,o[10]=u*M+h*E+g*D+f*U,o[14]=u*T+h*w+g*R+f*z,o[3]=y*b+x*C+v*L+_*F,o[7]=y*S+x*A+v*P+_*V,o[11]=y*M+x*E+v*D+_*U,o[15]=y*T+x*w+v*R+_*z,this},multiplyToArray:function(e,t,a){var r=this.elements;return this.multiplyMatrices(e,t),a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn('DEPRECATED: Matrix4\'s .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.'),e.applyProjection(this)},multiplyVector4:function(e){return console.warn('DEPRECATED: Matrix4\'s .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.'),e.applyMatrix4(this)},multiplyVector3Array:function(){var e=new THREE.Vector3;return function(t){for(var r=0,a=t.length;r<a;r+=3)e.x=t[r],e.y=t[r+1],e.z=t[r+2],e.applyProjection(this),t[r]=e.x,t[r+1]=e.y,t[r+2]=e.z;return t}}(),rotateAxis:function(e){console.warn('DEPRECATED: Matrix4\'s .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.'),e.transformDirection(this)},crossVector:function(e){return console.warn('DEPRECATED: Matrix4\'s .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.'),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],r=e[4],a=e[8],o=e[12],i=e[1],n=e[5],s=e[9],l=e[13],p=e[2],c=e[6],d=e[10],m=e[14],u=e[3],h=e[7],g=e[11],f=e[15];return u*(+o*s*c-a*l*c-o*n*d+r*l*d+a*n*m-r*s*m)+h*(+t*s*m-t*l*d+o*i*d-a*i*m+a*l*p-o*s*p)+g*(+t*l*c-t*n*m-o*i*c+r*i*m+o*n*p-r*l*p)+f*(-a*n*p-t*s*c+t*n*d+a*i*c-r*i*d+r*s*p)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},flattenToArrayOffset:function(e,t){var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e},getPosition:function(){var e=new THREE.Vector3;return function(){console.warn('DEPRECATED: Matrix4\'s .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.');var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,a=e.elements,o=a[0],i=a[4],n=a[8],s=a[12],l=a[1],p=a[5],c=a[9],d=a[13],m=a[2],u=a[6],h=a[10],g=a[14],f=a[3],y=a[7],x=a[11],v=a[15];r[0]=c*g*y-d*h*y+d*u*x-p*g*x-c*u*v+p*h*v,r[4]=s*h*y-n*g*y-s*u*x+i*g*x+n*u*v-i*h*v,r[8]=n*d*y-s*c*y+s*p*x-i*d*x-n*p*v+i*c*v,r[12]=s*c*u-n*d*u-s*p*h+i*d*h+n*p*g-i*c*g,r[1]=d*h*f-c*g*f-d*m*x+l*g*x+c*m*v-l*h*v,r[5]=n*g*f-s*h*f+s*m*x-o*g*x-n*m*v+o*h*v,r[9]=s*c*f-n*d*f-s*l*x+o*d*x+n*l*v-o*c*v,r[13]=n*d*m-s*c*m+s*l*h-o*d*h-n*l*g+o*c*g,r[2]=p*g*f-d*u*f+d*m*y-l*g*y-p*m*v+l*u*v,r[6]=s*u*f-i*g*f-s*m*y+o*g*y+i*m*v-o*u*v,r[10]=i*d*f-s*p*f+s*l*y-o*d*y-i*l*v+o*p*v,r[14]=s*p*m-i*d*m-s*l*u+o*d*u+i*l*g-o*p*g,r[3]=c*u*f-p*h*f-c*m*y+l*h*y+p*m*x-l*u*x,r[7]=i*h*f-n*u*f+n*m*y-o*h*y-i*m*x+o*u*x,r[11]=n*p*f-i*c*f-n*l*y+o*c*y+i*l*x-o*p*x,r[15]=i*c*m-n*p*m+n*l*u-o*c*u-i*l*h+o*p*h;var _=o*r[0]+l*r[4]+m*r[8]+f*r[12];if(0==_){var b='Matrix4.getInverse(): can\'t invert matrix, determinant is 0';if(t||!1)throw new Error(b);else console.warn(b);return this.identity(),this}return this.multiplyScalar(1/_),this},translate:function(){console.warn('DEPRECATED: Matrix4\'s .translate() has been removed.')},rotateX:function(){console.warn('DEPRECATED: Matrix4\'s .rotateX() has been removed.')},rotateY:function(){console.warn('DEPRECATED: Matrix4\'s .rotateY() has been removed.')},rotateZ:function(){console.warn('DEPRECATED: Matrix4\'s .rotateZ() has been removed.')},rotateByAxis:function(){console.warn('DEPRECATED: Matrix4\'s .rotateByAxis() has been removed.')},scale:function(e){var t=this.elements,r=e.x,a=e.y,o=e.z;return t[0]*=r,t[4]*=a,t[8]*=o,t[1]*=r,t[5]*=a,t[9]*=o,t[2]*=r,t[6]*=a,t[10]*=o,t[3]*=r,t[7]*=a,t[11]*=o,this},getMaxScaleOnAxis:function(){var e=Math.max,t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],a=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],o=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(e(r,e(a,o)))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,r){var a=Math.cos(r),o=Math.sin(r),i=1-a,t=e.x,n=e.y,s=e.z,l=i*t,p=i*n;return this.set(l*t+a,l*n-o*s,l*s+o*n,0,l*n+o*s,p*n+a,p*s-o*t,0,l*s-o*n,p*s+o*t,i*s*s+a,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e=new THREE.Vector3,t=new THREE.Matrix4;return function(r,a,o){var i=this.elements,n=e.set(i[0],i[1],i[2]).length(),s=e.set(i[4],i[5],i[6]).length(),l=e.set(i[8],i[9],i[10]).length();r.x=i[12],r.y=i[13],r.z=i[14],t.elements.set(this.elements);var p=1/n,c=1/s,d=1/l;return t.elements[0]*=p,t.elements[1]*=p,t.elements[2]*=p,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,a.setFromRotationMatrix(t),o.x=n,o.y=s,o.z=l,this}}(),makeFrustum:function(e,t,r,a,o,i){var n=this.elements;return n[0]=2*o/(t-e),n[4]=0,n[8]=(t+e)/(t-e),n[12]=0,n[1]=0,n[5]=2*o/(a-r),n[9]=(a+r)/(a-r),n[13]=0,n[2]=0,n[6]=0,n[10]=-(i+o)/(i-o),n[14]=-2*i*o/(i-o),n[3]=0,n[7]=0,n[11]=-1,n[15]=0,this},makePerspective:function(e,t,r,a){var o=r*Math.tan(THREE.Math.degToRad(0.5*e)),i=-o;return this.makeFrustum(i*t,o*t,i,o,r,a)},makeOrthographic:function(e,t,r,a,o,i){var n=this.elements,s=t-e,l=r-a,c=i-o;return n[0]=2/s,n[4]=0,n[8]=0,n[12]=-((t+e)/s),n[1]=0,n[5]=2/l,n[9]=0,n[13]=-((r+a)/l),n[2]=0,n[6]=0,n[10]=-2/c,n[14]=-((i+o)/c),n[3]=0,n[7]=0,n[11]=0,n[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){var e=this.elements;return new THREE.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}},THREE.Ray=function(e,t){this.origin=e===void 0?new THREE.Vector3:e,this.direction=t===void 0?new THREE.Vector3:t},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var r=t||new THREE.Vector3;return r.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(r){return this.origin.copy(this.at(r,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new THREE.Vector3;r.subVectors(e,this.origin);var a=r.dot(this.direction);return 0>a?r.copy(this.origin):r.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return 0>r?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,r,a){var o=Math.min,i=Math.max,n=e.clone().add(t).multiplyScalar(0.5),s=t.clone().sub(e).normalize(),l=0.5*e.distanceTo(t),p=this.origin.clone().sub(n),d=-this.direction.dot(s),m=p.dot(this.direction),u=-p.dot(s),h=p.lengthSq(),c=Math.abs(1-d*d),g,f,y,x;if(!(0<=c))f=0<d?-l:l,g=i(0,-(d*f+m)),y=-g*g+f*(f+2*u)+h;else if(g=d*u-m,f=d*m-u,x=l*c,!(0<=g))f<=-x?(g=i(0,-(-d*l+m)),f=0<g?-l:o(i(-l,-u),l),y=-g*g+f*(f+2*u)+h):f<=x?(g=0,f=o(i(-l,-u),l),y=f*(f+2*u)+h):(g=i(0,-(d*l+m)),f=0<g?l:o(i(-l,-u),l),y=-g*g+f*(f+2*u)+h);else if(!(f>=-x))f=-l,g=i(0,-(d*f+m)),y=-g*g+f*(f+2*u)+h;else if(f<=x){var v=1/c;g*=v,f*=v,y=g*(g+d*f+2*m)+f*(d*g+f+2*u)+h}else f=l,g=i(0,-(d*f+m)),y=-g*g+f*(f+2*u)+h;return r&&r.copy(this.direction.clone().multiplyScalar(g).add(this.origin)),a&&a.copy(s.clone().multiplyScalar(f).add(n)),y},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var r=e.normal.dot(this.direction);return!!(0>r*t)},distanceToPlane:function(e){var r=e.normal.dot(this.direction);if(0==r)return 0==e.distanceToPoint(this.origin)?0:null;var a=-(this.origin.dot(e.normal)+e.constant)/r;return 0<=a?a:null},intersectPlane:function(e,r){var a=this.distanceToPlane(e);return null===a?null:this.at(a,r)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var r=1/this.direction.x,a=1/this.direction.y,o=1/this.direction.z,i=this.origin,n,s,l,p,c,d;return(0<=r?(n=(e.min.x-i.x)*r,s=(e.max.x-i.x)*r):(n=(e.max.x-i.x)*r,s=(e.min.x-i.x)*r),0<=a?(l=(e.min.y-i.y)*a,p=(e.max.y-i.y)*a):(l=(e.max.y-i.y)*a,p=(e.min.y-i.y)*a),n>p||l>s)?null:((l>n||n!==n)&&(n=l),(p<s||s!==s)&&(s=p),0<=o?(c=(e.min.z-i.z)*o,d=(e.max.z-i.z)*o):(c=(e.max.z-i.z)*o,d=(e.min.z-i.z)*o),n>d||c>s)?null:((c>n||n!==n)&&(n=c),(d<s||s!==s)&&(s=d),0>s?null:this.at(0<=n?n:s,t))},intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3,o=new THREE.Vector3;return function(i,a,n,s,l){t.subVectors(a,i),r.subVectors(n,i),o.crossVectors(t,r);var p=this.direction.dot(o),c;if(0<p){if(s)return null;c=1}else if(0>p)c=-1,p=-p;else return null;e.subVectors(this.origin,i);var d=c*this.direction.dot(r.crossVectors(e,r));if(0>d)return null;var m=c*this.direction.dot(t.cross(e));if(0>m)return null;if(d+m>p)return null;var u=-c*e.dot(o);return 0>u?null:this.at(u/p,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return new THREE.Ray().copy(this)}},THREE.Sphere=function(e,t){this.center=e===void 0?new THREE.Vector3:e,this.radius=t===void 0?0:t},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,r){var a=this.center;void 0===r?e.setFromPoints(t).center(a):a.copy(r);for(var o=0,n=0,i=t.length;n<i;n++)o=Math.max(o,a.distanceToSquared(t[n]));return this.radius=Math.sqrt(o),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),a=t||new THREE.Vector3;return a.copy(e),r>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a},getBoundingBox:function(e){var t=e||new THREE.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new THREE.Sphere().copy(this)}},THREE.Frustum=function(e,t,r,a,o,i){this.planes=[e===void 0?new THREE.Plane:e,t===void 0?new THREE.Plane:t,r===void 0?new THREE.Plane:r,a===void 0?new THREE.Plane:a,o===void 0?new THREE.Plane:o,i===void 0?new THREE.Plane:i]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,r,a,o,i){var n=this.planes;return n[0].copy(e),n[1].copy(t),n[2].copy(r),n[3].copy(a),n[4].copy(o),n[5].copy(i),this},copy:function(e){for(var t=this.planes,r=0;6>r;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,a=r[0],o=r[1],i=r[2],n=r[3],s=r[4],l=r[5],p=r[6],c=r[7],d=r[8],m=r[9],u=r[10],h=r[11],g=r[12],f=r[13],y=r[14],x=r[15];return t[0].setComponents(n-a,c-s,h-d,x-g).normalize(),t[1].setComponents(n+a,c+s,h+d,x+g).normalize(),t[2].setComponents(n+o,c+l,h+m,x+f).normalize(),t[3].setComponents(n-o,c-l,h-m,x-f).normalize(),t[4].setComponents(n-i,c-p,h-u,x-y).normalize(),t[5].setComponents(n+i,c+p,h+u,x+y).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,a=-e.radius,o=0,i;6>o;o++)if(i=t[o].distanceToPoint(r),i<a)return!1;return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r){for(var a=this.planes,o=0,i;6>o;o++){i=a[o],e.x=0<i.normal.x?r.min.x:r.max.x,t.x=0<i.normal.x?r.max.x:r.min.x,e.y=0<i.normal.y?r.min.y:r.max.y,t.y=0<i.normal.y?r.max.y:r.min.y,e.z=0<i.normal.z?r.min.z:r.max.z,t.z=0<i.normal.z?r.max.z:r.min.z;var n=i.distanceToPoint(e),s=i.distanceToPoint(t);if(0>n&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;6>r;r++)if(0>t[r].distanceToPoint(e))return!1;return!0},clone:function(){return new THREE.Frustum().copy(this)}},THREE.Plane=function(e,t){this.normal=e===void 0?new THREE.Vector3(1,0,0):e,this.constant=t===void 0?0:t},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,a){return this.normal.set(e,t,r),this.constant=a,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r,a,o){var i=e.subVectors(o,a).cross(t.subVectors(r,a)).normalize();return this.setFromNormalAndCoplanarPoint(i,r),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e),a=t||new THREE.Vector3;return a.copy(this.normal).multiplyScalar(r)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return 0>t&&0<r||0>r&&0<t},intersectLine:function(){var e=new THREE.Vector3;return function(r,a){var o=a||new THREE.Vector3,i=r.delta(e),n=this.normal.dot(i);if(0==n)return 0==this.distanceToPoint(r.start)?o.copy(r.start):void 0;var s=-(r.start.dot(this.normal)+this.constant)/n;return 0>s||1<s?void 0:o.copy(i).multiplyScalar(s).add(r.start)}}(),coplanarPoint:function(e){var t=e||new THREE.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Matrix3;return function(a,o){var i=o||r.getNormalMatrix(a),n=e.copy(this.normal).applyMatrix3(i),s=this.coplanarPoint(t);return s.applyMatrix4(a),this.setFromNormalAndCoplanarPoint(n,s),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return new THREE.Plane().copy(this)}},THREE.Math={PI2:2*Math.PI,generateUUID:function(){var e=['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'],t=Array(36),a=0,o;return function(){for(var r=0;36>r;r++)8==r||13==r||18==r||23==r?t[r]='-':14==r?t[r]='4':(2>=a&&(a=0|33554432+16777216*Math.random()),o=15&a,a>>=4,t[r]=e[19==r?8|3&o:o]);return t.join('')}}(),clamp:function(e,t,r){return e<t?t:e>r?r:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,r,a,o){return a+(e-t)*(o-a)/(r-t)},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(0.5-Math.random())},sign:function(e){return 0>e?-1:0<e?1:0},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}()},THREE.Spline=function(e){function t(e,r,a,o,i,t,n){var s=0.5*(a-e),l=0.5*(o-r);return(2*(r-a)+s+l)*n+(-3*(r-a)-2*s-l)*t+s*i+r}var r=Math.floor;this.points=e;var a=[],o={x:0,y:0,z:0},i,n,s,l,p,c,d,m,u;this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return i=(this.points.length-1)*e,n=r(i),s=i-n,a[0]=0===n?n:n-1,a[1]=n,a[2]=n>this.points.length-2?this.points.length-1:n+1,a[3]=n>this.points.length-3?this.points.length-1:n+2,c=this.points[a[0]],d=this.points[a[1]],m=this.points[a[2]],u=this.points[a[3]],l=s*s,p=s*l,o.x=t(c.x,d.x,m.x,u.x,s,l,p),o.y=t(c.y,d.y,m.y,u.y,s,l,p),o.z=t(c.z,d.z,m.z,u.z,s,l,p),o},this.getControlPointsArray=function(){var e=this.points.length,t=[],r,a;for(r=0;r<e;r++)a=this.points[r],t[r]=[a.x,a.y,a.z];return t},this.getLength=function(e){var t=0,a=0,o=0,n=new THREE.Vector3,s=new THREE.Vector3,l=[],p=0,c,i,d,m;for(l[0]=0,e||(e=100),d=this.points.length*e,n.copy(this.points[0]),c=1;c<d;c++)i=c/d,m=this.getPoint(i),s.copy(m),p+=s.distanceTo(n),n.copy(m),t=(this.points.length-1)*i,a=r(t),a!=o&&(l[a]=p,o=a);return l[l.length]=p,{chunks:l,total:p}},this.reparametrizeByArcLength=function(e){var t=[],r=new THREE.Vector3,a=this.getLength(),o,i,n,s,l,p,c,d;for(t.push(r.copy(this.points[0]).clone()),o=1;o<this.points.length;o++){for(p=a.chunks[o]-a.chunks[o-1],c=Math.ceil(e*p/a.total),s=(o-1)/(this.points.length-1),l=o/(this.points.length-1),i=1;i<c-1;i++)n=s+i*(1/c)*(l-s),d=this.getPoint(n),t.push(r.copy(d).clone());t.push(r.copy(this.points[o]).clone())}this.points=t}},THREE.Triangle=function(e,t,r){this.a=e===void 0?new THREE.Vector3:e,this.b=t===void 0?new THREE.Vector3:t,this.c=r===void 0?new THREE.Vector3:r},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,r,a,o){var i=o||new THREE.Vector3;i.subVectors(a,r),e.subVectors(t,r),i.cross(e);var n=i.lengthSq();return 0<n?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3;return function(o,i,a,n,s){e.subVectors(n,i),t.subVectors(a,i),r.subVectors(o,i);var l=e.dot(e),p=e.dot(t),c=e.dot(r),d=t.dot(t),m=t.dot(r),h=l*d-p*p,g=s||new THREE.Vector3;if(0==h)return g.set(-2,-1,-1);var f=1/h,y=(d*c-p*m)*f,u=(l*m-p*c)*f;return g.set(1-y-u,u,y)}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,r,a,o){var i=THREE.Triangle.barycoordFromPoint(t,r,a,o,e);return 0<=i.x&&0<=i.y&&1>=i.x+i.y}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,a){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[a]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),0.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new THREE.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return new THREE.Triangle().copy(this)}},THREE.Vertex=function(e){return console.warn('THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.'),e},THREE.UV=function(e,t){return console.warn('THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.'),new THREE.Vector2(e,t)},THREE.Clock=function(e){this.autoStart=!(e!==void 0)||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=self.performance!==void 0&&self.performance.now!==void 0?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();e=1e-3*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});var r=this._listeners;r[e]===void 0&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners,a=r[e];if(void 0!==a){var o=a.indexOf(t);-1!==o&&a.splice(o,1)}}},dispatchEvent:function(){var e=[];return function(t){if(void 0!==this._listeners){var r=this._listeners,a=r[t.type];if(void 0!==a){t.target=this;for(var o=a.length,n=0;n<o;n++)e[n]=a[n];for(var n=0;n<o;n++)e[n].call(this,t)}}}}()},function(e){e.Raycaster=function(t,r,a,o){this.ray=new e.Ray(t,r),this.near=a||0,this.far=o||Infinity};var t=new e.Sphere,r=new e.Ray,a=new e.Plane,o=new e.Vector3,i=new e.Vector3,n=new e.Matrix4,s=function(e,t){return e.distance-t.distance},l=new e.Vector3,p=new e.Vector3,d=new e.Vector3,c=function(o,s,m){if(o instanceof e.Sprite){i.setFromMatrixPosition(o.matrixWorld);var u=s.ray.distanceToPoint(i);if(u>o.scale.x)return m;m.push({distance:u,point:o.position,face:null,object:o})}else if(o instanceof e.LOD){i.setFromMatrixPosition(o.matrixWorld);var u=s.ray.origin.distanceTo(i);c(o.getObjectForDistance(u),s,m)}else if(o instanceof e.Mesh){var h=o.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),t.copy(h.boundingSphere),t.applyMatrix4(o.matrixWorld),!1===s.ray.isIntersectionSphere(t))return m;if(n.getInverse(o.matrixWorld),r.copy(s.ray).applyMatrix4(n),null!==h.boundingBox&&!1===r.isIntersectionBox(h.boundingBox))return m;if(h instanceof e.BufferGeometry){var g=o.material;if(void 0===g)return m;if(!1===h.dynamic)return m;var y=s.precision,x,a,v;if(void 0!==h.attributes.index)for(var _=h.offsets,b=h.attributes.index.array,S=h.attributes.position.array,M=h.offsets.length,T=h.attributes.index.array.length/3,C=0;C<M;++C)for(var A=_[C].start,E=_[C].count,w=_[C].index,L=A;L<A+E;L+=3){if(x=w+b[L],a=w+b[L+1],v=w+b[L+2],l.set(S[3*x],S[3*x+1],S[3*x+2]),p.set(S[3*a],S[3*a+1],S[3*a+2]),d.set(S[3*v],S[3*v+1],S[3*v+2]),g.side===e.BackSide)var P=r.intersectTriangle(d,p,l,!0);else var P=r.intersectTriangle(l,p,d,g.side!==e.DoubleSide);if(null!==P){P.applyMatrix4(o.matrixWorld);var u=s.ray.origin.distanceTo(P);u<y||u<s.near||u>s.far||m.push({distance:u,point:P,face:null,faceIndex:null,object:o})}}else for(var _=h.offsets,S=h.attributes.position.array,M=h.offsets.length,T=h.attributes.position.array.length,L=0;L<T;L+=3){if(x=L,a=L+1,v=L+2,l.set(S[3*x],S[3*x+1],S[3*x+2]),p.set(S[3*a],S[3*a+1],S[3*a+2]),d.set(S[3*v],S[3*v+1],S[3*v+2]),g.side===e.BackSide)var P=r.intersectTriangle(d,p,l,!0);else var P=r.intersectTriangle(l,p,d,g.side!==e.DoubleSide);if(null!==P){P.applyMatrix4(o.matrixWorld);var u=s.ray.origin.distanceTo(P);u<y||u<s.near||u>s.far||m.push({distance:u,point:P,face:null,faceIndex:null,object:o})}}}else if(h instanceof e.Geometry)for(var D=o.material instanceof e.MeshFaceMaterial,R=!0===D?o.material.materials:null,y=s.precision,F=h.vertices,V=0,T=h.faces.length,x,a,v;V<T;V++){var U=h.faces[V],g=!0===D?R[U.materialIndex]:o.material;if(void 0!==g){if(x=F[U.a],a=F[U.b],v=F[U.c],g.side===e.BackSide)var P=r.intersectTriangle(v,a,x,!0);else var P=r.intersectTriangle(x,a,v,g.side!==e.DoubleSide);if(null!==P){P.applyMatrix4(o.matrixWorld);var u=s.ray.origin.distanceTo(P);u<y||u<s.near||u>s.far||m.push({distance:u,point:P,face:U,faceIndex:V,object:o})}}}}else if(o instanceof e.Line){var y=s.linePrecision,h=o.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),t.copy(h.boundingSphere),t.applyMatrix4(o.matrixWorld),!1===s.ray.isIntersectionSphere(t))return m;if(n.getInverse(o.matrixWorld),r.copy(s.ray).applyMatrix4(n),h instanceof e.Geometry)for(var F=h.vertices,z=F.length,B=new e.Vector3,N=new e.Vector3,I=o.type===e.LineStrip?1:2,L=0,O;L<z-1;L+=I)if(O=r.distanceSqToSegment(F[L],F[L+1],N,B),!(O>y*y)){var u=r.origin.distanceTo(N);u<s.near||u>s.far||m.push({distance:u,point:B.clone().applyMatrix4(o.matrixWorld),face:null,faceIndex:null,object:o})}}},m=function(e,t,r){for(var a=e.getDescendants(),o=0,i=a.length;o<i;o++)c(a[o],t,r)};e.Raycaster.prototype.precision=1e-4,e.Raycaster.prototype.linePrecision=1,e.Raycaster.prototype.set=function(e,t){this.ray.set(e,t)},e.Raycaster.prototype.intersectObject=function(e,t){var r=[];return!0===t&&m(e,this,r),c(e,this,r),r.sort(s),r},e.Raycaster.prototype.intersectObjects=function(e,t){for(var r=[],a=0,o=e.length;a<o;a++)c(e[a],this,r),!0===t&&m(e[a],this,r);return r.sort(s),r}}(THREE),THREE.Object3D=function(){this.id=THREE.Object3DIdCount++,this.uuid=THREE.Math.generateUUID(),this.name='',this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this._rotation=new THREE.Euler,this._quaternion=new THREE.Quaternion,this.scale=new THREE.Vector3(1,1,1),this._rotation._quaternion=this.quaternion,this._quaternion._euler=this.rotation,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.prototype={constructor:THREE.Object3D,get rotation(){return this._rotation},set rotation(e){this._rotation=e,this._rotation._quaternion=this._quaternion,this._quaternion._euler=this._rotation,this._rotation._updateQuaternion()},get quaternion(){return this._quaternion},set quaternion(e){this._quaternion=e,this._quaternion._euler=this._rotation,this._rotation._quaternion=this._quaternion,this._quaternion._updateEuler()},get eulerOrder(){return console.warn('DEPRECATED: Object3D\'s .eulerOrder has been moved to Object3D\'s .rotation.order.'),this.rotation.order},set eulerOrder(e){console.warn('DEPRECATED: Object3D\'s .eulerOrder has been moved to Object3D\'s .rotation.order.'),this.rotation.order=e},get useQuaternion(){console.warn('DEPRECATED: Object3D\'s .useQuaternion has been removed. The library now uses quaternions by default.')},set useQuaternion(e){console.warn('DEPRECATED: Object3D\'s .useQuaternion has been removed. The library now uses quaternions by default.')},applyMatrix:function(){var e=new THREE.Matrix4;return function(t){this.matrix.multiplyMatrices(t,this.matrix),this.position.setFromMatrixPosition(this.matrix),this.scale.setFromMatrixScale(this.matrix),e.extractRotation(this.matrix),this.quaternion.setFromRotationMatrix(e)}}(),setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,r){return e.copy(t),e.applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translate:function(e,t){return console.warn('DEPRECATED: Object3D\'s .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.'),this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(e===this)return void console.warn('THREE.Object3D.add: An object can\'t be added as a child of itself.');if(e instanceof THREE.Object3D){void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:'added'}),this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.__addObject(e)}},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){e.parent=void 0,e.dispatchEvent({type:'removed'}),this.children.splice(t,1);for(var r=this;r.parent!==void 0;)r=r.parent;r!==void 0&&r instanceof THREE.Scene&&r.__removeObject(e)}},traverse:function(e){e(this);for(var t=0,r=this.children.length;t<r;t++)this.children[t].traverse(e)},getObjectById:function(e,t){for(var r=0,a=this.children.length,o;r<a;r++){if(o=this.children[r],o.id===e)return o;if(!0===t&&(o=o.getObjectById(e,t),void 0!==o))return o}},getObjectByName:function(e,t){for(var r=0,a=this.children.length,o;r<a;r++){if(o=this.children[r],o.name===e)return o;if(!0===t&&(o=o.getObjectByName(e,t),void 0!==o))return o}},getChildByName:function(e,t){return console.warn('DEPRECATED: Object3D\'s .getChildByName() has been renamed to .getObjectByName().'),this.getObjectByName(e,t)},getDescendants:function(e){e===void 0&&(e=[]),Array.prototype.push.apply(e,this.children);for(var t=0,r=this.children.length;t<r;t++)this.children[t].getDescendants(e);return e},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===e)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,r=this.children.length;t<r;t++)this.children[t].updateMatrixWorld(e)},clone:function(e,t){if(void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),!0===t)for(var r=0,a;r<this.children.length;r++)a=this.children[r],e.add(a.clone());return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){function e(){if(B===d){var e=new THREE.RenderableObject;return c.push(e),d++,B++,e}return c[B++]}function t(){if(I===u){var e=new THREE.RenderableVertex;return m.push(e),u++,I++,e}return m[I++]}function r(){if(k===g){var e=new THREE.RenderableFace3;return h.push(e),g++,k++,e}return h[k++]}function a(){if(H===y){var e=new THREE.RenderableLine;return f.push(e),y++,H++,e}return f[H++]}function i(){if(j===v){var e=new THREE.RenderableSprite;return x.push(e),v++,j++,e}return x[j++]}function s(e,t){return e.z===t.z?e.id===t.id?0:e.id-t.id:t.z-e.z}function o(e,t){var r=0,a=1,o=e.z+e.w,i=t.z+t.w,n=-e.z+e.w,s=-t.z+t.w;return 0<=o&&0<=i&&0<=n&&0<=s||(0>o&&0>i||0>n&&0>s?!1:(0>o?r=p(r,o/(o-i)):0>i&&(a=l(a,o/(o-i))),0>n?r=p(r,n/(n-s)):0>s&&(a=l(a,n/(n-s))),!(a<r)&&(e.lerp(t,r),t.lerp(e,1-a),!0)))}var n=Math.abs,l=Math.min,p=Math.max,c=[],d=0,m=[],u=0,h=[],g=0,f=[],y=0,x=[],v=0,_={objects:[],sprites:[],lights:[],elements:[]},b=new THREE.Vector3,S=new THREE.Vector4,M=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),T=new THREE.Box3,C=[,,,],A=[,,,,],E=new THREE.Matrix4,w=new THREE.Matrix4,L=new THREE.Matrix4,P=new THREE.Matrix3,D=new THREE.Matrix3,R=new THREE.Vector3,F=new THREE.Frustum,V=new THREE.Vector4,U=new THREE.Vector4,z,B,N,I,O,k,G,H,W,j,X;this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),w.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),e.applyProjection(w)},this.unprojectVector=function(e,t){return t.projectionMatrixInverse.getInverse(t.projectionMatrix),w.multiplyMatrices(t.matrixWorld,t.projectionMatrixInverse),e.applyProjection(w)},this.pickingRay=function(e,t){e.z=-1;var r=new THREE.Vector3(e.x,e.y,1);return this.unprojectVector(e,t),this.unprojectVector(r,t),r.sub(e).normalize(),new THREE.Raycaster(e,r)};var Y=function(t){return z=e(),z.id=t.id,z.object=t,null===t.renderDepth?(b.setFromMatrixPosition(t.matrixWorld),b.applyProjection(w),z.z=b.z):z.z=t.renderDepth,z},q=function(e){if(!1!==e.visible){e instanceof THREE.Light?_.lights.push(e):e instanceof THREE.Mesh||e instanceof THREE.Line?(!1===e.frustumCulled||!0===F.intersectsObject(e))&&_.objects.push(Y(e)):e instanceof THREE.Sprite&&_.sprites.push(Y(e));for(var t=0,r=e.children.length;t<r;t++)q(e.children[t])}},K=function(e,t){B=0,_.objects.length=0,_.sprites.length=0,_.lights.length=0,q(e),!0===t&&_.objects.sort(s)};this.projectScene=function(e,d,h,g){var y=!1,x,b,A,v,z,f,B,Y,q,c,Q,u,Z,J,$,ee,te,re,ae,oe,ie,ne,se,le,pe;for(k=0,H=0,j=0,_.elements.length=0,!0===e.autoUpdate&&e.updateMatrixWorld(),void 0===d.parent&&d.updateMatrixWorld(),E.copy(d.matrixWorldInverse.getInverse(d.matrixWorld)),w.multiplyMatrices(d.projectionMatrix,E),D.getNormalMatrix(E),F.setFromMatrix(w),K(e,h),(x=0,b=_.objects.length);x<b;x++)if(Z=_.objects[x].object,X=Z.matrixWorld,I=0,Z instanceof THREE.Mesh){for(J=Z.geometry,$=J.vertices,ee=J.faces,ae=J.faceVertexUvs,P.getNormalMatrix(X),le=Z.material instanceof THREE.MeshFaceMaterial,pe=!0===le?Z.material:null,(A=0,v=$.length);A<v;A++){N=t(),N.positionWorld.copy($[A]).applyMatrix4(X),N.positionScreen.copy(N.positionWorld).applyMatrix4(w);var ce=1/N.positionScreen.w;N.positionScreen.x*=ce,N.positionScreen.y*=ce,N.positionScreen.z*=ce,N.visible=!(-1>N.positionScreen.x||1<N.positionScreen.x||-1>N.positionScreen.y||1<N.positionScreen.y||-1>N.positionScreen.z||1<N.positionScreen.z)}for(z=0,f=ee.length;z<f;z++){te=ee[z];var de=!0===le?pe.materials[te.materialIndex]:Z.material;if(void 0!==de){var me=de.side;if(ie=m[te.a],ne=m[te.b],se=m[te.c],C[0]=ie.positionScreen,C[1]=ne.positionScreen,C[2]=se.positionScreen,!(!0===ie.visible||!0===ne.visible||!0===se.visible||M.isIntersectionBox(T.setFromPoints(C))))continue;else if(y=0>(se.positionScreen.x-ie.positionScreen.x)*(ne.positionScreen.y-ie.positionScreen.y)-(se.positionScreen.y-ie.positionScreen.y)*(ne.positionScreen.x-ie.positionScreen.x),me===THREE.DoubleSide||y===(me===THREE.FrontSide))O=r(),O.id=Z.id,O.v1.copy(ie),O.v2.copy(ne),O.v3.copy(se);else continue;for(O.normalModel.copy(te.normal),!1===y&&(me===THREE.BackSide||me===THREE.DoubleSide)&&O.normalModel.negate(),O.normalModel.applyMatrix3(P).normalize(),O.normalModelView.copy(O.normalModel).applyMatrix3(D),O.centroidModel.copy(te.centroid).applyMatrix4(X),re=te.vertexNormals,(B=0,Y=l(re.length,3));B<Y;B++){var ue=O.vertexNormalsModel[B];ue.copy(re[B]),!1===y&&(me===THREE.BackSide||me===THREE.DoubleSide)&&ue.negate(),ue.applyMatrix3(P).normalize();var he=O.vertexNormalsModelView[B];he.copy(ue).applyMatrix3(D)}for(O.vertexNormalsLength=re.length,q=0,c=l(ae.length,3);q<c;q++)if(oe=ae[q][z],void 0!==oe)for(Q=0,u=oe.length;Q<u;Q++)O.uvs[q][Q]=oe[Q];O.color=te.color,O.material=de,R.copy(O.centroidModel).applyProjection(w),O.z=R.z,_.elements.push(O)}}}else if(Z instanceof THREE.Line){L.multiplyMatrices(w,X),$=Z.geometry.vertices,ie=t(),ie.positionScreen.copy($[0]).applyMatrix4(L);var ge=Z.type===THREE.LinePieces?2:1;for(A=1,v=$.length;A<v;A++)ie=t(),ie.positionScreen.copy($[A]).applyMatrix4(L),0<(A+1)%ge||(ne=m[I-2],V.copy(ie.positionScreen),U.copy(ne.positionScreen),!0===o(V,U)&&(V.multiplyScalar(1/V.w),U.multiplyScalar(1/U.w),G=a(),G.id=Z.id,G.v1.positionScreen.copy(V),G.v2.positionScreen.copy(U),G.z=p(V.z,U.z),G.material=Z.material,Z.material.vertexColors===THREE.VertexColors&&(G.vertexColors[0].copy(Z.geometry.colors[A]),G.vertexColors[1].copy(Z.geometry.colors[A-1])),_.elements.push(G)))}for(x=0,b=_.sprites.length;x<b;x++){Z=_.sprites[x].object,X=Z.matrixWorld,S.set(X.elements[12],X.elements[13],X.elements[14],1),S.applyMatrix4(w);var ce=1/S.w;S.z*=ce,-1<=S.z&&1>=S.z&&(W=i(),W.id=Z.id,W.x=S.x*ce,W.y=S.y*ce,W.z=S.z,W.object=Z,W.rotation=Z.rotation,W.scale.x=Z.scale.x*n(W.x-(S.x+d.projectionMatrix.elements[0])/(S.w+d.projectionMatrix.elements[12])),W.scale.y=Z.scale.y*n(W.y-(S.y+d.projectionMatrix.elements[5])/(S.w+d.projectionMatrix.elements[13])),W.material=Z.material,_.elements.push(W))}return!0===g&&_.elements.sort(s),_}},THREE.Face3=function(e,t,r,a,o,i){this.a=e,this.b=t,this.c=r,this.normal=a instanceof THREE.Vector3?a:new THREE.Vector3,this.vertexNormals=a instanceof Array?a:[],this.color=o instanceof THREE.Color?o:new THREE.Color,this.vertexColors=o instanceof Array?o:[],this.vertexTangents=[],this.materialIndex=i===void 0?0:i,this.centroid=new THREE.Vector3},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.centroid.copy(this.centroid),e.materialIndex=this.materialIndex;var t,r;for(t=0,r=this.vertexNormals.length;t<r;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,r=this.vertexColors.length;t<r;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,r=this.vertexTangents.length;t<r;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Face4=function(e,t,r,a,o,i,n){return console.warn('THREE.Face4 has been removed. A THREE.Face3 will be created instead.'),new THREE.Face3(e,t,r,o,i,n)},THREE.Geometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name='',this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.buffersNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=new THREE.Matrix3().getNormalMatrix(e),r=0,a=this.vertices.length,o;r<a;r++)o=this.vertices[r],o.applyMatrix4(e);for(var r=0,a=this.faces.length,i;r<a;r++){i=this.faces[r],i.normal.applyMatrix3(t).normalize();for(var n=0,s=i.vertexNormals.length;n<s;n++)i.vertexNormals[n].applyMatrix3(t).normalize();i.centroid.applyMatrix4(e)}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},computeCentroids:function(){var e,t,r;for(e=0,t=this.faces.length;e<t;e++)r=this.faces[e],r.centroid.set(0,0,0),r.centroid.add(this.vertices[r.a]),r.centroid.add(this.vertices[r.b]),r.centroid.add(this.vertices[r.c]),r.centroid.divideScalar(3)},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,r=0,a=this.faces.length;r<a;r++){var o=this.faces[r],i=this.vertices[o.a],n=this.vertices[o.b],s=this.vertices[o.c];e.subVectors(s,n),t.subVectors(i,n),e.cross(t),e.normalize(),o.normal.copy(e)}},computeVertexNormals:function(e){var t,r,a,o,i,n;if(this.__tmpVertices===void 0){for(this.__tmpVertices=Array(this.vertices.length),n=this.__tmpVertices,(t=0,r=this.vertices.length);t<r;t++)n[t]=new THREE.Vector3;for(a=0,o=this.faces.length;a<o;a++)i=this.faces[a],i.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]}else for(n=this.__tmpVertices,t=0,r=this.vertices.length;t<r;t++)n[t].set(0,0,0);if(e){var s=new THREE.Vector3,l=new THREE.Vector3,p=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,m,u,h;for(a=0,o=this.faces.length;a<o;a++)i=this.faces[a],m=this.vertices[i.a],u=this.vertices[i.b],h=this.vertices[i.c],s.subVectors(h,u),l.subVectors(m,u),s.cross(l),n[i.a].add(s),n[i.b].add(s),n[i.c].add(s)}else for(a=0,o=this.faces.length;a<o;a++)i=this.faces[a],n[i.a].add(i.normal),n[i.b].add(i.normal),n[i.c].add(i.normal);for(t=0,r=this.vertices.length;t<r;t++)n[t].normalize();for(a=0,o=this.faces.length;a<o;a++)i=this.faces[a],i.vertexNormals[0].copy(n[i.a]),i.vertexNormals[1].copy(n[i.b]),i.vertexNormals[2].copy(n[i.c])},computeMorphNormals:function(){var e,t,r,a,o;for(r=0,a=this.faces.length;r<a;r++)for(o=this.faces[r],o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]),(e=0,t=o.vertexNormals.length);e<t;e++)o.__originalVertexNormals[e]?o.__originalVertexNormals[e].copy(o.vertexNormals[e]):o.__originalVertexNormals[e]=o.vertexNormals[e].clone();var i=new THREE.Geometry;for(i.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var n=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals,l,p;for(r=0,a=this.faces.length;r<a;r++)o=this.faces[r],l=new THREE.Vector3,p={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},n.push(l),s.push(p)}var c=this.morphNormals[e];i.vertices=this.morphTargets[e].vertices,i.computeFaceNormals(),i.computeVertexNormals();var l,p;for(r=0,a=this.faces.length;r<a;r++)o=this.faces[r],l=c.faceNormals[r],p=c.vertexNormals[r],l.copy(o.normal),p.a.copy(o.vertexNormals[0]),p.b.copy(o.vertexNormals[1]),p.c.copy(o.vertexNormals[2])}for(r=0,a=this.faces.length;r<a;r++)o=this.faces[r],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals},computeTangents:function(){function e(e,t,r,a,i,n,c){x=e.vertices[t],v=e.vertices[r],_=e.vertices[a],S=y[i],M=y[n],T=y[c],C=v.x-x.x,A=_.x-x.x,E=v.y-x.y,L=_.y-x.y,P=v.z-x.z,D=_.z-x.z,R=M.x-S.x,F=T.x-S.x,V=M.y-S.y,U=T.y-S.y,z=1/(R*U-F*V),l.set((U*C-V*A)*z,(U*E-V*L)*z,(U*P-V*D)*z),p.set((R*A-F*C)*z,(R*L-F*E)*z,(R*D-F*P)*z),o[t].add(l),o[r].add(l),o[a].add(l),s[t].add(p),s[r].add(p),s[a].add(p)}var o=[],s=[],l=new THREE.Vector3,p=new THREE.Vector3,a=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,n,m,u,h,g,i,f,y,x,v,_,S,M,T,C,A,E,L,P,D,R,F,V,U,z,r,t,b;for(u=0,h=this.vertices.length;u<h;u++)o[u]=new THREE.Vector3,s[u]=new THREE.Vector3;for(n=0,m=this.faces.length;n<m;n++)f=this.faces[n],y=this.faceVertexUvs[0][n],e(this,f.a,f.b,f.c,0,1,2);var w=['a','b','c','d'];for(n=0,m=this.faces.length;n<m;n++)for(f=this.faces[n],g=0;g<Math.min(f.vertexNormals.length,3);g++)d.copy(f.vertexNormals[g]),i=f[w[g]],r=o[i],a.copy(r),a.sub(d.multiplyScalar(d.dot(r))).normalize(),c.crossVectors(f.vertexNormals[g],r),t=c.dot(s[i]),b=0>t?-1:1,f.vertexTangents[g]=new THREE.Vector4(a.x,a.y,a.z,b);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,a=t.length;r<a;r++)0<r&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){var e=Math.round,t={},r=[],a=[],o=10000,s,l,p,i,c,d,m,u;for(this.__tmpVertices=void 0,p=0,i=this.vertices.length;p<i;p++)s=this.vertices[p],l=e(s.x*o)+'_'+e(s.y*o)+'_'+e(s.z*o),void 0===t[l]?(t[l]=p,r.push(this.vertices[p]),a[p]=r.length-1):a[p]=a[t[l]];var h=[];for(p=0,i=this.faces.length;p<i;p++){c=this.faces[p],c.a=a[c.a],c.b=a[c.b],c.c=a[c.c],d=[c.a,c.b,c.c];for(var g=-1,f=0;3>f;f++)if(d[f]==d[(f+1)%3]){g=f,h.push(p);break}}for(p=h.length-1;0<=p;p--){var n=h[p];for(this.faces.splice(n,1),m=0,u=this.faceVertexUvs.length;m<u;m++)this.faceVertexUvs[m].splice(n,1)}var y=this.vertices.length-r.length;return this.vertices=r,y},clone:function(){for(var e=new THREE.Geometry,t=this.vertices,r=0,a=t.length;r<a;r++)e.vertices.push(t[r].clone());for(var o=this.faces,r=0,a=o.length;r<a;r++)e.faces.push(o[r].clone());for(var i=this.faceVertexUvs[0],r=0,a=i.length;r<a;r++){for(var n=i[r],s=[],l=0,p=n.length;l<p;l++)s.push(new THREE.Vector2(n[l].x,n[l].y));e.faceVertexUvs[0].push(s)}return e},dispose:function(){this.dispatchEvent({type:'dispose'})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name='',this.attributes={},this.dynamic=!0,this.offsets=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.morphTargets=[]},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(e,t,r,a){this.attributes[e]={itemSize:a,array:new t(r*a)}},applyMatrix:function(e){var t,r;if(this.attributes.position&&(t=this.attributes.position.array),this.attributes.normal&&(r=this.attributes.normal.array),void 0!==t&&(e.multiplyVector3Array(t),this.verticesNeedUpdate=!0),void 0!==r){var a=new THREE.Matrix3().getNormalMatrix(e);a.multiplyVector3Array(r),this.normalizeNormals(),this.normalsNeedUpdate=!0}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;if(e){var t=this.boundingBox,r,a,o;3<=e.length&&(t.min.x=t.max.x=e[0],t.min.y=t.max.y=e[1],t.min.z=t.max.z=e[2]);for(var n=3,i=e.length;n<i;n+=3)r=e[n],a=e[n+1],o=e[n+2],r<t.min.x?t.min.x=r:r>t.max.x&&(t.max.x=r),a<t.min.y?t.min.y=a:a>t.max.y&&(t.max.y=a),o<t.min.z?t.min.z=o:o>t.max.z&&(t.max.z=o)}(e===void 0||0===e.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0))},computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var r=this.attributes.position.array;if(r){for(var a=this.boundingSphere.center,o=0,i=r.length;o<i;o+=3)t.set(r[o],r[o+1],r[o+2]),e.addPoint(t);e.center(a);for(var n=0,o=0,i=r.length;o<i;o+=3)t.set(r[o],r[o+1],r[o+2]),n=Math.max(n,a.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(n)}}}(),computeVertexNormals:function(){if(this.attributes.position){var e=this.attributes.position.array.length,t,r,a,o;if(this.attributes.normal===void 0)this.attributes.normal={itemSize:3,array:new Float32Array(e)};else for(t=0,r=this.attributes.normal.array.length;t<r;t++)this.attributes.normal.array[t]=0;var i=this.attributes.position.array,n=this.attributes.normal.array,s=new THREE.Vector3,l=new THREE.Vector3,p=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3,m,u,h,g,f,y;if(this.attributes.index){var x=this.attributes.index.array,v=this.offsets;for(a=0,o=v.length;a<o;++a){var _=v[a].start,b=v[a].count,S=v[a].index;for(t=_,r=_+b;t<r;t+=3)m=S+x[t],u=S+x[t+1],h=S+x[t+2],g=i[3*m],f=i[3*m+1],y=i[3*m+2],s.set(g,f,y),g=i[3*u],f=i[3*u+1],y=i[3*u+2],l.set(g,f,y),g=i[3*h],f=i[3*h+1],y=i[3*h+2],p.set(g,f,y),c.subVectors(p,l),d.subVectors(s,l),c.cross(d),n[3*m]+=c.x,n[3*m+1]+=c.y,n[3*m+2]+=c.z,n[3*u]+=c.x,n[3*u+1]+=c.y,n[3*u+2]+=c.z,n[3*h]+=c.x,n[3*h+1]+=c.y,n[3*h+2]+=c.z}}else for(t=0,r=i.length;t<r;t+=9)g=i[t],f=i[t+1],y=i[t+2],s.set(g,f,y),g=i[t+3],f=i[t+4],y=i[t+5],l.set(g,f,y),g=i[t+6],f=i[t+7],y=i[t+8],p.set(g,f,y),c.subVectors(p,l),d.subVectors(s,l),c.cross(d),n[t]=c.x,n[t+1]=c.y,n[t+2]=c.z,n[t+3]=c.x,n[t+4]=c.y,n[t+5]=c.z,n[t+6]=c.x,n[t+7]=c.y,n[t+8]=c.z;this.normalizeNormals(),this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var e=this.attributes.normal.array,t=0,r=e.length,a,o,i,s;t<r;t+=3)a=e[t],o=e[t+1],i=e[t+2],s=1/Math.sqrt(a*a+o*o+i*i),e[t]*=s,e[t+1]*=s,e[t+2]*=s},computeTangents:function(){function e(e,t,r){x=s[3*e],v=s[3*e+1],_=s[3*e+2],S=s[3*t],M=s[3*t+1],T=s[3*t+2],C=s[3*r],A=s[3*r+1],E=s[3*r+2],L=p[2*e],P=p[2*e+1],D=p[2*t],R=p[2*t+1],F=p[2*r],V=p[2*r+1],U=S-x,z=C-x,B=M-v,N=A-v,I=T-_,O=E-_,k=D-L,G=F-L,H=R-P,W=V-P,X=1/(k*W-G*H),g.set((W*U-H*z)*X,(W*B-H*N)*X,(W*I-H*O)*X),f.set((k*z-G*U)*X,(k*N-G*B)*X,(k*O-G*I)*X),m[e].add(g),m[t].add(g),m[r].add(g),u[e].add(f),u[t].add(f),u[r].add(f)}function a(e){te.x=l[3*e],te.y=l[3*e+1],te.z=l[3*e+2],n.copy(te),w=m[e],$.copy(w),$.sub(te.multiplyScalar(te.dot(w))).normalize(),ee.crossVectors(n,w),t=ee.dot(u[e]),re=0>t?-1:1,d[4*e]=$.x,d[4*e+1]=$.y,d[4*e+2]=$.z,d[4*e+3]=re}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void console.warn('Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()');var o=this.attributes.index.array,s=this.attributes.position.array,l=this.attributes.normal.array,p=this.attributes.uv.array,c=s.length/3;if(this.attributes.tangent===void 0){this.attributes.tangent={itemSize:4,array:new Float32Array(4*c)}}for(var d=this.attributes.tangent.array,m=[],u=[],h=0;h<c;h++)m[h]=new THREE.Vector3,u[h]=new THREE.Vector3;var g=new THREE.Vector3,f=new THREE.Vector3,y=this.offsets,x,v,_,S,M,T,C,A,E,L,P,D,R,F,V,U,z,B,N,I,O,k,G,H,W,X,r,i,b,j,Y,q,K;for(b=0,j=y.length;b<j;++b){var Q=y[b].start,Z=y[b].count,J=y[b].index;for(r=Q,i=Q+Z;r<i;r+=3)Y=J+o[r],q=J+o[r+1],K=J+o[r+2],e(Y,q,K)}var $=new THREE.Vector3,ee=new THREE.Vector3,te=new THREE.Vector3,n=new THREE.Vector3,re,w,t;for(b=0,j=y.length;b<j;++b){var Q=y[b].start,Z=y[b].count,J=y[b].index;for(r=Q,i=Q+Z;r<i;r+=3)Y=J+o[r],q=J+o[r+1],K=J+o[r+2],a(Y),a(q),a(K)}this.hasTangents=!0,this.tangentsNeedUpdate=!0},clone:function(){var e=new THREE.BufferGeometry,t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var r in this.attributes){for(var a=this.attributes[r],o=a.array,n={itemSize:a.itemSize,numItems:a.numItems,array:null},s=0,i=t.length,l;s<i;s++)if(l=t[s],o instanceof l){n.array=new l(o);break}e.attributes[r]=n}for(var s=0,i=this.offsets.length,p;s<i;s++)p=this.offsets[s],e.offsets.push({start:p.start,index:p.index,count:p.count});return e},dispose:function(){this.dispatchEvent({type:'dispose'})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4,this.projectionMatrixInverse=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(e){return void 0===e&&(e=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e.projectionMatrixInverse.copy(this.projectionMatrixInverse),e},THREE.OrthographicCamera=function(e,t,r,a,o,i){THREE.Camera.call(this),this.left=e,this.right=t,this.top=r,this.bottom=a,this.near=o===void 0?0.1:o,this.far=i===void 0?2e3:i,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,e),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e},THREE.PerspectiveCamera=function(e,t,r,a){THREE.Camera.call(this),this.fov=e===void 0?50:e,this.aspect=t===void 0?1:t,this.near=r===void 0?0.1:r,this.far=a===void 0?2e3:a,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(e,t){t===void 0&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,r,a,o,i){this.fullWidth=e,this.fullHeight=t,this.x=r,this.y=a,this.width=o,this.height=i,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=Math.abs;if(this.fullWidth){var t=this.fullWidth/this.fullHeight,r=Math.tan(THREE.Math.degToRad(0.5*this.fov))*this.near,a=-r,o=t*a,i=e(t*r-o),n=e(r-a);this.projectionMatrix.makeFrustum(o+this.x*i/this.fullWidth,o+(this.x+this.width)*i/this.fullWidth,r-(this.y+this.height)*n/this.fullHeight,r-this.y*n/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,e),e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e},THREE.Light=function(e){THREE.Object3D.call(this),this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=t===void 0?1:t,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=0.5,this.quadraticAttenuation=0.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=t===void 0?1:t,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=0.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,0.99,0.998],this.shadowCascadeFarZ=[0.99,0.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e},THREE.HemisphereLight=function(e,t,r){THREE.Light.call(this,e),this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=r===void 0?1:r},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,r){THREE.Light.call(this,e),this.intensity=t===void 0?1:t,this.distance=r===void 0?0:r},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},THREE.SpotLight=function(e,t,r,a,o){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=t===void 0?1:t,this.distance=r===void 0?0:r,this.angle=a===void 0?Math.PI/3:a,this.exponent=o===void 0?10:o,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=0.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e},THREE.Loader=function(e){this.showStatus=e,this.statusDomElement=e?THREE.Loader.prototype.addStatusElement():null,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:'anonymous',addStatusElement:function(){var t=document.createElement('div');return t.style.position='absolute',t.style.right='0px',t.style.top='0px',t.style.fontSize='0.8em',t.style.textAlign='left',t.style.background='rgba(0,0,0,0.25)',t.style.color='#fff',t.style.width='120px',t.style.padding='0.5em 0.5em 0.5em 0.5em',t.style.zIndex=1e3,t.innerHTML='Loading ...',t},updateProgress:function(e){var t='Loaded ';t+=e.total?(100*e.loaded/e.total).toFixed(0)+'%':(e.loaded/1e3).toFixed(2)+' KB',this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split('/');return t.pop(),(1>t.length?'.':t.join('/'))+'/'},initMaterials:function(e,t){for(var r=[],a=0;a<e.length;++a)r[a]=THREE.Loader.prototype.createMaterial(e[a],t);return r},needsTangents:function(e){for(var t=0,r=e.length,a;t<r;t++)if(a=e[t],a instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(e,t){function r(e){var t=p(e)/s;return Math.floor(t)==t}function a(e){var t=p(e)/s;return Math.pow(2,Math.round(t))}function o(e,t){var o=new Image;o.onload=function(){if(!r(this.width)||!r(this.height)){var t=a(this.width),o=a(this.height);e.image.width=t,e.image.height=o,e.image.getContext('2d').drawImage(this,0,0,t,o)}else e.image=this;e.needsUpdate=!0},o.crossOrigin=l.crossOrigin,o.src=t}function i(e,r,a,i,n,s,l){var p=/\.dds$/i.test(a),c=t+'/'+a;if(p){var d=THREE.ImageUtils.loadCompressedTexture(c);e[r]=d}else{var d=document.createElement('canvas');e[r]=new THREE.Texture(d)}if(e[r].sourceFile=a,i&&(e[r].repeat.set(i[0],i[1]),1!==i[0]&&(e[r].wrapS=THREE.RepeatWrapping),1!==i[1]&&(e[r].wrapT=THREE.RepeatWrapping)),n&&e[r].offset.set(n[0],n[1]),s){var m={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==m[s[0]]&&(e[r].wrapS=m[s[0]]),void 0!==m[s[1]]&&(e[r].wrapT=m[s[1]])}l&&(e[r].anisotropy=l),p||o(e[r],c)}function n(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var s=Math.LN2,p=Math.log,l=this,c='MeshLambertMaterial',d={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var m=e.shading.toLowerCase();'phong'===m?c='MeshPhongMaterial':'basic'===m&&(c='MeshBasicMaterial')}if(void 0!==e.blending&&void 0!==THREE[e.blending]&&(d.blending=THREE[e.blending]),(void 0!==e.transparent||1>e.opacity)&&(d.transparent=e.transparent),void 0!==e.depthTest&&(d.depthTest=e.depthTest),void 0!==e.depthWrite&&(d.depthWrite=e.depthWrite),void 0!==e.visible&&(d.visible=e.visible),void 0!==e.flipSided&&(d.side=THREE.BackSide),void 0!==e.doubleSided&&(d.side=THREE.DoubleSide),void 0!==e.wireframe&&(d.wireframe=e.wireframe),void 0!==e.vertexColors&&('face'===e.vertexColors?d.vertexColors=THREE.FaceColors:e.vertexColors&&(d.vertexColors=THREE.VertexColors)),e.colorDiffuse?d.color=n(e.colorDiffuse):e.DbgColor&&(d.color=e.DbgColor),e.colorSpecular&&(d.specular=n(e.colorSpecular)),e.colorAmbient&&(d.ambient=n(e.colorAmbient)),e.transparency&&(d.opacity=e.transparency),e.specularCoef&&(d.shininess=e.specularCoef),e.mapDiffuse&&t&&i(d,'map',e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&i(d,'lightMap',e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&i(d,'bumpMap',e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&i(d,'normalMap',e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&i(d,'specularMap',e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapBumpScale&&(d.bumpScale=e.mapBumpScale),e.mapNormal){var u=THREE.ShaderLib.normalmap,h=THREE.UniformsUtils.clone(u.uniforms);h.tNormal.value=d.normalMap,e.mapNormalFactor&&h.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),d.map&&(h.tDiffuse.value=d.map,h.enableDiffuse.value=!0),d.specularMap&&(h.tSpecular.value=d.specularMap,h.enableSpecular.value=!0),d.lightMap&&(h.tAO.value=d.lightMap,h.enableAO.value=!0),h.uDiffuseColor.value.setHex(d.color),h.uSpecularColor.value.setHex(d.specular),h.uAmbientColor.value.setHex(d.ambient),h.uShininess.value=d.shininess,void 0!==d.opacity&&(h.uOpacity.value=d.opacity);var g={fragmentShader:u.fragmentShader,vertexShader:u.vertexShader,uniforms:h,lights:!0,fog:!0},f=new THREE.ShaderMaterial(g);d.transparent&&(f.transparent=!0)}else var f=new THREE[c](d);return void 0!==e.DbgName&&(f.name=e.DbgName),f}},THREE.XHRLoader=function(e){this.manager=e===void 0?THREE.DefaultLoadingManager:e},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,r,a){var o=this,i=new XMLHttpRequest;t!==void 0&&i.addEventListener('load',function(r){t(r.target.responseText),o.manager.itemEnd(e)},!1),r!==void 0&&i.addEventListener('progress',function(e){r(e)},!1),a!==void 0&&i.addEventListener('error',function(e){a(e)},!1),this.crossOrigin!==void 0&&(i.crossOrigin=this.crossOrigin),i.open('GET',e,!0),i.send(null),o.manager.itemStart(e)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.manager=e===void 0?THREE.DefaultLoadingManager:e},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,r,a){var o=this,i=document.createElement('img');return void 0!==t&&i.addEventListener('load',function(){o.manager.itemEnd(e),t(this)},!1),void 0!==r&&i.addEventListener('progress',function(e){r(e)},!1),void 0!==a&&i.addEventListener('error',function(e){a(e)},!1),void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin),i.src=e,o.manager.itemStart(e),i},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(e,t,r){this;r=r&&'string'===typeof r?r:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,r)},THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,r,a,o){var i=new XMLHttpRequest,n=0;i.onreadystatechange=function(){if(!(i.readyState===i.DONE))i.readyState===i.LOADING?o&&(0===n&&(n=i.getResponseHeader('Content-Length')),o({total:n,loaded:i.responseText.length})):i.readyState===i.HEADERS_RECEIVED&&void 0!==o&&(n=i.getResponseHeader('Content-Length'));else if(200===i.status||0===i.status){if(i.responseText){var s=JSON.parse(i.responseText),l=e.parse(s,a);r(l.geometry,l.materials)}else console.warn('THREE.JSONLoader: ['+t+'] seems to be unreachable or file there is empty');e.onLoadComplete()}else console.error('THREE.JSONLoader: Couldn\'t load ['+t+'] ['+i.status+']')},i.open('GET',t,!0),i.withCredentials=this.withCredentials,i.send(null)},THREE.JSONLoader.prototype.parse=function(e,t){var r=this,o=new THREE.Geometry,a=void 0===e.scale?1:1/e.scale;if(function(t){function r(e,t){return e&1<<t}var a=e.faces,n=e.vertices,s=e.normals,l=e.colors,p=0,c,i,d,m,h,g,f,y,x,_,b,S,M,T,C,A,E,w,L,P,D,R,F,V,U,z,u;if(void 0!==e.uvs){for(c=0;c<e.uvs.length;c++)e.uvs[c].length&&p++;for(c=0;c<p;c++)o.faceVertexUvs[c]=[]}for(m=0,h=n.length;m<h;)w=new THREE.Vector3,w.x=n[m++]*t,w.y=n[m++]*t,w.z=n[m++]*t,o.vertices.push(w);for(m=0,h=a.length;m<h;)if(_=a[m++],b=r(_,0),S=r(_,1),M=r(_,3),T=r(_,4),C=r(_,5),A=r(_,6),E=r(_,7),b){if(P=new THREE.Face3,P.a=a[m],P.b=a[m+1],P.c=a[m+3],D=new THREE.Face3,D.a=a[m+1],D.b=a[m+2],D.c=a[m+3],m+=4,S&&(x=a[m++],P.materialIndex=x,D.materialIndex=x),d=o.faces.length,M)for(c=0;c<p;c++)for(V=e.uvs[c],o.faceVertexUvs[c][d]=[],o.faceVertexUvs[c][d+1]=[],i=0;4>i;i++)y=a[m++],z=V[2*y],u=V[2*y+1],U=new THREE.Vector2(z,u),2!==i&&o.faceVertexUvs[c][d].push(U),0!==i&&o.faceVertexUvs[c][d+1].push(U);if(T&&(f=3*a[m++],P.normal.set(s[f++],s[f++],s[f]),D.normal.copy(P.normal)),C)for(c=0;4>c;c++)f=3*a[m++],F=new THREE.Vector3(s[f++],s[f++],s[f]),2!==c&&P.vertexNormals.push(F),0!==c&&D.vertexNormals.push(F);if(A&&(g=a[m++],R=l[g],P.color.setHex(R),D.color.setHex(R)),E)for(c=0;4>c;c++)g=a[m++],R=l[g],2!==c&&P.vertexColors.push(new THREE.Color(R)),0!==c&&D.vertexColors.push(new THREE.Color(R));o.faces.push(P),o.faces.push(D)}else{if(L=new THREE.Face3,L.a=a[m++],L.b=a[m++],L.c=a[m++],S&&(x=a[m++],L.materialIndex=x),d=o.faces.length,M)for(c=0;c<p;c++)for(V=e.uvs[c],o.faceVertexUvs[c][d]=[],i=0;3>i;i++)y=a[m++],z=V[2*y],u=V[2*y+1],U=new THREE.Vector2(z,u),o.faceVertexUvs[c][d].push(U);if(T&&(f=3*a[m++],L.normal.set(s[f++],s[f++],s[f])),C)for(c=0;3>c;c++)f=3*a[m++],F=new THREE.Vector3(s[f++],s[f++],s[f]),L.vertexNormals.push(F);if(A&&(g=a[m++],L.color.setHex(l[g])),E)for(c=0;3>c;c++)g=a[m++],L.vertexColors.push(new THREE.Color(l[g]));o.faces.push(L)}}(a),function(){var t,r,i,n,s,l,p,a,m,c;if(e.skinWeights)for(t=0,r=e.skinWeights.length;t<r;t+=2)i=e.skinWeights[t],n=e.skinWeights[t+1],s=0,l=0,o.skinWeights.push(new THREE.Vector4(i,n,s,l));if(e.skinIndices)for(t=0,r=e.skinIndices.length;t<r;t+=2)p=e.skinIndices[t],a=e.skinIndices[t+1],m=0,c=0,o.skinIndices.push(new THREE.Vector4(p,a,m,c));o.bones=e.bones,o.animation=e.animation,o.animations=e.animations}(),function(t){if(void 0!==e.morphTargets){var r,a,i,n,s,l;for(r=0,a=e.morphTargets.length;r<a;r++)for(o.morphTargets[r]={},o.morphTargets[r].name=e.morphTargets[r].name,o.morphTargets[r].vertices=[],s=o.morphTargets[r].vertices,l=e.morphTargets[r].vertices,(i=0,n=l.length);i<n;i+=3){var p=new THREE.Vector3;p.x=l[i]*t,p.y=l[i+1]*t,p.z=l[i+2]*t,s.push(p)}}if(void 0!==e.morphColors){var r,a,d,c,m,u,h;for(r=0,a=e.morphColors.length;r<a;r++)for(o.morphColors[r]={},o.morphColors[r].name=e.morphColors[r].name,o.morphColors[r].colors=[],m=o.morphColors[r].colors,u=e.morphColors[r].colors,(d=0,c=u.length);d<c;d+=3)h=new THREE.Color(16755200),h.setRGB(u[d],u[d+1],u[d+2]),m.push(h)}}(a),o.computeCentroids(),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===e.materials)return{geometry:o};var i=this.initMaterials(e.materials,t);return this.needsTangents(i)&&o.computeTangents(),{geometry:o,materials:i}},THREE.LoadingManager=function(e,t,r){var a=this,o=0,i=0;this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(){i++},this.itemEnd=function(e){o++,a.onProgress!==void 0&&a.onProgress(e,o,i),o===i&&a.onLoad!==void 0&&a.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=e===void 0?THREE.DefaultLoadingManager:e},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t){var r=this,a=new THREE.XHRLoader;a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(r.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.BufferGeometry,r=e.attributes,a=e.offsets,o=e.boundingSphere;for(var i in r){var n=r[i];t.attributes[i]={itemSize:n.itemSize,array:new self[n.type](n.array)}}return void 0!==a&&(t.offsets=JSON.parse(JSON.stringify(a))),void 0!==o&&(t.boundingSphere=new THREE.Sphere(new THREE.Vector3().fromArray(void 0===o.center?[0,0,0]:o.center),o.radius)),t}},THREE.GeometryLoader=function(e){this.manager=e===void 0?THREE.DefaultLoadingManager:e},THREE.GeometryLoader.prototype={constructor:THREE.GeometryLoader,load:function(e,t){var r=this,a=new THREE.XHRLoader;a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(r.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(){}},THREE.MaterialLoader=function(e){this.manager=e===void 0?THREE.DefaultLoadingManager:e},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t){var r=this,a=new THREE.XHRLoader;a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(r.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var r=0,a=e.materials.length;r<a;r++)t.materials.push(this.parse(e.materials[r]));return t}},THREE.ObjectLoader=function(e){this.manager=e===void 0?THREE.DefaultLoadingManager:e},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t){var r=this,a=new THREE.XHRLoader(r.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(r.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),r=this.parseMaterials(e.materials),a=this.parseObject(e.object,t,r);return a},parseGeometries:function(e){var t={};if(e!==void 0)for(var r=new THREE.JSONLoader,a=new THREE.BufferGeometryLoader,o=0,i=e.length;o<i;o++){var n=e[o],s;switch(n.type){case'PlaneGeometry':s=new THREE.PlaneGeometry(n.width,n.height,n.widthSegments,n.heightSegments);break;case'CircleGeometry':s=new THREE.CircleGeometry(n.radius,n.segments);break;case'CubeGeometry':s=new THREE.CubeGeometry(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments);break;case'CylinderGeometry':s=new THREE.CylinderGeometry(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded);break;case'SphereGeometry':s=new THREE.SphereGeometry(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength);break;case'IcosahedronGeometry':s=new THREE.IcosahedronGeometry(n.radius,n.detail);break;case'TorusGeometry':s=new THREE.TorusGeometry(n.radius,n.tube,n.radialSegments,n.tubularSegments,n.arc);break;case'TorusKnotGeometry':s=new THREE.TorusKnotGeometry(n.radius,n.tube,n.radialSegments,n.tubularSegments,n.p,n.q,n.heightScale);break;case'BufferGeometry':s=a.parse(n.data);break;case'Geometry':s=r.parse(n.data).geometry;}s.uuid=n.uuid,void 0!==n.name&&(s.name=n.name),t[n.uuid]=s}return t},parseMaterials:function(e){var t={};if(e!==void 0)for(var r=new THREE.MaterialLoader,a=0,o=e.length;a<o;a++){var i=e[a],n=r.parse(i);n.uuid=i.uuid,void 0!==i.name&&(n.name=i.name),t[i.uuid]=n}return t},parseObject:function(){var e=new THREE.Matrix4;return function(t,r,a){var o;switch(t.type){case'Scene':o=new THREE.Scene;break;case'PerspectiveCamera':o=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case'OrthographicCamera':o=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case'AmbientLight':o=new THREE.AmbientLight(t.color);break;case'DirectionalLight':o=new THREE.DirectionalLight(t.color,t.intensity);break;case'PointLight':o=new THREE.PointLight(t.color,t.intensity,t.distance);break;case'SpotLight':o=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case'HemisphereLight':o=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case'Mesh':var i=r[t.geometry],n=a[t.material];void 0===i&&console.error('THREE.ObjectLoader: Undefined geometry '+t.geometry),void 0===n&&console.error('THREE.ObjectLoader: Undefined material '+t.material),o=new THREE.Mesh(i,n);break;case'Sprite':var n=a[t.material];void 0===n&&console.error('THREE.ObjectLoader: Undefined material '+t.material),o=new THREE.Sprite(n);break;default:o=new THREE.Object3D;}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0===t.matrix?(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.scale&&o.scale.fromArray(t.scale)):(e.fromArray(t.matrix),e.decompose(o.position,o.quaternion,o.scale)),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var s in t.children)o.add(this.parseObject(t.children[s],r,a));return o}}()},THREE.SceneLoader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){},this.callbackSync=function(){},this.callbackProgress=function(){},this.geometryHandlers={},this.hierarchyHandlers={},this.addGeometryHandler('ascii',THREE.JSONLoader)},THREE.SceneLoader.prototype={constructor:THREE.SceneLoader,load:function(e,t){var r=this,a=new THREE.XHRLoader(r.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(a){r.parse(JSON.parse(a),t,e)})},setCrossOrigin:function(e){this.crossOrigin=e},addGeometryHandler:function(e,t){this.geometryHandlers[e]={loaderClass:t}},addHierarchyHandler:function(e,t){this.hierarchyHandlers[e]={loaderClass:t}},parse:function(e,t,r){function a(e,t){return'relativeToHTML'==t?e:y+'/'+e}function o(){s(D.scene,v.objects)}function s(e,t){var r,o,n,l,p;for(var c in t){var m=D.objects[c],u=t[c];if(void 0===m){if(u.type&&u.type in f.hierarchyHandlers){if(void 0===u.loading){var h={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1},g={};for(var y in u)y in h||(g[y]=u[y]);b=D.materials[u.material],u.loading=!0;var x=f.hierarchyHandlers[u.type].loaderObject;x.options?x.load(a(u.url,v.urlBaseType),d(c,e,b,u)):x.load(a(u.url,v.urlBaseType),d(c,e,b,u),g)}}else if(void 0!==u.geometry){if(_=D.geometries[u.geometry],_){var M=!1;if(b=D.materials[u.material],M=b instanceof THREE.ShaderMaterial,o=u.position,n=u.rotation,l=u.scale,r=u.matrix,p=u.quaternion,u.material||(b=new THREE.MeshFaceMaterial(D.face_materials[u.geometry])),b instanceof THREE.MeshFaceMaterial&&0===b.materials.length&&(b=new THREE.MeshFaceMaterial(D.face_materials[u.geometry])),b instanceof THREE.MeshFaceMaterial)for(var T=0;T<b.materials.length;T++)M=M||b.materials[T]instanceof THREE.ShaderMaterial;M&&_.computeTangents(),u.skin?m=new THREE.SkinnedMesh(_,b):u.morph?(m=new THREE.MorphAnimMesh(_,b),void 0!==u.duration&&(m.duration=u.duration),void 0!==u.time&&(m.time=u.time),void 0!==u.mirroredLoop&&(m.mirroredLoop=u.mirroredLoop),b.morphNormals&&_.computeMorphNormals()):m=new THREE.Mesh(_,b),m.name=c,r?(m.matrixAutoUpdate=!1,m.matrix.set(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])):(m.position.fromArray(o),p?m.quaternion.fromArray(p):m.rotation.fromArray(n),m.scale.fromArray(l)),m.visible=u.visible,m.castShadow=u.castShadow,m.receiveShadow=u.receiveShadow,e.add(m),D.objects[c]=m}}else if('AmbientLight'===u.type||'PointLight'===u.type||'DirectionalLight'===u.type||'SpotLight'===u.type||'HemisphereLight'===u.type||'AreaLight'===u.type){var i=u.color,C=u.intensity,E=u.distance,w=u.position,L=u.rotation;switch(u.type){case'AmbientLight':A=new THREE.AmbientLight(i);break;case'PointLight':A=new THREE.PointLight(i,C,E),A.position.fromArray(w);break;case'DirectionalLight':A=new THREE.DirectionalLight(i,C),A.position.fromArray(u.direction);break;case'SpotLight':A=new THREE.SpotLight(i,C,E,1),A.angle=u.angle,A.position.fromArray(w),A.target.set(w[0],w[1]-E,w[2]),A.target.applyEuler(new THREE.Euler(L[0],L[1],L[2],'XYZ'));break;case'HemisphereLight':A=new THREE.DirectionalLight(i,C,E),A.target.set(w[0],w[1]-E,w[2]),A.target.applyEuler(new THREE.Euler(L[0],L[1],L[2],'XYZ'));break;case'AreaLight':A=new THREE.AreaLight(i,C),A.position.fromArray(w),A.width=u.size,A.height=u.size_y;}e.add(A),A.name=c,D.lights[c]=A,D.objects[c]=A}else'PerspectiveCamera'===u.type||'OrthographicCamera'===u.type?(o=u.position,n=u.rotation,p=u.quaternion,'PerspectiveCamera'===u.type?S=new THREE.PerspectiveCamera(u.fov,u.aspect,u.near,u.far):'OrthographicCamera'===u.type&&(S=new THREE.OrthographicCamera(u.left,u.right,u.top,u.bottom,u.near,u.far)),S.name=c,S.position.fromArray(o),void 0===p?void 0!==n&&S.rotation.fromArray(n):S.quaternion.fromArray(p),e.add(S),D.cameras[c]=S,D.objects[c]=S):(o=u.position,n=u.rotation,l=u.scale,p=u.quaternion,m=new THREE.Object3D,m.name=c,m.position.fromArray(o),p?m.quaternion.fromArray(p):m.rotation.fromArray(n),m.scale.fromArray(l),m.visible=void 0!==u.visible&&u.visible,e.add(m),D.objects[c]=m,D.empties[c]=m);if(m){if(void 0!==u.userData)for(var P in u.userData){var R=u.userData[P];m.userData[P]=R}if(void 0!==u.groups)for(var T=0,F;T<u.groups.length;T++)F=u.groups[T],void 0===D.groups[F]&&(D.groups[F]=[]),D.groups[F].push(c)}}void 0!==m&&void 0!==u.children&&s(m,u.children)}}function l(e,t,r){D.geometries[r]=e,D.face_materials[r]=t,o()}function p(e,t,a,i,n){var l=n.position,p=n.rotation,r=n.quaternion,c=n.scale;e.position.fromArray(l),r?e.quaternion.fromArray(r):e.rotation.fromArray(p),e.scale.fromArray(c),i&&e.traverse(function(e){e.material=i});var s=void 0===n.visible||n.visible;e.traverse(function(e){e.visible=s}),a.add(e),e.name=t,D.objects[t]=e,o()}function c(e){return function(t,r){t.name=e,l(t,r,e),E-=1,f.onLoadComplete(),u()}}function d(e,t,r,a){return function(o){var i;i=o.content?o.content:o.dae?o.scene:o,p(i,e,t,r,a),E-=1,f.onLoadComplete(),u()}}function m(e){return function(t,r){t.name=e,D.geometries[e]=t,D.face_materials[e]=r}}function u(){var e={totalModels:L,totalTextures:P,loadedModels:L-E,loadedTextures:P-w};f.callbackProgress(e,D),f.onLoadProgress(),0===E&&0===w&&(h(),t(D))}function h(){for(var e=0;e<x.length;e++){var t=x[e],r=D.objects[t.targetName];r?t.object.target=r:(t.object.target=new THREE.Object3D,D.scene.add(t.object.target)),t.object.target.userData.targetInverse=t.object}}function g(e,t){if(t(e),void 0!==e.children)for(var r in e.children)g(e.children[r],t)}var f=this,y=THREE.Loader.prototype.extractUrlBase(r),x=[],v=e,_,b,S,M,T,C,A,E,w,L,P,D;for(var R in this.geometryHandlers){var F=this.geometryHandlers[R].loaderClass;this.geometryHandlers[R].loaderObject=new F}for(var R in this.hierarchyHandlers){var F=this.hierarchyHandlers[R].loaderClass;this.hierarchyHandlers[R].loaderObject=new F}if(E=0,w=0,D={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}},v.transform){var V=v.transform.position,U=v.transform.rotation,z=v.transform.scale;V&&D.scene.position.fromArray(V),U&&D.scene.rotation.fromArray(U),z&&D.scene.scale.fromArray(z),(V||U||z)&&(D.scene.updateMatrix(),D.scene.updateMatrixWorld())}var B=function(e){w-=e,u(),f.onLoadComplete()},N=function(e){return function(){B(e)}},I,O;for(I in v.fogs)O=v.fogs[I],'linear'===O.type?M=new THREE.Fog(0,O.near,O.far):'exp2'===O.type&&(M=new THREE.FogExp2(0,O.density)),C=O.color,M.color.setRGB(C[0],C[1],C[2]),D.fogs[I]=M;var k,G;for(k in v.geometries)G=v.geometries[k],G.type in this.geometryHandlers&&(E+=1,f.onLoadStart());for(var H in v.objects)g(v.objects[H],function(e){e.type&&e.type in f.hierarchyHandlers&&(E+=1,f.onLoadStart())});for(k in L=E,v.geometries)if(G=v.geometries[k],'cube'===G.type)_=new THREE.CubeGeometry(G.width,G.height,G.depth,G.widthSegments,G.heightSegments,G.depthSegments),_.name=k,D.geometries[k]=_;else if('plane'===G.type)_=new THREE.PlaneGeometry(G.width,G.height,G.widthSegments,G.heightSegments),_.name=k,D.geometries[k]=_;else if('sphere'===G.type)_=new THREE.SphereGeometry(G.radius,G.widthSegments,G.heightSegments),_.name=k,D.geometries[k]=_;else if('cylinder'===G.type)_=new THREE.CylinderGeometry(G.topRad,G.botRad,G.height,G.radSegs,G.heightSegs),_.name=k,D.geometries[k]=_;else if('torus'===G.type)_=new THREE.TorusGeometry(G.radius,G.tube,G.segmentsR,G.segmentsT),_.name=k,D.geometries[k]=_;else if('icosahedron'===G.type)_=new THREE.IcosahedronGeometry(G.radius,G.subdivisions),_.name=k,D.geometries[k]=_;else if(G.type in this.geometryHandlers){var W={};for(var j in G)'type'!==j&&'url'!==j&&(W[j]=G[j]);var X=this.geometryHandlers[G.type].loaderObject;X.load(a(G.url,v.urlBaseType),c(k),W)}else if('embedded'===G.type){var Y=v.embeds[G.id];if(Y.metadata=v.metadata,Y){var q=this.geometryHandlers.ascii.loaderObject,K=q.parse(Y,'');m(k)(K.geometry,K.materials)}}var Q,Z;for(Q in v.textures)if(Z=v.textures[Q],Z.url instanceof Array){w+=Z.url.length;for(var J=0;J<Z.url.length;J++)f.onLoadStart()}else w+=1,f.onLoadStart();for(Q in P=w,v.textures){if(Z=v.textures[Q],void 0!==Z.mapping&&void 0!==THREE[Z.mapping]&&(Z.mapping=new THREE[Z.mapping]),Z.url instanceof Array){for(var n=Z.url.length,$=[],ee=0;ee<n;ee++)$[ee]=a(Z.url[ee],v.urlBaseType);var i=/\.dds$/i.test($[0]);T=i?THREE.ImageUtils.loadCompressedTextureCube($,Z.mapping,N(n)):THREE.ImageUtils.loadTextureCube($,Z.mapping,N(n))}else{var i=/\.dds$/i.test(Z.url),te=a(Z.url,v.urlBaseType),re=N(1);if(T=i?THREE.ImageUtils.loadCompressedTexture(te,Z.mapping,re):THREE.ImageUtils.loadTexture(te,Z.mapping,re),void 0!==THREE[Z.minFilter]&&(T.minFilter=THREE[Z.minFilter]),void 0!==THREE[Z.magFilter]&&(T.magFilter=THREE[Z.magFilter]),Z.anisotropy&&(T.anisotropy=Z.anisotropy),Z.repeat&&(T.repeat.set(Z.repeat[0],Z.repeat[1]),1!==Z.repeat[0]&&(T.wrapS=THREE.RepeatWrapping),1!==Z.repeat[1]&&(T.wrapT=THREE.RepeatWrapping)),Z.offset&&T.offset.set(Z.offset[0],Z.offset[1]),Z.wrap){var ae={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==ae[Z.wrap[0]]&&(T.wrapS=ae[Z.wrap[0]]),void 0!==ae[Z.wrap[1]]&&(T.wrapT=ae[Z.wrap[1]])}}D.textures[Q]=T}var oe,ie,ne;for(oe in v.materials){for(ne in ie=v.materials[oe],ie.parameters)if('envMap'===ne||'map'===ne||'lightMap'===ne||'bumpMap'===ne)ie.parameters[ne]=D.textures[ie.parameters[ne]];else if('shading'===ne)ie.parameters[ne]='flat'===ie.parameters[ne]?THREE.FlatShading:THREE.SmoothShading;else if('side'===ne)ie.parameters[ne]='double'==ie.parameters[ne]?THREE.DoubleSide:'back'==ie.parameters[ne]?THREE.BackSide:THREE.FrontSide;else if('blending'===ne)ie.parameters[ne]=ie.parameters[ne]in THREE?THREE[ie.parameters[ne]]:THREE.NormalBlending;else if('combine'===ne)ie.parameters[ne]=ie.parameters[ne]in THREE?THREE[ie.parameters[ne]]:THREE.MultiplyOperation;else if('vertexColors'===ne)'face'==ie.parameters[ne]?ie.parameters[ne]=THREE.FaceColors:ie.parameters[ne]&&(ie.parameters[ne]=THREE.VertexColors);else if('wrapRGB'===ne){var se=ie.parameters[ne];ie.parameters[ne]=new THREE.Vector3(se[0],se[1],se[2])}if(void 0!==ie.parameters.opacity&&1>ie.parameters.opacity&&(ie.parameters.transparent=!0),ie.parameters.normalMap){var le=THREE.ShaderLib.normalmap,pe=THREE.UniformsUtils.clone(le.uniforms),ce=ie.parameters.color,de=ie.parameters.specular,me=ie.parameters.ambient,ue=ie.parameters.shininess;pe.tNormal.value=D.textures[ie.parameters.normalMap],ie.parameters.normalScale&&pe.uNormalScale.value.set(ie.parameters.normalScale[0],ie.parameters.normalScale[1]),ie.parameters.map&&(pe.tDiffuse.value=ie.parameters.map,pe.enableDiffuse.value=!0),ie.parameters.envMap&&(pe.tCube.value=ie.parameters.envMap,pe.enableReflection.value=!0,pe.uReflectivity.value=ie.parameters.reflectivity),ie.parameters.lightMap&&(pe.tAO.value=ie.parameters.lightMap,pe.enableAO.value=!0),ie.parameters.specularMap&&(pe.tSpecular.value=D.textures[ie.parameters.specularMap],pe.enableSpecular.value=!0),ie.parameters.displacementMap&&(pe.tDisplacement.value=D.textures[ie.parameters.displacementMap],pe.enableDisplacement.value=!0,pe.uDisplacementBias.value=ie.parameters.displacementBias,pe.uDisplacementScale.value=ie.parameters.displacementScale),pe.uDiffuseColor.value.setHex(ce),pe.uSpecularColor.value.setHex(de),pe.uAmbientColor.value.setHex(me),pe.uShininess.value=ue,ie.parameters.opacity&&(pe.uOpacity.value=ie.parameters.opacity);var he={fragmentShader:le.fragmentShader,vertexShader:le.vertexShader,uniforms:pe,lights:!0,fog:!0};b=new THREE.ShaderMaterial(he)}else b=new THREE[ie.type](ie.parameters);b.name=oe,D.materials[oe]=b}for(oe in v.materials)if(ie=v.materials[oe],ie.parameters.materials){for(var ge=[],ee=0,fe;ee<ie.parameters.materials.length;ee++)fe=ie.parameters.materials[ee],ge.push(D.materials[fe]);D.materials[oe].materials=ge}o(),D.cameras&&v.defaults.camera&&(D.currentCamera=D.cameras[v.defaults.camera]),D.fogs&&v.defaults.fog&&(D.scene.fog=D.fogs[v.defaults.fog]),f.callbackSync(D),u()}},THREE.TextureLoader=function(e){this.manager=e===void 0?THREE.DefaultLoadingManager:e},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t){var r=this,a=new THREE.ImageLoader(r.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){var r=new THREE.Texture(e);r.needsUpdate=!0,t!==void 0&&t(r)})},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.Material=function(){this.id=THREE.MaterialIdCount++,this.uuid=THREE.Math.generateUUID(),this.name='',this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0===r){console.warn('THREE.Material: \''+t+'\' parameter is undefined.');continue}if(t in this){var a=this[t];a instanceof THREE.Color?a.set(r):a instanceof THREE.Vector3&&r instanceof THREE.Vector3?a.copy(r):'overdraw'==t?this[t]=+r:this[t]=r}}},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:'dispose'})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap='round',this.linejoin='round',this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=0.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=0.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.perPixel=!0,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=0.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.perPixel=this.perPixel,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype.clone=function(){for(var e=new THREE.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e},THREE.ParticleSystemMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.ParticleSystemMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleSystemMaterial.prototype.clone=function(){var e=new THREE.ParticleSystemMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleBasicMaterial=THREE.ParticleSystemMaterial,THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.fragmentShader='void main() {}',this.vertexShader='void main() {}',this.uniforms={},this.defines={},this.attributes=null,this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName='position',this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.uvOffset=new THREE.Vector2(0,0),this.uvScale=new THREE.Vector2(1,1),this.setValues(e)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.uvOffset.copy(this.uvOffset),e.uvScale.copy(this.uvScale),e.fog=this.fog,e},THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.program=this.program,e},THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial,THREE.Texture=function(e,t,r,a,o,i,n,s,l){this.id=THREE.TextureIdCount++,this.uuid=THREE.Math.generateUUID(),this.name='',this.image=e,this.mipmaps=[],this.mapping=t===void 0?new THREE.UVMapping:t,this.wrapS=r===void 0?THREE.ClampToEdgeWrapping:r,this.wrapT=a===void 0?THREE.ClampToEdgeWrapping:a,this.magFilter=o===void 0?THREE.LinearFilter:o,this.minFilter=i===void 0?THREE.LinearMipMapLinearFilter:i,this.anisotropy=l===void 0?1:l,this.format=n===void 0?THREE.RGBAFormat:n,this.type=s===void 0?THREE.UnsignedByteType:s,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},dispose:function(){this.dispatchEvent({type:'dispose'})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CompressedTexture=function(e,t,r,a,o,i,n,s,l,p,c){THREE.Texture.call(this,null,i,n,s,l,p,a,o,c),this.image={width:t,height:r},this.mipmaps=e,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,r,a,o,i,n,s,l,p,c){THREE.Texture.call(this,null,i,n,s,l,p,a,o,c),this.image={data:e,width:t,height:r}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){THREE.Object3D.call(this),this.geometry=e===void 0?new THREE.Geometry:e,this.material=t===void 0?new THREE.ParticleSystemMaterial({color:16777215*Math.random()}):t,this.sortParticles=!1,this.frustumCulled=!1},THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype),THREE.ParticleSystem.prototype.clone=function(e){return void 0===e&&(e=new THREE.ParticleSystem(this.geometry,this.material)),e.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,e),e},THREE.Line=function(e,t,r){THREE.Object3D.call(this),this.geometry=e===void 0?new THREE.Geometry:e,this.material=t===void 0?new THREE.LineBasicMaterial({color:16777215*Math.random()}):t,this.type=r===void 0?THREE.LineStrip:r},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.type)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.geometry=e===void 0?new THREE.Geometry:e,this.material=t===void 0?new THREE.MeshBasicMaterial({color:16777215*Math.random()}):t,this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0===this.morphTargetDictionary[e]?(console.log('THREE.Mesh.getMorphTargetIndexByName: morph target '+e+' does not exist. Returning 0.'),0):this.morphTargetDictionary[e]},THREE.Mesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e,this.skinMatrix=new THREE.Matrix4},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.update=function(e,t){this.matrixAutoUpdate&&(t|=this.updateMatrix()),(t||this.matrixWorldNeedsUpdate)&&(e?this.skinMatrix.multiplyMatrices(e,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);var r=this.children.length,a;for(a=0;a<r;a++)this.children[a].update(this.skinMatrix,t)},THREE.SkinnedMesh=function(e,t,r){THREE.Mesh.call(this,e,t),this.useVertexTexture=!(r!==void 0)||r,this.identityMatrix=new THREE.Matrix4,this.bones=[],this.boneMatrices=[];var a,o,i,n,l,p;if(this.geometry&&this.geometry.bones!==void 0){for(a=0;a<this.geometry.bones.length;a++)i=this.geometry.bones[a],n=i.pos,l=i.rotq,p=i.scl,o=this.addBone(),o.name=i.name,o.position.set(n[0],n[1],n[2]),o.quaternion.set(l[0],l[1],l[2],l[3]),void 0===p?o.scale.set(1,1,1):o.scale.set(p[0],p[1],p[2]);for(a=0;a<this.bones.length;a++)i=this.geometry.bones[a],o=this.bones[a],-1===i.parent?this.add(o):this.bones[i.parent].add(o);var s=this.bones.length;if(this.useVertexTexture){var c;c=256<s?64:64<s?32:16<s?16:8,this.boneTextureWidth=c,this.boneTextureHeight=c,this.boneMatrices=new Float32Array(4*(this.boneTextureWidth*this.boneTextureHeight)),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*s);this.pose()}},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.addBone=function(e){return void 0===e&&(e=new THREE.Bone(this)),this.bones.push(e),e},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){var e=new THREE.Matrix4;return function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var r=0,a=this.children.length,o;r<a;r++)o=this.children[r],o instanceof THREE.Bone?o.update(this.identityMatrix,!1):o.updateMatrixWorld(!0);if(this.boneInverses==void 0){this.boneInverses=[];for(var i=0,n=this.bones.length,s;i<n;i++)s=new THREE.Matrix4,s.getInverse(this.bones[i].skinMatrix),this.boneInverses.push(s)}for(var i=0,n=this.bones.length;i<n;i++)e.multiplyMatrices(this.bones[i].skinMatrix,this.boneInverses[i]),e.flattenToArrayOffset(this.boneMatrices,16*i);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0),this.normalizeSkinWeights()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],r=1/t.lengthManhattan();r===Infinity?t.set(1):t.multiplyScalar(r)}else;},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t=e.animations,r=/([a-z]+)(\d+)/,a=0,o=e.morphTargets.length,i;a<o;a++){var n=e.morphTargets[a],s=n.name.match(r);if(s&&1<s.length){var l=s[1],p=s[2];t[l]||(t[l]={start:Infinity,end:-Infinity});var c=t[l];a<c.start&&(c.start=a),a>c.end&&(c.end=a),i||(i=l)}}e.firstAnimation=i},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,r){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:r}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var r=this.geometry.animations[e];r?(this.setFrameRange(r.start,r.end),this.duration=1e3*((r.end-r.start)/t),this.time=0):console.warn('animation['+e+'] undefined')},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||0>this.time)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)):(this.time%=this.duration,0>this.time&&(this.time+=this.duration));var r=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1);r!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[r]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=r);var a=this.time%t/t;this.directionBackwards&&(a=1-a),this.morphTargetInfluences[this.currentKeyframe]=a,this.morphTargetInfluences[this.lastKeyframe]=1-a},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(e,t){t===void 0&&(t=0),t=Math.abs(t);for(var r=0;r<this.objects.length&&!(t<this.objects[r].distance);r++);this.objects.splice(r,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,r=this.objects.length;t<r&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r){if(1<this.objects.length){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);this.objects[0].object.visible=!0;for(var o=1,i=this.objects.length;o<i&&a>=this.objects[o].distance;o++)this.objects[o-1].object.visible=!1,this.objects[o].object.visible=!0;for(;o<i;o++)this.objects[o].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(){},THREE.Sprite=function(e){THREE.Object3D.call(this),this.material=e===void 0?new THREE.SpriteMaterial:e},THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Particle=THREE.Sprite,THREE.Scene=function(){THREE.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,this.matrixAutoUpdate=!1,this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.__addObject=function(e){if(e instanceof THREE.Light)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(!(e instanceof THREE.Camera||e instanceof THREE.Bone)){this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(t,1)}for(var r=0;r<e.children.length;r++)this.__addObject(e.children[r])},THREE.Scene.prototype.__removeObject=function(e){if(e instanceof THREE.Light){var t=this.__lights.indexOf(e);if(-1!==t&&this.__lights.splice(t,1),e.shadowCascadeArray)for(var r=0;r<e.shadowCascadeArray.length;r++)this.__removeObject(e.shadowCascadeArray[r])}else if(!(e instanceof THREE.Camera)){this.__objectsRemoved.push(e);var t=this.__objectsAdded.indexOf(e);-1!==t&&this.__objectsAdded.splice(t,1)}for(var a=0;a<e.children.length;a++)this.__removeObject(e.children[a])},THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,r){this.name='',this.color=new THREE.Color(e),this.near=t===void 0?1:t,this.far=r===void 0?1e3:r},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name='',this.color=new THREE.Color(e),this.density=t===void 0?2.5e-4:t},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.CanvasRenderer=function(e){function t(){oe.setRGB(0,0,0),ie.setRGB(0,0,0),ne.setRGB(0,0,0);for(var e=0,t=de.length;e<t;e++){var r=de[e],a=r.color;r instanceof THREE.AmbientLight?oe.add(a):r instanceof THREE.DirectionalLight?ie.add(a):r instanceof THREE.PointLight&&ne.add(a)}}function r(e,t,r){for(var a=0,o=de.length,i;a<o;a++)if(i=de[a],J.copy(i.color),i instanceof THREE.DirectionalLight){var n=se.setFromMatrixPosition(i.matrixWorld).normalize(),s=t.dot(n);if(0>=s)continue;s*=i.intensity,r.add(J.multiplyScalar(s))}else if(i instanceof THREE.PointLight){var n=se.setFromMatrixPosition(i.matrixWorld),s=t.dot(se.subVectors(n,e).normalize());if(0>=s)continue;if(s*=0==i.distance?1:1-Math.min(e.distanceTo(n)/i.distance,1),0==s)continue;s*=i.intensity,r.add(J.multiplyScalar(s))}}function a(e,t,r){u(r.opacity),h(r.blending);var a=t.scale.x*L,o=t.scale.y*P,i=0.5*b(a*a+o*o);if(ae.min.set(e.x-i,e.y-i),ae.max.set(e.x+i,e.y+i),!1===te.isIntersectionBox(ae))return void ae.makeEmpty();if(!(r instanceof THREE.SpriteMaterial||r instanceof THREE.ParticleSystemMaterial))r instanceof THREE.SpriteCanvasMaterial&&(x(r.color.getStyle()),v(r.color.getStyle()),D.save(),D.translate(e.x,e.y),D.rotate(-t.rotation),D.scale(a,o),r.program(D),D.restore());else if(null!==r.map){var n=r.map.image;D.save(),D.translate(e.x,e.y),D.rotate(r.rotation),D.scale(a,-o),D.drawImage(n,0,0,n.width,n.height,-0.5,-0.5,1,1),D.restore()}else v(r.color.getStyle()),D.save(),D.translate(e.x,e.y),D.rotate(r.rotation),D.scale(a,-o),D.fillRect(-0.5,-0.5,1,1),D.restore()}function o(e,t,r,a){if(u(a.opacity),h(a.blending),D.beginPath(),D.moveTo(e.positionScreen.x,e.positionScreen.y),D.lineTo(t.positionScreen.x,t.positionScreen.y),a instanceof THREE.LineBasicMaterial){if(g(a.linewidth),f(a.linecap),y(a.linejoin),a.vertexColors!==THREE.VertexColors)x(a.color.getStyle());else{var o=r.vertexColors[0].getStyle(),i=r.vertexColors[1].getStyle();if(o===i)x(o);else{try{var n=D.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);n.addColorStop(0,o),n.addColorStop(1,i)}catch(e){n=o}x(n)}}D.stroke(),ae.expandByScalar(2*a.linewidth)}else a instanceof THREE.LineDashedMaterial&&(g(a.linewidth),f(a.linecap),y(a.linejoin),x(a.color.getStyle()),_(a.dashSize,a.gapSize),D.stroke(),ae.expandByScalar(2*a.linewidth),_(null,null))}function i(e,t,a,o,i,m,g,f){if(T.info.render.vertices+=3,T.info.render.faces++,u(f.opacity),h(f.blending),fe=e.positionScreen.x,ye=e.positionScreen.y,xe=t.positionScreen.x,ve=t.positionScreen.y,_e=a.positionScreen.x,be=a.positionScreen.y,n(fe,ye,xe,ve,_e,be),(f instanceof THREE.MeshLambertMaterial||f instanceof THREE.MeshPhongMaterial)&&null===f.map)Q.copy(f.color),Z.copy(f.emissive),f.vertexColors===THREE.FaceColors&&Q.multiply(g.color),!1===f.wireframe&&f.shading===THREE.SmoothShading&&3===g.vertexNormalsLength?(X.copy(oe),Y.copy(oe),q.copy(oe),r(g.v1.positionWorld,g.vertexNormalsModel[0],X),r(g.v2.positionWorld,g.vertexNormalsModel[1],Y),r(g.v3.positionWorld,g.vertexNormalsModel[2],q),X.multiply(Q).add(Z),Y.multiply(Q).add(Z),q.multiply(Q).add(Z),K.addColors(Y,q).multiplyScalar(0.5),Te=d(X,Y,q,K),c(fe,ye,xe,ve,_e,be,0,0,1,0,0,1,Te)):(j.copy(oe),r(g.centroidModel,g.normalModel,j),j.multiply(Q).add(Z),!0===f.wireframe?s(j,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(j));else if(f instanceof THREE.MeshBasicMaterial||f instanceof THREE.MeshLambertMaterial||f instanceof THREE.MeshPhongMaterial)null===f.map?null===f.envMap?(j.copy(f.color),f.vertexColors===THREE.FaceColors&&j.multiply(g.color),!0===f.wireframe?s(j,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(j)):f.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(se.copy(g.vertexNormalsModelView[o]),Ae=0.5*se.x+0.5,Ee=0.5*se.y+0.5,se.copy(g.vertexNormalsModelView[i]),we=0.5*se.x+0.5,Le=0.5*se.y+0.5,se.copy(g.vertexNormalsModelView[m]),Pe=0.5*se.x+0.5,De=0.5*se.y+0.5,p(fe,ye,xe,ve,_e,be,Ae,Ee,we,Le,Pe,De,f.envMap)):f.map.mapping instanceof THREE.UVMapping&&(Ce=g.uvs[0],p(fe,ye,xe,ve,_e,be,Ce[o].x,Ce[o].y,Ce[i].x,Ce[i].y,Ce[m].x,Ce[m].y,f.map));else if(f instanceof THREE.MeshDepthMaterial)Se=me.near,Me=me.far,X.r=X.g=X.b=1-M(e.positionScreen.z*e.positionScreen.w,Se,Me),Y.r=Y.g=Y.b=1-M(t.positionScreen.z*t.positionScreen.w,Se,Me),q.r=q.g=q.b=1-M(a.positionScreen.z*a.positionScreen.w,Se,Me),K.addColors(Y,q).multiplyScalar(0.5),Te=d(X,Y,q,K),c(fe,ye,xe,ve,_e,be,0,0,1,0,0,1,Te);else if(f instanceof THREE.MeshNormalMaterial){var y;f.shading===THREE.FlatShading?(y=g.normalModelView,j.setRGB(y.x,y.y,y.z).multiplyScalar(0.5).addScalar(0.5),!0===f.wireframe?s(j,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(j)):f.shading===THREE.SmoothShading&&(y=g.vertexNormalsModelView[o],X.setRGB(y.x,y.y,y.z).multiplyScalar(0.5).addScalar(0.5),y=g.vertexNormalsModelView[i],Y.setRGB(y.x,y.y,y.z).multiplyScalar(0.5).addScalar(0.5),y=g.vertexNormalsModelView[m],q.setRGB(y.x,y.y,y.z).multiplyScalar(0.5).addScalar(0.5),K.addColors(Y,q).multiplyScalar(0.5),Te=d(X,Y,q,K),c(fe,ye,xe,ve,_e,be,0,0,1,0,0,1,Te))}}function n(e,t,r,a,o,i){D.beginPath(),D.moveTo(e,t),D.lineTo(r,a),D.lineTo(o,i),D.closePath()}function s(e,t,r,a){g(t),f(r),y(a),x(e.getStyle()),D.stroke(),ae.expandByScalar(2*t)}function l(e){v(e.getStyle()),D.fill()}function p(t,r,o,i,n,s,p,m,u,h,g,y,x){if(!(x instanceof THREE.DataTexture||void 0===x.image||0===x.image.width)){if(!0===x.needsUpdate){var _=x.wrapS===THREE.RepeatWrapping,M=x.wrapT===THREE.RepeatWrapping;$[x.id]=D.createPattern(x.image,!0===_&&!0===M?'repeat':!0===_&&!1===M?'repeat-x':!1===_&&!0===M?'repeat-y':'no-repeat'),x.needsUpdate=!1}void 0===$[x.id]?v('rgba(0,0,0,1)'):v($[x.id]);var T=x.offset.x/x.repeat.x,C=x.offset.y/x.repeat.y,A=x.image.width*x.repeat.x,E=x.image.height*x.repeat.y,w,a,b,c,d,e,f,L;if(p=(p+T)*A,m=(1-m+C)*E,u=(u+T)*A,h=(1-h+C)*E,g=(g+T)*A,y=(1-y+C)*E,o-=t,i-=r,n-=t,s-=r,u-=p,h-=m,g-=p,y-=m,f=u*y-g*h,0===f){if(void 0===ee[x.id]){var P=document.createElement('canvas');P.width=x.image.width,P.height=x.image.height;var R=P.getContext('2d');R.drawImage(x.image,0,0),ee[x.id]=R.getImageData(0,0,x.image.width,x.image.height).data}var F=ee[x.id],V=4*(S(p)+S(m)*x.image.width);return j.setRGB(F[V]/255,F[V+1]/255,F[V+2]/255),void l(j)}L=1/f,w=(y*o-h*n)*L,a=(y*i-h*s)*L,b=(u*n-g*o)*L,c=(u*s-g*i)*L,d=t-w*p-b*m,e=r-a*p-c*m,D.save(),D.transform(w,a,b,c,d,e),D.fill(),D.restore()}}function c(t,r,o,i,n,s,l,p,m,u,h,g,y){var x=y.width-1,v=y.height-1,_,a,b,c,d,e,f,S;l*=x,p*=v,m*=x,u*=v,h*=x,g*=v,o-=t,i-=r,n-=t,s-=r,m-=l,u-=p,h-=l,g-=p,f=m*g-h*u,S=1/f,_=(g*o-u*n)*S,a=(g*i-u*s)*S,b=(m*n-h*o)*S,c=(m*s-h*i)*S,d=t-_*l-b*p,e=r-a*l-c*p,D.save(),D.transform(_,a,b,c,d,e),D.clip(),D.drawImage(y,0,0),D.restore()}function d(e,t,r,a){return Ue[0]=0|255*e.r,Ue[1]=0|255*e.g,Ue[2]=0|255*e.b,Ue[4]=0|255*t.r,Ue[5]=0|255*t.g,Ue[6]=0|255*t.b,Ue[8]=0|255*r.r,Ue[9]=0|255*r.g,Ue[10]=0|255*r.b,Ue[12]=0|255*a.r,Ue[13]=0|255*a.g,Ue[14]=0|255*a.b,Fe.putImageData(Ve,0,0),Be.drawImage(Re,0,0),ze}function m(e,t,r){var a=t.x-e.x,o=t.y-e.y,i=a*a+o*o,n;0===i||(n=r/b(i),a*=n,o*=n,t.x+=a,t.y+=o,e.x-=a,e.y-=o)}function u(e){V!==e&&(D.globalAlpha=e,V=e)}function h(e){U!==e&&(e===THREE.NormalBlending?D.globalCompositeOperation='source-over':e===THREE.AdditiveBlending?D.globalCompositeOperation='lighter':e===THREE.SubtractiveBlending&&(D.globalCompositeOperation='darker'),U=e)}function g(e){N!==e&&(D.lineWidth=e,N=e)}function f(e){I!==e&&(D.lineCap=e,I=e)}function y(e){O!==e&&(D.lineJoin=e,O=e)}function x(e){z!==e&&(D.strokeStyle=e,z=e)}function v(e){B!==e&&(D.fillStyle=e,B=e)}function _(e,t){(k!==e||G!==t)&&(D.setLineDash([e,t]),k=e,G=t)}var b=Math.sqrt,S=Math.floor;console.log('THREE.CanvasRenderer',THREE.REVISION);var M=THREE.Math.smoothstep;e=e||{};var T=this,C=new THREE.Projector,A=e.canvas===void 0?document.createElement('canvas'):e.canvas,E=A.width,w=A.height,L=S(E/2),P=S(w/2),D=A.getContext('2d'),R=new THREE.Color(0),F=0,V=1,U=0,z=null,B=null,N=null,I=null,O=null,k=null,G=0,H=new THREE.RenderableVertex,W=new THREE.RenderableVertex,j=new THREE.Color,X=new THREE.Color,Y=new THREE.Color,q=new THREE.Color,K=new THREE.Color,Q=new THREE.Color,Z=new THREE.Color,J=new THREE.Color,$={},ee={},te=new THREE.Box2,re=new THREE.Box2,ae=new THREE.Box2,oe=new THREE.Color,ie=new THREE.Color,ne=new THREE.Color,se=new THREE.Vector3,le=16,pe,ce,de,me,ue,he,ge,fe,ye,xe,ve,_e,be,Se,Me,Te,Ce,Ae,Ee,we,Le,Pe,De,Re,Fe,Ve,Ue,ze,Be;Re=document.createElement('canvas'),Re.width=Re.height=2,Fe=Re.getContext('2d'),Fe.fillStyle='rgba(0,0,0,1)',Fe.fillRect(0,0,2,2),Ve=Fe.getImageData(0,0,2,2),Ue=Ve.data,ze=document.createElement('canvas'),ze.width=ze.height=le,Be=ze.getContext('2d'),Be.translate(-le/2,-le/2),Be.scale(le,le),le--,D.setLineDash===void 0&&(D.mozDash===void 0?D.setLineDash=function(){}:D.setLineDash=function(e){D.mozDash=null===e[0]?null:e}),this.domElement=A,this.devicePixelRatio=e.devicePixelRatio===void 0?self.devicePixelRatio===void 0?1:self.devicePixelRatio:e.devicePixelRatio,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(e,t,r){E=e*this.devicePixelRatio,w=t*this.devicePixelRatio,L=S(E/2),P=S(w/2),A.width=E,A.height=w,1!==this.devicePixelRatio&&!1!==r&&(A.style.width=e+'px',A.style.height=t+'px'),te.set(new THREE.Vector2(-L,-P),new THREE.Vector2(L,P)),re.set(new THREE.Vector2(-L,-P),new THREE.Vector2(L,P)),V=1,U=0,z=null,B=null,N=null,I=null,O=null},this.setClearColor=function(e,t){R.set(e),F=t===void 0?1:t,re.set(new THREE.Vector2(-L,-P),new THREE.Vector2(L,P))},this.setClearColorHex=function(e,t){console.warn('DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.'),this.setClearColor(e,t)},this.getMaxAnisotropy=function(){return 0},this.clear=function(){D.setTransform(1,0,0,-1,L,P),!1===re.empty()&&(re.intersect(te),re.expandByScalar(2),1>F&&D.clearRect(0|re.min.x,0|re.min.y,0|re.max.x-re.min.x,0|re.max.y-re.min.y),0<F&&(h(THREE.NormalBlending),u(1),v('rgba('+S(255*R.r)+','+S(255*R.g)+','+S(255*R.b)+','+F+')'),D.fillRect(0|re.min.x,0|re.min.y,0|re.max.x-re.min.x,0|re.max.y-re.min.y)),re.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(r,n){if(!1===n instanceof THREE.Camera)return void console.error('THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.');!0===this.autoClear&&this.clear(),D.setTransform(1,0,0,-1,L,P),T.info.render.vertices=0,T.info.render.faces=0,pe=C.projectScene(r,n,this.sortObjects,this.sortElements),ce=pe.elements,de=pe.lights,me=n,t();for(var s=0,e=ce.length;s<e;s++){var l=ce[s],p=l.material;if(void 0!==p&&!1!==p.visible){if(ae.makeEmpty(),l instanceof THREE.RenderableSprite)ue=l,ue.x*=L,ue.y*=P,a(ue,l,p);else if(l instanceof THREE.RenderableLine)ue=l.v1,he=l.v2,ue.positionScreen.x*=L,ue.positionScreen.y*=P,he.positionScreen.x*=L,he.positionScreen.y*=P,ae.setFromPoints([ue.positionScreen,he.positionScreen]),!0===te.isIntersectionBox(ae)&&o(ue,he,l,p);else if(l instanceof THREE.RenderableFace3){if(ue=l.v1,he=l.v2,ge=l.v3,-1>ue.positionScreen.z||1<ue.positionScreen.z)continue;if(-1>he.positionScreen.z||1<he.positionScreen.z)continue;if(-1>ge.positionScreen.z||1<ge.positionScreen.z)continue;ue.positionScreen.x*=L,ue.positionScreen.y*=P,he.positionScreen.x*=L,he.positionScreen.y*=P,ge.positionScreen.x*=L,ge.positionScreen.y*=P,0<p.overdraw&&(m(ue.positionScreen,he.positionScreen,p.overdraw),m(he.positionScreen,ge.positionScreen,p.overdraw),m(ge.positionScreen,ue.positionScreen,p.overdraw)),ae.setFromPoints([ue.positionScreen,he.positionScreen,ge.positionScreen]),!0===te.isIntersectionBox(ae)&&i(ue,he,ge,0,1,2,l,p)}re.union(ae)}}D.setTransform(1,0,0,1,0,0)}},THREE.ShaderChunk={fog_pars_fragment:'#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif',fog_fragment:'#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif',envmap_pars_fragment:'#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif',envmap_fragment:'#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif',envmap_pars_vertex:'#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif',worldpos_vertex:'#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif',envmap_vertex:'#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif',map_particle_pars_fragment:'#ifdef USE_MAP\nuniform sampler2D map;\n#endif',map_particle_fragment:'#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif',map_pars_vertex:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif',map_pars_fragment:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif',map_vertex:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif',map_fragment:'#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif',lightmap_pars_fragment:'#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif',lightmap_pars_vertex:'#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif',lightmap_fragment:'#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif',lightmap_vertex:'#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif',bumpmap_pars_fragment:'#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif',normalmap_pars_fragment:'#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif',specularmap_pars_fragment:'#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif',specularmap_fragment:'float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif',lights_lambert_pars_vertex:'uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif',lights_lambert_vertex:'vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif',lights_phong_pars_vertex:'#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif',lights_phong_vertex:'#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif',lights_phong_pars_fragment:'uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;',lights_phong_fragment:'vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif',color_pars_fragment:'#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif',color_fragment:'#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n#endif',color_pars_vertex:'#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif',color_vertex:'#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif',skinning_pars_vertex:'#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nuniform int boneTextureWidth;\nuniform int boneTextureHeight;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, float( boneTextureWidth ) );\nfloat y = floor( j / float( boneTextureWidth ) );\nfloat dx = 1.0 / float( boneTextureWidth );\nfloat dy = 1.0 / float( boneTextureHeight );\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif',skinbase_vertex:'#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif',skinning_vertex:'#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\n#endif',morphtarget_pars_vertex:'#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif',morphtarget_vertex:'#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif',default_vertex:'vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;',morphnormal_vertex:'#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif',skinnormal_vertex:'#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix \t+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif',defaultnormal_vertex:'vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;',shadowmap_pars_fragment:'#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif',shadowmap_fragment:'#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#if defined( SHADOWMAP_TYPE_PCF )\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\nfloat shadow = 0.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.0 * xPixelOffset;\nfloat dy0 = -1.0 * yPixelOffset;\nfloat dx1 = 1.0 * xPixelOffset;\nfloat dy1 = 1.0 * yPixelOffset;\nmat3 shadowKernel;\nmat3 depthKernel;\ndepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\ndepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\ndepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\ndepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\ndepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\ndepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\ndepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\ndepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\ndepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nvec3 shadowZ = vec3( shadowCoord.z );\nshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\nshadowKernel[0] *= vec3(0.25);\nshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\nshadowKernel[1] *= vec3(0.25);\nshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\nshadowKernel[2] *= vec3(0.25);\nvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\nshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\nshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\nvec4 shadowValues;\nshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\nshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\nshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\nshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\nshadow = dot( shadowValues, vec4( 1.0 ) );\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif',shadowmap_pars_vertex:'#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif',shadowmap_vertex:'#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif',alphatest_fragment:'#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif',linear_to_gamma_fragment:'#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif'},THREE.UniformsUtils={merge:function(e){var t={},r,a,o;for(r=0;r<e.length;r++)for(a in o=this.clone(e[r]),o)t[a]=o[a];return t},clone:function(e){var t={},r,a,o;for(r in e)for(a in t[r]={},e[r])o=e[r][a],t[r][a]=o instanceof THREE.Color||o instanceof THREE.Vector2||o instanceof THREE.Vector3||o instanceof THREE.Vector4||o instanceof THREE.Matrix4||o instanceof THREE.Texture?o.clone():o instanceof Array?o.slice():o;return t}},THREE.UniformsLib={common:{diffuse:{type:'c',value:new THREE.Color(15658734)},opacity:{type:'f',value:1},map:{type:'t',value:null},offsetRepeat:{type:'v4',value:new THREE.Vector4(0,0,1,1)},lightMap:{type:'t',value:null},specularMap:{type:'t',value:null},envMap:{type:'t',value:null},flipEnvMap:{type:'f',value:-1},useRefract:{type:'i',value:0},reflectivity:{type:'f',value:1},refractionRatio:{type:'f',value:0.98},combine:{type:'i',value:0},morphTargetInfluences:{type:'f',value:0}},bump:{bumpMap:{type:'t',value:null},bumpScale:{type:'f',value:1}},normalmap:{normalMap:{type:'t',value:null},normalScale:{type:'v2',value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:'f',value:2.5e-4},fogNear:{type:'f',value:1},fogFar:{type:'f',value:2e3},fogColor:{type:'c',value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:'fv',value:[]},directionalLightDirection:{type:'fv',value:[]},directionalLightColor:{type:'fv',value:[]},hemisphereLightDirection:{type:'fv',value:[]},hemisphereLightSkyColor:{type:'fv',value:[]},hemisphereLightGroundColor:{type:'fv',value:[]},pointLightColor:{type:'fv',value:[]},pointLightPosition:{type:'fv',value:[]},pointLightDistance:{type:'fv1',value:[]},spotLightColor:{type:'fv',value:[]},spotLightPosition:{type:'fv',value:[]},spotLightDirection:{type:'fv',value:[]},spotLightDistance:{type:'fv1',value:[]},spotLightAngleCos:{type:'fv1',value:[]},spotLightExponent:{type:'fv1',value:[]}},particle:{psColor:{type:'c',value:new THREE.Color(15658734)},opacity:{type:'f',value:1},size:{type:'f',value:1},scale:{type:'f',value:1},map:{type:'t',value:null},fogDensity:{type:'f',value:2.5e-4},fogNear:{type:'f',value:1},fogFar:{type:'f',value:2e3},fogColor:{type:'c',value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:'tv',value:[]},shadowMapSize:{type:'v2v',value:[]},shadowBias:{type:'fv1',value:[]},shadowDarkness:{type:'fv1',value:[]},shadowMatrix:{type:'m4v',value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,'void main() {',THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,'#ifdef USE_ENVMAP',THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,'#endif',THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,'}'].join('\n'),fragmentShader:['uniform vec3 diffuse;','uniform float opacity;',THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,'void main() {','gl_FragColor = vec4( diffuse, opacity );',THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,'}'].join('\n')},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:'c',value:new THREE.Color(16777215)},emissive:{type:'c',value:new THREE.Color(0)},wrapRGB:{type:'v3',value:new THREE.Vector3(1,1,1)}}]),vertexShader:['#define LAMBERT','varying vec3 vLightFront;','#ifdef DOUBLE_SIDED','varying vec3 vLightBack;','#endif',THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,'void main() {',THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,'}'].join('\n'),fragmentShader:['uniform float opacity;','varying vec3 vLightFront;','#ifdef DOUBLE_SIDED','varying vec3 vLightBack;','#endif',THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,'void main() {','gl_FragColor = vec4( vec3 ( 1.0 ), opacity );',THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,'#ifdef DOUBLE_SIDED','if ( gl_FrontFacing )','gl_FragColor.xyz *= vLightFront;','else','gl_FragColor.xyz *= vLightBack;','#else','gl_FragColor.xyz *= vLightFront;','#endif',THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,'}'].join('\n')},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:'c',value:new THREE.Color(16777215)},emissive:{type:'c',value:new THREE.Color(0)},specular:{type:'c',value:new THREE.Color(1118481)},shininess:{type:'f',value:30},wrapRGB:{type:'v3',value:new THREE.Vector3(1,1,1)}}]),vertexShader:['#define PHONG','varying vec3 vViewPosition;','varying vec3 vNormal;',THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,'void main() {',THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,'vNormal = normalize( transformedNormal );',THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,'vViewPosition = -mvPosition.xyz;',THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,'}'].join('\n'),fragmentShader:['uniform vec3 diffuse;','uniform float opacity;','uniform vec3 ambient;','uniform vec3 emissive;','uniform vec3 specular;','uniform float shininess;',THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,'void main() {','gl_FragColor = vec4( vec3 ( 1.0 ), opacity );',THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,'}'].join('\n')},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:['uniform float size;','uniform float scale;',THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,'void main() {',THREE.ShaderChunk.color_vertex,'vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );','#ifdef USE_SIZEATTENUATION','gl_PointSize = size * ( scale / length( mvPosition.xyz ) );','#else','gl_PointSize = size;','#endif','gl_Position = projectionMatrix * mvPosition;',THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,'}'].join('\n'),fragmentShader:['uniform vec3 psColor;','uniform float opacity;',THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,'void main() {','gl_FragColor = vec4( psColor, opacity );',THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,'}'].join('\n')},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:'f',value:1},dashSize:{type:'f',value:1},totalSize:{type:'f',value:2}}]),vertexShader:['uniform float scale;','attribute float lineDistance;','varying float vLineDistance;',THREE.ShaderChunk.color_pars_vertex,'void main() {',THREE.ShaderChunk.color_vertex,'vLineDistance = scale * lineDistance;','vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );','gl_Position = projectionMatrix * mvPosition;','}'].join('\n'),fragmentShader:['uniform vec3 diffuse;','uniform float opacity;','uniform float dashSize;','uniform float totalSize;','varying float vLineDistance;',THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,'void main() {','if ( mod( vLineDistance, totalSize ) > dashSize ) {','discard;','}','gl_FragColor = vec4( diffuse, opacity );',THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,'}'].join('\n')},depth:{uniforms:{mNear:{type:'f',value:1},mFar:{type:'f',value:2e3},opacity:{type:'f',value:1}},vertexShader:'void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}',fragmentShader:'uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}'},normal:{uniforms:{opacity:{type:'f',value:1}},vertexShader:['varying vec3 vNormal;',THREE.ShaderChunk.morphtarget_pars_vertex,'void main() {','vNormal = normalize( normalMatrix * normal );',THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,'}'].join('\n'),fragmentShader:'uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}'},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:'i',value:0},enableDiffuse:{type:'i',value:0},enableSpecular:{type:'i',value:0},enableReflection:{type:'i',value:0},enableDisplacement:{type:'i',value:0},tDisplacement:{type:'t',value:null},tDiffuse:{type:'t',value:null},tCube:{type:'t',value:null},tNormal:{type:'t',value:null},tSpecular:{type:'t',value:null},tAO:{type:'t',value:null},uNormalScale:{type:'v2',value:new THREE.Vector2(1,1)},uDisplacementBias:{type:'f',value:0},uDisplacementScale:{type:'f',value:1},uDiffuseColor:{type:'c',value:new THREE.Color(16777215)},uSpecularColor:{type:'c',value:new THREE.Color(1118481)},uAmbientColor:{type:'c',value:new THREE.Color(16777215)},uShininess:{type:'f',value:30},uOpacity:{type:'f',value:1},useRefract:{type:'i',value:0},uRefractionRatio:{type:'f',value:0.98},uReflectivity:{type:'f',value:0.5},uOffset:{type:'v2',value:new THREE.Vector2(0,0)},uRepeat:{type:'v2',value:new THREE.Vector2(1,1)},wrapRGB:{type:'v3',value:new THREE.Vector3(1,1,1)}}]),fragmentShader:['uniform vec3 uAmbientColor;','uniform vec3 uDiffuseColor;','uniform vec3 uSpecularColor;','uniform float uShininess;','uniform float uOpacity;','uniform bool enableDiffuse;','uniform bool enableSpecular;','uniform bool enableAO;','uniform bool enableReflection;','uniform sampler2D tDiffuse;','uniform sampler2D tNormal;','uniform sampler2D tSpecular;','uniform sampler2D tAO;','uniform samplerCube tCube;','uniform vec2 uNormalScale;','uniform bool useRefract;','uniform float uRefractionRatio;','uniform float uReflectivity;','varying vec3 vTangent;','varying vec3 vBinormal;','varying vec3 vNormal;','varying vec2 vUv;','uniform vec3 ambientLightColor;','#if MAX_DIR_LIGHTS > 0','uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];','uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];','#endif','#if MAX_HEMI_LIGHTS > 0','uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];','uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];','uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];','#endif','#if MAX_POINT_LIGHTS > 0','uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];','uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];','uniform float pointLightDistance[ MAX_POINT_LIGHTS ];','#endif','#if MAX_SPOT_LIGHTS > 0','uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];','uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];','uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];','uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];','uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];','uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];','#endif','#ifdef WRAP_AROUND','uniform vec3 wrapRGB;','#endif','varying vec3 vWorldPosition;','varying vec3 vViewPosition;',THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,'void main() {','gl_FragColor = vec4( vec3( 1.0 ), uOpacity );','vec3 specularTex = vec3( 1.0 );','vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;','normalTex.xy *= uNormalScale;','normalTex = normalize( normalTex );','if( enableDiffuse ) {','#ifdef GAMMA_INPUT','vec4 texelColor = texture2D( tDiffuse, vUv );','texelColor.xyz *= texelColor.xyz;','gl_FragColor = gl_FragColor * texelColor;','#else','gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );','#endif','}','if( enableAO ) {','#ifdef GAMMA_INPUT','vec4 aoColor = texture2D( tAO, vUv );','aoColor.xyz *= aoColor.xyz;','gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;','#else','gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;','#endif','}','if( enableSpecular )','specularTex = texture2D( tSpecular, vUv ).xyz;','mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );','vec3 finalNormal = tsb * normalTex;','#ifdef FLIP_SIDED','finalNormal = -finalNormal;','#endif','vec3 normal = normalize( finalNormal );','vec3 viewPosition = normalize( vViewPosition );','#if MAX_POINT_LIGHTS > 0','vec3 pointDiffuse = vec3( 0.0 );','vec3 pointSpecular = vec3( 0.0 );','for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {','vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );','vec3 pointVector = lPosition.xyz + vViewPosition.xyz;','float pointDistance = 1.0;','if ( pointLightDistance[ i ] > 0.0 )','pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );','pointVector = normalize( pointVector );','#ifdef WRAP_AROUND','float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );','float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );','vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );','#else','float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );','#endif','pointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;','vec3 pointHalfVector = normalize( pointVector + viewPosition );','float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );','float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );','#ifdef PHYSICALLY_BASED_SHADING','float specularNormalization = ( uShininess + 2.0001 ) / 8.0;','vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );','pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;','#else','pointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;','#endif','}','#endif','#if MAX_SPOT_LIGHTS > 0','vec3 spotDiffuse = vec3( 0.0 );','vec3 spotSpecular = vec3( 0.0 );','for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {','vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );','vec3 spotVector = lPosition.xyz + vViewPosition.xyz;','float spotDistance = 1.0;','if ( spotLightDistance[ i ] > 0.0 )','spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );','spotVector = normalize( spotVector );','float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );','if ( spotEffect > spotLightAngleCos[ i ] ) {','spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );','#ifdef WRAP_AROUND','float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );','float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );','vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );','#else','float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );','#endif','spotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;','vec3 spotHalfVector = normalize( spotVector + viewPosition );','float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );','float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );','#ifdef PHYSICALLY_BASED_SHADING','float specularNormalization = ( uShininess + 2.0001 ) / 8.0;','vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );','spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;','#else','spotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;','#endif','}','}','#endif','#if MAX_DIR_LIGHTS > 0','vec3 dirDiffuse = vec3( 0.0 );','vec3 dirSpecular = vec3( 0.0 );','for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {','vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );','vec3 dirVector = normalize( lDirection.xyz );','#ifdef WRAP_AROUND','float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );','float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );','vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );','#else','float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );','#endif','dirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;','vec3 dirHalfVector = normalize( dirVector + viewPosition );','float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );','float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );','#ifdef PHYSICALLY_BASED_SHADING','float specularNormalization = ( uShininess + 2.0001 ) / 8.0;','vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );','dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;','#else','dirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;','#endif','}','#endif','#if MAX_HEMI_LIGHTS > 0','vec3 hemiDiffuse  = vec3( 0.0 );','vec3 hemiSpecular = vec3( 0.0 );','for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {','vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );','vec3 lVector = normalize( lDirection.xyz );','float dotProduct = dot( normal, lVector );','float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;','vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );','hemiDiffuse += uDiffuseColor * hemiColor;','vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );','float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;','float hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );','vec3 lVectorGround = -lVector;','vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );','float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;','float hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );','#ifdef PHYSICALLY_BASED_SHADING','float dotProductGround = dot( normal, lVectorGround );','float specularNormalization = ( uShininess + 2.0001 ) / 8.0;','vec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );','vec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );','hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );','#else','hemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;','#endif','}','#endif','vec3 totalDiffuse = vec3( 0.0 );','vec3 totalSpecular = vec3( 0.0 );','#if MAX_DIR_LIGHTS > 0','totalDiffuse += dirDiffuse;','totalSpecular += dirSpecular;','#endif','#if MAX_HEMI_LIGHTS > 0','totalDiffuse += hemiDiffuse;','totalSpecular += hemiSpecular;','#endif','#if MAX_POINT_LIGHTS > 0','totalDiffuse += pointDiffuse;','totalSpecular += pointSpecular;','#endif','#if MAX_SPOT_LIGHTS > 0','totalDiffuse += spotDiffuse;','totalSpecular += spotSpecular;','#endif','#ifdef METAL','gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );','#else','gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;','#endif','if ( enableReflection ) {','vec3 vReflect;','vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );','if ( useRefract ) {','vReflect = refract( cameraToVertex, normal, uRefractionRatio );','} else {','vReflect = reflect( cameraToVertex, normal );','}','vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );','#ifdef GAMMA_INPUT','cubeColor.xyz *= cubeColor.xyz;','#endif','gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );','}',THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,'}'].join('\n'),vertexShader:['attribute vec4 tangent;','uniform vec2 uOffset;','uniform vec2 uRepeat;','uniform bool enableDisplacement;','#ifdef VERTEX_TEXTURES','uniform sampler2D tDisplacement;','uniform float uDisplacementScale;','uniform float uDisplacementBias;','#endif','varying vec3 vTangent;','varying vec3 vBinormal;','varying vec3 vNormal;','varying vec2 vUv;','varying vec3 vWorldPosition;','varying vec3 vViewPosition;',THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,'void main() {',THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,'#ifdef USE_SKINNING','vNormal = normalize( normalMatrix * skinnedNormal.xyz );','vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );','vTangent = normalize( normalMatrix * skinnedTangent.xyz );','#else','vNormal = normalize( normalMatrix * normal );','vTangent = normalize( normalMatrix * tangent.xyz );','#endif','vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );','vUv = uv * uRepeat + uOffset;','vec3 displacedPosition;','#ifdef VERTEX_TEXTURES','if ( enableDisplacement ) {','vec3 dv = texture2D( tDisplacement, uv ).xyz;','float df = uDisplacementScale * dv.x + uDisplacementBias;','displacedPosition = position + normalize( normal ) * df;','} else {','#ifdef USE_SKINNING','vec4 skinVertex = vec4( position, 1.0 );','vec4 skinned  = boneMatX * skinVertex * skinWeight.x;','skinned \t  += boneMatY * skinVertex * skinWeight.y;','displacedPosition  = skinned.xyz;','#else','displacedPosition = position;','#endif','}','#else','#ifdef USE_SKINNING','vec4 skinVertex = vec4( position, 1.0 );','vec4 skinned  = boneMatX * skinVertex * skinWeight.x;','skinned \t  += boneMatY * skinVertex * skinWeight.y;','displacedPosition  = skinned.xyz;','#else','displacedPosition = position;','#endif','#endif','vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );','vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );','gl_Position = projectionMatrix * mvPosition;','vWorldPosition = worldPosition.xyz;','vViewPosition = -mvPosition.xyz;','#ifdef USE_SHADOWMAP','for( int i = 0; i < MAX_SHADOWS; i ++ ) {','vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;','}','#endif','}'].join('\n')},cube:{uniforms:{tCube:{type:'t',value:null},tFlip:{type:'f',value:-1}},vertexShader:'varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}',fragmentShader:'uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}'},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,'void main() {',THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,'}'].join('\n'),fragmentShader:'vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}'}},THREE.WebGLRenderer=function(e){function t(e){e.__webglVertexBuffer=yt.createBuffer(),e.__webglColorBuffer=yt.createBuffer(),Ue.info.memory.geometries++}function r(e){e.__webglVertexBuffer=yt.createBuffer(),e.__webglColorBuffer=yt.createBuffer(),e.__webglLineDistanceBuffer=yt.createBuffer(),Ue.info.memory.geometries++}function a(e){e.__webglVertexBuffer=yt.createBuffer(),e.__webglNormalBuffer=yt.createBuffer(),e.__webglTangentBuffer=yt.createBuffer(),e.__webglColorBuffer=yt.createBuffer(),e.__webglUVBuffer=yt.createBuffer(),e.__webglUV2Buffer=yt.createBuffer(),e.__webglSkinIndicesBuffer=yt.createBuffer(),e.__webglSkinWeightsBuffer=yt.createBuffer(),e.__webglFaceBuffer=yt.createBuffer(),e.__webglLineBuffer=yt.createBuffer();var t,r;if(e.numMorphTargets)for(e.__webglMorphTargetsBuffers=[],t=0,r=e.numMorphTargets;t<r;t++)e.__webglMorphTargetsBuffers.push(yt.createBuffer());if(e.numMorphNormals)for(e.__webglMorphNormalsBuffers=[],t=0,r=e.numMorphNormals;t<r;t++)e.__webglMorphNormalsBuffers.push(yt.createBuffer());Ue.info.memory.geometries++}function o(e,t){var r=e.vertices.length,o=t.material;if(o.attributes)for(var i in void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]),o.attributes){var a=o.attributes[i];if(!a.__webglInitialized||a.createUniqueBuffers){a.__webglInitialized=!0;var n=1;'v2'===a.type?n=2:'v3'===a.type?n=3:'v4'===a.type?n=4:'c'===a.type&&(n=3),a.size=n,a.array=new Float32Array(r*n),a.buffer=yt.createBuffer(),a.buffer.belongsToAttribute=i,a.needsUpdate=!0}e.__webglCustomAttributesList.push(a)}}function i(e,t){var r=e.vertices.length;e.__vertexArray=new Float32Array(3*r),e.__colorArray=new Float32Array(3*r),e.__sortArray=[],e.__webglParticleCount=r,o(e,t)}function n(e,t){var r=e.vertices.length;e.__vertexArray=new Float32Array(3*r),e.__colorArray=new Float32Array(3*r),e.__lineDistanceArray=new Float32Array(1*r),e.__webglLineCount=r,o(e,t)}function s(e,t){var r=t.geometry,o=e.faces3,i=3*o.length,n=1*o.length,s=3*o.length,p=l(t,e),h=u(p),g=c(p),f=d(p);e.__vertexArray=new Float32Array(3*i),g&&(e.__normalArray=new Float32Array(3*i)),r.hasTangents&&(e.__tangentArray=new Float32Array(4*i)),f&&(e.__colorArray=new Float32Array(3*i)),h&&(0<r.faceVertexUvs.length&&(e.__uvArray=new Float32Array(2*i)),1<r.faceVertexUvs.length&&(e.__uv2Array=new Float32Array(2*i))),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*i),e.__skinWeightArray=new Float32Array(4*i)),e.__faceArray=new Uint16Array(3*n),e.__lineArray=new Uint16Array(2*s);var y,m;if(e.numMorphTargets)for(e.__morphTargetsArrays=[],y=0,m=e.numMorphTargets;y<m;y++)e.__morphTargetsArrays.push(new Float32Array(3*i));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],y=0,m=e.numMorphNormals;y<m;y++)e.__morphNormalsArrays.push(new Float32Array(3*i));if(e.__webglFaceCount=3*n,e.__webglLineCount=2*s,p.attributes)for(var x in void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]),p.attributes){var a=p.attributes[x],v={};for(var _ in a)v[_]=a[_];if(!v.__webglInitialized||v.createUniqueBuffers){v.__webglInitialized=!0;var b=1;'v2'===v.type?b=2:'v3'===v.type?b=3:'v4'===v.type?b=4:'c'===v.type&&(b=3),v.size=b,v.array=new Float32Array(i*b),v.buffer=yt.createBuffer(),v.buffer.belongsToAttribute=x,a.needsUpdate=!0,v.__original=a}e.__webglCustomAttributesList.push(v)}e.__inittedArrays=!0}function l(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function p(e){return e&&e.shading!==void 0&&e.shading===THREE.SmoothShading}function c(e){return e instanceof THREE.MeshBasicMaterial&&!e.envMap||e instanceof THREE.MeshDepthMaterial?!1:p(e)?THREE.SmoothShading:THREE.FlatShading}function d(e){return!!e.vertexColors&&e.vertexColors}function u(e){return e.map||e.lightMap||e.bumpMap||e.normalMap||e.specularMap||e instanceof THREE.ShaderMaterial}function m(e){var t,r,a;for(t in e.attributes)a='index'===t?yt.ELEMENT_ARRAY_BUFFER:yt.ARRAY_BUFFER,r=e.attributes[t],void 0===r.numItems&&(r.numItems=r.array.length),r.buffer=yt.createBuffer(),yt.bindBuffer(a,r.buffer),yt.bufferData(a,r.array,yt.STATIC_DRAW)}function h(e,t,r){var a=e.vertices,o=a.length,n=e.colors,s=n.length,l=e.__vertexArray,p=e.__colorArray,d=e.__sortArray,m=e.verticesNeedUpdate,u=e.elementsNeedUpdate,h=e.colorsNeedUpdate,g=e.__webglCustomAttributesList,f,y,c,x,v,_,b,i,M,T,C,A;if(r.sortParticles){for(mt.copy(dt),mt.multiply(r.matrixWorld),f=0;f<o;f++)c=a[f],ut.copy(c),ut.applyProjection(mt),d[f]=[ut.z,f];for(d.sort(S),f=0;f<o;f++)c=a[d[f][1]],x=3*f,l[x]=c.x,l[x+1]=c.y,l[x+2]=c.z;for(y=0;y<s;y++)x=3*y,_=n[d[y][1]],p[x]=_.r,p[x+1]=_.g,p[x+2]=_.b;if(g)for(b=0,i=g.length;b<i;b++)if(A=g[b],void 0===A.boundTo||'vertices'===A.boundTo)if(x=0,T=A.value.length,1===A.size)for(M=0;M<T;M++)v=d[M][1],A.array[M]=A.value[v];else if(2===A.size)for(M=0;M<T;M++)v=d[M][1],C=A.value[v],A.array[x]=C.x,A.array[x+1]=C.y,x+=2;else if(3===A.size){if('c'===A.type)for(M=0;M<T;M++)v=d[M][1],C=A.value[v],A.array[x]=C.r,A.array[x+1]=C.g,A.array[x+2]=C.b,x+=3;else for(M=0;M<T;M++)v=d[M][1],C=A.value[v],A.array[x]=C.x,A.array[x+1]=C.y,A.array[x+2]=C.z,x+=3;}else if(4===A.size)for(M=0;M<T;M++)v=d[M][1],C=A.value[v],A.array[x]=C.x,A.array[x+1]=C.y,A.array[x+2]=C.z,A.array[x+3]=C.w,x+=4}else{if(m)for(f=0;f<o;f++)c=a[f],x=3*f,l[x]=c.x,l[x+1]=c.y,l[x+2]=c.z;if(h)for(y=0;y<s;y++)_=n[y],x=3*y,p[x]=_.r,p[x+1]=_.g,p[x+2]=_.b;if(g)for(b=0,i=g.length;b<i;b++)if(A=g[b],A.needsUpdate&&(void 0===A.boundTo||'vertices'===A.boundTo))if(T=A.value.length,x=0,1===A.size)for(M=0;M<T;M++)A.array[M]=A.value[M];else if(2===A.size)for(M=0;M<T;M++)C=A.value[M],A.array[x]=C.x,A.array[x+1]=C.y,x+=2;else if(3===A.size){if('c'===A.type)for(M=0;M<T;M++)C=A.value[M],A.array[x]=C.r,A.array[x+1]=C.g,A.array[x+2]=C.b,x+=3;else for(M=0;M<T;M++)C=A.value[M],A.array[x]=C.x,A.array[x+1]=C.y,A.array[x+2]=C.z,x+=3;}else if(4===A.size)for(M=0;M<T;M++)C=A.value[M],A.array[x]=C.x,A.array[x+1]=C.y,A.array[x+2]=C.z,A.array[x+3]=C.w,x+=4}if((m||r.sortParticles)&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglVertexBuffer),yt.bufferData(yt.ARRAY_BUFFER,l,t)),(h||r.sortParticles)&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglColorBuffer),yt.bufferData(yt.ARRAY_BUFFER,p,t)),g)for(b=0,i=g.length;b<i;b++)A=g[b],(A.needsUpdate||r.sortParticles)&&(yt.bindBuffer(yt.ARRAY_BUFFER,A.buffer),yt.bufferData(yt.ARRAY_BUFFER,A.array,t))}function g(e,t){var r=e.vertices,a=e.colors,o=e.lineDistances,n=r.length,s=a.length,l=o.length,p=e.__vertexArray,m=e.__colorArray,u=e.__lineDistanceArray,h=e.verticesNeedUpdate,g=e.colorsNeedUpdate,f=e.lineDistancesNeedUpdate,y=e.__webglCustomAttributesList,x,v,c,d,_,b,S,i,M,T,C,A;if(h){for(x=0;x<n;x++)d=r[x],_=3*x,p[_]=d.x,p[_+1]=d.y,p[_+2]=d.z;yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglVertexBuffer),yt.bufferData(yt.ARRAY_BUFFER,p,t)}if(g){for(v=0;v<s;v++)b=a[v],_=3*v,m[_]=b.r,m[_+1]=b.g,m[_+2]=b.b;yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglColorBuffer),yt.bufferData(yt.ARRAY_BUFFER,m,t)}if(f){for(c=0;c<l;c++)u[c]=o[c];yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglLineDistanceBuffer),yt.bufferData(yt.ARRAY_BUFFER,u,t)}if(y)for(S=0,i=y.length;S<i;S++)if(A=y[S],A.needsUpdate&&(void 0===A.boundTo||'vertices'===A.boundTo)){if(_=0,T=A.value.length,1===A.size)for(M=0;M<T;M++)A.array[M]=A.value[M];else if(2===A.size)for(M=0;M<T;M++)C=A.value[M],A.array[_]=C.x,A.array[_+1]=C.y,_+=2;else if(3===A.size){if('c'===A.type)for(M=0;M<T;M++)C=A.value[M],A.array[_]=C.r,A.array[_+1]=C.g,A.array[_+2]=C.b,_+=3;else for(M=0;M<T;M++)C=A.value[M],A.array[_]=C.x,A.array[_+1]=C.y,A.array[_+2]=C.z,_+=3;}else if(4===A.size)for(M=0;M<T;M++)C=A.value[M],A.array[_]=C.x,A.array[_+1]=C.y,A.array[_+2]=C.z,A.array[_+3]=C.w,_+=4;yt.bindBuffer(yt.ARRAY_BUFFER,A.buffer),yt.bufferData(yt.ARRAY_BUFFER,A.array,t)}}function f(e,t,r,a,o){if(e.__inittedArrays){var n=c(o),s=d(o),l=u(o),p=n===THREE.SmoothShading,m=0,h=0,g=0,y=0,x=0,v=0,_=0,b=0,S=0,M=0,T=0,C=0,A=0,E=e.__vertexArray,w=e.__uvArray,L=e.__uv2Array,P=e.__normalArray,D=e.__tangentArray,R=e.__colorArray,F=e.__skinIndexArray,V=e.__skinWeightArray,U=e.__morphTargetsArrays,z=e.__morphNormalsArrays,B=e.__webglCustomAttributesList,N=e.__faceArray,I=e.__lineArray,O=t.geometry,k=O.verticesNeedUpdate,G=O.elementsNeedUpdate,H=O.uvsNeedUpdate,W=O.normalsNeedUpdate,j=O.tangentsNeedUpdate,X=O.colorsNeedUpdate,Y=O.morphTargetsNeedUpdate,q=O.vertices,K=e.faces3,Q=O.faces,Z=O.faceVertexUvs[0],J=O.faceVertexUvs[1],$=O.colors,ee=O.skinIndices,te=O.skinWeights,re=O.morphTargets,ae=O.morphNormals,oe,f,ie,ne,se,le,pe,ce,de,me,ue,he,ge,fe,ye,xe,ve,_e,be,Se,Me,Te,Ce,Ae,Ee,we,Le,Pe,De,Re,i,Fe,Ve,Ue,ze,Be,Ne,Ie,Oe,ke,Ge,He;if(k){for(oe=0,f=K.length;oe<f;oe++)ne=Q[K[oe]],he=q[ne.a],ge=q[ne.b],fe=q[ne.c],E[h]=he.x,E[h+1]=he.y,E[h+2]=he.z,E[h+3]=ge.x,E[h+4]=ge.y,E[h+5]=ge.z,E[h+6]=fe.x,E[h+7]=fe.y,E[h+8]=fe.z,h+=9;yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglVertexBuffer),yt.bufferData(yt.ARRAY_BUFFER,E,r)}if(Y)for(ze=0,Be=re.length;ze<Be;ze++){for(T=0,oe=0,f=K.length;oe<f;oe++)Oe=K[oe],ne=Q[Oe],he=re[ze].vertices[ne.a],ge=re[ze].vertices[ne.b],fe=re[ze].vertices[ne.c],Ne=U[ze],Ne[T]=he.x,Ne[T+1]=he.y,Ne[T+2]=he.z,Ne[T+3]=ge.x,Ne[T+4]=ge.y,Ne[T+5]=ge.z,Ne[T+6]=fe.x,Ne[T+7]=fe.y,Ne[T+8]=fe.z,o.morphNormals&&(p?(ke=ae[ze].vertexNormals[Oe],_e=ke.a,be=ke.b,Se=ke.c):(_e=ae[ze].faceNormals[Oe],be=_e,Se=_e),Ie=z[ze],Ie[T]=_e.x,Ie[T+1]=_e.y,Ie[T+2]=_e.z,Ie[T+3]=be.x,Ie[T+4]=be.y,Ie[T+5]=be.z,Ie[T+6]=Se.x,Ie[T+7]=Se.y,Ie[T+8]=Se.z),T+=9;yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[ze]),yt.bufferData(yt.ARRAY_BUFFER,U[ze],r),o.morphNormals&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[ze]),yt.bufferData(yt.ARRAY_BUFFER,z[ze],r))}if(te.length){for(oe=0,f=K.length;oe<f;oe++)ne=Q[K[oe]],Ae=te[ne.a],Ee=te[ne.b],we=te[ne.c],V[M]=Ae.x,V[M+1]=Ae.y,V[M+2]=Ae.z,V[M+3]=Ae.w,V[M+4]=Ee.x,V[M+5]=Ee.y,V[M+6]=Ee.z,V[M+7]=Ee.w,V[M+8]=we.x,V[M+9]=we.y,V[M+10]=we.z,V[M+11]=we.w,Le=ee[ne.a],Pe=ee[ne.b],De=ee[ne.c],F[M]=Le.x,F[M+1]=Le.y,F[M+2]=Le.z,F[M+3]=Le.w,F[M+4]=Pe.x,F[M+5]=Pe.y,F[M+6]=Pe.z,F[M+7]=Pe.w,F[M+8]=De.x,F[M+9]=De.y,F[M+10]=De.z,F[M+11]=De.w,M+=12;0<M&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),yt.bufferData(yt.ARRAY_BUFFER,F,r),yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),yt.bufferData(yt.ARRAY_BUFFER,V,r))}if(X&&s){for(oe=0,f=K.length;oe<f;oe++)ne=Q[K[oe]],pe=ne.vertexColors,ce=ne.color,3===pe.length&&s===THREE.VertexColors?(Me=pe[0],Te=pe[1],Ce=pe[2]):(Me=ce,Te=ce,Ce=ce),R[S]=Me.r,R[S+1]=Me.g,R[S+2]=Me.b,R[S+3]=Te.r,R[S+4]=Te.g,R[S+5]=Te.b,R[S+6]=Ce.r,R[S+7]=Ce.g,R[S+8]=Ce.b,S+=9;0<S&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglColorBuffer),yt.bufferData(yt.ARRAY_BUFFER,R,r))}if(j&&O.hasTangents){for(oe=0,f=K.length;oe<f;oe++)ne=Q[K[oe]],de=ne.vertexTangents,ye=de[0],xe=de[1],ve=de[2],D[_]=ye.x,D[_+1]=ye.y,D[_+2]=ye.z,D[_+3]=ye.w,D[_+4]=xe.x,D[_+5]=xe.y,D[_+6]=xe.z,D[_+7]=xe.w,D[_+8]=ve.x,D[_+9]=ve.y,D[_+10]=ve.z,D[_+11]=ve.w,_+=12;yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglTangentBuffer),yt.bufferData(yt.ARRAY_BUFFER,D,r)}if(W&&n){for(oe=0,f=K.length;oe<f;oe++)if(ne=Q[K[oe]],se=ne.vertexNormals,le=ne.normal,3===se.length&&p)for(Re=0;3>Re;Re++)Fe=se[Re],P[v]=Fe.x,P[v+1]=Fe.y,P[v+2]=Fe.z,v+=3;else for(Re=0;3>Re;Re++)P[v]=le.x,P[v+1]=le.y,P[v+2]=le.z,v+=3;yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglNormalBuffer),yt.bufferData(yt.ARRAY_BUFFER,P,r)}if(H&&Z&&l){for(oe=0,f=K.length;oe<f;oe++)if(ie=K[oe],me=Z[ie],void 0!==me)for(Re=0;3>Re;Re++)Ve=me[Re],w[g]=Ve.x,w[g+1]=Ve.y,g+=2;0<g&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglUVBuffer),yt.bufferData(yt.ARRAY_BUFFER,w,r))}if(H&&J&&l){for(oe=0,f=K.length;oe<f;oe++)if(ie=K[oe],ue=J[ie],void 0!==ue)for(Re=0;3>Re;Re++)Ue=ue[Re],L[y]=Ue.x,L[y+1]=Ue.y,y+=2;0<y&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglUV2Buffer),yt.bufferData(yt.ARRAY_BUFFER,L,r))}if(G){for(oe=0,f=K.length;oe<f;oe++)N[x]=m,N[x+1]=m+1,N[x+2]=m+2,x+=3,I[b]=m,I[b+1]=m+1,I[b+2]=m,I[b+3]=m+2,I[b+4]=m+1,I[b+5]=m+2,b+=6,m+=3;yt.bindBuffer(yt.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),yt.bufferData(yt.ELEMENT_ARRAY_BUFFER,N,r),yt.bindBuffer(yt.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),yt.bufferData(yt.ELEMENT_ARRAY_BUFFER,I,r)}if(B)for(Re=0,i=B.length;Re<i;Re++)if(He=B[Re],He.__original.needsUpdate){if(C=0,A=0,1===He.size){if(void 0===He.boundTo||'vertices'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)ne=Q[K[oe]],He.array[C]=He.value[ne.a],He.array[C+1]=He.value[ne.b],He.array[C+2]=He.value[ne.c],C+=3;else if('faces'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)Ge=He.value[K[oe]],He.array[C]=Ge,He.array[C+1]=Ge,He.array[C+2]=Ge,C+=3;}else if(2===He.size){if(void 0===He.boundTo||'vertices'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)ne=Q[K[oe]],he=He.value[ne.a],ge=He.value[ne.b],fe=He.value[ne.c],He.array[C]=he.x,He.array[C+1]=he.y,He.array[C+2]=ge.x,He.array[C+3]=ge.y,He.array[C+4]=fe.x,He.array[C+5]=fe.y,C+=6;else if('faces'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)Ge=He.value[K[oe]],he=Ge,ge=Ge,fe=Ge,He.array[C]=he.x,He.array[C+1]=he.y,He.array[C+2]=ge.x,He.array[C+3]=ge.y,He.array[C+4]=fe.x,He.array[C+5]=fe.y,C+=6;}else if(3===He.size){var We;if(We='c'===He.type?['r','g','b']:['x','y','z'],void 0===He.boundTo||'vertices'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)ne=Q[K[oe]],he=He.value[ne.a],ge=He.value[ne.b],fe=He.value[ne.c],He.array[C]=he[We[0]],He.array[C+1]=he[We[1]],He.array[C+2]=he[We[2]],He.array[C+3]=ge[We[0]],He.array[C+4]=ge[We[1]],He.array[C+5]=ge[We[2]],He.array[C+6]=fe[We[0]],He.array[C+7]=fe[We[1]],He.array[C+8]=fe[We[2]],C+=9;else if('faces'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)Ge=He.value[K[oe]],he=Ge,ge=Ge,fe=Ge,He.array[C]=he[We[0]],He.array[C+1]=he[We[1]],He.array[C+2]=he[We[2]],He.array[C+3]=ge[We[0]],He.array[C+4]=ge[We[1]],He.array[C+5]=ge[We[2]],He.array[C+6]=fe[We[0]],He.array[C+7]=fe[We[1]],He.array[C+8]=fe[We[2]],C+=9;else if('faceVertices'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)Ge=He.value[K[oe]],he=Ge[0],ge=Ge[1],fe=Ge[2],He.array[C]=he[We[0]],He.array[C+1]=he[We[1]],He.array[C+2]=he[We[2]],He.array[C+3]=ge[We[0]],He.array[C+4]=ge[We[1]],He.array[C+5]=ge[We[2]],He.array[C+6]=fe[We[0]],He.array[C+7]=fe[We[1]],He.array[C+8]=fe[We[2]],C+=9}else if(4===He.size)if(void 0===He.boundTo||'vertices'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)ne=Q[K[oe]],he=He.value[ne.a],ge=He.value[ne.b],fe=He.value[ne.c],He.array[C]=he.x,He.array[C+1]=he.y,He.array[C+2]=he.z,He.array[C+3]=he.w,He.array[C+4]=ge.x,He.array[C+5]=ge.y,He.array[C+6]=ge.z,He.array[C+7]=ge.w,He.array[C+8]=fe.x,He.array[C+9]=fe.y,He.array[C+10]=fe.z,He.array[C+11]=fe.w,C+=12;else if('faces'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)Ge=He.value[K[oe]],he=Ge,ge=Ge,fe=Ge,He.array[C]=he.x,He.array[C+1]=he.y,He.array[C+2]=he.z,He.array[C+3]=he.w,He.array[C+4]=ge.x,He.array[C+5]=ge.y,He.array[C+6]=ge.z,He.array[C+7]=ge.w,He.array[C+8]=fe.x,He.array[C+9]=fe.y,He.array[C+10]=fe.z,He.array[C+11]=fe.w,C+=12;else if('faceVertices'===He.boundTo)for(oe=0,f=K.length;oe<f;oe++)Ge=He.value[K[oe]],he=Ge[0],ge=Ge[1],fe=Ge[2],He.array[C]=he.x,He.array[C+1]=he.y,He.array[C+2]=he.z,He.array[C+3]=he.w,He.array[C+4]=ge.x,He.array[C+5]=ge.y,He.array[C+6]=ge.z,He.array[C+7]=ge.w,He.array[C+8]=fe.x,He.array[C+9]=fe.y,He.array[C+10]=fe.z,He.array[C+11]=fe.w,C+=12;yt.bindBuffer(yt.ARRAY_BUFFER,He.buffer),yt.bufferData(yt.ARRAY_BUFFER,He.array,r)}a&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function y(e,t,r){var a=e.attributes,o,i;for(o in a)i=a[o],i.needsUpdate&&('index'===o?(yt.bindBuffer(yt.ELEMENT_ARRAY_BUFFER,i.buffer),yt.bufferData(yt.ELEMENT_ARRAY_BUFFER,i.array,t)):(yt.bindBuffer(yt.ARRAY_BUFFER,i.buffer),yt.bufferData(yt.ARRAY_BUFFER,i.array,t)),i.needsUpdate=!1),r&&!i.dynamic&&(i.array=null)}function x(e){pt[e]||(yt.enableVertexAttribArray(e),pt[e]=!0)}function v(){for(var e in pt)pt[e]&&(yt.disableVertexAttribArray(e),pt[e]=!1)}function _(e,t,r){var a=e.program.attributes;if(-1!==r.morphTargetBase&&0<=a.position?(yt.bindBuffer(yt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[r.morphTargetBase]),x(a.position),yt.vertexAttribPointer(a.position,3,yt.FLOAT,!1,0,0)):0<=a.position&&(yt.bindBuffer(yt.ARRAY_BUFFER,t.__webglVertexBuffer),x(a.position),yt.vertexAttribPointer(a.position,3,yt.FLOAT,!1,0,0)),r.morphTargetForcedOrder.length)for(var o=0,n=r.morphTargetForcedOrder,s=r.morphTargetInfluences;o<e.numSupportedMorphTargets&&o<n.length;)0<=a['morphTarget'+o]&&(yt.bindBuffer(yt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[n[o]]),x(a['morphTarget'+o]),yt.vertexAttribPointer(a['morphTarget'+o],3,yt.FLOAT,!1,0,0)),0<=a['morphNormal'+o]&&e.morphNormals&&(yt.bindBuffer(yt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[n[o]]),x(a['morphNormal'+o]),yt.vertexAttribPointer(a['morphNormal'+o],3,yt.FLOAT,!1,0,0)),r.__webglMorphTargetInfluences[o]=s[n[o]],o++;else{var l=[],s=r.morphTargetInfluences,p=s.length,c,d;for(d=0;d<p;d++)c=s[d],0<c&&l.push([c,d]);l.length>e.numSupportedMorphTargets?(l.sort(S),l.length=e.numSupportedMorphTargets):l.length>e.numSupportedMorphNormals?l.sort(S):0===l.length&&l.push([0,0]);for(var o=0,i;o<e.numSupportedMorphTargets;)l[o]?(i=l[o][1],0<=a['morphTarget'+o]&&(yt.bindBuffer(yt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[i]),x(a['morphTarget'+o]),yt.vertexAttribPointer(a['morphTarget'+o],3,yt.FLOAT,!1,0,0)),0<=a['morphNormal'+o]&&e.morphNormals&&(yt.bindBuffer(yt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[i]),x(a['morphNormal'+o]),yt.vertexAttribPointer(a['morphNormal'+o],3,yt.FLOAT,!1,0,0)),r.__webglMorphTargetInfluences[o]=s[i]):r.__webglMorphTargetInfluences[o]=0,o++}null!==e.program.uniforms.morphTargetInfluences&&yt.uniform1fv(e.program.uniforms.morphTargetInfluences,r.__webglMorphTargetInfluences)}function b(e,t){return e.z===t.z?e.id-t.id:t.z-e.z}function S(e,t){return t[0]-e[0]}function M(e,t,r){if(e.length)for(var a=0,o=e.length;a<o;a++)Ne=null,Ge=null,Ye=-1,Ze=-1,Je=-1,je=-1,Xe=-1,ke=-1,Oe=-1,gt=!0,e[a].render(t,r,st,lt),Ne=null,Ge=null,Ye=-1,Ze=-1,Je=-1,je=-1,Xe=-1,ke=-1,Oe=-1,gt=!0}function T(e,t,r,a,o,n,s,l){var p,c,d,m,u,h,g;t?(u=e.length-1,h=-1,g=-1):(u=0,h=e.length,g=1);for(var f=u;f!==h;f+=g)if(p=e[f],p.render){if(c=p.object,d=p.buffer,l)m=l;else{if(m=p[r],!m)continue;s&&Ue.setBlending(m.blending,m.blendEquation,m.blendSrc,m.blendDst),Ue.setDepthTest(m.depthTest),Ue.setDepthWrite(m.depthWrite),ae(m.polygonOffset,m.polygonOffsetFactor,m.polygonOffsetUnits)}Ue.setMaterialFaces(m),d instanceof THREE.BufferGeometry?Ue.renderBufferDirect(a,o,n,m,d,c):Ue.renderBuffer(a,o,n,m,d,c)}}function C(e,t,r,a,o,n,s){for(var l=0,i=e.length,p,c,d;l<i;l++)if(p=e[l],c=p.object,c.visible){if(s)d=s;else{if(d=p[t],!d)continue;n&&Ue.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),Ue.setDepthTest(d.depthTest),Ue.setDepthWrite(d.depthWrite),ae(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits)}Ue.renderImmediateObject(r,a,o,d,c)}}function A(e){var t=e.object,r=t.material;r.transparent?(e.transparent=r,e.opaque=null):(e.opaque=r,e.transparent=null)}function E(e){var t=e.object,r=e.buffer,a,o,i;i=t.material,i instanceof THREE.MeshFaceMaterial?(o=r.materialIndex,a=i.materials[o],a.transparent?(e.transparent=a,e.opaque=null):(e.opaque=a,e.transparent=null)):(a=i,a&&(a.transparent?(e.transparent=a,e.opaque=null):(e.opaque=a,e.transparent=null)))}function w(e,t){var r={},a=e.morphTargets.length,o=e.morphNormals.length,i=t instanceof THREE.MeshFaceMaterial,n,s,l,p,c,d;for(e.geometryGroups={},n=0,s=e.faces.length;n<s;n++)l=e.faces[n],p=i?l.materialIndex:0,void 0===r[p]&&(r[p]={hash:p,counter:0}),d=r[p].hash+'_'+r[p].counter,void 0===e.geometryGroups[d]&&(e.geometryGroups[d]={faces3:[],materialIndex:p,vertices:0,numMorphTargets:a,numMorphNormals:o}),c=3,65535<e.geometryGroups[d].vertices+c&&(r[p].counter+=1,d=r[p].hash+'_'+r[p].counter,void 0===e.geometryGroups[d]&&(e.geometryGroups[d]={faces3:[],materialIndex:p,vertices:0,numMorphTargets:a,numMorphNormals:o})),e.geometryGroups[d].faces3.push(n),e.geometryGroups[d].vertices+=c;for(var m in e.geometryGroupsList=[],e.geometryGroups)e.geometryGroups[m].id=He++,e.geometryGroupsList.push(e.geometryGroups[m])}function L(e,o){var l,p,c,d;if(void 0===e.__webglInit)if(e.__webglInit=!0,e._modelViewMatrix=new THREE.Matrix4,e._normalMatrix=new THREE.Matrix3,void 0!==e.geometry&&void 0===e.geometry.__webglInit&&(e.geometry.__webglInit=!0,e.geometry.addEventListener('dispose',jt)),p=e.geometry,void 0===p);else if(p instanceof THREE.BufferGeometry)m(p);else if(e instanceof THREE.Mesh)for(l in c=e.material,void 0===p.geometryGroups&&w(p,c),p.geometryGroups)d=p.geometryGroups[l],d.__webglVertexBuffer||(a(d),s(d,e),p.verticesNeedUpdate=!0,p.morphTargetsNeedUpdate=!0,p.elementsNeedUpdate=!0,p.uvsNeedUpdate=!0,p.normalsNeedUpdate=!0,p.tangentsNeedUpdate=!0,p.colorsNeedUpdate=!0);else e instanceof THREE.Line?p.__webglVertexBuffer||(r(p),n(p,e),p.verticesNeedUpdate=!0,p.colorsNeedUpdate=!0,p.lineDistancesNeedUpdate=!0):e instanceof THREE.ParticleSystem&&(p.__webglVertexBuffer||(t(p),i(p,e),p.verticesNeedUpdate=!0,p.colorsNeedUpdate=!0));if(void 0===e.__webglActive){if(!(e instanceof THREE.Mesh))e instanceof THREE.Line||e instanceof THREE.ParticleSystem?(p=e.geometry,P(o.__webglObjects,p,e)):e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback?D(o.__webglObjectsImmediate,e):e instanceof THREE.Sprite?o.__webglSprites.push(e):e instanceof THREE.LensFlare&&o.__webglFlares.push(e);else if(p=e.geometry,p instanceof THREE.BufferGeometry)P(o.__webglObjects,p,e);else if(p instanceof THREE.Geometry)for(l in p.geometryGroups)d=p.geometryGroups[l],P(o.__webglObjects,d,e);e.__webglActive=!0}}function P(e,t,r){e.push({id:null,buffer:t,object:r,opaque:null,transparent:null,z:0})}function D(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function R(e){var t=e.geometry,r,a,o;if(t instanceof THREE.BufferGeometry)y(t,yt.DYNAMIC_DRAW,!t.dynamic);else if(e instanceof THREE.Mesh){for(var n=0,i=t.geometryGroupsList.length;n<i;n++)r=t.geometryGroupsList[n],o=l(e,r),t.buffersNeedUpdate&&s(r,e),a=o.attributes&&F(o),(t.verticesNeedUpdate||t.morphTargetsNeedUpdate||t.elementsNeedUpdate||t.uvsNeedUpdate||t.normalsNeedUpdate||t.colorsNeedUpdate||t.tangentsNeedUpdate||a)&&f(r,e,yt.DYNAMIC_DRAW,!t.dynamic,o);t.verticesNeedUpdate=!1,t.morphTargetsNeedUpdate=!1,t.elementsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.tangentsNeedUpdate=!1,t.buffersNeedUpdate=!1,o.attributes&&V(o)}else e instanceof THREE.Line?(o=l(e,t),a=o.attributes&&F(o),(t.verticesNeedUpdate||t.colorsNeedUpdate||t.lineDistancesNeedUpdate||a)&&g(t,yt.DYNAMIC_DRAW),t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,t.lineDistancesNeedUpdate=!1,o.attributes&&V(o)):e instanceof THREE.ParticleSystem&&(o=l(e,t),a=o.attributes&&F(o),(t.verticesNeedUpdate||t.colorsNeedUpdate||e.sortParticles||a)&&h(t,yt.DYNAMIC_DRAW,e),t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,o.attributes&&V(o))}function F(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function V(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function U(e,t){e instanceof THREE.Mesh||e instanceof THREE.ParticleSystem||e instanceof THREE.Line?z(t.__webglObjects,e):e instanceof THREE.Sprite?B(t.__webglSprites,e):e instanceof THREE.LensFlare?B(t.__webglFlares,e):(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&z(t.__webglObjectsImmediate,e),delete e.__webglActive}function z(e,t){for(var r=e.length-1;0<=r;r--)e[r].object===t&&e.splice(r,1)}function B(e,t){for(var r=e.length-1;0<=r;r--)e[r]===t&&e.splice(r,1)}function N(e,t){e.uniforms=THREE.UniformsUtils.clone(t.uniforms),e.vertexShader=t.vertexShader,e.fragmentShader=t.fragmentShader}function I(e,t,r,a,o){We=0,a.needsUpdate&&(a.program&&$t(a),Ue.initMaterial(a,t,r,o),a.needsUpdate=!1),a.morphTargets&&!o.__webglMorphTargetInfluences&&(o.__webglMorphTargetInfluences=new Float32Array(Ue.maxMorphTargets));var i=!1,n=a.program,s=n.uniforms,l=a.uniforms;if(n!==Ne&&(yt.useProgram(n),Ne=n,i=!0),a.id!==Oe&&(Oe=a.id,i=!0),(i||e!==Ge)&&(yt.uniformMatrix4fv(s.projectionMatrix,!1,e.projectionMatrix.elements),e!==Ge&&(Ge=e)),a.skinning)if(Lt&&o.useVertexTexture){if(null!==s.boneTexture){var p=Q();yt.uniform1i(s.boneTexture,p),Ue.setTexture(o.boneTexture,p)}null!==s.boneTextureWidth&&yt.uniform1i(s.boneTextureWidth,o.boneTextureWidth),null!==s.boneTextureHeight&&yt.uniform1i(s.boneTextureHeight,o.boneTextureHeight)}else null!==s.boneGlobalMatrices&&yt.uniformMatrix4fv(s.boneGlobalMatrices,!1,o.boneMatrices);return i&&(r&&a.fog&&W(l,r),(a instanceof THREE.MeshPhongMaterial||a instanceof THREE.MeshLambertMaterial||a.lights)&&(gt&&(te(n,t),gt=!1),Y(l,ft)),(a instanceof THREE.MeshBasicMaterial||a instanceof THREE.MeshLambertMaterial||a instanceof THREE.MeshPhongMaterial)&&O(l,a),a instanceof THREE.LineBasicMaterial?k(l,a):a instanceof THREE.LineDashedMaterial?(k(l,a),G(l,a)):a instanceof THREE.ParticleSystemMaterial?H(l,a):a instanceof THREE.MeshPhongMaterial?j(l,a):a instanceof THREE.MeshLambertMaterial?X(l,a):a instanceof THREE.MeshDepthMaterial?(l.mNear.value=e.near,l.mFar.value=e.far,l.opacity.value=a.opacity):a instanceof THREE.MeshNormalMaterial&&(l.opacity.value=a.opacity),o.receiveShadow&&!a._shadowPass&&q(l,t),Z(n,a.uniformsList),(a instanceof THREE.ShaderMaterial||a instanceof THREE.MeshPhongMaterial||a.envMap)&&null!==s.cameraPosition&&(ut.setFromMatrixPosition(e.matrixWorld),yt.uniform3f(s.cameraPosition,ut.x,ut.y,ut.z)),(a instanceof THREE.MeshPhongMaterial||a instanceof THREE.MeshLambertMaterial||a instanceof THREE.ShaderMaterial||a.skinning)&&null!==s.viewMatrix&&yt.uniformMatrix4fv(s.viewMatrix,!1,e.matrixWorldInverse.elements)),K(s,o),null!==s.modelMatrix&&yt.uniformMatrix4fv(s.modelMatrix,!1,o.matrixWorld.elements),n}function O(e,t){e.opacity.value=t.opacity,Ue.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var r;if(t.map?r=t.map:t.specularMap?r=t.specularMap:t.normalMap?r=t.normalMap:t.bumpMap&&(r=t.bumpMap),void 0!==r){var a=r.offset,o=r.repeat;e.offsetRepeat.value.set(a.x,a.y,o.x,o.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,e.reflectivity.value=Ue.gammaInput?t.reflectivity:t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.combine.value=t.combine,e.useRefract.value=t.envMap&&t.envMap.mapping instanceof THREE.CubeRefractionMapping}function k(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function G(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function H(e,t){e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=Ae.height/2,e.map.value=t.map}function W(e,t){e.fogColor.value=t.color,t instanceof THREE.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof THREE.FogExp2&&(e.fogDensity.value=t.density)}function j(e,t){e.shininess.value=t.shininess,Ue.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function X(e,t){Ue.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function Y(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function q(e,t){if(e.shadowMatrix)for(var r=0,a=0,o=t.length,i;a<o;a++)i=t[a],i.castShadow&&(i instanceof THREE.SpotLight||i instanceof THREE.DirectionalLight&&!i.shadowCascade)&&(e.shadowMap.value[r]=i.shadowMap,e.shadowMapSize.value[r]=i.shadowMapSize,e.shadowMatrix.value[r]=i.shadowMatrix,e.shadowDarkness.value[r]=i.shadowDarkness,e.shadowBias.value[r]=i.shadowBias,r++)}function K(e,t){yt.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&yt.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)}function Q(){var e=We;return e>=Mt&&console.warn('WebGLRenderer: trying to use '+e+' texture units while this GPU supports only '+Mt),We+=1,e}function Z(e,t){var r,a,o,n,s,l,p,i,c,d,m;for(c=0,d=t.length;c<d;c++)if(n=e.uniforms[t[c][1]],n)if(r=t[c][0],o=r.type,a=r.value,'i'===o)yt.uniform1i(n,a);else if('f'===o)yt.uniform1f(n,a);else if('v2'===o)yt.uniform2f(n,a.x,a.y);else if('v3'===o)yt.uniform3f(n,a.x,a.y,a.z);else if('v4'===o)yt.uniform4f(n,a.x,a.y,a.z,a.w);else if('c'===o)yt.uniform3f(n,a.r,a.g,a.b);else if('iv1'===o)yt.uniform1iv(n,a);else if('iv'===o)yt.uniform3iv(n,a);else if('fv1'===o)yt.uniform1fv(n,a);else if('fv'===o)yt.uniform3fv(n,a);else if('v2v'===o){for(void 0===r._array&&(r._array=new Float32Array(2*a.length)),p=0,i=a.length;p<i;p++)m=2*p,r._array[m]=a[p].x,r._array[m+1]=a[p].y;yt.uniform2fv(n,r._array)}else if('v3v'===o){for(void 0===r._array&&(r._array=new Float32Array(3*a.length)),p=0,i=a.length;p<i;p++)m=3*p,r._array[m]=a[p].x,r._array[m+1]=a[p].y,r._array[m+2]=a[p].z;yt.uniform3fv(n,r._array)}else if('v4v'===o){for(void 0===r._array&&(r._array=new Float32Array(4*a.length)),p=0,i=a.length;p<i;p++)m=4*p,r._array[m]=a[p].x,r._array[m+1]=a[p].y,r._array[m+2]=a[p].z,r._array[m+3]=a[p].w;yt.uniform4fv(n,r._array)}else if('m4'===o)void 0===r._array&&(r._array=new Float32Array(16)),a.flattenToArray(r._array),yt.uniformMatrix4fv(n,!1,r._array);else if('m4v'===o){for(void 0===r._array&&(r._array=new Float32Array(16*a.length)),p=0,i=a.length;p<i;p++)a[p].flattenToArrayOffset(r._array,16*p);yt.uniformMatrix4fv(n,!1,r._array)}else if('t'===o){if(s=a,l=Q(),yt.uniform1i(n,l),!s)continue;s.image instanceof Array&&6===s.image.length?ue(s,l):s instanceof THREE.WebGLRenderTargetCube?he(s,l):Ue.setTexture(s,l)}else if('tv'===o){for(void 0===r._array&&(r._array=[]),p=0,i=r.value.length;p<i;p++)r._array[p]=Q();for(yt.uniform1iv(n,r._array),p=0,i=r.value.length;p<i;p++)s=r.value[p],l=r._array[p],s&&Ue.setTexture(s,l)}else console.warn('THREE.WebGLRenderer: Unknown uniform type: '+o)}function J(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function $(e,t,r,a){e[t]=r.r*r.r*a,e[t+1]=r.g*r.g*a,e[t+2]=r.b*r.b*a}function ee(e,t,r,a){e[t]=r.r*a,e[t+1]=r.g*a,e[t+2]=r.b*a}function te(e,t){var a=0,r=0,o=0,i=ft,n=i.directional.colors,s=i.directional.positions,p=i.point.colors,c=i.point.positions,d=i.point.distances,m=i.spot.colors,u=i.spot.positions,h=i.spot.distances,g=i.spot.directions,f=i.spot.anglesCos,y=i.spot.exponents,x=i.hemi.skyColors,v=i.hemi.groundColors,_=i.hemi.positions,b=0,S=0,M=0,T=0,C=0,A=0,E=0,w=0,L=0,P=0,D=0,R=0,F,l,V,U,z,B,N,I,O;for(F=0,l=t.length;F<l;F++)if(V=t[F],!V.onlyShadow)if(U=V.color,N=V.intensity,O=V.distance,V instanceof THREE.AmbientLight){if(!V.visible)continue;Ue.gammaInput?(a+=U.r*U.r,r+=U.g*U.g,o+=U.b*U.b):(a+=U.r,r+=U.g,o+=U.b)}else if(V instanceof THREE.DirectionalLight){if(C+=1,!V.visible)continue;if(ht.setFromMatrixPosition(V.matrixWorld),ut.setFromMatrixPosition(V.target.matrixWorld),ht.sub(ut),ht.normalize(),0===ht.x&&0===ht.y&&0===ht.z)continue;L=3*b,s[L]=ht.x,s[L+1]=ht.y,s[L+2]=ht.z,Ue.gammaInput?$(n,L,U,N*N):ee(n,L,U,N),b+=1}else if(V instanceof THREE.PointLight){if(A+=1,!V.visible)continue;P=3*S,Ue.gammaInput?$(p,P,U,N*N):ee(p,P,U,N),ut.setFromMatrixPosition(V.matrixWorld),c[P]=ut.x,c[P+1]=ut.y,c[P+2]=ut.z,d[S]=O,S+=1}else if(V instanceof THREE.SpotLight){if(E+=1,!V.visible)continue;D=3*M,Ue.gammaInput?$(m,D,U,N*N):ee(m,D,U,N),ut.setFromMatrixPosition(V.matrixWorld),u[D]=ut.x,u[D+1]=ut.y,u[D+2]=ut.z,h[M]=O,ht.copy(ut),ut.setFromMatrixPosition(V.target.matrixWorld),ht.sub(ut),ht.normalize(),g[D]=ht.x,g[D+1]=ht.y,g[D+2]=ht.z,f[M]=Math.cos(V.angle),y[M]=V.exponent,M+=1}else if(V instanceof THREE.HemisphereLight){if(w+=1,!V.visible)continue;if(ht.setFromMatrixPosition(V.matrixWorld),ht.normalize(),0===ht.x&&0===ht.y&&0===ht.z)continue;R=3*T,_[R]=ht.x,_[R+1]=ht.y,_[R+2]=ht.z,z=V.color,B=V.groundColor,Ue.gammaInput?(I=N*N,$(x,R,z,I),$(v,R,B,I)):(ee(x,R,z,N),ee(v,R,B,N)),T+=1}for(F=3*b,l=Ce(n.length,3*C);F<l;F++)n[F]=0;for(F=3*S,l=Ce(p.length,3*A);F<l;F++)p[F]=0;for(F=3*M,l=Ce(m.length,3*E);F<l;F++)m[F]=0;for(F=3*T,l=Ce(x.length,3*w);F<l;F++)x[F]=0;for(F=3*T,l=Ce(v.length,3*w);F<l;F++)v[F]=0;i.directional.length=b,i.point.length=S,i.spot.length=M,i.hemi.length=T,i.ambient[0]=a,i.ambient[1]=r,i.ambient[2]=o}function re(e){e!==rt&&(yt.lineWidth(e),rt=e)}function ae(e,t,r){$e!==e&&(e?yt.enable(yt.POLYGON_OFFSET_FILL):yt.disable(yt.POLYGON_OFFSET_FILL),$e=e),e&&(et!==t||tt!==r)&&(yt.polygonOffset(t,r),et=t,tt=r)}function oe(e){var t=[],r,a;for(var o in e)r=e[o],!1===r||(a='#define '+o+' '+r,t.push(a));return t.join('\n')}function ie(e,t,r,o,n,s,l,c){var m=[],h,p,g,d,f;for(g in e?m.push(e):(m.push(t),m.push(r)),s)m.push(g),m.push(s[g]);for(h in l)m.push(h),m.push(l[h]);for(f=m.join(),h=0,p=ze.length;h<p;h++){var y=ze[h];if(y.code===f)return y.usedTimes++,y.program}var x='SHADOWMAP_TYPE_BASIC';l.shadowMapType===THREE.PCFShadowMap?x='SHADOWMAP_TYPE_PCF':l.shadowMapType===THREE.PCFSoftShadowMap&&(x='SHADOWMAP_TYPE_PCF_SOFT');var v=oe(s);d=yt.createProgram();var _=['precision '+Ee+' float;','precision '+Ee+' int;',v,wt?'#define VERTEX_TEXTURES':'',Ue.gammaInput?'#define GAMMA_INPUT':'',Ue.gammaOutput?'#define GAMMA_OUTPUT':'',Ue.physicallyBasedShading?'#define PHYSICALLY_BASED_SHADING':'','#define MAX_DIR_LIGHTS '+l.maxDirLights,'#define MAX_POINT_LIGHTS '+l.maxPointLights,'#define MAX_SPOT_LIGHTS '+l.maxSpotLights,'#define MAX_HEMI_LIGHTS '+l.maxHemiLights,'#define MAX_SHADOWS '+l.maxShadows,'#define MAX_BONES '+l.maxBones,l.map?'#define USE_MAP':'',l.envMap?'#define USE_ENVMAP':'',l.lightMap?'#define USE_LIGHTMAP':'',l.bumpMap?'#define USE_BUMPMAP':'',l.normalMap?'#define USE_NORMALMAP':'',l.specularMap?'#define USE_SPECULARMAP':'',l.vertexColors?'#define USE_COLOR':'',l.skinning?'#define USE_SKINNING':'',l.useVertexTexture?'#define BONE_TEXTURE':'',l.morphTargets?'#define USE_MORPHTARGETS':'',l.morphNormals?'#define USE_MORPHNORMALS':'',l.perPixel?'#define PHONG_PER_PIXEL':'',l.wrapAround?'#define WRAP_AROUND':'',l.doubleSided?'#define DOUBLE_SIDED':'',l.flipSided?'#define FLIP_SIDED':'',l.shadowMapEnabled?'#define USE_SHADOWMAP':'',l.shadowMapEnabled?'#define '+x:'',l.shadowMapDebug?'#define SHADOWMAP_DEBUG':'',l.shadowMapCascade?'#define SHADOWMAP_CASCADE':'',l.sizeAttenuation?'#define USE_SIZEATTENUATION':'','uniform mat4 modelMatrix;','uniform mat4 modelViewMatrix;','uniform mat4 projectionMatrix;','uniform mat4 viewMatrix;','uniform mat3 normalMatrix;','uniform vec3 cameraPosition;','attribute vec3 position;','attribute vec3 normal;','attribute vec2 uv;','attribute vec2 uv2;','#ifdef USE_COLOR','attribute vec3 color;','#endif','#ifdef USE_MORPHTARGETS','attribute vec3 morphTarget0;','attribute vec3 morphTarget1;','attribute vec3 morphTarget2;','attribute vec3 morphTarget3;','#ifdef USE_MORPHNORMALS','attribute vec3 morphNormal0;','attribute vec3 morphNormal1;','attribute vec3 morphNormal2;','attribute vec3 morphNormal3;','#else','attribute vec3 morphTarget4;','attribute vec3 morphTarget5;','attribute vec3 morphTarget6;','attribute vec3 morphTarget7;','#endif','#endif','#ifdef USE_SKINNING','attribute vec4 skinIndex;','attribute vec4 skinWeight;','#endif',''].join('\n'),b=['precision '+Ee+' float;','precision '+Ee+' int;',l.bumpMap||l.normalMap?'#extension GL_OES_standard_derivatives : enable':'',v,'#define MAX_DIR_LIGHTS '+l.maxDirLights,'#define MAX_POINT_LIGHTS '+l.maxPointLights,'#define MAX_SPOT_LIGHTS '+l.maxSpotLights,'#define MAX_HEMI_LIGHTS '+l.maxHemiLights,'#define MAX_SHADOWS '+l.maxShadows,l.alphaTest?'#define ALPHATEST '+l.alphaTest:'',Ue.gammaInput?'#define GAMMA_INPUT':'',Ue.gammaOutput?'#define GAMMA_OUTPUT':'',Ue.physicallyBasedShading?'#define PHYSICALLY_BASED_SHADING':'',l.useFog&&l.fog?'#define USE_FOG':'',l.useFog&&l.fogExp?'#define FOG_EXP2':'',l.map?'#define USE_MAP':'',l.envMap?'#define USE_ENVMAP':'',l.lightMap?'#define USE_LIGHTMAP':'',l.bumpMap?'#define USE_BUMPMAP':'',l.normalMap?'#define USE_NORMALMAP':'',l.specularMap?'#define USE_SPECULARMAP':'',l.vertexColors?'#define USE_COLOR':'',l.metal?'#define METAL':'',l.perPixel?'#define PHONG_PER_PIXEL':'',l.wrapAround?'#define WRAP_AROUND':'',l.doubleSided?'#define DOUBLE_SIDED':'',l.flipSided?'#define FLIP_SIDED':'',l.shadowMapEnabled?'#define USE_SHADOWMAP':'',l.shadowMapEnabled?'#define '+x:'',l.shadowMapDebug?'#define SHADOWMAP_DEBUG':'',l.shadowMapCascade?'#define SHADOWMAP_CASCADE':'','uniform mat4 viewMatrix;','uniform vec3 cameraPosition;',''].join('\n'),S=pe('vertex',_+r),M=pe('fragment',b+t);yt.attachShader(d,S),yt.attachShader(d,M),c&&yt.bindAttribLocation(d,0,c),yt.linkProgram(d),yt.getProgramParameter(d,yt.LINK_STATUS)||(console.error('Could not initialise shader\nVALIDATE_STATUS: '+yt.getProgramParameter(d,yt.VALIDATE_STATUS)+', gl error ['+yt.getError()+']'),console.error('Program Info Log: '+yt.getProgramInfoLog(d))),yt.deleteShader(M),yt.deleteShader(S),d.uniforms={},d.attributes={};var T,C,u,a;for(C in T=['viewMatrix','modelViewMatrix','projectionMatrix','normalMatrix','modelMatrix','cameraPosition','morphTargetInfluences'],l.useVertexTexture?(T.push('boneTexture'),T.push('boneTextureWidth'),T.push('boneTextureHeight')):T.push('boneGlobalMatrices'),o)T.push(C);for(ne(d,T),T=['position','normal','uv','uv2','tangent','color','skinIndex','skinWeight','lineDistance'],a=0;a<l.maxMorphTargets;a++)T.push('morphTarget'+a);for(a=0;a<l.maxMorphNormals;a++)T.push('morphNormal'+a);for(u in n)T.push(u);return se(d,T),d.id=Be++,ze.push({program:d,code:f,usedTimes:1}),Ue.info.memory.programs=ze.length,d}function ne(e,t){var r,a,o;for(r=0,a=t.length;r<a;r++)o=t[r],e.uniforms[o]=yt.getUniformLocation(e,o)}function se(e,t){var r,a,o;for(r=0,a=t.length;r<a;r++)o=t[r],e.attributes[o]=yt.getAttribLocation(e,o)}function le(e){for(var t=e.split('\n'),r=0,a=t.length;r<a;r++)t[r]=r+1+': '+t[r];return t.join('\n')}function pe(e,t){var r;return'fragment'===e?r=yt.createShader(yt.FRAGMENT_SHADER):'vertex'===e&&(r=yt.createShader(yt.VERTEX_SHADER)),yt.shaderSource(r,t),yt.compileShader(r),yt.getShaderParameter(r,yt.COMPILE_STATUS)?r:(console.error(yt.getShaderInfoLog(r)),console.error(le(t)),null)}function ce(e){return 0===(e&e-1)}function de(e,t,r){r?(yt.texParameteri(e,yt.TEXTURE_WRAP_S,ve(t.wrapS)),yt.texParameteri(e,yt.TEXTURE_WRAP_T,ve(t.wrapT)),yt.texParameteri(e,yt.TEXTURE_MAG_FILTER,ve(t.magFilter)),yt.texParameteri(e,yt.TEXTURE_MIN_FILTER,ve(t.minFilter))):(yt.texParameteri(e,yt.TEXTURE_WRAP_S,yt.CLAMP_TO_EDGE),yt.texParameteri(e,yt.TEXTURE_WRAP_T,yt.CLAMP_TO_EDGE),yt.texParameteri(e,yt.TEXTURE_MAG_FILTER,xe(t.magFilter)),yt.texParameteri(e,yt.TEXTURE_MIN_FILTER,xe(t.minFilter))),bt&&t.type!==THREE.FloatType&&(1<t.anisotropy||t.__oldAnisotropy)&&(yt.texParameterf(e,bt.TEXTURE_MAX_ANISOTROPY_EXT,Me(t.anisotropy,Et)),t.__oldAnisotropy=t.anisotropy)}function me(e,t){if(e.width<=t&&e.height<=t)return e;var r=Ce(e.width,e.height),a=Te(e.width*t/r),o=Te(e.height*t/r),i=document.createElement('canvas');i.width=a,i.height=o;var n=i.getContext('2d');return n.drawImage(e,0,0,e.width,e.height,0,0,a,o),i}function ue(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener('dispose',Xt),e.image.__webglTextureCube=yt.createTexture(),Ue.info.memory.textures++),yt.activeTexture(yt.TEXTURE0+t),yt.bindTexture(yt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),yt.pixelStorei(yt.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var r=e instanceof THREE.CompressedTexture,a=[],o=0;6>o;o++)a[o]=Ue.autoScaleCubemaps&&!r?me(e.image[o],At):e.image[o];var i=a[0],n=ce(i.width)&&ce(i.height),s=ve(e.format),l=ve(e.type);de(yt.TEXTURE_CUBE_MAP,e,n);for(var o=0;6>o;o++)if(!r)yt.texImage2D(yt.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,s,s,l,a[o]);else for(var p=a[o].mipmaps,c=0,d=p.length,m;c<d;c++)m=p[c],e.format===THREE.RGBAFormat?yt.texImage2D(yt.TEXTURE_CUBE_MAP_POSITIVE_X+o,c,s,m.width,m.height,0,s,l,m.data):yt.compressedTexImage2D(yt.TEXTURE_CUBE_MAP_POSITIVE_X+o,c,s,m.width,m.height,0,m.data);e.generateMipmaps&&n&&yt.generateMipmap(yt.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else yt.activeTexture(yt.TEXTURE0+t),yt.bindTexture(yt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function he(e,t){yt.activeTexture(yt.TEXTURE0+t),yt.bindTexture(yt.TEXTURE_CUBE_MAP,e.__webglTexture)}function ge(e,t,r){yt.bindFramebuffer(yt.FRAMEBUFFER,e),yt.framebufferTexture2D(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,r,t.__webglTexture,0)}function fe(e,t){yt.bindRenderbuffer(yt.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(yt.renderbufferStorage(yt.RENDERBUFFER,yt.DEPTH_COMPONENT16,t.width,t.height),yt.framebufferRenderbuffer(yt.FRAMEBUFFER,yt.DEPTH_ATTACHMENT,yt.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(yt.renderbufferStorage(yt.RENDERBUFFER,yt.DEPTH_STENCIL,t.width,t.height),yt.framebufferRenderbuffer(yt.FRAMEBUFFER,yt.DEPTH_STENCIL_ATTACHMENT,yt.RENDERBUFFER,e)):yt.renderbufferStorage(yt.RENDERBUFFER,yt.RGBA4,t.width,t.height)}function ye(e){e instanceof THREE.WebGLRenderTargetCube?(yt.bindTexture(yt.TEXTURE_CUBE_MAP,e.__webglTexture),yt.generateMipmap(yt.TEXTURE_CUBE_MAP),yt.bindTexture(yt.TEXTURE_CUBE_MAP,null)):(yt.bindTexture(yt.TEXTURE_2D,e.__webglTexture),yt.generateMipmap(yt.TEXTURE_2D),yt.bindTexture(yt.TEXTURE_2D,null))}function xe(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?yt.NEAREST:yt.LINEAR}function ve(e){if(e===THREE.RepeatWrapping)return yt.REPEAT;if(e===THREE.ClampToEdgeWrapping)return yt.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return yt.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return yt.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return yt.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return yt.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return yt.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return yt.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return yt.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return yt.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return yt.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return yt.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return yt.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return yt.BYTE;if(e===THREE.ShortType)return yt.SHORT;if(e===THREE.UnsignedShortType)return yt.UNSIGNED_SHORT;if(e===THREE.IntType)return yt.INT;if(e===THREE.UnsignedIntType)return yt.UNSIGNED_INT;if(e===THREE.FloatType)return yt.FLOAT;if(e===THREE.AlphaFormat)return yt.ALPHA;if(e===THREE.RGBFormat)return yt.RGB;if(e===THREE.RGBAFormat)return yt.RGBA;if(e===THREE.LuminanceFormat)return yt.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return yt.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return yt.FUNC_ADD;if(e===THREE.SubtractEquation)return yt.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return yt.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return yt.ZERO;if(e===THREE.OneFactor)return yt.ONE;if(e===THREE.SrcColorFactor)return yt.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return yt.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return yt.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return yt.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return yt.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return yt.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return yt.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return yt.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return yt.SRC_ALPHA_SATURATE;if(void 0!==St){if(e===THREE.RGB_S3TC_DXT1_Format)return St.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return St.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return St.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return St.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}function _e(e){if(Lt&&e&&e.useVertexTexture)return 1024;var t=yt.getParameter(yt.MAX_VERTEX_UNIFORM_VECTORS),r=Te((t-20)/4),a=r;return void 0!==e&&e instanceof THREE.SkinnedMesh&&(a=Me(e.bones.length,a),a<e.bones.length&&console.warn('WebGLRenderer: too many bones - '+e.bones.length+', this GPU supports just '+a+' (try OpenGL instead of ANGLE)')),a}function be(e){for(var t=0,r=0,a=0,o=0,i=0,n=e.length,s;i<n;i++)s=e[i],s.onlyShadow||(s instanceof THREE.DirectionalLight&&t++,s instanceof THREE.PointLight&&r++,s instanceof THREE.SpotLight&&a++,s instanceof THREE.HemisphereLight&&o++);return{directional:t,point:r,spot:a,hemi:o}}function Se(e){for(var t=0,r=0,a=e.length,o;r<a;r++)o=e[r],o.castShadow&&(o instanceof THREE.SpotLight&&t++,o instanceof THREE.DirectionalLight&&!o.shadowCascade&&t++);return t}var Me=Math.min,Te=Math.floor,Ce=Math.max;console.log('THREE.WebGLRenderer',THREE.REVISION),e=e||{};var Ae=e.canvas===void 0?document.createElement('canvas'):e.canvas,Ee=e.precision===void 0?'highp':e.precision,we=e.alpha!==void 0&&e.alpha,Le=!(e.premultipliedAlpha!==void 0)||e.premultipliedAlpha,Pe=e.antialias!==void 0&&e.antialias,De=!(e.stencil!==void 0)||e.stencil,Re=e.preserveDrawingBuffer!==void 0&&e.preserveDrawingBuffer,Fe=new THREE.Color(0),Ve=0;this.domElement=Ae,this.context=null,this.devicePixelRatio=e.devicePixelRatio===void 0?self.devicePixelRatio===void 0?1:self.devicePixelRatio:e.devicePixelRatio,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyBasedShading=!1,this.shadowMapEnabled=!1,this.shadowMapAutoUpdate=!0,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Ue=this,ze=[],Be=0,Ne=null,Ie=null,Oe=-1,ke=null,Ge=null,He=0,We=0,je=-1,Xe=-1,Ye=-1,qe=-1,Ke=-1,Qe=-1,Ze=-1,Je=-1,$e=null,et=null,tt=null,rt=null,at=0,ot=0,it=Ae.width,nt=Ae.height,st=0,lt=0,pt={},ct=new THREE.Frustum,dt=new THREE.Matrix4,mt=new THREE.Matrix4,ut=new THREE.Vector3,ht=new THREE.Vector3,gt=!0,ft={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},yt,xt,vt,_t,bt,St;(function(){try{var e={alpha:we,premultipliedAlpha:Le,antialias:Pe,stencil:De,preserveDrawingBuffer:Re};if(yt=Ae.getContext('webgl',e)||Ae.getContext('experimental-webgl',e),null===yt)throw'Error creating WebGL context.'}catch(e){console.error(e)}xt=yt.getExtension('OES_texture_float'),vt=yt.getExtension('OES_texture_float_linear'),_t=yt.getExtension('OES_standard_derivatives'),bt=yt.getExtension('EXT_texture_filter_anisotropic')||yt.getExtension('MOZ_EXT_texture_filter_anisotropic')||yt.getExtension('WEBKIT_EXT_texture_filter_anisotropic'),St=yt.getExtension('WEBGL_compressed_texture_s3tc')||yt.getExtension('MOZ_WEBGL_compressed_texture_s3tc')||yt.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc'),xt||console.log('THREE.WebGLRenderer: Float textures not supported.'),_t||console.log('THREE.WebGLRenderer: Standard derivatives not supported.'),bt||console.log('THREE.WebGLRenderer: Anisotropic texture filtering not supported.'),St||console.log('THREE.WebGLRenderer: S3TC compressed textures not supported.'),yt.getShaderPrecisionFormat===void 0&&(yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})})(),function(){yt.clearColor(0,0,0,1),yt.clearDepth(1),yt.clearStencil(0),yt.enable(yt.DEPTH_TEST),yt.depthFunc(yt.LEQUAL),yt.frontFace(yt.CCW),yt.cullFace(yt.BACK),yt.enable(yt.CULL_FACE),yt.enable(yt.BLEND),yt.blendEquation(yt.FUNC_ADD),yt.blendFunc(yt.SRC_ALPHA,yt.ONE_MINUS_SRC_ALPHA),yt.viewport(at,ot,it,nt),yt.clearColor(Fe.r,Fe.g,Fe.b,Ve)}(),this.context=yt;var Mt=yt.getParameter(yt.MAX_TEXTURE_IMAGE_UNITS),Tt=yt.getParameter(yt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Ct=yt.getParameter(yt.MAX_TEXTURE_SIZE),At=yt.getParameter(yt.MAX_CUBE_MAP_TEXTURE_SIZE),Et=bt?yt.getParameter(bt.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,wt=0<Tt,Lt=wt&&xt,Pt=St?yt.getParameter(yt.COMPRESSED_TEXTURE_FORMATS):[],Dt=yt.getShaderPrecisionFormat(yt.VERTEX_SHADER,yt.HIGH_FLOAT),Rt=yt.getShaderPrecisionFormat(yt.VERTEX_SHADER,yt.MEDIUM_FLOAT),Ft=yt.getShaderPrecisionFormat(yt.VERTEX_SHADER,yt.LOW_FLOAT),Vt=yt.getShaderPrecisionFormat(yt.FRAGMENT_SHADER,yt.HIGH_FLOAT),Ut=yt.getShaderPrecisionFormat(yt.FRAGMENT_SHADER,yt.MEDIUM_FLOAT),zt=yt.getShaderPrecisionFormat(yt.FRAGMENT_SHADER,yt.LOW_FLOAT),Bt=yt.getShaderPrecisionFormat(yt.VERTEX_SHADER,yt.HIGH_INT),Nt=yt.getShaderPrecisionFormat(yt.VERTEX_SHADER,yt.MEDIUM_INT),It=yt.getShaderPrecisionFormat(yt.VERTEX_SHADER,yt.LOW_INT),Ot=yt.getShaderPrecisionFormat(yt.FRAGMENT_SHADER,yt.HIGH_INT),kt=yt.getShaderPrecisionFormat(yt.FRAGMENT_SHADER,yt.MEDIUM_INT),Gt=yt.getShaderPrecisionFormat(yt.FRAGMENT_SHADER,yt.LOW_INT),Ht=0<Dt.precision&&0<Vt.precision,Wt=0<Rt.precision&&0<Ut.precision;'highp'!==Ee||Ht||(Wt?(Ee='mediump',console.warn('WebGLRenderer: highp not supported, using mediump')):(Ee='lowp',console.warn('WebGLRenderer: highp and mediump not supported, using lowp'))),'mediump'!==Ee||Wt||(Ee='lowp',console.warn('WebGLRenderer: mediump not supported, using lowp')),this.getContext=function(){return yt},this.supportsVertexTextures=function(){return wt},this.supportsFloatTextures=function(){return xt},this.supportsStandardDerivatives=function(){return _t},this.supportsCompressedTextureS3TC=function(){return St},this.getMaxAnisotropy=function(){return Et},this.getPrecision=function(){return Ee},this.setSize=function(e,t,r){Ae.width=e*this.devicePixelRatio,Ae.height=t*this.devicePixelRatio,1!==this.devicePixelRatio&&!1!==r&&(Ae.style.width=e+'px',Ae.style.height=t+'px'),this.setViewport(0,0,Ae.width,Ae.height)},this.setViewport=function(e,t,r,a){at=e===void 0?0:e,ot=t===void 0?0:t,it=r===void 0?Ae.width:r,nt=a===void 0?Ae.height:a,yt.viewport(at,ot,it,nt)},this.setScissor=function(e,t,r,a){yt.scissor(e,t,r,a)},this.enableScissorTest=function(e){e?yt.enable(yt.SCISSOR_TEST):yt.disable(yt.SCISSOR_TEST)},this.setClearColor=function(e,t){Fe.set(e),Ve=t===void 0?1:t,yt.clearColor(Fe.r,Fe.g,Fe.b,Ve)},this.setClearColorHex=function(e,t){console.warn('DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.'),this.setClearColor(e,t)},this.getClearColor=function(){return Fe},this.getClearAlpha=function(){return Ve},this.clear=function(e,t,r){var a=0;(e===void 0||e)&&(a|=yt.COLOR_BUFFER_BIT),(t===void 0||t)&&(a|=yt.DEPTH_BUFFER_BIT),(r===void 0||r)&&(a|=yt.STENCIL_BUFFER_BIT),yt.clear(a)},this.clearColor=function(){yt.clear(yt.COLOR_BUFFER_BIT)},this.clearDepth=function(){yt.clear(yt.DEPTH_BUFFER_BIT)},this.clearStencil=function(){yt.clear(yt.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,r,a){this.setRenderTarget(e),this.clear(t,r,a)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)},this.addPrePlugin=function(e){e.init(this),this.renderPluginsPre.push(e)},this.updateShadowMap=function(e,t){Ne=null,Ye=-1,Ze=-1,Je=-1,ke=-1,Oe=-1,gt=!0,je=-1,Xe=-1,this.shadowMapPlugin.update(e,t)};var jt=function(e){var t=e.target;t.removeEventListener('dispose',jt),Qt(t)},Xt=function(e){var t=e.target;t.removeEventListener('dispose',Xt),Zt(t),Ue.info.memory.textures--},Yt=function(e){var t=e.target;t.removeEventListener('dispose',Yt),Jt(t),Ue.info.memory.textures--},qt=function(e){var t=e.target;t.removeEventListener('dispose',qt),$t(t)},Kt=function(e){if(void 0!==e.__webglVertexBuffer&&yt.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglNormalBuffer&&yt.deleteBuffer(e.__webglNormalBuffer),void 0!==e.__webglTangentBuffer&&yt.deleteBuffer(e.__webglTangentBuffer),void 0!==e.__webglColorBuffer&&yt.deleteBuffer(e.__webglColorBuffer),void 0!==e.__webglUVBuffer&&yt.deleteBuffer(e.__webglUVBuffer),void 0!==e.__webglUV2Buffer&&yt.deleteBuffer(e.__webglUV2Buffer),void 0!==e.__webglSkinIndicesBuffer&&yt.deleteBuffer(e.__webglSkinIndicesBuffer),void 0!==e.__webglSkinWeightsBuffer&&yt.deleteBuffer(e.__webglSkinWeightsBuffer),void 0!==e.__webglFaceBuffer&&yt.deleteBuffer(e.__webglFaceBuffer),void 0!==e.__webglLineBuffer&&yt.deleteBuffer(e.__webglLineBuffer),void 0!==e.__webglLineDistanceBuffer&&yt.deleteBuffer(e.__webglLineDistanceBuffer),void 0!==e.__webglCustomAttributesList)for(var t in e.__webglCustomAttributesList)yt.deleteBuffer(e.__webglCustomAttributesList[t].buffer);Ue.info.memory.geometries--},Qt=function(e){if(e.__webglInit=void 0,e instanceof THREE.BufferGeometry){var t=e.attributes;for(var r in t)void 0!==t[r].buffer&&yt.deleteBuffer(t[r].buffer);Ue.info.memory.geometries--}else if(void 0!==e.geometryGroups)for(var a in e.geometryGroups){var o=e.geometryGroups[a];if(void 0!==o.numMorphTargets)for(var i=0,n=o.numMorphTargets;i<n;i++)yt.deleteBuffer(o.__webglMorphTargetsBuffers[i]);if(void 0!==o.numMorphNormals)for(var i=0,n=o.numMorphNormals;i<n;i++)yt.deleteBuffer(o.__webglMorphNormalsBuffers[i]);Kt(o)}else Kt(e)},Zt=function(e){if(e.image&&e.image.__webglTextureCube)yt.deleteTexture(e.image.__webglTextureCube);else{if(!e.__webglInit)return;e.__webglInit=!1,yt.deleteTexture(e.__webglTexture)}},Jt=function(e){if(e&&e.__webglTexture)if(yt.deleteTexture(e.__webglTexture),e instanceof THREE.WebGLRenderTargetCube)for(var t=0;6>t;t++)yt.deleteFramebuffer(e.__webglFramebuffer[t]),yt.deleteRenderbuffer(e.__webglRenderbuffer[t]);else yt.deleteFramebuffer(e.__webglFramebuffer),yt.deleteRenderbuffer(e.__webglRenderbuffer)},$t=function(e){var t=e.program;if(void 0!==t){e.program=void 0;var r=!1,a,o,i;for(a=0,o=ze.length;a<o;a++)if(i=ze[a],i.program===t){i.usedTimes--,0===i.usedTimes&&(r=!0);break}if(!0===r){var n=[];for(a=0,o=ze.length;a<o;a++)i=ze[a],i.program!==t&&n.push(i);ze=n,yt.deleteProgram(t),Ue.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,r){if(e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=yt.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=yt.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=yt.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=yt.createBuffer()),e.hasPositions&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglVertexBuffer),yt.bufferData(yt.ARRAY_BUFFER,e.positionArray,yt.DYNAMIC_DRAW),yt.enableVertexAttribArray(t.attributes.position),yt.vertexAttribPointer(t.attributes.position,3,yt.FLOAT,!1,0,0)),e.hasNormals){if(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglNormalBuffer),r.shading===THREE.FlatShading){var a=3*e.count,o,n,s,l,p,c,d,m,u,h,g,f,y,x;for(x=0;x<a;x+=9)y=e.normalArray,l=y[x],d=y[x+1],h=y[x+2],p=y[x+3],m=y[x+4],g=y[x+5],c=y[x+6],u=y[x+7],f=y[x+8],o=(l+p+c)/3,n=(d+m+u)/3,s=(h+g+f)/3,y[x]=o,y[x+1]=n,y[x+2]=s,y[x+3]=o,y[x+4]=n,y[x+5]=s,y[x+6]=o,y[x+7]=n,y[x+8]=s}yt.bufferData(yt.ARRAY_BUFFER,e.normalArray,yt.DYNAMIC_DRAW),yt.enableVertexAttribArray(t.attributes.normal),yt.vertexAttribPointer(t.attributes.normal,3,yt.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglUvBuffer),yt.bufferData(yt.ARRAY_BUFFER,e.uvArray,yt.DYNAMIC_DRAW),yt.enableVertexAttribArray(t.attributes.uv),yt.vertexAttribPointer(t.attributes.uv,2,yt.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==THREE.NoColors&&(yt.bindBuffer(yt.ARRAY_BUFFER,e.__webglColorBuffer),yt.bufferData(yt.ARRAY_BUFFER,e.colorArray,yt.DYNAMIC_DRAW),yt.enableVertexAttribArray(t.attributes.color),yt.vertexAttribPointer(t.attributes.color,3,yt.FLOAT,!1,0,0)),yt.drawArrays(yt.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,a,o,n){if(!1!==a.visible){var s=I(e,t,r,a,n),l=s.attributes,p=o.attributes,c=!1,d=a.wireframe?1:0,m=16777215*o.id+2*s.id+d,u,h,g,f;if(m!==ke&&(ke=m,c=!0),c&&v(),n instanceof THREE.Mesh){var y=p.index;if(y){var _=o.offsets;1<_.length&&(c=!0);for(var b=0,i=_.length,S;b<i;b++){if(S=_[b].index,c){for(h in l)g=l[h],u=p[h],0<=g&&(u?(f=u.itemSize,yt.bindBuffer(yt.ARRAY_BUFFER,u.buffer),x(g),yt.vertexAttribPointer(g,f,yt.FLOAT,!1,0,4*(S*f))):a.defaultAttributeValues&&(2===a.defaultAttributeValues[h].length?yt.vertexAttrib2fv(g,a.defaultAttributeValues[h]):3===a.defaultAttributeValues[h].length&&yt.vertexAttrib3fv(g,a.defaultAttributeValues[h])));yt.bindBuffer(yt.ELEMENT_ARRAY_BUFFER,y.buffer)}yt.drawElements(yt.TRIANGLES,_[b].count,yt.UNSIGNED_SHORT,2*_[b].start),Ue.info.render.calls++,Ue.info.render.vertices+=_[b].count,Ue.info.render.faces+=_[b].count/3}}else{if(c)for(h in l)'index'!==h&&(g=l[h],u=p[h],0<=g&&(u?(f=u.itemSize,yt.bindBuffer(yt.ARRAY_BUFFER,u.buffer),x(g),yt.vertexAttribPointer(g,f,yt.FLOAT,!1,0,0)):a.defaultAttributeValues&&a.defaultAttributeValues[h]&&(2===a.defaultAttributeValues[h].length?yt.vertexAttrib2fv(g,a.defaultAttributeValues[h]):3===a.defaultAttributeValues[h].length&&yt.vertexAttrib3fv(g,a.defaultAttributeValues[h]))));var M=o.attributes.position;yt.drawArrays(yt.TRIANGLES,0,M.numItems/3),Ue.info.render.calls++,Ue.info.render.vertices+=M.numItems/3,Ue.info.render.faces+=M.numItems/3/3}}else if(n instanceof THREE.ParticleSystem){if(c){for(h in l)g=l[h],u=p[h],0<=g&&(u?(f=u.itemSize,yt.bindBuffer(yt.ARRAY_BUFFER,u.buffer),x(g),yt.vertexAttribPointer(g,f,yt.FLOAT,!1,0,0)):a.defaultAttributeValues&&a.defaultAttributeValues[h]&&(2===a.defaultAttributeValues[h].length?yt.vertexAttrib2fv(g,a.defaultAttributeValues[h]):3===a.defaultAttributeValues[h].length&&yt.vertexAttrib3fv(g,a.defaultAttributeValues[h])));var M=p.position;yt.drawArrays(yt.POINTS,0,M.numItems/3),Ue.info.render.calls++,Ue.info.render.points+=M.numItems/3}}else if(n instanceof THREE.Line&&c){for(h in l)g=l[h],u=p[h],0<=g&&(u?(f=u.itemSize,yt.bindBuffer(yt.ARRAY_BUFFER,u.buffer),x(g),yt.vertexAttribPointer(g,f,yt.FLOAT,!1,0,0)):a.defaultAttributeValues&&a.defaultAttributeValues[h]&&(2===a.defaultAttributeValues[h].length?yt.vertexAttrib2fv(g,a.defaultAttributeValues[h]):3===a.defaultAttributeValues[h].length&&yt.vertexAttrib3fv(g,a.defaultAttributeValues[h])));var T=n.type===THREE.LineStrip?yt.LINE_STRIP:yt.LINES;re(a.linewidth);var M=p.position;yt.drawArrays(T,0,M.numItems/3),Ue.info.render.calls++,Ue.info.render.points+=M.numItems}}},this.renderBuffer=function(e,t,r,a,o,n){if(!1!==a.visible){var s=I(e,t,r,a,n),l=s.attributes,p=!1,c=a.wireframe?1:0,d=16777215*o.id+2*s.id+c,m,u,i;if(d!==ke&&(ke=d,p=!0),p&&v(),!a.morphTargets&&0<=l.position?p&&(yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglVertexBuffer),x(l.position),yt.vertexAttribPointer(l.position,3,yt.FLOAT,!1,0,0)):n.morphTargetBase&&_(a,o,n),p){if(o.__webglCustomAttributesList)for(u=0,i=o.__webglCustomAttributesList.length;u<i;u++)m=o.__webglCustomAttributesList[u],0<=l[m.buffer.belongsToAttribute]&&(yt.bindBuffer(yt.ARRAY_BUFFER,m.buffer),x(l[m.buffer.belongsToAttribute]),yt.vertexAttribPointer(l[m.buffer.belongsToAttribute],m.size,yt.FLOAT,!1,0,0));0<=l.color&&(0<n.geometry.colors.length||0<n.geometry.faces.length?(yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglColorBuffer),x(l.color),yt.vertexAttribPointer(l.color,3,yt.FLOAT,!1,0,0)):a.defaultAttributeValues&&yt.vertexAttrib3fv(l.color,a.defaultAttributeValues.color)),0<=l.normal&&(yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglNormalBuffer),x(l.normal),yt.vertexAttribPointer(l.normal,3,yt.FLOAT,!1,0,0)),0<=l.tangent&&(yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglTangentBuffer),x(l.tangent),yt.vertexAttribPointer(l.tangent,4,yt.FLOAT,!1,0,0)),0<=l.uv&&(n.geometry.faceVertexUvs[0]?(yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglUVBuffer),x(l.uv),yt.vertexAttribPointer(l.uv,2,yt.FLOAT,!1,0,0)):a.defaultAttributeValues&&yt.vertexAttrib2fv(l.uv,a.defaultAttributeValues.uv)),0<=l.uv2&&(n.geometry.faceVertexUvs[1]?(yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglUV2Buffer),x(l.uv2),yt.vertexAttribPointer(l.uv2,2,yt.FLOAT,!1,0,0)):a.defaultAttributeValues&&yt.vertexAttrib2fv(l.uv2,a.defaultAttributeValues.uv2)),a.skinning&&0<=l.skinIndex&&0<=l.skinWeight&&(yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglSkinIndicesBuffer),x(l.skinIndex),yt.vertexAttribPointer(l.skinIndex,4,yt.FLOAT,!1,0,0),yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglSkinWeightsBuffer),x(l.skinWeight),yt.vertexAttribPointer(l.skinWeight,4,yt.FLOAT,!1,0,0)),0<=l.lineDistance&&(yt.bindBuffer(yt.ARRAY_BUFFER,o.__webglLineDistanceBuffer),x(l.lineDistance),yt.vertexAttribPointer(l.lineDistance,1,yt.FLOAT,!1,0,0))}if(n instanceof THREE.Mesh)a.wireframe?(re(a.wireframeLinewidth),p&&yt.bindBuffer(yt.ELEMENT_ARRAY_BUFFER,o.__webglLineBuffer),yt.drawElements(yt.LINES,o.__webglLineCount,yt.UNSIGNED_SHORT,0)):(p&&yt.bindBuffer(yt.ELEMENT_ARRAY_BUFFER,o.__webglFaceBuffer),yt.drawElements(yt.TRIANGLES,o.__webglFaceCount,yt.UNSIGNED_SHORT,0)),Ue.info.render.calls++,Ue.info.render.vertices+=o.__webglFaceCount,Ue.info.render.faces+=o.__webglFaceCount/3;else if(n instanceof THREE.Line){var h=n.type===THREE.LineStrip?yt.LINE_STRIP:yt.LINES;re(a.linewidth),yt.drawArrays(h,0,o.__webglLineCount),Ue.info.render.calls++}else n instanceof THREE.ParticleSystem&&(yt.drawArrays(yt.POINTS,0,o.__webglParticleCount),Ue.info.render.calls++,Ue.info.render.points+=o.__webglParticleCount)}};this.render=function(e,t,r,a){if(!1===t instanceof THREE.Camera)return void console.error('THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.');var o=e.__lights,n=e.fog,s,i,l,p,c;for(Oe=-1,gt=!0,!0===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),dt.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ct.setFromMatrix(dt),this.autoUpdateObjects&&this.initWebGLObjects(e),M(this.renderPluginsPre,e,t),Ue.info.render.calls=0,Ue.info.render.vertices=0,Ue.info.render.faces=0,Ue.info.render.points=0,this.setRenderTarget(r),(this.autoClear||a)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),c=e.__webglObjects,(s=0,i=c.length);s<i;s++)l=c[s],p=l.object,l.id=s,l.render=!1,p.visible&&(!(p instanceof THREE.Mesh||p instanceof THREE.ParticleSystem)||!p.frustumCulled||ct.intersectsObject(p))&&(J(p,t),E(l),l.render=!0,!0===this.sortObjects&&(null===p.renderDepth?(ut.setFromMatrixPosition(p.matrixWorld),ut.applyProjection(dt),l.z=ut.z):l.z=p.renderDepth));for(this.sortObjects&&c.sort(b),c=e.__webglObjectsImmediate,(s=0,i=c.length);s<i;s++)l=c[s],p=l.object,p.visible&&(J(p,t),A(l));if(e.overrideMaterial){var d=e.overrideMaterial;this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),ae(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),T(e.__webglObjects,!1,'',t,o,n,!0,d),C(e.__webglObjectsImmediate,'',t,o,n,!1,d)}else{var d=null;this.setBlending(THREE.NoBlending),T(e.__webglObjects,!0,'opaque',t,o,n,!1,d),C(e.__webglObjectsImmediate,'opaque',t,o,n,!1,d),T(e.__webglObjects,!1,'transparent',t,o,n,!0,d),C(e.__webglObjectsImmediate,'transparent',t,o,n,!0,d)}M(this.renderPluginsPost,e,t),r&&r.generateMipmaps&&r.minFilter!==THREE.NearestFilter&&r.minFilter!==THREE.LinearFilter&&ye(r),this.setDepthTest(!0),this.setDepthWrite(!0)};this.renderImmediateObject=function(e,t,r,a,o){var i=I(e,t,r,a,o);ke=-1,Ue.setMaterialFaces(a),o.immediateRenderCallback?o.immediateRenderCallback(i,yt,ct):o.render(function(e){Ue.renderBufferImmediate(e,i,a)})};this.initWebGLObjects=function(e){for(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]);e.__objectsAdded.length;)L(e.__objectsAdded[0],e),e.__objectsAdded.splice(0,1);for(;e.__objectsRemoved.length;)U(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1);for(var t=0,r=e.__webglObjects.length,a;t<r;t++)a=e.__webglObjects[t].object,void 0===a.__webglInit&&(void 0!==a.__webglActive&&U(a,e),L(a,e)),R(a)};this.initMaterial=function(e,t,r,a){e.addEventListener('dispose',qt);var o,n,i,s,l,p,c;e instanceof THREE.MeshDepthMaterial?c='depth':e instanceof THREE.MeshNormalMaterial?c='normal':e instanceof THREE.MeshBasicMaterial?c='basic':e instanceof THREE.MeshLambertMaterial?c='lambert':e instanceof THREE.MeshPhongMaterial?c='phong':e instanceof THREE.LineBasicMaterial?c='basic':e instanceof THREE.LineDashedMaterial?c='dashed':e instanceof THREE.ParticleSystemMaterial&&(c='particle_basic'),c&&N(e,THREE.ShaderLib[c]),s=be(t),p=Se(t),l=_e(a),i={map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,vertexColors:e.vertexColors,fog:r,useFog:e.fog,fogExp:r instanceof THREE.FogExp2,sizeAttenuation:e.sizeAttenuation,skinning:e.skinning,maxBones:l,useVertexTexture:Lt&&a&&a.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:s.directional,maxPointLights:s.point,maxSpotLights:s.spot,maxHemiLights:s.hemi,maxShadows:p,shadowMapEnabled:this.shadowMapEnabled&&a.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,perPixel:e.perPixel,wrapAround:e.wrapAround,doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide},e.program=ie(c,e.fragmentShader,e.vertexShader,e.uniforms,e.attributes,e.defines,i,e.index0AttributeName);var d=e.program.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;var m='morphTarget',u;for(n=0;n<this.maxMorphTargets;n++)u=m+n,0<=d[u]&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;var m='morphNormal',u;for(n=0;n<this.maxMorphNormals;n++)u=m+n,0<=d[u]&&e.numSupportedMorphNormals++}for(o in e.uniformsList=[],e.uniforms)e.uniformsList.push([e.uniforms[o],o])};this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?yt.disable(yt.CULL_FACE):(t===THREE.FrontFaceDirectionCW?yt.frontFace(yt.CW):yt.frontFace(yt.CCW),e===THREE.CullFaceBack?yt.cullFace(yt.BACK):e===THREE.CullFaceFront?yt.cullFace(yt.FRONT):yt.cullFace(yt.FRONT_AND_BACK),yt.enable(yt.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===THREE.DoubleSide,r=e.side===THREE.BackSide;je!==t&&(t?yt.disable(yt.CULL_FACE):yt.enable(yt.CULL_FACE),je=t),Xe!==r&&(r?yt.frontFace(yt.CW):yt.frontFace(yt.CCW),Xe=r)},this.setDepthTest=function(e){Ze!==e&&(e?yt.enable(yt.DEPTH_TEST):yt.disable(yt.DEPTH_TEST),Ze=e)},this.setDepthWrite=function(e){Je!==e&&(yt.depthMask(e),Je=e)};this.setBlending=function(e,t,r,a){e!==Ye&&(e===THREE.NoBlending?yt.disable(yt.BLEND):e===THREE.AdditiveBlending?(yt.enable(yt.BLEND),yt.blendEquation(yt.FUNC_ADD),yt.blendFunc(yt.SRC_ALPHA,yt.ONE)):e===THREE.SubtractiveBlending?(yt.enable(yt.BLEND),yt.blendEquation(yt.FUNC_ADD),yt.blendFunc(yt.ZERO,yt.ONE_MINUS_SRC_COLOR)):e===THREE.MultiplyBlending?(yt.enable(yt.BLEND),yt.blendEquation(yt.FUNC_ADD),yt.blendFunc(yt.ZERO,yt.SRC_COLOR)):e===THREE.CustomBlending?yt.enable(yt.BLEND):(yt.enable(yt.BLEND),yt.blendEquationSeparate(yt.FUNC_ADD,yt.FUNC_ADD),yt.blendFuncSeparate(yt.SRC_ALPHA,yt.ONE_MINUS_SRC_ALPHA,yt.ONE,yt.ONE_MINUS_SRC_ALPHA)),Ye=e),e===THREE.CustomBlending?(t!==qe&&(yt.blendEquation(ve(t)),qe=t),(r!==Ke||a!==Qe)&&(yt.blendFunc(ve(r),ve(a)),Ke=r,Qe=a)):(qe=null,Ke=null,Qe=null)};this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener('dispose',Xt),e.__webglTexture=yt.createTexture(),Ue.info.memory.textures++),yt.activeTexture(yt.TEXTURE0+t),yt.bindTexture(yt.TEXTURE_2D,e.__webglTexture),yt.pixelStorei(yt.UNPACK_FLIP_Y_WEBGL,e.flipY),yt.pixelStorei(yt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),yt.pixelStorei(yt.UNPACK_ALIGNMENT,e.unpackAlignment);var r=e.image,a=ce(r.width)&&ce(r.height),o=ve(e.format),n=ve(e.type);de(yt.TEXTURE_2D,e,a);var s=e.mipmaps,l;if(e instanceof THREE.DataTexture){if(0<s.length&&a){for(var p=0,i=s.length;p<i;p++)l=s[p],yt.texImage2D(yt.TEXTURE_2D,p,o,l.width,l.height,0,o,n,l.data);e.generateMipmaps=!1}else yt.texImage2D(yt.TEXTURE_2D,0,o,r.width,r.height,0,o,n,r.data);}else if(e instanceof THREE.CompressedTexture)for(var p=0,i=s.length;p<i;p++)l=s[p],e.format===THREE.RGBAFormat?yt.texImage2D(yt.TEXTURE_2D,p,o,l.width,l.height,0,o,n,l.data):yt.compressedTexImage2D(yt.TEXTURE_2D,p,o,l.width,l.height,0,l.data);else if(0<s.length&&a){for(var p=0,i=s.length;p<i;p++)l=s[p],yt.texImage2D(yt.TEXTURE_2D,p,o,o,n,l);e.generateMipmaps=!1}else yt.texImage2D(yt.TEXTURE_2D,0,o,o,n,e.image);e.generateMipmaps&&a&&yt.generateMipmap(yt.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else yt.activeTexture(yt.TEXTURE0+t),yt.bindTexture(yt.TEXTURE_2D,e.__webglTexture)};this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&!e.__webglFramebuffer){e.depthBuffer===void 0&&(e.depthBuffer=!0),e.stencilBuffer===void 0&&(e.stencilBuffer=!0),e.addEventListener('dispose',Yt),e.__webglTexture=yt.createTexture(),Ue.info.memory.textures++;var r=ce(e.width)&&ce(e.height),a=ve(e.format),o=ve(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],yt.bindTexture(yt.TEXTURE_CUBE_MAP,e.__webglTexture),de(yt.TEXTURE_CUBE_MAP,e,r);for(var n=0;6>n;n++)e.__webglFramebuffer[n]=yt.createFramebuffer(),e.__webglRenderbuffer[n]=yt.createRenderbuffer(),yt.texImage2D(yt.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,a,e.width,e.height,0,a,o,null),ge(e.__webglFramebuffer[n],e,yt.TEXTURE_CUBE_MAP_POSITIVE_X+n),fe(e.__webglRenderbuffer[n],e);r&&yt.generateMipmap(yt.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=yt.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:yt.createRenderbuffer(),yt.bindTexture(yt.TEXTURE_2D,e.__webglTexture),de(yt.TEXTURE_2D,e,r),yt.texImage2D(yt.TEXTURE_2D,0,a,e.width,e.height,0,a,o,null),ge(e.__webglFramebuffer,e,yt.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?yt.framebufferRenderbuffer(yt.FRAMEBUFFER,yt.DEPTH_ATTACHMENT,yt.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&yt.framebufferRenderbuffer(yt.FRAMEBUFFER,yt.DEPTH_STENCIL_ATTACHMENT,yt.RENDERBUFFER,e.__webglRenderbuffer):fe(e.__webglRenderbuffer,e),r&&yt.generateMipmap(yt.TEXTURE_2D);t?yt.bindTexture(yt.TEXTURE_CUBE_MAP,null):yt.bindTexture(yt.TEXTURE_2D,null),yt.bindRenderbuffer(yt.RENDERBUFFER,null),yt.bindFramebuffer(yt.FRAMEBUFFER,null)}var i,s,l,p,c;e?(i=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,s=e.width,l=e.height,p=0,c=0):(i=null,s=it,l=nt,p=at,c=ot),i!==Ie&&(yt.bindFramebuffer(yt.FRAMEBUFFER,i),yt.viewport(p,c,s,l),Ie=i),st=s,lt=l};this.shadowMapPlugin=new THREE.ShadowMapPlugin,this.addPrePlugin(this.shadowMapPlugin),this.addPostPlugin(new THREE.SpritePlugin),this.addPostPlugin(new THREE.LensFlarePlugin)},THREE.WebGLRenderTarget=function(e,t,r){this.width=e,this.height=t,r=r||{},this.wrapS=r.wrapS===void 0?THREE.ClampToEdgeWrapping:r.wrapS,this.wrapT=r.wrapT===void 0?THREE.ClampToEdgeWrapping:r.wrapT,this.magFilter=r.magFilter===void 0?THREE.LinearFilter:r.magFilter,this.minFilter=r.minFilter===void 0?THREE.LinearMipMapLinearFilter:r.minFilter,this.anisotropy=r.anisotropy===void 0?1:r.anisotropy,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=r.format===void 0?THREE.RGBAFormat:r.format,this.type=r.type===void 0?THREE.UnsignedByteType:r.type,this.depthBuffer=!(r.depthBuffer!==void 0)||r.depthBuffer,this.stencilBuffer=!(r.stencilBuffer!==void 0)||r.stencilBuffer,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:'dispose'})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,r){THREE.WebGLRenderTarget.call(this,e,t,r),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableFace3=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.centroidModel=new THREE.Vector3,this.normalModel=new THREE.Vector3,this.normalModelView=new THREE.Vector3,this.vertexNormalsLength=0,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsModelView=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.color=null,this.material=null,this.uvs=[[]],this.z=0},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0},THREE.GeometryUtils={merge:function(e,t,r){var a=e.vertices.length,o=e.faceVertexUvs[0].length,n=t instanceof THREE.Mesh?t.geometry:t,s=e.vertices,l=n.vertices,p=e.faces,c=n.faces,d=e.faceVertexUvs[0],m=n.faceVertexUvs[0],u,h;r===void 0&&(r=0),t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),u=t.matrix,h=new THREE.Matrix3().getNormalMatrix(u));for(var g=0,i=l.length;g<i;g++){var f=l[g],y=f.clone();u&&y.applyMatrix4(u),s.push(y)}for(g=0,i=c.length;g<i;g++){var x=c[g],v=x.vertexNormals,_=x.vertexColors,b,S,M;b=new THREE.Face3(x.a+a,x.b+a,x.c+a),b.normal.copy(x.normal),h&&b.normal.applyMatrix3(h).normalize();for(var T=0,C=v.length;T<C;T++)S=v[T].clone(),h&&S.applyMatrix3(h).normalize(),b.vertexNormals.push(S);b.color.copy(x.color);for(var T=0,C=_.length;T<C;T++)M=_[T],b.vertexColors.push(M.clone());b.materialIndex=x.materialIndex+r,b.centroid.copy(x.centroid),u&&b.centroid.applyMatrix4(u),p.push(b)}for(g=0,i=m.length;g<i;g++){for(var A=m[g],E=[],T=0,C=A.length;T<C;T++)E.push(new THREE.Vector2(A[T].x,A[T].y));d.push(E)}},randomPointInTriangle:function(){var e=new THREE.Vector3;return function(t,r,o){var i=new THREE.Vector3,n=THREE.Math.random16(),a=THREE.Math.random16();1<n+a&&(n=1-n,a=1-a);var s=1-n-a;return i.copy(t),i.multiplyScalar(n),e.copy(r),e.multiplyScalar(a),i.add(e),e.copy(o),e.multiplyScalar(s),i.add(e),i}}(),randomPointInFace:function(e,t){var r,a,o;return r=t.vertices[e.a],a=t.vertices[e.b],o=t.vertices[e.c],THREE.GeometryUtils.randomPointInTriangle(r,a,o)},randomPointsInGeometry:function(e,t){function a(e){function t(r,a){if(a<r)return r;var o=r+Math.floor((a-r)/2);return p[o]>e?t(r,o-1):p[o]<e?t(o+1,a):o}var r=t(0,p.length-1);return r}var o=e.faces,n=e.vertices,s=o.length,l=0,p=[],c,d,i,m,u;for(d=0;d<s;d++)c=o[d],i=n[c.a],m=n[c.b],u=n[c.c],c._area=THREE.GeometryUtils.triangleArea(i,m,u),l+=c._area,p[d]=l;var h=[],g={},f,r;for(d=0;d<t;d++)f=THREE.Math.random16()*l,r=a(f),h[d]=THREE.GeometryUtils.randomPointInFace(o[r],e,!0),g[r]?g[r]+=1:g[r]=1;return h},triangleArea:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r,a,o){return e.subVectors(a,r),t.subVectors(o,r),e.cross(t),0.5*e.length()}}(),center:function(e){e.computeBoundingBox();var t=e.boundingBox,r=new THREE.Vector3;return r.addVectors(t.min,t.max),r.multiplyScalar(-0.5),e.applyMatrix(new THREE.Matrix4().makeTranslation(r.x,r.y,r.z)),e.computeBoundingBox(),r},triangulateQuads:function(e){var t=[],r=[],a,o,i,n;for(a=0,o=e.faceVertexUvs.length;a<o;a++)r[a]=[];for(a=0,o=e.faces.length;a<o;a++){var s=e.faces[a];for(t.push(s),i=0,n=e.faceVertexUvs.length;i<n;i++)r[i].push(e.faceVertexUvs[i][a])}e.faces=t,e.faceVertexUvs=r,e.computeCentroids(),e.computeFaceNormals(),e.computeVertexNormals(),e.hasTangents&&e.computeTangents()}},THREE.ImageUtils={crossOrigin:'anonymous',loadTexture:function(e,t,r){var a=new THREE.ImageLoader;a.crossOrigin=this.crossOrigin;var o=new THREE.Texture(void 0,t),i=a.load(e,function(){o.needsUpdate=!0,r&&r(o)});return o.image=i,o.sourceFile=e,o},loadCompressedTexture:function(e,t,r,a){var o=new THREE.CompressedTexture;o.mapping=t;var i=new XMLHttpRequest;return i.onload=function(){var e=i.response,t=THREE.ImageUtils.parseDDS(e,!0);o.format=t.format,o.mipmaps=t.mipmaps,o.image.width=t.width,o.image.height=t.height,o.generateMipmaps=!1,o.needsUpdate=!0,r&&r(o)},i.onerror=a,i.open('GET',e,!0),i.responseType='arraybuffer',i.send(null),o},loadTextureCube:function(e,t,r,a){var o=[];o.loadCount=0;var n=new THREE.Texture;n.image=o,t!==void 0&&(n.mapping=t),n.flipY=!1;for(var s=0,i=e.length,l;s<i;++s)l=new Image,o[s]=l,l.onload=function(){o.loadCount+=1,6===o.loadCount&&(n.needsUpdate=!0,r&&r(n))},l.onerror=a,l.crossOrigin=this.crossOrigin,l.src=e[s];return n},loadCompressedTextureCube:function(e,t,r,a){var o=[];o.loadCount=0;var n=new THREE.CompressedTexture;n.image=o,t!==void 0&&(n.mapping=t),n.flipY=!1,n.generateMipmaps=!1;var s=function(e,t){return function(){var a=e.response,i=THREE.ImageUtils.parseDDS(a,!0);t.format=i.format,t.mipmaps=i.mipmaps,t.width=i.width,t.height=i.height,o.loadCount+=1,6===o.loadCount&&(n.format=i.format,n.needsUpdate=!0,r&&r(n))}};if(e instanceof Array)for(var l=0,i=e.length,p;l<i;++l){p={},o[l]=p;var c=new XMLHttpRequest;c.onload=s(c,p),c.onerror=a;var d=e[l];c.open('GET',d,!0),c.responseType='arraybuffer',c.send(null)}else{var d=e,c=new XMLHttpRequest;c.onload=function(){var e=c.response,t=THREE.ImageUtils.parseDDS(e,!0);if(t.isCubemap){for(var a=t.mipmaps.length/t.mipmapCount,s=0;s<a;s++){o[s]={mipmaps:[]};for(var l=0;l<t.mipmapCount;l++)o[s].mipmaps.push(t.mipmaps[s*t.mipmapCount+l]),o[s].format=t.format,o[s].width=t.width,o[s].height=t.height}n.format=t.format,n.needsUpdate=!0,r&&r(n)}},c.onerror=a,c.open('GET',d,!0),c.responseType='arraybuffer',c.send(null)}return n},loadDDSTexture:function(e,t,r,a){var o=[];o.loadCount=0;var n=new THREE.CompressedTexture;n.image=o,t!==void 0&&(n.mapping=t),n.flipY=!1,n.generateMipmaps=!1;{var s=new XMLHttpRequest;s.onload=function(){var e=s.response,t=THREE.ImageUtils.parseDDS(e,!0);if(t.isCubemap)for(var a=t.mipmaps.length/t.mipmapCount,l=0;l<a;l++){o[l]={mipmaps:[]};for(var p=0;p<t.mipmapCount;p++)o[l].mipmaps.push(t.mipmaps[l*t.mipmapCount+p]),o[l].format=t.format,o[l].width=t.width,o[l].height=t.height}else n.image.width=t.width,n.image.height=t.height,n.mipmaps=t.mipmaps;n.format=t.format,n.needsUpdate=!0,r&&r(n)},s.onerror=a,s.open('GET',e,!0),s.responseType='arraybuffer',s.send(null)}return n},parseDDS:function(e,t){function r(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function a(e){return String.fromCharCode(255&e,255&e>>8,255&e>>16,255&e>>24)}function o(e,t,o,i){for(var n=4*(o*i),s=new Uint8Array(e,t,n),l=new Uint8Array(n),p=0,c=0,d=0;d<i;d++)for(var m=0,u;m<o;m++){u=s[c],c++;var h=s[c];c++;var g=s[c];c++;var r=s[c];c++,l[p]=g,p++,l[p]=h,p++,l[p]=u,p++,l[p]=r,p++}return l}var n=Math.max,s={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},l=r('DXT1'),p=r('DXT3'),c=r('DXT5'),d=new Int32Array(e,0,31);if(d[0]!==542327876)return console.error('ImageUtils.parseDDS(): Invalid magic number in DDS header'),s;if(!d[20]&4)return console.error('ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code'),s;var m=d[21],u=!1,h;switch(m){case l:h=8,s.format=THREE.RGB_S3TC_DXT1_Format;break;case p:h=16,s.format=THREE.RGBA_S3TC_DXT3_Format;break;case c:h=16,s.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(32==d[22]&&16711680&d[23]&&65280&d[24]&&255&d[25]&&4278190080&d[26])u=!0,h=64,s.format=THREE.RGBAFormat;else return console.error('ImageUtils.parseDDS(): Unsupported FourCC code: ',a(m)),s;}s.mipmapCount=1,d[2]&131072&&!1!==t&&(s.mipmapCount=n(1,d[7])),s.isCubemap=!!(d[28]&512),s.width=d[4],s.height=d[3];for(var g=d[1]+4,f=s.width,y=s.height,x=s.isCubemap?6:1,v=0;v<x;v++){for(var _=0;_<s.mipmapCount;_++){if(u)var i=o(e,g,f,y),b=i.length;else var b=n(4,f)/4*n(4,y)/4*h,i=new Uint8Array(e,g,b);var S={data:i,width:f,height:y};s.mipmaps.push(S),g+=b,f=n(0.5*f,1),y=n(0.5*y,1)}f=s.width,y=s.height}return s},getNormalMap:function(e,t){var r=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},a=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},o=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t|=1;var n=e.width,s=e.height,l=document.createElement('canvas');l.width=n,l.height=s;var p=l.getContext('2d');p.drawImage(e,0,0);for(var c=p.getImageData(0,0,n,s).data,d=p.createImageData(n,s),m=d.data,u=0;u<n;u++)for(var h=0;h<s;h++){var g=0>h-1?0:h-1,f=h+1>s-1?s-1:h+1,y=0>u-1?0:u-1,x=u+1>n-1?n-1:u+1,v=[],_=[0,0,c[4*(h*n+u)]/255*t];v.push([-1,0,c[4*(h*n+y)]/255*t]),v.push([-1,-1,c[4*(g*n+y)]/255*t]),v.push([0,-1,c[4*(g*n+u)]/255*t]),v.push([1,-1,c[4*(g*n+x)]/255*t]),v.push([1,0,c[4*(h*n+x)]/255*t]),v.push([1,1,c[4*(f*n+x)]/255*t]),v.push([0,1,c[4*(f*n+u)]/255*t]),v.push([-1,1,c[4*(f*n+y)]/255*t]);for(var b=[],S=v.length,M=0;M<S;M++){var i=v[M],T=v[(M+1)%S];i=a(i,_),T=a(T,_),b.push(o(r(i,T)))}for(var C=[0,0,0],M=0;M<b.length;M++)C[0]+=b[M][0],C[1]+=b[M][1],C[2]+=b[M][2];C[0]/=b.length,C[1]/=b.length,C[2]/=b.length;var A=4*(h*n+u);m[A]=0|255*((C[0]+1)/2),m[A+1]=0|255*((C[1]+1)/2),m[A+2]=0|255*C[2],m[A+3]=255}return p.putImageData(d,0,0),l},generateDataTexture:function(e,t,a){for(var o=Math.floor,n=e*t,s=new Uint8Array(3*n),l=o(255*a.r),r=o(255*a.g),p=o(255*a.b),c=0;c<n;c++)s[3*c]=l,s[3*c+1]=r,s[3*c+2]=p;var i=new THREE.DataTexture(s,e,t,THREE.RGBFormat);return i.needsUpdate=!0,i}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var r=new THREE.Object3D,a=0,o=t.length;a<o;a++)r.add(new THREE.Mesh(e,t[a]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var a=new THREE.Matrix4;a.getInverse(r.matrixWorld),e.applyMatrix(a),t.remove(e),r.add(e)}},THREE.FontUtils={faces:{},face:'helvetiker',weight:'normal',style:'normal',size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(e){var t=e.familyName.toLowerCase(),r=this;r.faces[t]=r.faces[t]||{},r.faces[t][e.cssFontWeight]=r.faces[t][e.cssFontWeight]||{},r.faces[t][e.cssFontWeight][e.cssFontStyle]=e;r.faces[t][e.cssFontWeight][e.cssFontStyle]=e;return e},drawText:function(e){var t=this.getFace(),r=this.size/t.resolution,a=0,o=(e+'').split(''),n=o.length,s=[],l;for(l=0;l<n;l++){var i=new THREE.Path,p=this.extractGlyphPoints(o[l],t,r,a,i);a+=p.offset,s.push(p.path)}var c=a/2;return{paths:s,offset:c}},extractGlyphPoints:function(e,r,a,o,n){var s=[],l=r.glyphs[e]||r.glyphs['?'],p,i,c,d,m,u,h,g,f,x,y,v,_,b,S,M,T,C,A;if(l){if(l.o)for(d=l._cachedOutline||(l._cachedOutline=l.o.split(' ')),u=d.length,h=a,g=a,p=0;p<u;)switch(m=d[p++],m){case'm':f=d[p++]*h+o,x=d[p++]*g,n.moveTo(f,x);break;case'l':f=d[p++]*h+o,x=d[p++]*g,n.lineTo(f,x);break;case'q':if(y=d[p++]*h+o,v=d[p++]*g,S=d[p++]*h+o,M=d[p++]*g,n.quadraticCurveTo(S,M,y,v),A=s[s.length-1],A)for(_=A.x,b=A.y,(i=1,c=this.divisions);i<=c;i++)var E=i/c,t=THREE.Shape.Utils.b2(E,_,S,y),w=THREE.Shape.Utils.b2(E,b,M,v);break;case'b':if(y=d[p++]*h+o,v=d[p++]*g,S=d[p++]*h+o,M=d[p++]*-g,T=d[p++]*h+o,C=d[p++]*-g,n.bezierCurveTo(y,v,S,M,T,C),A=s[s.length-1],A)for(_=A.x,b=A.y,(i=1,c=this.divisions);i<=c;i++)var E=i/c,t=THREE.Shape.Utils.b3(E,_,S,T,y),w=THREE.Shape.Utils.b3(E,b,M,C,v);}return{offset:l.ha*a,path:n}}}},THREE.FontUtils.generateShapes=function(e,t){t=t||{};var r=t.size===void 0?100:t.size,a=t.curveSegments===void 0?4:t.curveSegments,o=t.font===void 0?'helvetiker':t.font,i=t.weight===void 0?'normal':t.weight,n=t.style===void 0?'normal':t.style;THREE.FontUtils.size=r,THREE.FontUtils.divisions=a,THREE.FontUtils.face=o,THREE.FontUtils.weight=i,THREE.FontUtils.style=n;for(var s=THREE.FontUtils.drawText(e),l=s.paths,c=[],d=0,p=l.length;d<p;d++)Array.prototype.push.apply(c,l[d].toShapes());return c},function(e){var t=1e-10,r=function(e){for(var t=e.length,r=0,a=t-1,o=0;o<t;a=o++)r+=e[a].x*e[o].y-e[o].x*e[a].y;return 0.5*r},o=function(e,r,a,o,i,n){var s,l,p,c,d,m,u,h,g;if(l=e[n[r]].x,p=e[n[r]].y,c=e[n[a]].x,d=e[n[a]].y,m=e[n[o]].x,u=e[n[o]].y,t>(c-l)*(u-p)-(d-p)*(m-l))return!1;var f,y,x,v,_,b,S,M,T,C,A,E,w,L,P;for(f=m-c,y=u-d,x=l-m,v=p-u,_=c-l,b=d-p,s=0;s<i;s++)if(s!==r&&s!==a&&s!==o&&(h=e[n[s]].x,g=e[n[s]].y,S=h-l,M=g-p,T=h-c,C=g-d,A=h-m,E=g-u,P=f*C-y*T,w=_*M-b*S,L=x*E-v*A,P>=-t&&L>=-t&&w>=-t))return!1;return!0};return e.Triangulate=function(e,i){var l=e.length;if(3>l)return null;var n=[],p=[],d=[],m,u,h;if(0<r(e))for(u=0;u<l;u++)p[u]=u;else for(u=0;u<l;u++)p[u]=l-1-u;var g=l,f=2*g;for(u=g-1;2<g;){if(0>=f--)return console.log('Warning, unable to triangulate polygon!'),i?d:n;if(m=u,g<=m&&(m=0),u=m+1,g<=u&&(u=0),h=u+1,g<=h&&(h=0),o(e,m,u,h,g,p)){var y,a,x,c,s;for(y=p[m],a=p[u],x=p[h],n.push([e[y],e[a],e[x]]),d.push([p[m],p[u],p[h]]),(c=u,s=u+1);s<g;c++,s++)p[c]=p[s];g--,f=2*g}}return i?d:n},e.Triangulate.area=r,e}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(){return console.log('Warning, getPoint() not implemented!'),null},THREE.Curve.prototype.getPointAt=function(e){var r=this.getUtoTmapping(e);return this.getPoint(r)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t=[],r;for(r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t=[],r;for(r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],r=this.getPoint(0),a=0,o,i;for(t.push(0),i=1;i<=e;i++)o=this.getPoint(i/e),a+=o.distanceTo(r),t.push(a),r=o;return this.cacheArcLengths=t,t},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,r){var a=this.getLengths(),o=0,i=a.length,n;n=r?r:e*a[i-1];for(var s=0,l=i-1,p;s<=l;)if(o=Math.floor(s+(l-s)/2),p=a[o]-n,0>p){s=o+1;continue}else if(0<p){l=o-1;continue}else{l=o;break}if(o=l,a[o]==n){var c=o/(i-1);return c}var t=a[o],d=a[o+1],m=(n-t)/(d-t),c=(o+m)/(i-1);return c},THREE.Curve.prototype.getTangent=function(e){var t=1e-4,r=e-t,a=e+t;0>r&&(r=0),1<a&&(a=1);var o=this.getPoint(r),i=this.getPoint(a),n=i.clone().sub(o);return n.normalize()},THREE.Curve.prototype.getTangentAt=function(e){var r=this.getUtoTmapping(e);return this.getTangent(r)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,r,a){return 2*(1-e)*(r-t)+2*e*(a-r)},tangentCubicBezier:function(e,t,r,a,o){return-3*t*(1-e)*(1-e)+3*r*(1-e)*(1-e)-6*e*r*(1-e)+6*e*a*(1-e)-3*e*e*a+3*e*e*o},tangentSpline:function(e){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,r,a,o,i){var t=0.5*(a-e),n=0.5*(o-r),s=i*i;return(2*r-2*a+t+n)*(i*s)+(-3*r+3*a-2*t-n)*s+t*i+r}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),a=0,o,i;a<r.length;){if(r[a]>=t){o=r[a]-t,i=this.curves[a];var n=1-o/i.getLength();return i.getPointAt(n)}a++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e=[],t=0,r=this.curves.length,a;for(a=0;a<r;a++)t+=this.curves[a].getLength(),e.push(t);return this.cacheLengths=e,e},THREE.CurvePath.prototype.getBoundingBox=function(){var e=this.getPoints(),t,r,a,o,n,s;t=r=Number.NEGATIVE_INFINITY,o=n=Number.POSITIVE_INFINITY;var l=e[0]instanceof THREE.Vector3,c,p,i,d;for(d=l?new THREE.Vector3:new THREE.Vector2,p=0,i=e.length;p<i;p++)c=e[p],c.x>t?t=c.x:c.x<o&&(o=c.x),c.y>r?r=c.y:c.y<n&&(n=c.y),l&&(c.z>a?a=c.z:c.z<s&&(s=c.z)),d.add(c);var m={minX:o,minY:n,maxX:t,maxY:r,centroid:d.divideScalar(i)};return l&&(m.maxZ=a,m.minZ=s),m},THREE.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,r=0;r<e.length;r++)t.vertices.push(new THREE.Vector3(e[r].x,e[r].y,e[r].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var r=this.getPoints(e),a,o;for(t||(t=this.bends),a=0,o=t.length;a<o;a++)r=this.getWrapPoints(r,t[a]);return r},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var r=this.getSpacedPoints(e),a,o;for(t||(t=this.bends),a=0,o=t.length;a<o;a++)r=this.getWrapPoints(r,t[a]);return r},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var r=this.getBoundingBox(),a,o,i,n,s,l;for(a=0,o=e.length;a<o;a++){i=e[a],n=i.x,s=i.y,l=n/r.maxX,l=t.getUtoTmapping(l,n);var p=t.getPoint(l),c=t.getTangent(l);c.set(-c.y,c.x).multiplyScalar(s),i.x=p.x+c.x,i.y=p.y+c.y}return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,r=this.children.length;t<r;t++)this.children[t].updateMatrixWorld(e)},THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3,THREE.Gyroscope.prototype.translationObject=new THREE.Vector3,THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion,THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion,THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3,THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3,THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:'moveTo',LINE_TO:'lineTo',QUADRATIC_CURVE_TO:'quadraticCurveTo',BEZIER_CURVE_TO:'bezierCurveTo',CSPLINE_THRU:'splineThru',ARC:'arc',ELLIPSE:'ellipse'},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(){var e=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:e})},THREE.Path.prototype.lineTo=function(e,t){var r=Array.prototype.slice.call(arguments),a=this.actions[this.actions.length-1].args,o=a[a.length-2],i=a[a.length-1],n=new THREE.LineCurve(new THREE.Vector2(o,i),new THREE.Vector2(e,t));this.curves.push(n),this.actions.push({action:THREE.PathActions.LINE_TO,args:r})},THREE.Path.prototype.quadraticCurveTo=function(e,t,r,a){var o=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,n=i[i.length-2],s=i[i.length-1],l=new THREE.QuadraticBezierCurve(new THREE.Vector2(n,s),new THREE.Vector2(e,t),new THREE.Vector2(r,a));this.curves.push(l),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:o})},THREE.Path.prototype.bezierCurveTo=function(e,t,r,a,o,i){var n=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,l=s[s.length-2],p=s[s.length-1],c=new THREE.CubicBezierCurve(new THREE.Vector2(l,p),new THREE.Vector2(e,t),new THREE.Vector2(r,a),new THREE.Vector2(o,i));this.curves.push(c),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:n})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,a=r[r.length-2],o=r[r.length-1],i=[new THREE.Vector2(a,o)];Array.prototype.push.apply(i,e);var n=new THREE.SplineCurve(i);this.curves.push(n),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,r,a,o,i){var n=this.actions[this.actions.length-1].args,s=n[n.length-2],l=n[n.length-1];this.absarc(e+s,t+l,r,a,o,i)},THREE.Path.prototype.absarc=function(e,t,r,a,o,i){this.absellipse(e,t,r,r,a,o,i)},THREE.Path.prototype.ellipse=function(e,t,r,a,o,i,n){var s=this.actions[this.actions.length-1].args,l=s[s.length-2],p=s[s.length-1];this.absellipse(e+l,t+p,r,a,o,i,n)},THREE.Path.prototype.absellipse=function(e,t,r,a,o,i,n){var s=Array.prototype.slice.call(arguments),l=new THREE.EllipseCurve(e,t,r,a,o,i,n);this.curves.push(l);var p=l.getPoint(1);s.push(p.x),s.push(p.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:s})},THREE.Path.prototype.getSpacedPoints=function(e){e||(e=40);for(var t=[],r=0;r<e;r++)t.push(this.getPoint(r/e));return t},THREE.Path.prototype.getPoints=function(e,r){var a=Math.abs,o=Math.sin,s=Math.cos;if(this.useSpacedPoints)return console.log('tata'),this.getSpacedPoints(e,r);e=e||12;var l=[],p,i,c,d,m,u,h,g,f,y,x,v,_,b,S,M,t,T;for(p=0,i=this.actions.length;p<i;p++)switch(c=this.actions[p],d=c.action,m=c.args,d){case THREE.PathActions.MOVE_TO:l.push(new THREE.Vector2(m[0],m[1]));break;case THREE.PathActions.LINE_TO:l.push(new THREE.Vector2(m[0],m[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(u=m[2],h=m[3],y=m[0],x=m[1],0<l.length?(b=l[l.length-1],v=b.x,_=b.y):(b=this.actions[p-1].args,v=b[b.length-2],_=b[b.length-1]),S=1;S<=e;S++)M=S/e,t=THREE.Shape.Utils.b2(M,v,y,u),T=THREE.Shape.Utils.b2(M,_,x,h),l.push(new THREE.Vector2(t,T));break;case THREE.PathActions.BEZIER_CURVE_TO:for(u=m[4],h=m[5],y=m[0],x=m[1],g=m[2],f=m[3],0<l.length?(b=l[l.length-1],v=b.x,_=b.y):(b=this.actions[p-1].args,v=b[b.length-2],_=b[b.length-1]),S=1;S<=e;S++)M=S/e,t=THREE.Shape.Utils.b3(M,v,y,g,u),T=THREE.Shape.Utils.b3(M,_,x,f,h),l.push(new THREE.Vector2(t,T));break;case THREE.PathActions.CSPLINE_THRU:b=this.actions[p-1].args;var C=new THREE.Vector2(b[b.length-2],b[b.length-1]),A=[C],E=e*m[0].length;A=A.concat(m[0]);var n=new THREE.SplineCurve(A);for(S=1;S<=E;S++)l.push(n.getPointAt(S/E));break;case THREE.PathActions.ARC:var w=m[0],L=m[1],P=m[2],D=m[3],R=m[4],F=!!m[5],V=R-D,U=2*e,z;for(S=1;S<=U;S++)M=S/U,F||(M=1-M),z=D+M*V,t=w+P*s(z),T=L+P*o(z),l.push(new THREE.Vector2(t,T));break;case THREE.PathActions.ELLIPSE:var w=m[0],L=m[1],B=m[2],N=m[3],D=m[4],R=m[5],F=!!m[6],V=R-D,U=2*e,z;for(S=1;S<=U;S++)M=S/U,F||(M=1-M),z=D+M*V,t=w+B*s(z),T=L+N*o(z),l.push(new THREE.Vector2(t,T));}var I=l[l.length-1],O=1e-10;return a(I.x-l[0].x)<O&&a(I.y-l[0].y)<O&&l.splice(l.length-1,1),r&&l.push(l[0]),l},THREE.Path.prototype.toShapes=function(e){var t=[],r=new THREE.Path,a,o,i,n,s;for(a=0,o=this.actions.length;a<o;a++)i=this.actions[a],s=i.args,n=i.action,n==THREE.PathActions.MOVE_TO&&0!=r.actions.length&&(t.push(r),r=new THREE.Path),r[n].apply(r,s);if(0!=r.actions.length&&t.push(r),0==t.length)return[];var l=[],p,c,d;if(1==t.length)return c=t[0],d=new THREE.Shape,d.actions=c.actions,d.curves=c.curves,l.push(d),l;var m=!THREE.Shape.Utils.isClockWise(t[0].getPoints());if(m=e?!m:m,m)for(d=new THREE.Shape,a=0,o=t.length;a<o;a++)c=t[a],p=THREE.Shape.Utils.isClockWise(c.getPoints()),p=e?!p:p,p?(d.actions=c.actions,d.curves=c.curves,l.push(d),d=new THREE.Shape):d.holes.push(c);else{for(d=void 0,a=0,o=t.length;a<o;a++)c=t[a],p=THREE.Shape.Utils.isClockWise(c.getPoints()),p=e?!p:p,p?(d&&l.push(d),d=new THREE.Shape,d.actions=c.actions,d.curves=c.curves):d.holes.push(c);l.push(d)}return l},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(e){var t=new THREE.ExtrudeGeometry(this,e);return t},THREE.Shape.prototype.makeGeometry=function(e){var t=new THREE.ShapeGeometry(this,e);return t},THREE.Shape.prototype.getPointsHoles=function(e){var t=this.holes.length,r=[],a;for(a=0;a<t;a++)r[a]=this.holes[a].getTransformedPoints(e,this.bends);return r},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t=this.holes.length,r=[],a;for(a=0;a<t;a++)r[a]=this.holes[a].getTransformedSpacedPoints(e,this.bends);return r},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={removeHoles:function(e,t){var r=e.concat(),a=r.concat(),o=[],i,n,s,l,c,m,u,h,g,d,p,f,y,x,v,_;for(c=0;c<t.length;c++){for(u=t[c],Array.prototype.push.apply(a,u),h=Number.POSITIVE_INFINITY,m=0;m<u.length;m++){p=u[m];var b=[];for(d=0;d<r.length;d++)f=r[d],g=p.distanceToSquared(f),b.push(g),g<h&&(h=g,s=m,l=d)}i=0<=l-1?l-1:r.length-1,n=0<=s-1?s-1:u.length-1;var S=[u[s],r[l],r[i]],M=THREE.FontUtils.Triangulate.area(S),T=[u[s],u[n],r[l]],C=THREE.FontUtils.Triangulate.area(T),A=l,E=s;l+=1,s+=-1,0>l&&(l+=r.length),l%=r.length,0>s&&(s+=u.length),s%=u.length,i=0<=l-1?l-1:r.length-1,n=0<=s-1?s-1:u.length-1,S=[u[s],r[l],r[i]];var w=THREE.FontUtils.Triangulate.area(S);T=[u[s],u[n],r[l]];var L=THREE.FontUtils.Triangulate.area(T);M+C>w+L&&(l=A,s=E,0>l&&(l+=r.length),l%=r.length,0>s&&(s+=u.length),s%=u.length,i=0<=l-1?l-1:r.length-1,n=0<=s-1?s-1:u.length-1),y=r.slice(0,l),x=r.slice(l),v=u.slice(s),_=u.slice(0,s);var P=[u[s],r[l],r[i]],D=[u[s],u[n],r[l]];o.push(P),o.push(D),r=y.concat(v).concat(_).concat(x)}return{shape:r,isolatedPts:o,allpoints:a}},triangulateShape:function(e,t){var r=THREE.Shape.Utils.removeHoles(e,t),a=r.shape,o=r.allpoints,n=r.isolatedPts,s=THREE.FontUtils.Triangulate(a,!1),l={},p,i,c,d,m,u;for(p=0,i=o.length;p<i;p++)m=o[p].x+':'+o[p].y,void 0!==l[m]&&console.log('Duplicate point',m),l[m]=p;for(p=0,i=s.length;p<i;p++)for(d=s[p],c=0;3>c;c++)m=d[c].x+':'+d[c].y,u=l[m],void 0!==u&&(d[c]=u);for(p=0,i=n.length;p<i;p++)for(d=n[p],c=0;3>c;c++)m=d[c].x+':'+d[c].y,u=l[m],void 0!==u&&(d[c]=u);return s.concat(n)},isClockWise:function(e){return 0>THREE.FontUtils.Triangulate.area(e)},b2p0:function(e,t){var r=1-e;return r*r*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,r,a){return this.b2p0(e,t)+this.b2p1(e,r)+this.b2p2(e,a)},b3p0:function(e,t){var r=1-e;return r*r*r*t},b3p1:function(e,t){var r=1-e;return 3*r*r*e*t},b3p2:function(e,t){return 3*(1-e)*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,r,a,o){return this.b3p0(e,t)+this.b3p1(e,r)+this.b3p2(e,a)+this.b3p3(e,o)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},THREE.QuadraticBezierCurve=function(e,t,r){this.v0=e,this.v1=t,this.v2=r},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t,r;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),r=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),new THREE.Vector2(t,r)},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t,r;t=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),r=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y);var a=new THREE.Vector2(t,r);return a.normalize(),a},THREE.CubicBezierCurve=function(e,t,r,a){this.v0=e,this.v1=t,this.v2=r,this.v3=a},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(e){var t,r;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,r)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t,r;t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var a=new THREE.Vector2(t,r);return a.normalize(),a},THREE.SplineCurve=function(e){this.points=e==void 0?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(e){var t=new THREE.Vector2,r=[],a=this.points,o,i,n;return o=(a.length-1)*e,i=Math.floor(o),n=o-i,r[0]=0==i?i:i-1,r[1]=i,r[2]=i>a.length-2?a.length-1:i+1,r[3]=i>a.length-3?a.length-1:i+2,t.x=THREE.Curve.Utils.interpolate(a[r[0]].x,a[r[1]].x,a[r[2]].x,a[r[3]].x,n),t.y=THREE.Curve.Utils.interpolate(a[r[0]].y,a[r[1]].y,a[r[2]].y,a[r[3]].y,n),t},THREE.EllipseCurve=function(e,t,r,a,o,i,n){this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=a,this.aStartAngle=o,this.aEndAngle=i,this.aClockwise=n},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(e){var t=Math.PI,r=this.aEndAngle-this.aStartAngle,a;0>r&&(r+=2*t),r>2*t&&(r-=2*t),a=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*t-r):this.aStartAngle+e*r;var o=this.aX+this.xRadius*Math.cos(a),i=this.aY+this.yRadius*Math.sin(a);return new THREE.Vector2(o,i)},THREE.ArcCurve=function(e,t,r,a,o,i){THREE.EllipseCurve.call(this,e,t,r,r,a,o,i)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,r){this.v0=e,this.v1=t,this.v2=r},function(e){var t,r,a;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),r=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),a=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),new THREE.Vector3(t,r,a)}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,r,a){this.v0=e,this.v1=t,this.v2=r,this.v3=a},function(e){var t,r,a;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),a=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new THREE.Vector3(t,r,a)}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=e==void 0?[]:e},function(e){var t=new THREE.Vector3,r=[],a=this.points,o,i,n;o=(a.length-1)*e,i=Math.floor(o),n=o-i,r[0]=0==i?i:i-1,r[1]=i,r[2]=i>a.length-2?a.length-1:i+1,r[3]=i>a.length-3?a.length-1:i+2;var s=a[r[0]],l=a[r[1]],p=a[r[2]],c=a[r[3]];return t.x=THREE.Curve.Utils.interpolate(s.x,l.x,p.x,c.x,n),t.y=THREE.Curve.Utils.interpolate(s.y,l.y,p.y,c.y,n),t.z=THREE.Curve.Utils.interpolate(s.z,l.z,p.z,c.z,n),t}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=e==void 0?[]:e},function(e){var t=Math.floor,r=new THREE.Vector3,a=[],o=this.points,i,n,s;return i=(o.length-0)*e,n=t(i),s=i-n,n+=0<n?0:(t(Math.abs(n)/o.length)+1)*o.length,a[0]=(n-1)%o.length,a[1]=n%o.length,a[2]=(n+1)%o.length,a[3]=(n+2)%o.length,r.x=THREE.Curve.Utils.interpolate(o[a[0]].x,o[a[1]].x,o[a[2]].x,o[a[3]].x,s),r.y=THREE.Curve.Utils.interpolate(o[a[0]].y,o[a[1]].y,o[a[2]].y,o[a[3]].y,s),r.z=THREE.Curve.Utils.interpolate(o[a[0]].z,o[a[1]].z,o[a[2]].z,o[a[3]].z,s),r}),THREE.AnimationHandler=function(){var e=[],t={},r={};r.update=function(t){for(var r=0;r<e.length;r++)e[r].update(t)},r.addToUpdate=function(t){-1===e.indexOf(t)&&e.push(t)},r.removeFromUpdate=function(t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)},r.add=function(e){void 0!==t[e.name]&&console.log('THREE.AnimationHandler.add: Warning! '+e.name+' already exists in library. Overwriting.'),t[e.name]=e,o(e)},r.get=function(e){if('string'===typeof e)return t[e]?t[e]:(console.log('THREE.AnimationHandler.get: Couldn\'t find animation '+e),null)},r.parse=function(e){var t=[];if(e instanceof THREE.SkinnedMesh)for(var r=0;r<e.bones.length;r++)t.push(e.bones[r]);else a(e,t);return t};var a=function(e,t){t.push(e);for(var r=0;r<e.children.length;r++)a(e.children[r],t)},o=function(e){if(!0!==e.initialized){for(var t=0;t<e.hierarchy.length;t++){for(var r=0;r<e.hierarchy[t].keys.length;r++)if(0>e.hierarchy[t].keys[r].time&&(e.hierarchy[t].keys[r].time=0),void 0!==e.hierarchy[t].keys[r].rot&&!(e.hierarchy[t].keys[r].rot instanceof THREE.Quaternion)){var a=e.hierarchy[t].keys[r].rot;e.hierarchy[t].keys[r].rot=new THREE.Quaternion(a[0],a[1],a[2],a[3])}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(var o={},r=0;r<e.hierarchy[t].keys.length;r++)for(var i=0,n;i<e.hierarchy[t].keys[r].morphTargets.length;i++)n=e.hierarchy[t].keys[r].morphTargets[i],o[n]=-1;e.hierarchy[t].usedMorphTargets=o;for(var r=0,s;r<e.hierarchy[t].keys.length;r++){for(var n in s={},o){for(var i=0;i<e.hierarchy[t].keys[r].morphTargets.length;i++)if(e.hierarchy[t].keys[r].morphTargets[i]===n){s[n]=e.hierarchy[t].keys[r].morphTargetsInfluences[i];break}i===e.hierarchy[t].keys[r].morphTargets.length&&(s[n]=0)}e.hierarchy[t].keys[r].morphTargetsInfluences=s}}for(var r=1;r<e.hierarchy[t].keys.length;r++)e.hierarchy[t].keys[r].time===e.hierarchy[t].keys[r-1].time&&(e.hierarchy[t].keys.splice(r,1),r--);for(var r=0;r<e.hierarchy[t].keys.length;r++)e.hierarchy[t].keys[r].index=r}var l=parseInt(e.length*e.fps,10);e.JIT={},e.JIT.hierarchy=[];for(var t=0;t<e.hierarchy.length;t++)e.JIT.hierarchy.push(Array(l));e.initialized=!0}};return r.LINEAR=0,r.CATMULLROM=1,r.CATMULLROM_FORWARD=2,r}(),THREE.Animation=function(e,t,r){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.interpolationType=r===void 0?THREE.AnimationHandler.LINEAR:r,this.points=[],this.target=new THREE.Vector3},THREE.Animation.prototype.play=function(e,t){if(!1===this.isPlaying){this.isPlaying=!0,this.loop=!(e!==void 0)||e,this.currentTime=t===void 0?0:t;var r=this.hierarchy.length,a,o;for(a=0;a<r;a++){o=this.hierarchy[a],o.matrixAutoUpdate=!0,o.animationCache===void 0&&(o.animationCache={},o.animationCache.prevKey={pos:0,rot:0,scl:0},o.animationCache.nextKey={pos:0,rot:0,scl:0},o.animationCache.originalMatrix=o instanceof THREE.Bone?o.skinMatrix:o.matrix);var i=o.animationCache.prevKey,n=o.animationCache.nextKey;i.pos=this.data.hierarchy[a].keys[0],i.rot=this.data.hierarchy[a].keys[0],i.scl=this.data.hierarchy[a].keys[0],n.pos=this.getNextKeyWith('pos',a,1),n.rot=this.getNextKeyWith('rot',a,1),n.scl=this.getNextKeyWith('scl',a,1)}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.Animation.prototype.pause=function(){!0===this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this)},THREE.Animation.prototype.update=function(e){if(!1!==this.isPlaying){var r=['pos','rot','scl'],a=this.data.JIT.hierarchy,o,i,n,s,l,p,c,d,m,u,g,f,y,x,v;for(this.currentTime+=e*this.timeScale,f=this.currentTime;this.currentTime>this.data.length;)this.currentTime-=this.data.length;g=this.currentTime%=this.data.length,u=parseInt(Math.min(g*this.data.fps,this.data.length*this.data.fps),10);for(var _=0,h=this.hierarchy.length;_<h;_++){d=this.hierarchy[_],m=d.animationCache;for(var b=0;3>b;b++){if(o=r[b],p=m.prevKey[o],c=m.nextKey[o],c.time<=f){if(!(g<=f))do p=c,c=this.getNextKeyWith(o,_,c.index+1);while(null!==c&&c.time<g&&c.index>p.index);else if(this.loop)for(p=this.data.hierarchy[_].keys[0],c=this.getNextKeyWith(o,_,1);null!==c&&c.time<g&&c.index>p.index;)p=c,c=this.getNextKeyWith(o,_,c.index+1);else return void this.stop();m.prevKey[o]=p,m.nextKey[o]=c}d.matrixAutoUpdate=!0,d.matrixWorldNeedsUpdate=!0,i=(g-p.time)/(c.time-p.time),s=p[o],l=c[o],(0>i||1<i)&&(console.log('THREE.Animation.update: Warning! Scale out of bounds:'+i+' on bone '+_),i=0>i?0:1),'pos'===o?(n=d.position,this.interpolationType===THREE.AnimationHandler.LINEAR?(n.x=s[0]+(l[0]-s[0])*i,n.y=s[1]+(l[1]-s[1])*i,n.z=s[2]+(l[2]-s[2])*i):(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)&&(this.points[0]=this.getPrevKeyWith('pos',_,p.index-1).pos,this.points[1]=s,this.points[2]=l,this.points[3]=this.getNextKeyWith('pos',_,c.index+1).pos,i=0.33*i+0.33,y=this.interpolateCatmullRom(this.points,i),n.x=y[0],n.y=y[1],n.z=y[2],this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(x=this.interpolateCatmullRom(this.points,1.01*i),this.target.set(x[0],x[1],x[2]),this.target.sub(n),this.target.y=0,this.target.normalize(),v=Math.atan2(this.target.x,this.target.z),d.rotation.set(0,v,0)))):'rot'===o?THREE.Quaternion.slerp(s,l,d.quaternion,i):'scl'===o&&(n=d.scale,n.x=s[0]+(l[0]-s[0])*i,n.y=s[1]+(l[1]-s[1])*i,n.z=s[2]+(l[2]-s[2])*i)}}}},THREE.Animation.prototype.interpolateCatmullRom=function(e,t){var r=[],a=[],o,i,n,s,l,p,c,d,m;return o=(e.length-1)*t,i=Math.floor(o),n=o-i,r[0]=0===i?i:i-1,r[1]=i,r[2]=i>e.length-2?i:i+1,r[3]=i>e.length-3?i:i+2,p=e[r[0]],c=e[r[1]],d=e[r[2]],m=e[r[3]],s=n*n,l=n*s,a[0]=this.interpolate(p[0],c[0],d[0],m[0],n,s,l),a[1]=this.interpolate(p[1],c[1],d[1],m[1],n,s,l),a[2]=this.interpolate(p[2],c[2],d[2],m[2],n,s,l),a},THREE.Animation.prototype.interpolate=function(e,r,a,o,i,t,n){var s=0.5*(a-e),l=0.5*(o-r);return(2*(r-a)+s+l)*n+(-3*(r-a)-2*s-l)*t+s*i+r},THREE.Animation.prototype.getNextKeyWith=function(e,t,r){var a=this.data.hierarchy[t].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?r=r<a.length-1?r:a.length-1:r%=a.length;r<a.length;r++)if(a[r][e]!==void 0)return a[r];return this.data.hierarchy[t].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(e,t,r){var a=this.data.hierarchy[t].keys;for(r=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<r?r:0:0<=r?r:r+a.length;0<=r;r--)if(a[r][e]!==void 0)return a[r];return this.data.hierarchy[t].keys[a.length-1]},THREE.KeyFrameAnimation=function(e,t,r){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1e-3,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.JITCompile=!(r!==void 0)||r;for(var a=0,o=this.hierarchy.length;a<o;a++){var i=this.data.hierarchy[a].keys,n=this.data.hierarchy[a].sids,l=this.hierarchy[a];if(i.length&&n){for(var p=0;p<n.length;p++){var s=n[p],c=this.getNextKeyWith(s,a,0);c&&c.apply(s)}l.matrixAutoUpdate=!1,this.data.hierarchy[a].node.updateMatrix(),l.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(e,t){if(!this.isPlaying){this.isPlaying=!0,this.loop=!(e!==void 0)||e,this.currentTime=t===void 0?0:t,this.startTimeMs=t,this.startTime=1e7,this.endTime=-this.startTime;var r=this.hierarchy.length,a,o,i;for(a=0;a<r;a++){o=this.hierarchy[a],i=this.data.hierarchy[a],i.animationCache===void 0&&(i.animationCache={},i.animationCache.prevKey=null,i.animationCache.nextKey=null,i.animationCache.originalMatrix=o instanceof THREE.Bone?o.skinMatrix:o.matrix);var n=this.data.hierarchy[a].keys;n.length&&(i.animationCache.prevKey=n[0],i.animationCache.nextKey=n[1],this.startTime=Math.min(n[0].time,this.startTime),this.endTime=Math.max(n[n.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],r=this.data.hierarchy[e];if(r.animationCache!==void 0){var a=r.animationCache.originalMatrix;t instanceof THREE.Bone?(a.copy(t.skinMatrix),t.skinMatrix=a):(a.copy(t.matrix),t.matrix=a),delete r.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying){var t=this.data.JIT.hierarchy,r,a,o,i,n,l,p,c;if(this.currentTime+=e*this.timeScale,p=this.currentTime,l=this.currentTime%=this.data.length,l<this.startTimeMs&&(l=this.currentTime=this.startTimeMs+l),n=parseInt(Math.min(l*this.data.fps,this.data.length*this.data.fps),10),c=l<p,c&&!this.loop){for(var d=0,m=this.hierarchy.length;d<m;d++){var u=this.data.hierarchy[d].keys,h=this.data.hierarchy[d].sids,g=u.length-1,f=this.hierarchy[d];if(u.length){for(var y=0;y<h.length;y++){var s=h[y],x=this.getPrevKeyWith(s,d,g);x&&x.apply(s)}this.data.hierarchy[d].node.updateMatrix(),f.matrixWorldNeedsUpdate=!0}}return void this.stop()}if(!(l<this.startTime)){for(var d=0,m=this.hierarchy.length;d<m;d++){o=this.hierarchy[d],i=this.data.hierarchy[d];var u=i.keys,v=i.animationCache;if(this.JITCompile&&void 0!==t[d][n])o instanceof THREE.Bone?(o.skinMatrix=t[d][n],o.matrixWorldNeedsUpdate=!1):(o.matrix=t[d][n],o.matrixWorldNeedsUpdate=!0);else if(u.length){if(this.JITCompile&&v&&(o instanceof THREE.Bone?o.skinMatrix=v.originalMatrix:o.matrix=v.originalMatrix),r=v.prevKey,a=v.nextKey,r&&a){if(a.time<=p){if(c&&this.loop)for(r=u[0],a=u[1];a.time<l;)r=a,a=u[r.index+1];else if(!c)for(var _=u.length-1;a.time<l&&a.index!==_;)r=a,a=u[r.index+1];v.prevKey=r,v.nextKey=a}a.time>=l?r.interpolate(a,l):r.interpolate(a,a.time)}this.data.hierarchy[d].node.updateMatrix(),o.matrixWorldNeedsUpdate=!0}}if(this.JITCompile&&void 0===t[0][n]){this.hierarchy[0].updateMatrixWorld(!0);for(var d=0;d<this.hierarchy.length;d++)t[d][n]=this.hierarchy[d]instanceof THREE.Bone?this.hierarchy[d].skinMatrix.clone():this.hierarchy[d].matrix.clone()}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,r){var a=this.data.hierarchy[t].keys;for(r%=a.length;r<a.length;r++)if(a[r].hasTarget(e))return a[r];return a[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,r){var a=this.data.hierarchy[t].keys;for(r=0<=r?r:r+a.length;0<=r;r--)if(a[r].hasTarget(e))return a[r];return a[a.length-1]},THREE.CubeCamera=function(e,t,r){THREE.Object3D.call(this);var a=90,o=1,i=new THREE.PerspectiveCamera(a,o,e,t);i.up.set(0,-1,0),i.lookAt(new THREE.Vector3(1,0,0)),this.add(i);var n=new THREE.PerspectiveCamera(a,o,e,t);n.up.set(0,-1,0),n.lookAt(new THREE.Vector3(-1,0,0)),this.add(n);var s=new THREE.PerspectiveCamera(a,o,e,t);s.up.set(0,0,1),s.lookAt(new THREE.Vector3(0,1,0)),this.add(s);var l=new THREE.PerspectiveCamera(a,o,e,t);l.up.set(0,0,-1),l.lookAt(new THREE.Vector3(0,-1,0)),this.add(l);var p=new THREE.PerspectiveCamera(a,o,e,t);p.up.set(0,-1,0),p.lookAt(new THREE.Vector3(0,0,1)),this.add(p);var c=new THREE.PerspectiveCamera(a,o,e,t);c.up.set(0,-1,0),c.lookAt(new THREE.Vector3(0,0,-1)),this.add(c),this.renderTarget=new THREE.WebGLRenderTargetCube(r,r,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var r=this.renderTarget,a=r.generateMipmaps;r.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,i,r),r.activeCubeFace=1,e.render(t,n,r),r.activeCubeFace=2,e.render(t,s,r),r.activeCubeFace=3,e.render(t,l,r),r.activeCubeFace=4,e.render(t,p,r),r.generateMipmaps=a,r.activeCubeFace=5,e.render(t,c,r)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CombinedCamera=function(e,t,r,a,o,i,n){THREE.Camera.call(this),this.fov=r,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.cameraO=new THREE.OrthographicCamera(e/-2,e/2,t/2,t/-2,i,n),this.cameraP=new THREE.PerspectiveCamera(r,e/t,a,o),this.zoom=1,this.toPerspective()},THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype),THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near,this.far=this.cameraP.far,this.cameraP.fov=this.fov/this.zoom,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},THREE.CombinedCamera.prototype.toOrthographic=function(){var e=this.fov,t=this.cameraP.aspect,r=this.cameraP.near,a=this.cameraP.far,o=Math.tan(e/2)*((r+a)/2),i=2*o,n=i*t/2;o/=this.zoom,n/=this.zoom,this.cameraO.left=-n,this.cameraO.right=n,this.cameraO.top=o,this.cameraO.bottom=-o,this.cameraO.updateProjectionMatrix(),this.near=this.cameraO.near,this.far=this.cameraO.far,this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},THREE.CombinedCamera.prototype.setSize=function(e,t){this.cameraP.aspect=e/t,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2},THREE.CombinedCamera.prototype.setFov=function(e){this.fov=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},THREE.CombinedCamera.prototype.setLens=function(e,t){void 0===t&&(t=24);var r=2*THREE.Math.radToDeg(Math.atan(t/(2*e)));return this.setFov(r),r},THREE.CombinedCamera.prototype.setZoom=function(e){this.zoom=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CircleGeometry=function(e,t,r,a){THREE.Geometry.call(this),this.radius=e=e||50,this.segments=t=t===void 0?8:Math.max(3,t),this.thetaStart=r=r===void 0?0:r,this.thetaLength=a=a===void 0?2*Math.PI:a;var o=[],s=new THREE.Vector3,l=new THREE.Vector2(0.5,0.5),p;for(this.vertices.push(s),o.push(l),p=0;p<=t;p++){var i=new THREE.Vector3,c=r+p/t*a;i.x=e*Math.cos(c),i.y=e*Math.sin(c),this.vertices.push(i),o.push(new THREE.Vector2((i.x/e+1)/2,(i.y/e+1)/2))}var d=new THREE.Vector3(0,0,1);for(p=1;p<=t;p++){var n=p,m=p+1;this.faces.push(new THREE.Face3(n,m,0,[d.clone(),d.clone(),d.clone()])),this.faceVertexUvs[0].push([o[p].clone(),o[p+1].clone(),l.clone()])}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=function(e,t,r,a,o,i){function n(e,t,r,o,i,n,l,p){var m=s.widthSegments,u=s.heightSegments,h=s.vertices.length,g,f,y;'x'===e&&'y'===t||'y'===e&&'x'===t?g='z':'x'===e&&'z'===t||'z'===e&&'x'===t?(g='y',u=s.depthSegments):('z'===e&&'y'===t||'y'===e&&'z'===t)&&(g='x',m=s.depthSegments);var x=m+1,v=u+1,_=i/m,S=n/u,M=new THREE.Vector3;for(M[g]=0<l?1:-1,y=0;y<v;y++)for(f=0;f<x;f++){var T=new THREE.Vector3;T[e]=(f*_-i/2)*r,T[t]=(y*S-n/2)*o,T[g]=l,s.vertices.push(T)}for(y=0;y<u;y++)for(f=0;f<m;f++){var C=f+x*y,a=f+x*(y+1),b=f+1+x*(y+1),c=f+1+x*y,d=new THREE.Vector2(f/m,1-y/u),A=new THREE.Vector2(f/m,1-(y+1)/u),E=new THREE.Vector2((f+1)/m,1-(y+1)/u),w=new THREE.Vector2((f+1)/m,1-y/u),L=new THREE.Face3(C+h,a+h,c+h);L.normal.copy(M),L.vertexNormals.push(M.clone(),M.clone(),M.clone()),L.materialIndex=p,s.faces.push(L),s.faceVertexUvs[0].push([d,A,w]),L=new THREE.Face3(a+h,b+h,c+h),L.normal.copy(M),L.vertexNormals.push(M.clone(),M.clone(),M.clone()),L.materialIndex=p,s.faces.push(L),s.faceVertexUvs[0].push([A.clone(),E,w.clone()])}}THREE.Geometry.call(this);var s=this;this.width=e,this.height=t,this.depth=r,this.widthSegments=a||1,this.heightSegments=o||1,this.depthSegments=i||1;var l=this.width/2,p=this.height/2,c=this.depth/2;n('z','y',-1,-1,this.depth,this.height,l,0),n('z','y',1,-1,this.depth,this.height,-l,1),n('x','z',1,1,this.width,this.depth,p,2),n('x','z',1,-1,this.width,this.depth,-p,3),n('x','y',1,-1,this.width,this.height,c,4),n('x','y',-1,-1,this.width,this.height,-c,5),this.computeCentroids(),this.mergeVertices()},THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry=function(e,t,r,a,o,i){var n=Math.PI,s=Math.sqrt;THREE.Geometry.call(this),this.radiusTop=e=e===void 0?20:e,this.radiusBottom=t=t===void 0?20:t,this.height=r=r===void 0?100:r,this.radialSegments=a=a||8,this.heightSegments=o=o||1,this.openEnded=i=i!==void 0&&i;var l=r/2,p=[],c=[],d,m;for(m=0;m<=o;m++){var h=[],g=[],f=m/o,y=f*(t-e)+e;for(d=0;d<=a;d++){var x=d/a,u=new THREE.Vector3;u.x=y*Math.sin(2*(x*n)),u.y=-f*r+l,u.z=y*Math.cos(2*(x*n)),this.vertices.push(u),h.push(this.vertices.length-1),g.push(new THREE.Vector2(x,1-f))}p.push(h),c.push(g)}var _=(t-e)/r,b,S;for(d=0;d<a;d++)for(0===e?(b=this.vertices[p[1][d]].clone(),S=this.vertices[p[1][d+1]].clone()):(b=this.vertices[p[0][d]].clone(),S=this.vertices[p[0][d+1]].clone()),b.setY(s(b.x*b.x+b.z*b.z)*_).normalize(),S.setY(s(S.x*S.x+S.z*S.z)*_).normalize(),m=0;m<o;m++){var M=p[m][d],T=p[m+1][d],C=p[m+1][d+1],A=p[m][d+1],E=b.clone(),w=b.clone(),L=S.clone(),P=S.clone(),D=c[m][d].clone(),R=c[m+1][d].clone(),F=c[m+1][d+1].clone(),V=c[m][d+1].clone();this.faces.push(new THREE.Face3(M,T,A,[E,w,P])),this.faceVertexUvs[0].push([D,R,V]),this.faces.push(new THREE.Face3(T,C,A,[w.clone(),L,P.clone()])),this.faceVertexUvs[0].push([R.clone(),F,V.clone()])}if(!1===i&&0<e)for(this.vertices.push(new THREE.Vector3(0,l,0)),d=0;d<a;d++){var M=p[0][d],T=p[0][d+1],C=this.vertices.length-1,E=new THREE.Vector3(0,1,0),w=new THREE.Vector3(0,1,0),L=new THREE.Vector3(0,1,0),D=c[0][d].clone(),R=c[0][d+1].clone(),F=new THREE.Vector2(R.x,0);this.faces.push(new THREE.Face3(M,T,C,[E,w,L])),this.faceVertexUvs[0].push([D,R,F])}if(!1===i&&0<t)for(this.vertices.push(new THREE.Vector3(0,-l,0)),d=0;d<a;d++){var M=p[m][d+1],T=p[m][d],C=this.vertices.length-1,E=new THREE.Vector3(0,-1,0),w=new THREE.Vector3(0,-1,0),L=new THREE.Vector3(0,-1,0),D=c[m][d+1].clone(),R=c[m][d].clone(),F=new THREE.Vector2(R.x,1);this.faces.push(new THREE.Face3(M,T,C,[E,w,L])),this.faceVertexUvs[0].push([D,R,F])}this.computeCentroids(),this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(e,t){return'undefined'===typeof e?void(e=[]):void(THREE.Geometry.call(this),e=e instanceof Array?e:[e],this.shapebb=e[e.length-1].getBoundingBox(),this.addShapeList(e,t),this.computeCentroids(),this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var r=e.length,a=0,o;a<r;a++)o=e[a],this.addShape(o,t)},THREE.ExtrudeGeometry.prototype.addShape=function(e,r){function a(e,t,r){return t||console.log('die'),t.clone().multiplyScalar(r).add(e)}function o(e,t,r){return l(e,t,r)}function n(e,t,r){var a=u(t.y-e.y,t.x-e.x),o=u(r.y-e.y,r.x-e.x);a>o&&(o+=2*g);var i=(a+o)/2,n=-Math.cos(i),s=-f(i),l=new THREE.Vector2(n,s);return l}function l(e,t,r){var o=THREE.ExtrudeGeometry.__v1,a=THREE.ExtrudeGeometry.__v2,i=THREE.ExtrudeGeometry.__v3,l=THREE.ExtrudeGeometry.__v4,c=THREE.ExtrudeGeometry.__v5,p=THREE.ExtrudeGeometry.__v6,d,m,u,h,g,s;return(o.set(e.x-t.x,e.y-t.y),a.set(e.x-r.x,e.y-r.y),d=o.normalize(),m=a.normalize(),i.set(-d.y,d.x),l.set(m.y,-m.x),c.copy(e).add(i),p.copy(e).add(l),c.equals(p))?l.clone():(c.copy(t).add(i),p.copy(r).add(l),u=d.dot(l),h=p.sub(c).dot(l),0===u&&(console.log('Either infinite or no solutions!'),0===h?console.log('Its finite solutions.'):console.log('Too bad, no solutions.')),g=h/u,0>g)?n(e,t,r):(s=d.multiplyScalar(g).add(c),s.sub(e).clone())}function p(e,t){var r,o;for($=e.length;0<=--$;){r=$,o=$-1,0>o&&(o=e.length-1);var i=0,n=T+2*_;for(i=0;i<n;i++){var s=K*i,l=K*(i+1),p=t+r+s,a=t+o+s,u=t+o+l,c=t+r+l;m(p,a,u,c,e,i,n,r,o)}}}function c(e,t,r){B.vertices.push(new THREE.Vector3(e,t,r))}function d(t,a,o,i){t+=N,a+=N,o+=N,B.faces.push(new THREE.Face3(t,a,o,null,null,E));var n=i?L.generateBottomUV(B,e,r,t,a,o):L.generateTopUV(B,e,r,t,a,o);B.faceVertexUvs[0].push(n)}function m(t,a,o,i,n,s,l,p,c){t+=N,a+=N,o+=N,i+=N,B.faces.push(new THREE.Face3(t,a,i,null,null,w)),B.faces.push(new THREE.Face3(a,o,i,null,null,w));var d=L.generateSideWallUV(B,e,n,r,t,a,o,i,s,l,p,c);B.faceVertexUvs[0].push([d[0],d[1],d[3]]),B.faceVertexUvs[0].push([d[1],d[2],d[3]])}var u=Math.atan2,g=Math.PI,f=Math.sin,y=void 0===r.amount?100:r.amount,x=void 0===r.bevelThickness?6:r.bevelThickness,v=void 0===r.bevelSize?x-2:r.bevelSize,_=void 0===r.bevelSegments?3:r.bevelSegments,S=void 0===r.bevelEnabled||r.bevelEnabled,M=void 0===r.curveSegments?12:r.curveSegments,T=void 0===r.steps?1:r.steps,C=r.extrudePath,A=!1,E=r.material,w=r.extrudeMaterial,L=void 0===r.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:r.UVGenerator,P=this.shapebb,D,R,F,V,U;C&&(D=C.getSpacedPoints(T),A=!0,S=!1,R=r.frames===void 0?new THREE.TubeGeometry.FrenetFrames(C,T,!1):r.frames,F=new THREE.Vector3,V=new THREE.Vector3,U=new THREE.Vector3),S||(_=0,x=0,v=0);var B=this,N=this.vertices.length,I=e.extractPoints(M),O=I.shape,G=I.holes,H=!THREE.Shape.Utils.isClockWise(O),W,X,h;if(H){for(O=O.reverse(),X=0,h=G.length;X<h;X++)W=G[X],THREE.Shape.Utils.isClockWise(W)&&(G[X]=W.reverse());H=!1}var Y=THREE.Shape.Utils.triangulateShape(O,G),q=O;for(X=0,h=G.length;X<h;X++)W=G[X],O=O.concat(W);for(var K=O.length,Q=Y.length,Z=q.length,J=[],$=0,i=q.length,ee=i-1,j=$+1,k,b,te,t,re,ae;$<i;$++,ee++,j++){ee===i&&(ee=0),j===i&&(j=0);var oe=q[$],ie=q[ee],ne=q[j];J[$]=o(q[$],q[ee],q[j])}var se=[],le=J.concat(),pe;for(X=0,h=G.length;X<h;X++){for(W=G[X],pe=[],($=0,i=W.length,ee=i-1,j=$+1);$<i;$++,ee++,j++)ee===i&&(ee=0),j===i&&(j=0),pe[$]=o(W[$],W[ee],W[j]);se.push(pe),le=le.concat(pe)}for(k=0;k<_;k++){for(te=k/_,t=x*(1-te),b=v*f(te*g/2),($=0,i=q.length);$<i;$++)re=a(q[$],J[$],b),c(re.x,re.y,-t);for(X=0,h=G.length;X<h;X++)for(W=G[X],pe=se[X],($=0,i=W.length);$<i;$++)re=a(W[$],pe[$],b),c(re.x,re.y,-t)}for(b=v,$=0;$<K;$++)re=S?a(O[$],le[$],b):O[$],A?(V.copy(R.normals[0]).multiplyScalar(re.x),F.copy(R.binormals[0]).multiplyScalar(re.y),U.copy(D[0]).add(V).add(F),c(U.x,U.y,U.z)):c(re.x,re.y,0);var ce;for(ce=1;ce<=T;ce++)for($=0;$<K;$++)re=S?a(O[$],le[$],b):O[$],A?(V.copy(R.normals[ce]).multiplyScalar(re.x),F.copy(R.binormals[ce]).multiplyScalar(re.y),U.copy(D[ce]).add(V).add(F),c(U.x,U.y,U.z)):c(re.x,re.y,y/T*ce);for(k=_-1;0<=k;k--){for(te=k/_,t=x*(1-te),b=v*f(te*g/2),($=0,i=q.length);$<i;$++)re=a(q[$],J[$],b),c(re.x,re.y,y+t);for(X=0,h=G.length;X<h;X++)for(W=G[X],pe=se[X],($=0,i=W.length);$<i;$++)re=a(W[$],pe[$],b),A?c(re.x,re.y+D[T-1].y,D[T-1].x+t):c(re.x,re.y,y+t)}(function(){if(S){var e=0,t=K*e;for($=0;$<Q;$++)ae=Y[$],d(ae[2]+t,ae[1]+t,ae[0]+t,!0);for(e=T+2*_,t=K*e,$=0;$<Q;$++)ae=Y[$],d(ae[0]+t,ae[1]+t,ae[2]+t,!1)}else{for($=0;$<Q;$++)ae=Y[$],d(ae[2],ae[1],ae[0],!0);for($=0;$<Q;$++)ae=Y[$],d(ae[0]+K*T,ae[1]+K*T,ae[2]+K*T,!1)}})(),function(){var e=0;for(p(q,e),e+=q.length,(X=0,h=G.length);X<h;X++)W=G[X],p(W,e),e+=W.length}()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,r,a,o,i){var n=e.vertices[a].x,s=e.vertices[a].y,l=e.vertices[o].x,p=e.vertices[o].y,c=e.vertices[i].x,d=e.vertices[i].y;return[new THREE.Vector2(n,s),new THREE.Vector2(l,p),new THREE.Vector2(c,d)]},generateBottomUV:function(e,t,r,a,o,i){return this.generateTopUV(e,t,r,a,o,i)},generateSideWallUV:function(e,t,r,a,o,i,n,s){var l=e.vertices[o].x,p=e.vertices[o].y,c=e.vertices[o].z,d=e.vertices[i].x,m=e.vertices[i].y,u=e.vertices[i].z,h=e.vertices[n].x,g=e.vertices[n].y,f=e.vertices[n].z,y=e.vertices[s].x,x=e.vertices[s].y,v=e.vertices[s].z;return 0.01>Math.abs(p-m)?[new THREE.Vector2(l,1-c),new THREE.Vector2(d,1-u),new THREE.Vector2(h,1-f),new THREE.Vector2(y,1-v)]:[new THREE.Vector2(p,1-c),new THREE.Vector2(m,1-u),new THREE.Vector2(g,1-f),new THREE.Vector2(x,1-v)]}},THREE.ExtrudeGeometry.__v1=new THREE.Vector2,THREE.ExtrudeGeometry.__v2=new THREE.Vector2,THREE.ExtrudeGeometry.__v3=new THREE.Vector2,THREE.ExtrudeGeometry.__v4=new THREE.Vector2,THREE.ExtrudeGeometry.__v5=new THREE.Vector2,THREE.ExtrudeGeometry.__v6=new THREE.Vector2,THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),!1===e instanceof Array&&(e=[e]),this.shapebb=e[e.length-1].getBoundingBox(),this.addShapeList(e,t),this.computeCentroids(),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var r=0,a=e.length;r<a;r++)this.addShape(e[r],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){t===void 0&&(t={});var r=t.curveSegments===void 0?12:t.curveSegments,o=t.material,n=t.UVGenerator===void 0?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,s=this.shapebb,p=this.vertices.length,d=e.extractPoints(r),m=d.shape,u=d.holes,h=!THREE.Shape.Utils.isClockWise(m),g,i,l;if(h){for(m=m.reverse(),g=0,i=u.length;g<i;g++)l=u[g],THREE.Shape.Utils.isClockWise(l)&&(u[g]=l.reverse());h=!1}var f=THREE.Shape.Utils.triangulateShape(m,u),y=m;for(g=0,i=u.length;g<i;g++)l=u[g],m=m.concat(l);var x=m.length,v=f.length,_=y.length,S,M;for(g=0;g<x;g++)S=m[g],this.vertices.push(new THREE.Vector3(S.x,S.y,0));for(g=0;g<v;g++){M=f[g];var T=M[0]+p,a=M[1]+p,b=M[2]+p;this.faces.push(new THREE.Face3(T,a,b,null,null,o)),this.faceVertexUvs[0].push(n.generateBottomUV(this,e,t,T,a,b))}},THREE.LatheGeometry=function(e,t,r,a){THREE.Geometry.call(this),t=t||12,r=r||0,a=a||2*Math.PI;for(var o=1/(e.length-1),n=1/t,l=0,i=t;l<=i;l++)for(var p=r+l*n*a,m=Math.cos(p),c=Math.sin(p),s=0,u=e.length;s<u;s++){var h=e[s],g=new THREE.Vector3;g.x=m*h.x-c*h.y,g.y=c*h.x+m*h.y,g.z=h.z,this.vertices.push(g)}for(var f=e.length,l=0,i=t;l<i;l++)for(var s=0,u=e.length-1;s<u;s++){var y=s+f*l,x=y+f,m=y+1+f,v=y+1,d=l*n,_=s*o,b=d+n,S=_+o;this.faces.push(new THREE.Face3(y,x,v)),this.faceVertexUvs[0].push([new THREE.Vector2(d,_),new THREE.Vector2(b,_),new THREE.Vector2(d,S)]),this.faces.push(new THREE.Face3(x,m,v)),this.faceVertexUvs[0].push([new THREE.Vector2(b,_),new THREE.Vector2(b,S),new THREE.Vector2(d,S)])}this.mergeVertices(),this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(e,t,r,o){THREE.Geometry.call(this),this.width=e,this.height=t,this.widthSegments=r||1,this.heightSegments=o||1;var i=this.widthSegments,n=this.heightSegments,s=i+1,l=this.width/i,p=this.height/n,m=new THREE.Vector3(0,0,1),u,h;for(h=0;h<n+1;h++)for(u=0;u<s;u++){var g=u*l-e/2,f=h*p-t/2;this.vertices.push(new THREE.Vector3(g,-f,0))}for(h=0;h<n;h++)for(u=0;u<i;u++){var x=u+s*h,a=u+s*(h+1),v=u+1+s*(h+1),c=u+1+s*h,d=new THREE.Vector2(u/i,1-h/n),_=new THREE.Vector2(u/i,1-(h+1)/n),b=new THREE.Vector2((u+1)/i,1-(h+1)/n),S=new THREE.Vector2((u+1)/i,1-h/n),M=new THREE.Face3(x,a,c);M.normal.copy(m),M.vertexNormals.push(m.clone(),m.clone(),m.clone()),this.faces.push(M),this.faceVertexUvs[0].push([d,_,S]),M=new THREE.Face3(a,v,c),M.normal.copy(m),M.vertexNormals.push(m.clone(),m.clone(),m.clone()),this.faces.push(M),this.faceVertexUvs[0].push([_.clone(),b,S.clone()])}this.computeCentroids()},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry=function(e,t,r,a,s,l){var p=Math.max;THREE.Geometry.call(this),e=e||0,t=t||50,s=s===void 0?0:s,l=l===void 0?2*Math.PI:l,r=r===void 0?8:p(3,r),a=a===void 0?8:p(3,a);var c=[],d=e,m=(t-e)/a,u,i;for(u=0;u<=a;u++){for(i=0;i<=r;i++){var o=new THREE.Vector3,h=s+i/r*l;o.x=d*Math.cos(h),o.y=d*Math.sin(h),this.vertices.push(o),c.push(new THREE.Vector2((o.x/t+1)/2,(o.y/t+1)/2))}d+=m}var g=new THREE.Vector3(0,0,1);for(u=0;u<a;u++){var n=u*r;for(i=0;i<=r;i++){var h=i+n,f=h+u,y=h+r+u,x=h+r+1+u;this.faces.push(new THREE.Face3(f,y,x,[g.clone(),g.clone(),g.clone()])),this.faceVertexUvs[0].push([c[f].clone(),c[y].clone(),c[x].clone()]),f=h+u,y=h+r+1+u,x=h+1+u,this.faces.push(new THREE.Face3(f,y,x,[g.clone(),g.clone(),g.clone()])),this.faceVertexUvs[0].push([c[f].clone(),c[y].clone(),c[x].clone()])}}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),d)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(e,t,r,a,o,i,n){var s=Math.PI,l=Math.abs,p=Math.sin,c=Math.cos,d=Math.floor,m=Math.max;THREE.Geometry.call(this),this.radius=e=e||50,this.widthSegments=t=m(3,d(t)||8),this.heightSegments=r=m(2,d(r)||6),this.phiStart=a=a===void 0?0:a,this.phiLength=o=o===void 0?2*s:o,this.thetaStart=i=i===void 0?0:i,this.thetaLength=n=n===void 0?s:n;var h=[],g=[],f,x;for(x=0;x<=r;x++){var y=[],_=[];for(f=0;f<=t;f++){var b=f/t,u=x/r,v=new THREE.Vector3;v.x=-e*c(a+b*o)*p(i+u*n),v.y=e*c(i+u*n),v.z=e*p(a+b*o)*p(i+u*n),this.vertices.push(v),y.push(this.vertices.length-1),_.push(new THREE.Vector2(b,1-u))}h.push(y),g.push(_)}for(x=0;x<this.heightSegments;x++)for(f=0;f<this.widthSegments;f++){var S=h[x][f+1],M=h[x][f],T=h[x+1][f],C=h[x+1][f+1],A=this.vertices[S].clone().normalize(),E=this.vertices[M].clone().normalize(),w=this.vertices[T].clone().normalize(),L=this.vertices[C].clone().normalize(),P=g[x][f+1].clone(),D=g[x][f].clone(),R=g[x+1][f].clone(),F=g[x+1][f+1].clone();l(this.vertices[S].y)===this.radius?(P.x=(P.x+D.x)/2,this.faces.push(new THREE.Face3(S,T,C,[A,w,L])),this.faceVertexUvs[0].push([P,R,F])):l(this.vertices[T].y)===this.radius?(R.x=(R.x+F.x)/2,this.faces.push(new THREE.Face3(S,M,T,[A,E,w])),this.faceVertexUvs[0].push([P,D,R])):(this.faces.push(new THREE.Face3(S,M,C,[A,E,L])),this.faceVertexUvs[0].push([P,D,F]),this.faces.push(new THREE.Face3(M,T,C,[E.clone(),w,L.clone()])),this.faceVertexUvs[0].push([D.clone(),R,F.clone()]))}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(e,t){t=t||{};var r=THREE.FontUtils.generateShapes(e,t);t.amount=t.height===void 0?50:t.height,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,r,t)},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(e,t,r,o,n){var s=Math.PI,l=Math.sin,p=Math.cos;THREE.Geometry.call(this);this;this.radius=e||100,this.tube=t||40,this.radialSegments=r||8,this.tubularSegments=o||6,this.arc=n||2*s;for(var m=new THREE.Vector3,h=[],g=[],f=0;f<=this.radialSegments;f++)for(var y=0;y<=this.tubularSegments;y++){var i=y/this.tubularSegments*this.arc,u=2*(f/this.radialSegments*s);m.x=this.radius*p(i),m.y=this.radius*l(i);var x=new THREE.Vector3;x.x=(this.radius+this.tube*p(u))*p(i),x.y=(this.radius+this.tube*p(u))*l(i),x.z=this.tube*l(u),this.vertices.push(x),h.push(new THREE.Vector2(y/this.tubularSegments,f/this.radialSegments)),g.push(x.clone().sub(m).normalize())}for(var f=1;f<=this.radialSegments;f++)for(var y=1;y<=this.tubularSegments;y++){var v=(this.tubularSegments+1)*f+y-1,a=(this.tubularSegments+1)*(f-1)+y-1,_=(this.tubularSegments+1)*(f-1)+y,c=(this.tubularSegments+1)*f+y,d=new THREE.Face3(v,a,c,[g[v],g[a],g[c]]);d.normal.add(g[v]),d.normal.add(g[a]),d.normal.add(g[c]),d.normal.normalize(),this.faces.push(d),this.faceVertexUvs[0].push([h[v].clone(),h[a].clone(),h[c].clone()]),d=new THREE.Face3(a,_,c,[g[a],g[_],g[c]]),d.normal.add(g[a]),d.normal.add(g[_]),d.normal.add(g[c]),d.normal.normalize(),this.faces.push(d),this.faceVertexUvs[0].push([h[a].clone(),h[_].clone(),h[c].clone()])}this.computeCentroids()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(e,t,r,o,s,l,p){function m(e,t,r,a,o){var i=f(e),n=g(e),s=t/r*e,l=f(s),p=0.5*(o*a*g(s));return new THREE.Vector3(0.5*(a*(2+l))*i,0.5*(a*(2+l)*n),p)}var h=Math.PI,g=Math.sin,f=Math.cos;THREE.Geometry.call(this);var y=this;this.radius=e||100,this.tube=t||40,this.radialSegments=r||64,this.tubularSegments=o||8,this.p=s||2,this.q=l||3,this.heightScale=p||1,this.grid=Array(this.radialSegments);for(var x=new THREE.Vector3,_=new THREE.Vector3,n=new THREE.Vector3,S=0;S<this.radialSegments;++S){this.grid[S]=Array(this.tubularSegments);var i=2*(S/this.radialSegments)*this.p*h,u=m(i,this.q,this.p,this.radius,this.heightScale),M=m(i+0.01,this.q,this.p,this.radius,this.heightScale);x.subVectors(M,u),_.addVectors(M,u),n.crossVectors(x,_),_.crossVectors(n,x),n.normalize(),_.normalize();for(var T=0;T<this.tubularSegments;++T){var C=2*(T/this.tubularSegments)*h,v=-this.tube*f(C),A=this.tube*g(C),E=new THREE.Vector3;E.x=u.x+v*_.x+A*n.x,E.y=u.y+v*_.y+A*n.y,E.z=u.z+v*_.z+A*n.z,this.grid[S][T]=y.vertices.push(E)-1}}for(var S=0;S<this.radialSegments;++S)for(var T=0;T<this.tubularSegments;++T){var w=(S+1)%this.radialSegments,L=(T+1)%this.tubularSegments,P=this.grid[S][T],a=this.grid[w][T],b=this.grid[w][L],c=this.grid[S][L],d=new THREE.Vector2(S/this.radialSegments,T/this.tubularSegments),D=new THREE.Vector2((S+1)/this.radialSegments,T/this.tubularSegments),R=new THREE.Vector2((S+1)/this.radialSegments,(T+1)/this.tubularSegments),F=new THREE.Vector2(S/this.radialSegments,(T+1)/this.tubularSegments);this.faces.push(new THREE.Face3(P,a,c)),this.faceVertexUvs[0].push([d,D,F]),this.faces.push(new THREE.Face3(a,b,c)),this.faceVertexUvs[0].push([D.clone(),R,F.clone()])}this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(e,t,r,o,n){function s(e,t,r){return l.vertices.push(new THREE.Vector3(e,t,r))-1}THREE.Geometry.call(this),this.path=e,this.segments=t||64,this.radius=r||1,this.radialSegments=o||8,this.closed=n||!1,this.grid=[];var l=this,p=this.segments+1,m=new THREE.Vector3,h=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed),g=h.tangents,f=h.normals,y=h.binormals,x,_,S,M,u,v,T,C,A,i,E,w,L,a,b,c,d,P,D,R;for(this.tangents=g,this.normals=f,this.binormals=y,A=0;A<p;A++)for(this.grid[A]=[],M=A/(p-1),C=e.getPointAt(M),x=g[A],_=f[A],S=y[A],i=0;i<this.radialSegments;i++)u=2*(i/this.radialSegments)*Math.PI,v=-this.radius*Math.cos(u),T=this.radius*Math.sin(u),m.copy(C),m.x+=v*_.x+T*S.x,m.y+=v*_.y+T*S.y,m.z+=v*_.z+T*S.z,this.grid[A][i]=s(m.x,m.y,m.z);for(A=0;A<this.segments;A++)for(i=0;i<this.radialSegments;i++)E=this.closed?(A+1)%this.segments:A+1,w=(i+1)%this.radialSegments,L=this.grid[A][i],a=this.grid[E][i],b=this.grid[E][w],c=this.grid[A][w],d=new THREE.Vector2(A/this.segments,i/this.radialSegments),P=new THREE.Vector2((A+1)/this.segments,i/this.radialSegments),D=new THREE.Vector2((A+1)/this.segments,(i+1)/this.radialSegments),R=new THREE.Vector2(A/this.segments,(i+1)/this.radialSegments),this.faces.push(new THREE.Face3(L,a,c)),this.faceVertexUvs[0].push([d,P,R]),this.faces.push(new THREE.Face3(a,b,c)),this.faceVertexUvs[0].push([P.clone(),D,R.clone()]);this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(e,t,r){function a(){d[0]=new THREE.Vector3,m[0]=new THREE.Vector3,v=Number.MAX_VALUE,_=o(c[0].x),b=o(c[0].y),S=o(c[0].z),_<=v&&(v=_,l.set(1,0,0)),b<=v&&(v=b,l.set(0,1,0)),S<=v&&l.set(0,0,1),h.crossVectors(c[0],l).normalize(),d[0].crossVectors(c[0],h),m[0].crossVectors(c[0],d[0])}var o=Math.abs,n=Math.acos,s=new THREE.Vector3,l=new THREE.Vector3,p=new THREE.Vector3,c=[],d=[],m=[],h=new THREE.Vector3,g=new THREE.Matrix4,f=t+1,y=1e-4,x,v,_,b,S,M,i;for(this.tangents=c,this.normals=d,this.binormals=m,M=0;M<f;M++)i=M/(f-1),c[M]=e.getTangentAt(i),c[M].normalize();for(a(),M=1;M<f;M++)d[M]=d[M-1].clone(),m[M]=m[M-1].clone(),h.crossVectors(c[M-1],c[M]),h.length()>y&&(h.normalize(),x=n(THREE.Math.clamp(c[M-1].dot(c[M]),-1,1)),d[M].applyMatrix4(g.makeRotationAxis(h,x))),m[M].crossVectors(c[M],d[M]);if(r)for(x=n(THREE.Math.clamp(d[0].dot(d[f-1]),-1,1)),x/=f-1,0<c[0].dot(h.crossVectors(d[0],d[f-1]))&&(x=-x),M=1;M<f;M++)d[M].applyMatrix4(g.makeRotationAxis(c[M],x*M)),m[M].crossVectors(c[M],d[M])},THREE.PolyhedronGeometry=function(e,t,r,a){function o(e){var t=e.normalize().clone();t.index=_.vertices.push(t)-1;var r=c(e)/2/g+0.5,a=d(e)/g+0.5;return t.uv=new THREE.Vector2(r,1-a),t}function n(e,t,r){var a=new THREE.Face3(e.index,t.index,r.index,[e.clone(),t.clone(),r.clone()]);a.centroid.add(e).add(t).add(r).divideScalar(3),_.faces.push(a);var o=c(a.centroid);_.faceVertexUvs[0].push([m(e.uv,e,o),m(t.uv,t,o),m(r.uv,r,o)])}function s(e,t){for(var r=u(2,t),s=u(4,t),l=o(_.vertices[e.a]),a=o(_.vertices[e.b]),p=o(_.vertices[e.c]),c=[],d=0;d<=r;d++){c[d]=[];for(var i=o(l.clone().lerp(p,d/r)),m=o(a.clone().lerp(p,d/r)),h=r-d,g=0;g<=h;g++)c[d][g]=0==g&&d==r?i:o(i.clone().lerp(m,g/h))}for(var d=0;d<r;d++)for(var g=0,f;g<2*(r-d)-1;g++)f=Math.floor(g/2),0==g%2?n(c[d][f+1],c[d+1][f],c[d][f]):n(c[d][f+1],c[d+1][f+1],c[d+1][f])}function c(e){return h(e.z,-e.x)}function d(e){return h(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function m(e,t,r){return 0>r&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(r/2/g+0.5,e.y)),e.clone()}var u=Math.pow,h=Math.atan2,g=Math.PI,y=Math.min,x=Math.max;THREE.Geometry.call(this),r=r||1,a=a||0;for(var _=this,v=0,i=e.length;v<i;v++)o(new THREE.Vector3(e[v][0],e[v][1],e[v][2]));for(var l=this.vertices,p=[],v=0,i=t.length;v<i;v++){var f=l[t[v][0]],b=l[t[v][1]],S=l[t[v][2]];p[v]=new THREE.Face3(f.index,b.index,S.index,[f.clone(),b.clone(),S.clone()])}for(var v=0,i=p.length;v<i;v++)s(p[v],a);for(var v=0,i=this.faceVertexUvs[0].length;v<i;v++){var M=this.faceVertexUvs[0][v],T=M[0].x,C=M[1].x,A=M[2].x,E=x(T,x(C,A)),w=y(T,y(C,A));0.9<E&&0.1>w&&(0.2>T&&(M[0].x+=1),0.2>C&&(M[1].x+=1),0.2>A&&(M[2].x+=1))}for(var v=0,i=this.vertices.length;v<i;v++)this.vertices[v].multiplyScalar(r);this.mergeVertices(),this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),r)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(e,r){this.radius=e,this.detail=r;var a=(1+2.23606797749979)/2;THREE.PolyhedronGeometry.call(this,[[-1,a,0],[1,a,0],[-1,-a,0],[1,-a,0],[0,-1,a],[0,1,a],[0,-1,-a],[0,1,-a],[a,0,-1],[a,0,1],[-a,0,-1],[-a,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],e,r)},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]],e,t)},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],e,t)},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(e,t,r){THREE.Geometry.call(this);var o=this.vertices,n=this.faces,s=this.faceVertexUvs[0],l=t+1,m,i,h,p,u;for(m=0;m<=r;m++)for(u=m/r,i=0;i<=t;i++)p=i/t,h=e(p,u),o.push(h);var g,a,f,c,d,y,x,v;for(m=0;m<r;m++)for(i=0;i<t;i++)g=m*l+i,a=m*l+i+1,f=(m+1)*l+i+1,c=(m+1)*l+i,d=new THREE.Vector2(i/t,m/r),y=new THREE.Vector2((i+1)/t,m/r),x=new THREE.Vector2((i+1)/t,(m+1)/r),v=new THREE.Vector2(i/t,(m+1)/r),n.push(new THREE.Face3(g,a,c)),s.push([d,y,v]),n.push(new THREE.Face3(a,f,c)),s.push([y.clone(),x,v.clone()]);this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(e){e=e||1;var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3,new THREE.Vector3(e,0,0),new THREE.Vector3,new THREE.Vector3(0,e,0),new THREE.Vector3,new THREE.Vector3(0,0,e)),t.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));var r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,t,r,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(e,t,r,a,o,i){THREE.Object3D.call(this),a===void 0&&(a=16776960),r===void 0&&(r=1),o===void 0&&(o=0.2*r),i===void 0&&(i=0.2*o),this.position=t;var n=new THREE.Geometry;n.vertices.push(new THREE.Vector3(0,0,0)),n.vertices.push(new THREE.Vector3(0,1,0)),this.line=new THREE.Line(n,new THREE.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line);var s=new THREE.CylinderGeometry(0,0.5,1,5,1);s.applyMatrix(new THREE.Matrix4().makeTranslation(0,-0.5,0)),this.cone=new THREE.Mesh(s,new THREE.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,i)},THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var e=new THREE.Vector3,t;return function(r){0.99999<r.y?this.quaternion.set(0,0,0,1):-0.99999>r.y?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,r){t===void 0&&(t=0.2*e),r===void 0&&(r=0.2*t),this.line.scale.set(1,e,1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.setHex(e),this.cone.material.color.setHex(e)},THREE.BoxHelper=function(e){var t=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=t;var r=new THREE.Geometry;r.vertices.push(t[0],t[1],t[1],t[2],t[2],t[3],t[3],t[0],t[4],t[5],t[5],t[6],t[6],t[7],t[7],t[4],t[0],t[4],t[1],t[5],t[2],t[6],t[3],t[7]),THREE.Line.call(this,r,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),e!==void 0&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var r=t.boundingBox.min,a=t.boundingBox.max,o=this.vertices;o[0].set(a.x,a.y,a.z),o[1].set(r.x,a.y,a.z),o[2].set(r.x,r.y,a.z),o[3].set(a.x,r.y,a.z),o[4].set(a.x,a.y,r.z),o[5].set(r.x,a.y,r.z),o[6].set(r.x,r.y,r.z),o[7].set(a.x,r.y,r.z),this.geometry.computeBoundingSphere(),this.geometry.verticesNeedUpdate=!0,this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.BoundingBoxHelper=function(e,t){this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.CubeGeometry(1,1,1),new THREE.MeshBasicMaterial({color:t||8947848,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,a){r(e,a),r(t,a)}function r(e,t){a.vertices.push(new THREE.Vector3),a.colors.push(new THREE.Color(t)),i[e]===void 0&&(i[e]=[]),i[e].push(a.vertices.length-1)}var a=new THREE.Geometry,o=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),i={},n=16755200,s=16711680,l=43775,p=3355443;t('n1','n2',n),t('n2','n4',n),t('n4','n3',n),t('n3','n1',n),t('f1','f2',n),t('f2','f4',n),t('f4','f3',n),t('f3','f1',n),t('n1','f1',n),t('n2','f2',n),t('n3','f3',n),t('n4','f4',n),t('p','n1',s),t('p','n2',s),t('p','n3',s),t('p','n4',s),t('u1','u2',l),t('u2','u3',l),t('u3','u1',l),t('c','t',16777215),t('p','c',p),t('cn1','cn2',p),t('cn3','cn4',p),t('cf1','cf2',p),t('cf3','cf4',p),THREE.Line.call(this,a,o,THREE.LinePieces),this.camera=e,this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=i,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Camera,r=new THREE.Projector;return function(){function a(a,n,s,l){e.set(n,s,l),r.unprojectVector(e,t);var p=o.pointMap[a];if(p!==void 0)for(var c=0,i=p.length;c<i;c++)o.geometry.vertices[p[c]].copy(e)}var o=this,i=1,n=1;t.projectionMatrix.copy(this.camera.projectionMatrix),a('c',0,0,-1),a('t',0,0,1),a('n1',-i,-n,-1),a('n2',i,-n,-1),a('n3',-i,n,-1),a('n4',i,n,-1),a('f1',-i,-n,1),a('f2',i,-n,1),a('f3',-i,n,1),a('f4',i,n,1),a('u1',0.7*i,1.1*n,-1),a('u2',0.7*-i,1.1*n,-1),a('u3',0,2*n,-1),a('cf1',-i,0,1),a('cf2',i,0,1),a('cf3',0,-n,1),a('cf4',0,n,1),a('cn1',-i,0,-1),a('cn2',i,0,-1),a('cn3',0,-n,-1),a('cn4',0,n,-1),this.geometry.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var r=new THREE.PlaneGeometry(t,t),a=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});a.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Mesh(r,a),this.add(this.lightPlane),r=new THREE.Geometry,r.vertices.push(new THREE.Vector3),r.vertices.push(new THREE.Vector3),a=new THREE.LineBasicMaterial({fog:!1}),a.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(r,a),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(r),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.FaceNormalsHelper=function(e,t,r,a){this.object=e,this.size=t||1;for(var o=r||16776960,n=a||1,s=new THREE.Geometry,p=this.object.geometry.faces,c=0,i=p.length;c<i;c++)s.vertices.push(new THREE.Vector3),s.vertices.push(new THREE.Vector3);THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:o,linewidth:n}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var t=this.geometry.vertices,r=this.object.geometry.faces,a=this.object.matrixWorld,o=0,i=r.length,n;o<i;o++){n=r[o],e.copy(n.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);var s=2*o;t[s].copy(n.centroid).applyMatrix4(a),t[s+1].addVectors(t[s],e)}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.GridHelper=function(e,t){var r=new THREE.Geometry,a=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var o=-e;o<=e;o+=t){r.vertices.push(new THREE.Vector3(-e,0,o),new THREE.Vector3(e,0,o),new THREE.Vector3(o,0,-e),new THREE.Vector3(o,0,e));var i=0===o?this.color1:this.color2;r.colors.push(i,i,i,i)}THREE.Line.call(this,r,a,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var r=new THREE.SphereGeometry(t,4,2);r.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI/2));for(var a=0;a<8;a++)r.faces[a].color=this.colors[4>a?0:1];var o=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(r,o),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var r=new THREE.SphereGeometry(t,4,2),a=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});a.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,r,a),this.matrixWorld=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new THREE.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix(new THREE.Matrix4().makeTranslation(0,-0.5,0)),t.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI/2));var r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,r),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var r=this.light.distance?this.light.distance:1e4,a=r*Math.tan(this.light.angle);this.cone.scale.set(a,a,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,r,a){this.object=e,this.size=t||1;for(var o=r||16711680,n=a||1,s=new THREE.Geometry,p=e.geometry.vertices,c=e.geometry.faces,d=0,i=c.length,l;d<i;d++){l=c[d];for(var m=0,u=l.vertexNormals.length;m<u;m++)s.vertices.push(new THREE.Vector3),s.vertices.push(new THREE.Vector3)}THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:o,linewidth:n}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){var t=['a','b','c','d'];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var r=this.geometry.vertices,a=this.object.geometry.vertices,o=this.object.geometry.faces,n=this.object.matrixWorld,s=0,p=0,i=o.length,l;p<i;p++){l=o[p];for(var c=0,d=l.vertexNormals.length;c<d;c++){var m=l[t[c]],u=a[m],h=l.vertexNormals[c];r[s].copy(u).applyMatrix4(n),e.copy(h).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(r[s]),++s,r[s].copy(e),++s}}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,r,a){this.object=e,this.size=t||1;for(var o=r||255,n=a||1,s=new THREE.Geometry,p=e.geometry.vertices,c=e.geometry.faces,d=0,i=c.length,l;d<i;d++){l=c[d];for(var m=0,u=l.vertexTangents.length;m<u;m++)s.vertices.push(new THREE.Vector3),s.vertices.push(new THREE.Vector3)}THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:o,linewidth:n}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){var t=['a','b','c','d'];this.object.updateMatrixWorld(!0);for(var r=this.geometry.vertices,a=this.object.geometry.vertices,o=this.object.geometry.faces,n=this.object.matrixWorld,s=0,p=0,i=o.length,l;p<i;p++){l=o[p];for(var c=0,d=l.vertexTangents.length;c<d;c++){var m=l[t[c]],u=a[m],h=l.vertexTangents[c];r[s].copy(u).applyMatrix4(n),e.copy(h).transformDirection(n).multiplyScalar(this.size),e.add(r[s]),++s,r[s].copy(e),++s}}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e){var t=[0,0],r={},a=function(e,t){return e-t},o=['a','b','c','d'],n=new THREE.BufferGeometry,s=0;if(e.geometry instanceof THREE.Geometry){for(var p=e.geometry.vertices,c=e.geometry.faces,d=new Uint32Array(6*c.length),m=0,i=c.length,l;m<i;m++){l=c[m];for(var u=0;3>u;u++){t[0]=l[o[u]],t[1]=l[o[(u+1)%3]],t.sort(a);var h=t.toString();r[h]===void 0&&(d[2*s]=t[0],d[2*s+1]=t[1],r[h]=!0,s++)}}n.addAttribute('position',Float32Array,2*s,3);for(var g=n.attributes.position.array,m=0,i=s;m<i;m++)for(var u=0;2>u;u++){var f=p[d[2*m+u]],y=6*m+3*u;g[y+0]=f.x,g[y+1]=f.y,g[y+2]=f.z}}else{for(var p=e.geometry.attributes.position.array,c=e.geometry.attributes.index.array,d=new Uint32Array(2*c.length),m=0,i=c.length/3;m<i;m++)for(var u=0,y;3>u;u++){y=3*m,t[0]=c[y+u],t[1]=c[y+(u+1)%3],t.sort(a);var h=t.toString();r[h]===void 0&&(d[2*s]=t[0],d[2*s+1]=t[1],r[h]=!0,s++)}n.addAttribute('position',Float32Array,2*s,3);for(var g=n.attributes.position.array,m=0,i=s;m<i;m++)for(var u=0;2>u;u++){var y=6*m+3*u,x=3*d[2*m+u];g[y+0]=p[x],g[y+1]=p[x+1],g[y+2]=p[x+2]}}THREE.Line.call(this,n,new THREE.LineBasicMaterial({color:16777215}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare=function(e,t,r,a,o){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,e!==void 0&&this.add(e,t,r,a,o)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(e,t,r,a,o,i){t===void 0&&(t=-1),r===void 0&&(r=0),i===void 0&&(i=1),o===void 0&&(o=new THREE.Color(16777215)),a===void 0&&(a=THREE.NormalBlending),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:1,opacity:i,color:o,blending:a})},THREE.LensFlare.prototype.updateLensFlares=function(){var e=this.lensFlares.length,t=2*-this.positionScreen.x,r=2*-this.positionScreen.y,a,o;for(a=0;a<e;a++)o=this.lensFlares[a],o.x=this.positionScreen.x+t*o.distance,o.y=this.positionScreen.y+r*o.distance,o.wantedRotation=0.25*(o.x*Math.PI),o.rotation+=0.25*(o.wantedRotation-o.rotation)},THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,a='__default';this.createAnimation(a,0,r-1,r/1),this.setAnimationWeight(a,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,r,a){var o={startFrame:t,endFrame:r,length:r-t+1,fps:a,duration:(r-t)/a,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=o,this.animationsList.push(o)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t=/([a-z]+)(\d+)/,r={},a=this.geometry,o=0,i=a.morphTargets.length,n;o<i;o++){var s=a.morphTargets[o],l=s.name.match(t);if(l&&1<l.length){var p=l[1],c=l[2];r[p]||(r[p]={start:Infinity,end:-Infinity});var d=r[p];o<d.start&&(d.start=o),o>d.end&&(d.end=o),n||(n=p)}}for(var p in r){var d=r[p];this.createAnimation(p,d.start,d.end,e)}this.firstAnimation=n},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn('animation['+e+'] undefined')},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,r=this.animationsList.length,a;t<r;t++)if(a=this.animationsList[t],a.active){var o=a.duration/a.length;a.time+=a.direction*e,a.mirroredLoop?(a.time>a.duration||0>a.time)&&(a.direction*=-1,a.time>a.duration&&(a.time=a.duration,a.directionBackwards=!0),0>a.time&&(a.time=0,a.directionBackwards=!1)):(a.time%=a.duration,0>a.time&&(a.time+=a.duration));var i=a.startFrame+THREE.Math.clamp(Math.floor(a.time/o),0,a.length-1),n=a.weight;i!==a.currentFrame&&(this.morphTargetInfluences[a.lastFrame]=0,this.morphTargetInfluences[a.currentFrame]=1*n,this.morphTargetInfluences[i]=0,a.lastFrame=a.currentFrame,a.currentFrame=i);var s=a.time%o/o;a.directionBackwards&&(s=1-s),this.morphTargetInfluences[a.currentFrame]=s*n,this.morphTargetInfluences[a.lastFrame]=(1-s)*n}},THREE.LensFlarePlugin=function(){function e(e,t){var a=r.createProgram(),o=r.createShader(r.FRAGMENT_SHADER),i=r.createShader(r.VERTEX_SHADER),n='precision '+t+' float;\n';return r.shaderSource(o,n+e.fragmentShader),r.shaderSource(i,n+e.vertexShader),r.compileShader(o),r.compileShader(i),r.attachShader(a,o),r.attachShader(a,i),r.linkProgram(a),a}var t={},r,a,o;this.init=function(n){r=n.context,a=n,o=n.getPrecision(),t.vertices=new Float32Array(16),t.faces=new Uint16Array(6);var s=0;t.vertices[s++]=-1,t.vertices[s++]=-1,t.vertices[s++]=0,t.vertices[s++]=0,t.vertices[s++]=1,t.vertices[s++]=-1,t.vertices[s++]=1,t.vertices[s++]=0,t.vertices[s++]=1,t.vertices[s++]=1,t.vertices[s++]=1,t.vertices[s++]=1,t.vertices[s++]=-1,t.vertices[s++]=1,t.vertices[s++]=0,t.vertices[s++]=1,s=0,t.faces[s++]=0,t.faces[s++]=1,t.faces[s++]=2,t.faces[s++]=0,t.faces[s++]=2,t.faces[s++]=3,t.vertexBuffer=r.createBuffer(),t.elementBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,t.vertices,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.elementBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.faces,r.STATIC_DRAW),t.tempTexture=r.createTexture(),t.occlusionTexture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,t.tempTexture),r.texImage2D(r.TEXTURE_2D,0,r.RGB,16,16,0,r.RGB,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.bindTexture(r.TEXTURE_2D,t.occlusionTexture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,16,16,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),0>=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(t.hasVertexTexture=!1,t.program=e(THREE.ShaderFlares.lensFlare,o)):(t.hasVertexTexture=!0,t.program=e(THREE.ShaderFlares.lensFlareVertexTexture,o)),t.attributes={},t.uniforms={},t.attributes.vertex=r.getAttribLocation(t.program,'position'),t.attributes.uv=r.getAttribLocation(t.program,'uv'),t.uniforms.renderType=r.getUniformLocation(t.program,'renderType'),t.uniforms.map=r.getUniformLocation(t.program,'map'),t.uniforms.occlusionMap=r.getUniformLocation(t.program,'occlusionMap'),t.uniforms.opacity=r.getUniformLocation(t.program,'opacity'),t.uniforms.color=r.getUniformLocation(t.program,'color'),t.uniforms.scale=r.getUniformLocation(t.program,'scale'),t.uniforms.rotation=r.getUniformLocation(t.program,'rotation'),t.uniforms.screenPosition=r.getUniformLocation(t.program,'screenPosition')},this.render=function(e,o,n,s){var l=e.__webglFlares,p=l.length;if(p){var c=new THREE.Vector3,d=s/n,m=0.5*n,u=0.5*s,h=16/s,g=new THREE.Vector2(h*d,h),f=new THREE.Vector3(1,1,0),y=new THREE.Vector2(1,1),x=t.uniforms,v=t.attributes;r.useProgram(t.program),r.enableVertexAttribArray(t.attributes.vertex),r.enableVertexAttribArray(t.attributes.uv),r.uniform1i(x.occlusionMap,0),r.uniform1i(x.map,1),r.bindBuffer(r.ARRAY_BUFFER,t.vertexBuffer),r.vertexAttribPointer(v.vertex,2,r.FLOAT,!1,16,0),r.vertexAttribPointer(v.uv,2,r.FLOAT,!1,16,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.elementBuffer),r.disable(r.CULL_FACE),r.depthMask(!1);var _,i,b,S,M;for(_=0;_<p;_++)if(h=16/s,g.set(h*d,h),S=l[_],c.set(S.matrixWorld.elements[12],S.matrixWorld.elements[13],S.matrixWorld.elements[14]),c.applyMatrix4(o.matrixWorldInverse),c.applyProjection(o.projectionMatrix),f.copy(c),y.x=f.x*m+m,y.y=f.y*u+u,t.hasVertexTexture||0<y.x&&y.x<n&&0<y.y&&y.y<s)for(r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,t.tempTexture),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGB,y.x-8,y.y-8,16,16,0),r.uniform1i(x.renderType,0),r.uniform2f(x.scale,g.x,g.y),r.uniform3f(x.screenPosition,f.x,f.y,f.z),r.disable(r.BLEND),r.enable(r.DEPTH_TEST),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.occlusionTexture),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,y.x-8,y.y-8,16,16,0),r.uniform1i(x.renderType,1),r.disable(r.DEPTH_TEST),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,t.tempTexture),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),S.positionScreen.copy(f),S.customUpdateCallback?S.customUpdateCallback(S):S.updateLensFlares(),r.uniform1i(x.renderType,2),r.enable(r.BLEND),(i=0,b=S.lensFlares.length);i<b;i++)M=S.lensFlares[i],1e-3<M.opacity&&1e-3<M.scale&&(f.x=M.x,f.y=M.y,f.z=M.z,h=M.size*M.scale/s,g.x=h*d,g.y=h,r.uniform3f(x.screenPosition,f.x,f.y,f.z),r.uniform2f(x.scale,g.x,g.y),r.uniform1f(x.rotation,M.rotation),r.uniform1f(x.opacity,M.opacity),r.uniform3f(x.color,M.color.r,M.color.g,M.color.b),a.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst),a.setTexture(M.texture,1),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0));r.enable(r.CULL_FACE),r.enable(r.DEPTH_TEST),r.depthMask(!0)}}},THREE.ShadowMapPlugin=function(){function e(e,t){var r=new THREE.DirectionalLight;r.isVirtual=!0,r.onlyShadow=!0,r.castShadow=!0,r.shadowCameraNear=e.shadowCameraNear,r.shadowCameraFar=e.shadowCameraFar,r.shadowCameraLeft=e.shadowCameraLeft,r.shadowCameraRight=e.shadowCameraRight,r.shadowCameraBottom=e.shadowCameraBottom,r.shadowCameraTop=e.shadowCameraTop,r.shadowCameraVisible=e.shadowCameraVisible,r.shadowDarkness=e.shadowDarkness,r.shadowBias=e.shadowCascadeBias[t],r.shadowMapWidth=e.shadowCascadeWidth[t],r.shadowMapHeight=e.shadowCascadeHeight[t],r.pointsWorld=[],r.pointsFrustum=[];for(var a=r.pointsWorld,o=r.pointsFrustum,n=0;8>n;n++)a[n]=new THREE.Vector3,o[n]=new THREE.Vector3;var i=e.shadowCascadeNearZ[t],s=e.shadowCascadeFarZ[t];return o[0].set(-1,-1,i),o[1].set(1,-1,i),o[2].set(-1,1,i),o[3].set(1,1,i),o[4].set(-1,-1,s),o[5].set(1,-1,s),o[6].set(-1,1,s),o[7].set(1,1,s),r}function t(e,t){var r=e.shadowCascadeArray[t];r.position.copy(e.position),r.target.position.copy(e.target.position),r.lookAt(r.target),r.shadowCameraVisible=e.shadowCameraVisible,r.shadowDarkness=e.shadowDarkness,r.shadowBias=e.shadowCascadeBias[t];var a=e.shadowCascadeNearZ[t],o=e.shadowCascadeFarZ[t],i=r.pointsFrustum;i[0].z=a,i[1].z=a,i[2].z=a,i[3].z=a,i[4].z=o,i[5].z=o,i[6].z=o,i[7].z=o}function r(e,t){var r=t.shadowCamera,a=t.pointsFrustum,o=t.pointsWorld;n.set(Infinity,Infinity,Infinity),s.set(-Infinity,-Infinity,-Infinity);for(var l=0,i;8>l;l++)i=o[l],i.copy(a[l]),THREE.ShadowMapPlugin.__projector.unprojectVector(i,e),i.applyMatrix4(r.matrixWorldInverse),i.x<n.x&&(n.x=i.x),i.x>s.x&&(s.x=i.x),i.y<n.y&&(n.y=i.y),i.y>s.y&&(s.y=i.y),i.z<n.z&&(n.z=i.z),i.z>s.z&&(s.z=i.z);r.left=n.x,r.right=s.x,r.top=s.y,r.bottom=n.y,r.updateProjectionMatrix()}function a(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}var o=new THREE.Frustum,i=new THREE.Matrix4,n=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,p,c,d,m,u,h;this.init=function(e){p=e.context,c=e;var t=THREE.ShaderLib.depthRGBA,r=THREE.UniformsUtils.clone(t.uniforms);d=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r}),m=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r,morphTargets:!0}),u=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r,skinning:!0}),h=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r,morphTargets:!0,skinning:!0}),d._shadowPass=!0,m._shadowPass=!0,u._shadowPass=!0,h._shadowPass=!0},this.render=function(e,t){c.shadowMapEnabled&&c.shadowMapAutoUpdate&&this.update(e,t)},this.update=function(s,g){var f=[],y=0,x=null,v,_,b,S,M,n,T,C,A,E,w,L,P,D;for(p.clearColor(1,1,1,1),p.disable(p.BLEND),p.enable(p.CULL_FACE),p.frontFace(p.CCW),c.shadowMapCullFace===THREE.CullFaceFront?p.cullFace(p.FRONT):p.cullFace(p.BACK),c.setDepthTest(!0),(v=0,_=s.__lights.length);v<_;v++)if(P=s.__lights[v],P.castShadow)if(P instanceof THREE.DirectionalLight&&P.shadowCascade)for(M=0;M<P.shadowCascadeCount;M++){var R;if(!P.shadowCascadeArray[M]){R=e(P,M),R.originalCamera=g;var F=new THREE.Gyroscope;F.position=P.shadowCascadeOffset,F.add(R),F.add(R.target),g.add(F),P.shadowCascadeArray[M]=R,console.log('Created virtualLight',R)}else R=P.shadowCascadeArray[M];t(P,M),f[y]=R,y++}else f[y]=P,y++;for(v=0,_=f.length;v<_;v++){if(P=f[v],!P.shadowMap){var V=THREE.LinearFilter;c.shadowMapType===THREE.PCFSoftShadowMap&&(V=THREE.NearestFilter);var U={minFilter:V,magFilter:V,format:THREE.RGBAFormat};P.shadowMap=new THREE.WebGLRenderTarget(P.shadowMapWidth,P.shadowMapHeight,U),P.shadowMapSize=new THREE.Vector2(P.shadowMapWidth,P.shadowMapHeight),P.shadowMatrix=new THREE.Matrix4}if(!P.shadowCamera){if(P instanceof THREE.SpotLight)P.shadowCamera=new THREE.PerspectiveCamera(P.shadowCameraFov,P.shadowMapWidth/P.shadowMapHeight,P.shadowCameraNear,P.shadowCameraFar);else if(P instanceof THREE.DirectionalLight)P.shadowCamera=new THREE.OrthographicCamera(P.shadowCameraLeft,P.shadowCameraRight,P.shadowCameraTop,P.shadowCameraBottom,P.shadowCameraNear,P.shadowCameraFar);else{console.error('Unsupported light type for shadow');continue}s.add(P.shadowCamera),!0===s.autoUpdate&&s.updateMatrixWorld()}for(P.shadowCameraVisible&&!P.cameraHelper&&(P.cameraHelper=new THREE.CameraHelper(P.shadowCamera),P.shadowCamera.add(P.cameraHelper)),P.isVirtual&&R.originalCamera==g&&r(g,P),n=P.shadowMap,T=P.shadowMatrix,C=P.shadowCamera,C.position.setFromMatrixPosition(P.matrixWorld),l.setFromMatrixPosition(P.target.matrixWorld),C.lookAt(l),C.updateMatrixWorld(),C.matrixWorldInverse.getInverse(C.matrixWorld),P.cameraHelper&&(P.cameraHelper.visible=P.shadowCameraVisible),P.shadowCameraVisible&&P.cameraHelper.update(),T.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),T.multiply(C.projectionMatrix),T.multiply(C.matrixWorldInverse),i.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),o.setFromMatrix(i),c.setRenderTarget(n),c.clear(),D=s.__webglObjects,(b=0,S=D.length);b<S;b++)w=D[b],L=w.object,w.render=!1,L.visible&&L.castShadow&&(!(L instanceof THREE.Mesh||L instanceof THREE.ParticleSystem)||!L.frustumCulled||o.intersectsObject(L))&&(L._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,L.matrixWorld),w.render=!0);var z,B,N;for(b=0,S=D.length;b<S;b++)w=D[b],w.render&&(L=w.object,A=w.buffer,z=a(L),B=0<L.geometry.morphTargets.length&&z.morphTargets,N=L instanceof THREE.SkinnedMesh&&z.skinning,E=L.customDepthMaterial?L.customDepthMaterial:N?B?h:u:B?m:d,A instanceof THREE.BufferGeometry?c.renderBufferDirect(C,s.__lights,x,E,A,L):c.renderBuffer(C,s.__lights,x,E,A,L));for(D=s.__webglObjectsImmediate,b=0,S=D.length;b<S;b++)w=D[b],L=w.object,L.visible&&L.castShadow&&(L._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,L.matrixWorld),c.renderImmediateObject(C,s.__lights,x,d,L))}var I=c.getClearColor(),O=c.getClearAlpha();p.clearColor(I.r,I.g,I.b,O),p.enable(p.BLEND),c.shadowMapCullFace===THREE.CullFaceFront&&p.cullFace(p.BACK)}},THREE.ShadowMapPlugin.__projector=new THREE.Projector,THREE.SpritePlugin=function(){function e(){var e=r.createProgram(),t=r.createShader(r.VERTEX_SHADER),o=r.createShader(r.FRAGMENT_SHADER);return r.shaderSource(t,['precision '+a.getPrecision()+' float;','uniform mat4 modelViewMatrix;','uniform mat4 projectionMatrix;','uniform float rotation;','uniform vec2 scale;','uniform vec2 uvOffset;','uniform vec2 uvScale;','attribute vec2 position;','attribute vec2 uv;','varying vec2 vUV;','void main() {','vUV = uvOffset + uv * uvScale;','vec2 alignedPosition = position * scale;','vec2 rotatedPosition;','rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;','rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;','vec4 finalPosition;','finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );','finalPosition.xy += rotatedPosition;','finalPosition = projectionMatrix * finalPosition;','gl_Position = finalPosition;','}'].join('\n')),r.shaderSource(o,['precision '+a.getPrecision()+' float;','uniform vec3 color;','uniform sampler2D map;','uniform float opacity;','uniform int fogType;','uniform vec3 fogColor;','uniform float fogDensity;','uniform float fogNear;','uniform float fogFar;','uniform float alphaTest;','varying vec2 vUV;','void main() {','vec4 texture = texture2D( map, vUV );','if ( texture.a < alphaTest ) discard;','gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );','if ( fogType > 0 ) {','float depth = gl_FragCoord.z / gl_FragCoord.w;','float fogFactor = 0.0;','if ( fogType == 1 ) {','fogFactor = smoothstep( fogNear, fogFar, depth );','} else {','const float LOG2 = 1.442695;','float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );','fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );','}','gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );','}','}'].join('\n')),r.compileShader(t),r.compileShader(o),r.attachShader(e,t),r.attachShader(e,o),r.linkProgram(e),e}function t(e,t){return e.z===t.z?t.id-e.id:t.z-e.z}var r,a,o,i,n,s,l,p,c,d;this.init=function(t){r=t.context,a=t,i=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]),s=r.createBuffer(),l=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,i,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,l),r.bufferData(r.ELEMENT_ARRAY_BUFFER,n,r.STATIC_DRAW),p=e(),c={position:r.getAttribLocation(p,'position'),uv:r.getAttribLocation(p,'uv')},d={uvOffset:r.getUniformLocation(p,'uvOffset'),uvScale:r.getUniformLocation(p,'uvScale'),rotation:r.getUniformLocation(p,'rotation'),scale:r.getUniformLocation(p,'scale'),color:r.getUniformLocation(p,'color'),map:r.getUniformLocation(p,'map'),opacity:r.getUniformLocation(p,'opacity'),modelViewMatrix:r.getUniformLocation(p,'modelViewMatrix'),projectionMatrix:r.getUniformLocation(p,'projectionMatrix'),fogType:r.getUniformLocation(p,'fogType'),fogDensity:r.getUniformLocation(p,'fogDensity'),fogNear:r.getUniformLocation(p,'fogNear'),fogFar:r.getUniformLocation(p,'fogFar'),fogColor:r.getUniformLocation(p,'fogColor'),alphaTest:r.getUniformLocation(p,'alphaTest')};var m=document.createElement('canvas');m.width=8,m.height=8;var u=m.getContext('2d');u.fillStyle='#ffffff',u.fillRect(0,0,m.width,m.height),o=new THREE.Texture(m),o.needsUpdate=!0},this.render=function(e,n){var m=e.__webglSprites,u=m.length;if(u){r.useProgram(p),r.enableVertexAttribArray(c.position),r.enableVertexAttribArray(c.uv),r.disable(r.CULL_FACE),r.enable(r.BLEND),r.bindBuffer(r.ARRAY_BUFFER,s),r.vertexAttribPointer(c.position,2,r.FLOAT,!1,16,0),r.vertexAttribPointer(c.uv,2,r.FLOAT,!1,16,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,l),r.uniformMatrix4fv(d.projectionMatrix,!1,n.projectionMatrix.elements),r.activeTexture(r.TEXTURE0),r.uniform1i(d.map,0);var h=0,g=0,f=e.fog;f?(r.uniform3f(d.fogColor,f.color.r,f.color.g,f.color.b),f instanceof THREE.Fog?(r.uniform1f(d.fogNear,f.near),r.uniform1f(d.fogFar,f.far),r.uniform1i(d.fogType,1),h=1,g=1):f instanceof THREE.FogExp2&&(r.uniform1f(d.fogDensity,f.density),r.uniform1i(d.fogType,2),h=2,g=2)):(r.uniform1i(d.fogType,0),h=0,g=0);var y=[],x,i,v,_;for(x=0;x<u;x++)i=m[x],v=i.material,!1===i.visible||(i._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,i.matrixWorld),i.z=-i._modelViewMatrix.elements[14]);for(m.sort(t),x=0;x<u;x++)i=m[x],!1===i.visible||(v=i.material,r.uniform1f(d.alphaTest,v.alphaTest),r.uniformMatrix4fv(d.modelViewMatrix,!1,i._modelViewMatrix.elements),y[0]=i.scale.x,y[1]=i.scale.y,_=e.fog&&v.fog?g:0,h!==_&&(r.uniform1i(d.fogType,_),h=_),r.uniform2f(d.uvScale,v.uvScale.x,v.uvScale.y),r.uniform2f(d.uvOffset,v.uvOffset.x,v.uvOffset.y),r.uniform1f(d.opacity,v.opacity),r.uniform3f(d.color,v.color.r,v.color.g,v.color.b),r.uniform1f(d.rotation,v.rotation),r.uniform2fv(d.scale,y),a.setBlending(v.blending,v.blendEquation,v.blendSrc,v.blendDst),a.setDepthTest(v.depthTest),a.setDepthWrite(v.depthWrite),v.map&&v.map.image&&v.map.image.width?a.setTexture(v.map,0):a.setTexture(o,0),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0));r.enable(r.CULL_FACE)}}},THREE.DepthPassPlugin=function(){function e(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}this.enabled=!1,this.renderTarget=null;var t=new THREE.Frustum,r=new THREE.Matrix4,a,o,i,n,s,l;this.init=function(e){a=e.context,o=e;var t=THREE.ShaderLib.depthRGBA,r=THREE.UniformsUtils.clone(t.uniforms);i=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r}),n=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r,morphTargets:!0}),s=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r,skinning:!0}),l=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r,morphTargets:!0,skinning:!0}),i._shadowPass=!0,n._shadowPass=!0,s._shadowPass=!0,l._shadowPass=!0},this.render=function(e,t){this.enabled&&this.update(e,t)},this.update=function(p,c){var d=null,m,u,h,g,f,y,x;for(a.clearColor(1,1,1,1),a.disable(a.BLEND),o.setDepthTest(!0),!0===p.autoUpdate&&p.updateMatrixWorld(),c.matrixWorldInverse.getInverse(c.matrixWorld),r.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),t.setFromMatrix(r),o.setRenderTarget(this.renderTarget),o.clear(),x=p.__webglObjects,(m=0,u=x.length);m<u;m++)f=x[m],y=f.object,f.render=!1,y.visible&&(!(y instanceof THREE.Mesh||y instanceof THREE.ParticleSystem)||!y.frustumCulled||t.intersectsObject(y))&&(y._modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,y.matrixWorld),f.render=!0);var v,_,b;for(m=0,u=x.length;m<u;m++)if(f=x[m],f.render){if(y=f.object,h=f.buffer,y instanceof THREE.ParticleSystem&&!y.customDepthMaterial)continue;v=e(y),v&&o.setMaterialFaces(y.material),_=0<y.geometry.morphTargets.length&&v.morphTargets,b=y instanceof THREE.SkinnedMesh&&v.skinning,g=y.customDepthMaterial?y.customDepthMaterial:b?_?l:s:_?n:i,h instanceof THREE.BufferGeometry?o.renderBufferDirect(c,p.__lights,d,g,h,y):o.renderBuffer(c,p.__lights,d,g,h,y)}for(x=p.__webglObjectsImmediate,m=0,u=x.length;m<u;m++)f=x[m],y=f.object,y.visible&&(y._modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,y.matrixWorld),o.renderImmediateObject(c,p.__lights,d,i,y));var S=o.getClearColor(),M=o.getClearAlpha();a.clearColor(S.r,S.g,S.b,M),a.enable(a.BLEND)}},THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:'uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}',fragmentShader:'uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}'},lensFlare:{vertexShader:'uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}',fragmentShader:'precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}'}};</script><script>THREE.ColladaLoader=function(){function e(e,o,s){if(Ce=e,o=o||je,void 0!==s){var d=s.split('/');d.pop(),xe=(1>d.length?'.':d.join('/'))+'/'}t(),pe(),Me=n('//dae:library_images/dae:image',b,'image'),we=n('//dae:library_materials/dae:material',L,'material'),Se=n('//dae:library_effects/dae:effect',q,'effect'),ke=n('//dae:library_geometries/dae:geometry',R,'geometry'),Ie=n('.//dae:library_cameras/dae:camera',J,'camera'),De=n('.//dae:library_lights/dae:light',K,'light'),Re=n('//dae:library_controllers/dae:controller',T,'controller'),Ee=n('//dae:library_animations/dae:animation',G,'animation'),Ne=n('.//dae:library_visual_scenes/dae:visual_scene',C,'visual_scene'),be=[],Te=[],fe=a(),Oe=new THREE.Object3D;for(var l=0;l<fe.nodes.length;l++)Oe.add(c(fe.nodes[l]));Oe.scale.multiplyScalar(Ze),r();var i={scene:Oe,morphs:be,skins:Te,animations:ye,dae:{images:Me,materials:we,cameras:Ie,lights:De,effects:Se,geometries:ke,controllers:Re,animations:Ee,visualScenes:Ne,scene:fe}};return o&&o(i),i}function t(){var e=Ce.evaluate('//dae:asset',Ce,te,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),t=e.iterateNext();if(t&&t.childNodes)for(var n,a=0;a<t.childNodes.length;a++)switch(n=t.childNodes[a],n.nodeName){case'unit':var i=n.getAttribute('meter');i&&(Ze=parseFloat(i));break;case'up_axis':Le=n.textContent.charAt(0);}}function n(e,t,n){for(var a,r=Ce.evaluate(e,Ce,te,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),o={},s=r.iterateNext(),d=0;s;)a=new t().parse(s),a.id&&0!=a.id.length||(a.id=n+d++),o[a.id]=a,s=r.iterateNext();return o}function a(){var e=Ce.evaluate('.//dae:scene/dae:instance_visual_scene',Ce,te,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null).iterateNext();if(e){var t=e.getAttribute('url').replace(/^#/,'');return Ne[0<t.length?t:'visual_scene0']}return null}function r(){ye=[],o(Oe)}function o(e){var t=fe.getChildById(e.name,!0),a=null;if(t&&t.keys){a={fps:60,hierarchy:[{node:t,keys:t.keys,sids:t.sids}],node:e,name:'animation_'+e.name,length:0},ye.push(a);for(var r=0,i=t.keys.length;r<i;r++)a.length=ve(a.length,t.keys[r].time)}else a={hierarchy:[{keys:[],sids:[]}]};for(var s,r=0,i=e.children.length;r<i;r++){s=o(e.children[r]);for(var d=0,l=s.hierarchy.length;d<l;d++)a.hierarchy.push({keys:[],sids:[]})}return a}function d(){var e=1e6,t=-e,n=0;for(var a in Ee)for(var r,o=Ee[a],s=0;s<o.sampler.length;s++)r=o.sampler[s],r.create(),e=_e(e,r.startTime),t=ve(t,r.endTime),n=ve(n,r.input.length);return{start:e,end:t,frames:n}}function i(e,t){var n=t instanceof A?Re[t.url]:t;if(!n||!n.morph)return void console.log('could not find morph controller!');for(var a=n.morph,r=0;r<a.targets.length;r++){var i=a.targets[r],o=ke[i];if(o.mesh&&o.mesh.primitives&&o.mesh.primitives.length){var s=o.mesh.primitives[0].geometry;s.vertices.length===e.vertices.length&&e.morphTargets.push({name:'target_1',vertices:s.vertices})}}e.morphTargets.push({name:'target_Z',vertices:e.vertices})}function l(e,t,n,a){if(e.world=e.world||new THREE.Matrix4,e.world.copy(e.matrix),e.channels&&e.channels.length){var r=e.channels[0],o=r.sampler.output[n];o instanceof THREE.Matrix4&&e.world.copy(o)}a&&e.world.multiplyMatrices(a,e.world),t.push(e);for(var s=0;s<e.nodes.length;s++)l(e.nodes[s],t,n,e.world)}function p(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=-1;if('JOINT'==i.type){for(var r=0;r<t.joints.length;r++)if(i.sid==t.joints[r]){a=r;break}if(0<=a){var o=t.invBindMatrices[a];i.invBindMatrix=o,i.skinningMatrix=new THREE.Matrix4,i.skinningMatrix.multiplyMatrices(i.world,o),i.weights=[];for(var r=0;r<t.weights.length;r++)for(var s,d=0;d<t.weights[r].length;d++)s=t.weights[r][d],s.joint==a&&i.weights.push(s)}else throw'ColladaLoader: Could not find joint \''+i.sid+'\'.'}}}function s(e,t,n){var a=Re[t.url];if(n=void 0===n?40:n,!a||!a.skin)return void console.log('ColladaLoader: Could not find skin controller.');if(!t.skeleton||!t.skeleton.length)return void console.log('ColladaLoader: Could not find the skeleton for the skin. ');var r,i,c,h,u,m,o,s=d(),g=fe.getChildById(t.skeleton[0],!0)||fe.getChildBySid(t.skeleton[0],!0),f=new THREE.Vector3;for(r=0;r<e.vertices.length;r++)e.vertices[r].applyMatrix4(a.skin.bindShapeMatrix);for(n=0;n<s.frames;n++){var y=[],N=[];for(r=0;r<e.vertices.length;r++)N.push(new THREE.Vector3);for(l(g,y,n),p(y,a.skin),r=0;r<y.length;r++)if('JOINT'==y[r].type)for(i=0;i<y[r].weights.length;i++)c=y[r].weights[i],h=c.index,u=c.weight,m=e.vertices[h],o=N[h],f.x=m.x,f.y=m.y,f.z=m.z,f.applyMatrix4(y[r].skinningMatrix),o.x+=f.x*u,o.y+=f.y*u,o.z+=f.z*u;e.morphTargets.push({name:'target_'+n,vertices:N})}}function c(e){var t,n,a,r,o=new THREE.Object3D,d=!1;for(a=0;a<e.controllers.length;a++){var l=Re[e.controllers[a].url];switch(l.type){case'skin':if(ke[l.skin.source]){var p=new E;p.url=l.skin.source,p.instance_material=e.controllers[a].instance_material,e.geometries.push(p),d=!0,t=e.controllers[a]}else if(Re[l.skin.source]){var h=Re[l.skin.source];if(n=h,h.morph&&ke[h.morph.source]){var p=new E;p.url=h.morph.source,p.instance_material=e.controllers[a].instance_material,e.geometries.push(p)}}break;case'morph':if(ke[l.morph.source]){var p=new E;p.url=l.morph.source,p.instance_material=e.controllers[a].instance_material,e.geometries.push(p),n=e.controllers[a]}console.log('ColladaLoader: Morph-controller partially supported.');default:}}var u={};for(a=0;a<e.geometries.length;a++){var m,g=e.geometries[a],f=g.instance_material,y=ke[g.url],N={},x=[],b=0;if(y){if(!y.mesh||!y.mesh.primitives)continue;if(0==o.name.length&&(o.name=y.id),f)for(r=0;r<f.length;r++){var T=f[r],_=we[T.target],v=_.instance_effect.url,C=Se[v].shader,O=C.material;if(y.doubleSided){if(!(T.symbol in u)){var j=O.clone();j.side=THREE.DoubleSide,u[T.symbol]=j}O=u[T.symbol]}O.opacity=O.opacity?O.opacity:1,N[T.symbol]=b,x.push(O),m=O,m.name=null==_.name||''===_.name?_.id:_.name,b++}var A,M=m||new THREE.MeshLambertMaterial({color:14540253,shading:THREE.FlatShading,side:y.doubleSided?THREE.DoubleSide:THREE.FrontSide}),R=y.mesh.geometry3js;if(1<b)for(M=new THREE.MeshFaceMaterial(x),r=0;r<R.faces.length;r++){var k=R.faces[r];k.materialIndex=N[k.daeMaterial]}void 0===t?void 0===n?A=new THREE.Mesh(R,M):(i(R,n),M.morphTargets=!0,A=new THREE.Mesh(R,M),A.name='morph_'+be.length,be.push(A)):(s(R,t),M.morphTargets=!0,A=new THREE.SkinnedMesh(R,M,!1),A.skeleton=t.skeleton,A.skinController=Re[t.url],A.skinInstanceController=t,A.name='skin_'+Te.length,Te.push(A)),1<e.geometries.length?o.add(A):o=A}}for(a=0;a<e.cameras.length;a++){var w=e.cameras[a],S=Ie[w.url];o=new THREE.PerspectiveCamera(S.fov,parseFloat(S.aspect_ratio),parseFloat(S.znear),parseFloat(S.zfar))}for(a=0;a<e.lights.length;a++){var I=e.lights[a],D=De[I.url];if(D&&D.technique){var X,Y=D.color.getHex(),Z=D.intensity,L=0,B=D.falloff_angle;switch(D.technique){case'directional':o=new THREE.DirectionalLight(Y,Z,L);break;case'point':o=new THREE.PointLight(Y,Z,L);break;case'spot':o=new THREE.SpotLight(Y,Z,L,B,X);break;case'ambient':o=new THREE.AmbientLight(Y);}}}if(o.name=e.name||e.id||'',o.matrix=e.matrix,o.matrix.decompose(o.position,o.quaternion,o.scale),Ye.centerGeometry&&o.geometry){var V=THREE.GeometryUtils.center(o.geometry);V.multiply(o.scale),V.applyQuaternion(o.quaternion),o.position.sub(V)}for(a=0;a<e.nodes.length;a++)o.add(c(e.nodes[a],e));return o}function h(e){return Ce.evaluate('.//dae:library_nodes//dae:node[@id=\''+e+'\']',Ce,te,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null).iterateNext()}function u(e){var t=[],n=1e6,a=-1e6;for(var r in Ee)for(var o=Ee[r],s=0;s<o.channel.length;s++){var i=o.channel[s],d=o.sampler[s],r=i.target.split('/')[0];r==e.id&&(d.create(),i.sampler=d,n=_e(n,d.startTime),a=ve(a,d.endTime),t.push(i))}return t.length&&(e.startTime=n,e.endTime=a),t}function m(e){if(e.channels&&e.channels.length){for(var t=[],n=[],a=0,i=e.channels.length;a<i;a++){var r,o=e.channels[a],s=o.fullSid,d=o.sampler,l=d.input,p=e.getTransformBySid(o.sid);if(o.arrIndices){r=[];for(var c=0,h=o.arrIndices.length;c<h;c++)r[c]=me(o.arrIndices[c])}else r=ge(o.member);if(p){-1===n.indexOf(s)&&n.push(s);for(var c=0,h=l.length;c<h;c++){var u=l[c],m=d.getData(p.type,c),N=g(t,u);if(!N){N=new H(u);var x=f(t,u);t.splice(-1==x?t.length:x,0,N)}N.addTarget(s,p,r,m)}}else console.log('Could not find transform "'+o.sid+'" in node '+e.id)}for(var b,a=0;a<n.length;a++){b=n[a];for(var N,c=0;c<t.length;c++)N=t[c],N.hasTarget(b)||y(t,N,c,b)}e.keys=t,e.sids=n}}function g(e,t){for(var n,a=null,r=0,i=e.length;r<i&&null==a;r++)if(n=e[r],n.time===t)a=n;else if(n.time>t)break;return a}function f(e,t){for(var n,a=-1,r=0,i=e.length;r<i&&-1==a;r++)n=e[r],n.time>=t&&(a=r);return a}function y(e,t,n,a){var r=x(e,a,n?n-1:0),o=N(e,a,n+1);if(r&&o){var s,d=(t.time-r.time)/(o.time-r.time),l=r.getTarget(a),p=o.getTarget(a).data,c=l.data;if('matrix'===l.type)s=c;else if(c.length){s=[];for(var h=0;h<c.length;++h)s[h]=c[h]+(p[h]-c[h])*d}else s=c+(p-c)*d;t.addTarget(a,l.transform,l.member,s)}}function N(e,t,n){for(;n<e.length;n++){var i=e[n];if(i.hasTarget(t))return i}return null}function x(e,t,n){for(n=0<=n?n:n+e.length;0<=n;n--){var i=e[n];if(i.hasTarget(t))return i}return null}function b(){this.id='',this.init_from=''}function T(){this.id='',this.name='',this.type='',this.skin=null,this.morph=null}function _(){this.method=null,this.source=null,this.targets=null,this.weights=null}function v(){this.source='',this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function C(){this.id='',this.name='',this.nodes=[],this.scene=new THREE.Object3D}function O(){this.id='',this.name='',this.sid='',this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new THREE.Matrix4}function j(){this.sid='',this.type='',this.data=[],this.obj=null}function A(){this.url='',this.skeleton=[],this.instance_material=[]}function M(){this.symbol='',this.target=''}function E(){this.url='',this.instance_material=[]}function R(){this.id='',this.mesh=null}function k(e){this.geometry=e.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function w(){this.material='',this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new THREE.Geometry}function S(){w.call(this),this.vcount=[]}function I(){w.call(this),this.vcount=3}function D(){this.source='',this.count=0,this.stride=0,this.params=[]}function X(){this.input={}}function Y(){this.semantic='',this.offset=0,this.source='',this.set=0}function Z(e){this.id=e,this.type=null}function L(){this.id='',this.name='',this.instance_effect=null}function B(){this.color=new THREE.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function V(e,t){this.type=e,this.effect=t,this.material=null}function P(e){this.effect=e,this.init_from=null,this.format=null}function U(e){this.effect=e,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function q(){this.id='',this.name='',this.shader=null,this.surface={},this.sampler={}}function z(){this.url=''}function G(){this.id='',this.name='',this.source={},this.sampler=[],this.channel=[]}function F(e){this.animation=e,this.source='',this.target='',this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function W(e){this.id='',this.animation=e,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function H(e){this.targets=[],this.time=e}function J(){this.id='',this.name='',this.technique=''}function Q(){this.url=''}function K(){this.id='',this.name='',this.technique=''}function $(){this.url=''}function ee(e){var t=e.getAttribute('id');return void 0==Ae[t]?(Ae[t]=new Z(t).parse(e),Ae[t]):Ae[t]}function te(e){return'dae'==e?'http://www.collada.org/2005/11/COLLADASchema':null}function ne(e){for(var t=re(e),n=[],a=0,i=t.length;a<i;a++)n.push('true'==t[a]||'1'==t[a]);return n}function ie(e){for(var t=re(e),n=[],a=0,i=t.length;a<i;a++)n.push(parseFloat(t[a]));return n}function ae(e){for(var t=re(e),n=[],a=0,i=t.length;a<i;a++)n.push(parseInt(t[a],10));return n}function re(e){return 0<e.length?oe(e).split(/\s+/):[]}function oe(e){return e.replace(/^\s+/,'').replace(/\s+$/,'')}function se(e,t,n){return e.hasAttribute(t)?parseInt(e.getAttribute(t),10):n}function de(e,t){for(var n=Ce.evaluate(t,e,te,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),i=n.iterateNext(),a=[];i;)a.push(i),i=n.iterateNext();return a}function le(e,t){e.doubleSided=!1;var n=Ce.evaluate('.//dae:extra//dae:double_sided',t,te,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);n&&(n=n.iterateNext(),n&&1===parseInt(n.textContent,10)&&(e.doubleSided=!0))}function pe(){Ye.convertUpAxis&&Le!==Ye.upAxis?'X'===Le?Be='Y'===Ye.upAxis?'XtoY':'XtoZ':'Y'===Le?Be='X'===Ye.upAxis?'YtoX':'YtoZ':'Z'===Le?Be='X'===Ye.upAxis?'ZtoX':'ZtoY':void 0:Be=null}function ce(e,t){if(Ye.convertUpAxis&&Le!==Ye.upAxis)switch(Be){case'XtoY':var n=e[0];e[0]=t*e[1],e[1]=n;break;case'XtoZ':var n=e[2];e[2]=e[1],e[1]=e[0],e[0]=n;break;case'YtoX':var n=e[0];e[0]=e[1],e[1]=t*n;break;case'YtoZ':var n=e[1];e[1]=t*e[2],e[2]=n;break;case'ZtoX':var n=e[0];e[0]=e[1],e[1]=e[2],e[2]=n;break;case'ZtoY':var n=e[1];e[1]=e[2],e[2]=t*n;}}function he(e,t){var n=[e[t],e[t+1],e[t+2]];return ce(n,-1),new THREE.Vector3(n[0],n[1],n[2])}function ue(e){if(Ye.convertUpAxis){var t=[e[0],e[4],e[8]];ce(t,-1),e[0]=t[0],e[4]=t[1],e[8]=t[2],t=[e[1],e[5],e[9]],ce(t,-1),e[1]=t[0],e[5]=t[1],e[9]=t[2],t=[e[2],e[6],e[10]],ce(t,-1),e[2]=t[0],e[6]=t[1],e[10]=t[2],t=[e[0],e[1],e[2]],ce(t,-1),e[0]=t[0],e[1]=t[1],e[2]=t[2],t=[e[4],e[5],e[6]],ce(t,-1),e[4]=t[0],e[5]=t[1],e[6]=t[2],t=[e[8],e[9],e[10]],ce(t,-1),e[8]=t[0],e[9]=t[1],e[10]=t[2],t=[e[3],e[7],e[11]],ce(t,-1),e[3]=t[0],e[7]=t[1],e[11]=t[2]}return new THREE.Matrix4(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function me(e){if(-1<e&&3>e){e=ge(['X','Y','Z'][e]),e={X:0,Y:1,Z:2}[e]}return e}function ge(e){return Ye.convertUpAxis&&('X'===e?'XtoY'===Be||'XtoZ'===Be||'YtoX'===Be?e='Y':'ZtoX'===Be?e='Z':void 0:'Y'===e?'XtoY'===Be||'YtoX'===Be||'ZtoX'===Be?e='X':'XtoZ'===Be||'YtoZ'===Be||'ZtoY'===Be?e='Z':void 0:'Z'===e?'XtoZ'===Be?e='X':'YtoZ'===Be||'ZtoX'===Be||'ZtoY'===Be?e='Y':void 0:void 0),e}var fe,ye,Ne,xe,be,Te,_e=Math.min,ve=Math.max,Ce=null,Oe=null,je=null,Ae={},Me={},Ee={},Re={},ke={},we={},Se={},Ie={},De={},Xe=THREE.SmoothShading,Ye={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:'Y',defaultEnvMap:null},Ze=1,Le='Y',Be=null;return b.prototype.parse=function(e){this.id=e.getAttribute('id');for(var t,n=0;n<e.childNodes.length;n++)t=e.childNodes[n],'init_from'==t.nodeName&&(this.init_from=t.textContent);return this},T.prototype.parse=function(e){this.id=e.getAttribute('id'),this.name=e.getAttribute('name'),this.type='none';for(var t,n=0;n<e.childNodes.length;n++)switch(t=e.childNodes[n],t.nodeName){case'skin':this.skin=new v().parse(t),this.type=t.nodeName;break;case'morph':this.morph=new _().parse(t),this.type=t.nodeName;break;default:}return this},_.prototype.parse=function(e){var t,n={},i=[];for(this.method=e.getAttribute('method'),this.source=e.getAttribute('source').replace(/^#/,''),t=0;t<e.childNodes.length;t++){var a=e.childNodes[t];if(1==a.nodeType)switch(a.nodeName){case'source':var r=new Z().parse(a);n[r.id]=r;break;case'targets':i=this.parseInputs(a);break;default:console.log(a.nodeName);}}for(t=0;t<i.length;t++){var o=i[t],r=n[o.source];switch(o.semantic){case'MORPH_TARGET':this.targets=r.read();break;case'MORPH_WEIGHT':this.weights=r.read();break;default:}}return this},_.prototype.parseInputs=function(e){for(var t,n=[],a=0;a<e.childNodes.length;a++)if(t=e.childNodes[a],1==t.nodeType)switch(t.nodeName){case'input':n.push(new Y().parse(t));break;default:}return n},v.prototype.parse=function(e){var t,n,a={};this.source=e.getAttribute('source').replace(/^#/,''),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var r,o=0;o<e.childNodes.length;o++)if(r=e.childNodes[o],1==r.nodeType)switch(r.nodeName){case'bind_shape_matrix':var i=ie(r.textContent);this.bindShapeMatrix=ue(i);break;case'source':var s=new Z().parse(r);a[s.id]=s;break;case'joints':t=r;break;case'vertex_weights':n=r;break;default:console.log(r.nodeName);}return this.parseJoints(t,a),this.parseWeights(n,a),this},v.prototype.parseJoints=function(e,t){for(var n,a=0;a<e.childNodes.length;a++)if(n=e.childNodes[a],1==n.nodeType)switch(n.nodeName){case'input':var i=new Y().parse(n),r=t[i.source];'JOINT'==i.semantic?this.joints=r.read():'INV_BIND_MATRIX'==i.semantic&&(this.invBindMatrices=r.read());break;default:}},v.prototype.parseWeights=function(e,t){for(var n,a,r,o=[],s=0;s<e.childNodes.length;s++)if(r=e.childNodes[s],1==r.nodeType)switch(r.nodeName){case'input':o.push(new Y().parse(r));break;case'v':n=ae(r.textContent);break;case'vcount':a=ae(r.textContent);break;default:}for(var i=0,s=0;s<a.length;s++){for(var d,l=a[s],p=[],c=0;c<l;c++){d={};for(var h=0;h<o.length;h++){var u=o[h],m=n[i+u.offset];switch(u.semantic){case'JOINT':d.joint=m;break;case'WEIGHT':d.weight=t[u.source].data[m];break;default:}}p.push(d),i+=o.length}for(var c=0;c<p.length;c++)p[c].index=s;this.weights.push(p)}},C.prototype.getChildById=function(e,t){for(var n,a=0;a<this.nodes.length;a++)if(n=this.nodes[a].getChildById(e,t),n)return n;return null},C.prototype.getChildBySid=function(e,t){for(var n,a=0;a<this.nodes.length;a++)if(n=this.nodes[a].getChildBySid(e,t),n)return n;return null},C.prototype.parse=function(e){this.id=e.getAttribute('id'),this.name=e.getAttribute('name'),this.nodes=[];for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'node':this.nodes.push(new O().parse(t));break;default:}return this},O.prototype.getChannelForTransform=function(e){for(var t=0;t<this.channels.length;t++){var n,i,a=this.channels[t],r=a.target.split('/'),o=r.shift(),s=r.shift(),d=0<=s.indexOf('.'),l=0<=s.indexOf('(');if(d)r=s.split('.'),s=r.shift(),i=r.shift();else if(l){n=s.split('('),s=n.shift();for(var p=0;p<n.length;p++)n[p]=parseInt(n[p].replace(/\)/,''))}if(s==e)return a.info={sid:s,dotSyntax:d,arrSyntax:l,arrIndices:n},a}return null},O.prototype.getChildById=function(e,t){if(this.id==e)return this;if(t)for(var a,n=0;n<this.nodes.length;n++)if(a=this.nodes[n].getChildById(e,t),a)return a;return null},O.prototype.getChildBySid=function(e,t){if(this.sid==e)return this;if(t)for(var a,n=0;n<this.nodes.length;n++)if(a=this.nodes[n].getChildBySid(e,t),a)return a;return null},O.prototype.getTransformBySid=function(e){for(var t=0;t<this.transforms.length;t++)if(this.transforms[t].sid==e)return this.transforms[t];return null},O.prototype.parse=function(e){var t;this.id=e.getAttribute('id'),this.sid=e.getAttribute('sid'),this.name=e.getAttribute('name'),this.type=e.getAttribute('type'),this.type='JOINT'==this.type?this.type:'NODE',this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new THREE.Matrix4;for(var n,a=0;a<e.childNodes.length;a++)if(n=e.childNodes[a],1==n.nodeType)switch(n.nodeName){case'node':this.nodes.push(new O().parse(n));break;case'instance_camera':this.cameras.push(new Q().parse(n));break;case'instance_controller':this.controllers.push(new A().parse(n));break;case'instance_geometry':this.geometries.push(new E().parse(n));break;case'instance_light':this.lights.push(new $().parse(n));break;case'instance_node':t=n.getAttribute('url').replace(/^#/,'');var i=h(t);i&&this.nodes.push(new O().parse(i));break;case'rotate':case'translate':case'scale':case'matrix':case'lookat':case'skew':this.transforms.push(new j().parse(n));break;case'extra':break;default:console.log(n.nodeName);}return this.channels=u(this),m(this),this.updateMatrix(),this},O.prototype.updateMatrix=function(){this.matrix.identity();for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(this.matrix)},j.prototype.parse=function(e){return this.sid=e.getAttribute('sid'),this.type=e.nodeName,this.data=ie(e.textContent),this.convert(),this},j.prototype.convert=function(){switch(this.type){case'matrix':this.obj=ue(this.data);break;case'rotate':this.angle=THREE.Math.degToRad(this.data[3]);case'translate':ce(this.data,-1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;case'scale':ce(this.data,1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log('Can not convert Transform of type '+this.type);}},j.prototype.apply=function(){var e=new THREE.Matrix4;return function(t){switch(this.type){case'matrix':t.multiply(this.obj);break;case'translate':t.multiply(e.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case'rotate':t.multiply(e.makeRotationAxis(this.obj,this.angle));break;case'scale':t.scale(this.obj);}}}(),j.prototype.update=function(e,t){var n=['X','Y','Z','ANGLE'];switch(this.type){case'matrix':if(!t)this.obj.copy(e);else if(1===t.length)switch(t[0]){case 0:this.obj.n11=e[0],this.obj.n21=e[1],this.obj.n31=e[2],this.obj.n41=e[3];break;case 1:this.obj.n12=e[0],this.obj.n22=e[1],this.obj.n32=e[2],this.obj.n42=e[3];break;case 2:this.obj.n13=e[0],this.obj.n23=e[1],this.obj.n33=e[2],this.obj.n43=e[3];break;case 3:this.obj.n14=e[0],this.obj.n24=e[1],this.obj.n34=e[2],this.obj.n44=e[3];}else if(2===t.length){var i='n'+(t[0]+1)+(t[1]+1);this.obj[i]=e}else console.log('Incorrect addressing of matrix in transform.');break;case'translate':case'scale':switch('[object Array]'===Object.prototype.toString.call(t)&&(t=n[t[0]]),t){case'X':this.obj.x=e;break;case'Y':this.obj.y=e;break;case'Z':this.obj.z=e;break;default:this.obj.x=e[0],this.obj.y=e[1],this.obj.z=e[2];}break;case'rotate':switch('[object Array]'===Object.prototype.toString.call(t)&&(t=n[t[0]]),t){case'X':this.obj.x=e;break;case'Y':this.obj.y=e;break;case'Z':this.obj.z=e;break;case'ANGLE':this.angle=THREE.Math.degToRad(e);break;default:this.obj.x=e[0],this.obj.y=e[1],this.obj.z=e[2],this.angle=THREE.Math.degToRad(e[3]);}}},A.prototype.parse=function(e){this.url=e.getAttribute('url').replace(/^#/,''),this.skeleton=[],this.instance_material=[];for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1===t.nodeType)switch(t.nodeName){case'skeleton':this.skeleton.push(t.textContent.replace(/^#/,''));break;case'bind_material':var i=Ce.evaluate('.//dae:instance_material',t,te,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);if(i)for(var a=i.iterateNext();a;)this.instance_material.push(new M().parse(a)),a=i.iterateNext();break;case'extra':break;default:}return this},M.prototype.parse=function(e){return this.symbol=e.getAttribute('symbol'),this.target=e.getAttribute('target').replace(/^#/,''),this},E.prototype.parse=function(e){this.url=e.getAttribute('url').replace(/^#/,''),this.instance_material=[];for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType&&'bind_material'==t.nodeName){var i=Ce.evaluate('.//dae:instance_material',t,te,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);if(i)for(var a=i.iterateNext();a;)this.instance_material.push(new M().parse(a)),a=i.iterateNext();break}return this},R.prototype.parse=function(e){this.id=e.getAttribute('id'),le(this,e);for(var t,n=0;n<e.childNodes.length;n++)switch(t=e.childNodes[n],t.nodeName){case'mesh':this.mesh=new k(this).parse(t);break;case'extra':break;default:}return this},k.prototype.parse=function(e){this.primitives=[];var t;for(t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case'source':ee(n);break;case'vertices':this.vertices=new X().parse(n);break;case'triangles':this.primitives.push(new I().parse(n));break;case'polygons':this.primitives.push(new w().parse(n));break;case'polylist':this.primitives.push(new S().parse(n));break;default:}}this.geometry3js=new THREE.Geometry;var i=Ae[this.vertices.input.POSITION.source].data;for(t=0;t<i.length;t+=3)this.geometry3js.vertices.push(he(i,t).clone());for(t=0;t<this.primitives.length;t++){var a=this.primitives[t];a.setVertices(this.vertices),this.handlePrimitive(a,this.geometry3js)}return this.geometry3js.computeCentroids(),this.geometry3js.computeFaceNormals(),this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},k.prototype.handlePrimitive=function(e,t){var n,a,r,o,s,d,l,c=e.p,h=e.inputs,u=0,m=3,g=0,f=[];for(n=0;n<h.length;n++){r=h[n];var y=r.offset+1;switch(g=g<y?y:g,r.semantic){case'TEXCOORD':f.push(r.set);}}for(var N=0;N<c.length;++N)for(var x=c[N],p=0;p<x.length;){var i=[],b=[],T=null,_=[];for(m=e.vcount?e.vcount.length?e.vcount[u++]:e.vcount:x.length/g,n=0;n<m;n++)for(a=0;a<h.length;a++)switch(r=h[a],d=Ae[r.source],o=x[p+n*g+r.offset],l=d.accessor.params.length,s=o*l,r.semantic){case'VERTEX':i.push(o);break;case'NORMAL':b.push(he(d.data,s));break;case'TEXCOORD':T=T||{},void 0===T[r.set]&&(T[r.set]=[]),T[r.set].push(new THREE.Vector2(d.data[s],d.data[s+1]));break;case'COLOR':_.push(new THREE.Color().setRGB(d.data[s],d.data[s+1],d.data[s+2]));break;default:}if(0==b.length)if(r=this.vertices.input.NORMAL,r){d=Ae[r.source],l=d.accessor.params.length;for(var v=0,C=i.length;v<C;v++)b.push(he(d.data,i[v]*l))}else t.calcNormals=!0;if(!T&&(T={},r=this.vertices.input.TEXCOORD,r)){f.push(r.set),d=Ae[r.source],l=d.accessor.params.length;for(var v=0,C=i.length;v<C;v++)s=i[v]*l,void 0===T[r.set]&&(T[r.set]=[]),T[r.set].push(new THREE.Vector2(d.data[s],1-d.data[s+1]))}if(0==_.length&&(r=this.vertices.input.COLOR,r)){d=Ae[r.source],l=d.accessor.params.length;for(var v=0,C=i.length;v<C;v++)s=i[v]*l,_.push(new THREE.Color().setRGB(d.data[s],d.data[s+1],d.data[s+2]))}var O,j,A=null,M=[];if(3===m)M.push(new THREE.Face3(i[0],i[1],i[2],b,_.length?_:new THREE.Color));else if(4===m)M.push(new THREE.Face3(i[0],i[1],i[3],[b[0],b[1],b[3]],_.length?[_[0],_[1],_[3]]:new THREE.Color)),M.push(new THREE.Face3(i[1],i[2],i[3],[b[1],b[2],b[3]],_.length?[_[1],_[2],_[3]]:new THREE.Color));else if(4<m&&Ye.subdivideFaces){var E=_.length?_:new THREE.Color;for(a=1;a<m-1;)M.push(new THREE.Face3(i[0],i[a],i[a+1],[b[0],b[a++],b[a]],E))}if(M.length)for(var v=0,C=M.length;v<C;v++)for(A=M[v],A.daeMaterial=e.material,t.faces.push(A),a=0;a<f.length;a++)O=T[f[a]],j=4<m?[O[0],O[v+1],O[v+2]]:4===m?0===v?[O[0],O[1],O[3]]:[O[1].clone(),O[2],O[3].clone()]:[O[0],O[1],O[2]],void 0===t.faceVertexUvs[a]&&(t.faceVertexUvs[a]=[]),t.faceVertexUvs[a].push(j);else console.log('dropped face with vcount '+m+' for geometry with id: '+t.id);p+=g*m}},w.prototype.setVertices=function(e){for(var t=0;t<this.inputs.length;t++)this.inputs[t].source==e.id&&(this.inputs[t].source=e.input.POSITION.source)},w.prototype.parse=function(e){this.material=e.getAttribute('material'),this.count=se(e,'count',0);for(var t,n=0;n<e.childNodes.length;n++)switch(t=e.childNodes[n],t.nodeName){case'input':this.inputs.push(new Y().parse(e.childNodes[n]));break;case'vcount':this.vcount=ae(t.textContent);break;case'p':this.p.push(ae(t.textContent));break;case'ph':console.warn('polygon holes not yet supported!');break;default:}return this},S.prototype=Object.create(w.prototype),I.prototype=Object.create(w.prototype),D.prototype.parse=function(e){this.params=[],this.source=e.getAttribute('source'),this.count=se(e,'count',0),this.stride=se(e,'stride',0);for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],'param'==t.nodeName){var i={};i.name=t.getAttribute('name'),i.type=t.getAttribute('type'),this.params.push(i)}return this},X.prototype.parse=function(e){this.id=e.getAttribute('id');for(var t=0;t<e.childNodes.length;t++)if('input'==e.childNodes[t].nodeName){var n=new Y().parse(e.childNodes[t]);this.input[n.semantic]=n}return this},Y.prototype.parse=function(e){return this.semantic=e.getAttribute('semantic'),this.source=e.getAttribute('source').replace(/^#/,''),this.set=se(e,'set',-1),this.offset=se(e,'offset',0),'TEXCOORD'==this.semantic&&0>this.set&&(this.set=0),this},Z.prototype.parse=function(e){this.id=e.getAttribute('id');for(var t,n=0;n<e.childNodes.length;n++)switch(t=e.childNodes[n],t.nodeName){case'bool_array':this.data=ne(t.textContent),this.type=t.nodeName;break;case'float_array':this.data=ie(t.textContent),this.type=t.nodeName;break;case'int_array':this.data=ae(t.textContent),this.type=t.nodeName;break;case'IDREF_array':case'Name_array':this.data=re(t.textContent),this.type=t.nodeName;break;case'technique_common':for(var i=0;i<t.childNodes.length;i++)if('accessor'==t.childNodes[i].nodeName){this.accessor=new D().parse(t.childNodes[i]);break}break;default:}return this},Z.prototype.read=function(){var e=[],t=this.accessor.params[0];switch(t.type){case'IDREF':case'Name':case'name':case'float':return this.data;case'float4x4':for(var n=0;n<this.data.length;n+=16){var i=this.data.slice(n,n+16),a=ue(i);e.push(a)}break;default:console.log('ColladaLoader: Source: Read dont know how to read '+t.type+'.');}return e},L.prototype.parse=function(e){this.id=e.getAttribute('id'),this.name=e.getAttribute('name');for(var t=0;t<e.childNodes.length;t++)if('instance_effect'==e.childNodes[t].nodeName){this.instance_effect=new z().parse(e.childNodes[t]);break}return this},B.prototype.isColor=function(){return null==this.texture},B.prototype.isTexture=function(){return null!=this.texture},B.prototype.parse=function(e){'transparent'==e.nodeName&&(this.opaque=e.getAttribute('opaque'));for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'color':var i=ie(t.textContent);this.color=new THREE.Color,this.color.setRGB(i[0],i[1],i[2]),this.color.a=i[3];break;case'texture':this.texture=t.getAttribute('texture'),this.texcoord=t.getAttribute('texcoord'),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(t);break;default:}return this},B.prototype.parseTexture=function(e){if(!e.childNodes)return this;e.childNodes[1]&&'extra'===e.childNodes[1].nodeName&&(e=e.childNodes[1],e.childNodes[1]&&'technique'===e.childNodes[1].nodeName&&(e=e.childNodes[1]));for(var t,n=0;n<e.childNodes.length;n++)switch(t=e.childNodes[n],t.nodeName){case'offsetU':case'offsetV':case'repeatU':case'repeatV':this.texOpts[t.nodeName]=parseFloat(t.textContent);break;case'wrapU':case'wrapV':this.texOpts[t.nodeName]=parseInt(t.textContent);break;default:this.texOpts[t.nodeName]=t.textContent;}return this},V.prototype.parse=function(e){for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'ambient':case'emission':case'diffuse':case'specular':case'transparent':this[t.nodeName]=new B().parse(t);break;case'shininess':case'reflectivity':case'index_of_refraction':case'transparency':var i=de(t,'.//dae:float');0<i.length&&(this[t.nodeName]=parseFloat(i[0].textContent));break;default:}return this.create(),this},V.prototype.create=function(){var e={},t=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var n=this.transparent,i=(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency;0<i&&(t=!0,e.transparent=!0,e.opacity=1-i)}for(var a in this)switch(a){case'ambient':case'emission':case'diffuse':case'specular':var r=this[a];if(r instanceof B)if(r.isTexture()){var o=r.texture,s=this.effect.sampler[o];if(void 0!==s&&void 0!==s.source){var d=this.effect.surface[s.source],l=Me[d.init_from];if(l){var p=THREE.ImageUtils.loadTexture(xe+l.init_from);p.wrapS=r.texOpts.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,p.wrapT=r.texOpts.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,p.offset.x=r.texOpts.offsetU,p.offset.y=r.texOpts.offsetV,p.repeat.x=r.texOpts.repeatU,p.repeat.y=r.texOpts.repeatV,e.map=p,'emission'===a&&(e.emissive=16777215)}}}else'diffuse'!==a&&t||('emission'===a?e.emissive=r.color.getHex():e[a]=r.color.getHex());break;case'shininess':e[a]=this[a];break;case'reflectivity':e[a]=this[a],0<e[a]&&(e.envMap=Ye.defaultEnvMap),e.combine=THREE.MixOperation;break;case'index_of_refraction':e.refractionRatio=this[a],1!==this[a]&&(e.envMap=Ye.defaultEnvMap);break;case'transparency':break;default:}switch(e.shading=Xe,e.side=this.effect.doubleSided?THREE.DoubleSide:THREE.FrontSide,this.type){case'constant':void 0!=e.emissive&&(e.color=e.emissive),this.material=new THREE.MeshBasicMaterial(e);break;case'phong':case'blinn':void 0!=e.diffuse&&(e.color=e.diffuse),this.material=new THREE.MeshPhongMaterial(e);break;case'lambert':default:void 0!=e.diffuse&&(e.color=e.diffuse),this.material=new THREE.MeshLambertMaterial(e);}return this.material},P.prototype.parse=function(e){for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'init_from':this.init_from=t.textContent;break;case'format':this.format=t.textContent;break;default:console.log('unhandled Surface prop: '+t.nodeName);}return this},U.prototype.parse=function(e){for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'source':this.source=t.textContent;break;case'minfilter':this.minfilter=t.textContent;break;case'magfilter':this.magfilter=t.textContent;break;case'mipfilter':this.mipfilter=t.textContent;break;case'wrap_s':this.wrap_s=t.textContent;break;case'wrap_t':this.wrap_t=t.textContent;break;default:console.log('unhandled Sampler2D prop: '+t.nodeName);}return this},q.prototype.create=function(){if(null==this.shader)return null},q.prototype.parse=function(e){this.id=e.getAttribute('id'),this.name=e.getAttribute('name'),le(this,e),this.shader=null;for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'profile_COMMON':this.parseTechnique(this.parseProfileCOMMON(t));break;default:}return this},q.prototype.parseNewparam=function(e){for(var t,n=e.getAttribute('sid'),a=0;a<e.childNodes.length;a++)if(t=e.childNodes[a],1==t.nodeType)switch(t.nodeName){case'surface':this.surface[n]=new P(this).parse(t);break;case'sampler2D':this.sampler[n]=new U(this).parse(t);break;case'extra':break;default:console.log(t.nodeName);}},q.prototype.parseProfileCOMMON=function(e){for(var t,n,a=0;a<e.childNodes.length;a++)if(n=e.childNodes[a],1==n.nodeType)switch(n.nodeName){case'profile_COMMON':this.parseProfileCOMMON(n);break;case'technique':t=n;break;case'newparam':this.parseNewparam(n);break;case'image':var i=new b().parse(n);Me[i.id]=i;break;case'extra':break;default:console.log(n.nodeName);}return t},q.prototype.parseTechnique=function(e){for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'constant':case'lambert':case'blinn':case'phong':this.shader=new V(t.nodeName,this).parse(t);break;default:}},z.prototype.parse=function(e){return this.url=e.getAttribute('url').replace(/^#/,''),this},G.prototype.parse=function(e){this.id=e.getAttribute('id'),this.name=e.getAttribute('name'),this.source={};for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'animation':var i=new G().parse(t);for(var a in i.source)this.source[a]=i.source[a];for(var r=0;r<i.channel.length;r++)this.channel.push(i.channel[r]),this.sampler.push(i.sampler[r]);break;case'source':var a=new Z().parse(t);this.source[a.id]=a;break;case'sampler':this.sampler.push(new W(this).parse(t));break;case'channel':this.channel.push(new F(this).parse(t));break;default:}return this},F.prototype.parse=function(e){this.source=e.getAttribute('source').replace(/^#/,''),this.target=e.getAttribute('target');var t=this.target.split('/'),n=t.shift(),i=t.shift(),a=0<=i.indexOf('.'),r=0<=i.indexOf('(');if(a)t=i.split('.'),this.sid=t.shift(),this.member=t.shift();else if(r){var o=i.split('(');this.sid=o.shift();for(var s=0;s<o.length;s++)o[s]=parseInt(o[s].replace(/\)/,''));this.arrIndices=o}else this.sid=i;return this.fullSid=i,this.dotSyntax=a,this.arrSyntax=r,this},W.prototype.parse=function(e){this.id=e.getAttribute('id'),this.inputs=[];for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'input':this.inputs.push(new Y().parse(t));break;default:}return this},W.prototype.create=function(){for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=this.animation.source[t.source];switch(t.semantic){case'INPUT':this.input=n.read();break;case'OUTPUT':this.output=n.read(),this.strideOut=n.accessor.stride;break;case'INTERPOLATION':this.interpolation=n.read();break;case'IN_TANGENT':break;case'OUT_TANGENT':break;default:console.log(t.semantic);}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){this.startTime=1e8,this.endTime=-1e8;for(var e=0;e<this.input.length;e++)this.startTime=_e(this.startTime,this.input[e]),this.endTime=ve(this.endTime,this.input[e]);this.duration=this.endTime-this.startTime}},W.prototype.getData=function(e,t){var n;if('matrix'===e&&16===this.strideOut)n=this.output[t];else if(1<this.strideOut){n=[],t*=this.strideOut;for(var a=0;a<this.strideOut;++a)n[a]=this.output[t+a];3===this.strideOut?'rotate'===e||'translate'===e?ce(n,-1):'scale'===e?ce(n,1):void 0:4===this.strideOut&&'matrix'===e&&ce(n,-1)}else n=this.output[t];return n},H.prototype.addTarget=function(e,t,n,i){this.targets.push({sid:e,member:n,transform:t,data:i})},H.prototype.apply=function(e){for(var t,n=0;n<this.targets.length;++n)t=this.targets[n],e&&t.sid!==e||t.transform.update(t.data,t.member)},H.prototype.getTarget=function(e){for(var t=0;t<this.targets.length;++t)if(this.targets[t].sid===e)return this.targets[t];return null},H.prototype.hasTarget=function(e){for(var t=0;t<this.targets.length;++t)if(this.targets[t].sid===e)return!0;return!1},H.prototype.interpolate=function(e,t){for(var n=0;n<this.targets.length;++n){var i,a=this.targets[n],r=e.getTarget(a.sid);if('matrix'!==a.transform.type&&r){var o=(t-this.time)/(e.time-this.time),s=r.data,d=a.data;if((0>o||1<o)&&(console.log('Key.interpolate: Warning! Scale out of bounds:'+o),o=0>o?0:1),d.length){i=[];for(var l=0;l<d.length;++l)i[l]=d[l]+(s[l]-d[l])*o}else i=d+(s-d)*o}else i=a.data;a.transform.update(i,a.member)}},J.prototype.parse=function(e){this.id=e.getAttribute('id'),this.name=e.getAttribute('name');for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'optics':this.parseOptics(t);break;default:}return this},J.prototype.parseOptics=function(e){for(var t=0;t<e.childNodes.length;t++)if('technique_common'==e.childNodes[t].nodeName)for(var n=e.childNodes[t],i=0;i<n.childNodes.length;i++)if(this.technique=n.childNodes[i].nodeName,'perspective'==this.technique)for(var a,r=n.childNodes[i],o=0;o<r.childNodes.length;o++)switch(a=r.childNodes[o],a.nodeName){case'yfov':this.yfov=a.textContent;break;case'xfov':this.xfov=a.textContent;break;case'znear':this.znear=a.textContent;break;case'zfar':this.zfar=a.textContent;break;case'aspect_ratio':this.aspect_ratio=a.textContent;}else if('orthographic'==this.technique)for(var a,s=n.childNodes[i],o=0;o<s.childNodes.length;o++)switch(a=s.childNodes[o],a.nodeName){case'xmag':this.xmag=a.textContent;break;case'ymag':this.ymag=a.textContent;break;case'znear':this.znear=a.textContent;break;case'zfar':this.zfar=a.textContent;break;case'aspect_ratio':this.aspect_ratio=a.textContent;}return this},Q.prototype.parse=function(e){return this.url=e.getAttribute('url').replace(/^#/,''),this},K.prototype.parse=function(e){this.id=e.getAttribute('id'),this.name=e.getAttribute('name');for(var t,n=0;n<e.childNodes.length;n++)if(t=e.childNodes[n],1==t.nodeType)switch(t.nodeName){case'technique_common':this.parseCommon(t);break;case'technique':this.parseTechnique(t);break;default:}return this},K.prototype.parseCommon=function(e){for(var t=0;t<e.childNodes.length;t++)switch(e.childNodes[t].nodeName){case'directional':case'point':case'spot':case'ambient':this.technique=e.childNodes[t].nodeName;for(var n,i=e.childNodes[t],a=0;a<i.childNodes.length;a++)switch(n=i.childNodes[a],n.nodeName){case'color':var r=ie(n.textContent);this.color=new THREE.Color(0),this.color.setRGB(r[0],r[1],r[2]),this.color.a=r[3];break;case'falloff_angle':this.falloff_angle=parseFloat(n.textContent);}}return this},K.prototype.parseTechnique=function(e){this.profile=e.getAttribute('profile');for(var t,n=0;n<e.childNodes.length;n++)switch(t=e.childNodes[n],t.nodeName){case'intensity':this.intensity=parseFloat(t.textContent);}return this},($.prototype.parse=function(e){return this.url=e.getAttribute('url').replace(/^#/,''),this},{load:function(t,n,i){var a=0;if(document.implementation&&document.implementation.createDocument){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!=r.readyState)3==r.readyState&&i&&(0==a&&(a=r.getResponseHeader('Content-Length')),i({total:a,loaded:r.responseText.length}));else if(0==r.status||200==r.status)if(r.responseXML)je=n,e(r.responseXML,void 0,t);else if(r.responseText){je=n;var o=new DOMParser,s=o.parseFromString(r.responseText,'application/xml');e(s,void 0,t)}else console.error('ColladaLoader: Empty or non-existing file ('+t+')')},r.open('GET',t,!0),r.send(null)}else alert('Don\'t know how to parse XML!')},parse:e,setPreferredShading:function(e){Xe=e},applySkin:s,geometries:ke,options:Ye})};</script><script>(function(){var e,t,n,i,a,r,o,d,s,p,l,u,m,g,c,f,h,_,y,x,b,T,C,v,A,N,M,k,S,L,I,U,E,j,w,O,D,V,W,P,q,G,R,F,B,z,X,J,H,K,Q,Y,Z,$,ee,te,ne,ie=Object.prototype.hasOwnProperty,ae=function(e,t){function n(){this.constructor=e}for(var i in t)ie.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};B=function(e,t){var n,i;for(i="",n=1;n<=e;n+=1)i+="    ";return i+=t,i},F=function(e,t){return B(e,"|-"+t)},R=function(e,t,n){return null==e?"":"string"===typeof e?F(t,n+("'"+e+"'\n")):"number"===typeof e?F(t,n+(""+e+"\n")):"boolean"===typeof e?F(t,n+(""+e+"\n")):null==e.getInfo?F(t,n+"<unknown data type>\n"):e.getInfo(t,n)},j=function(){function e(e){this.url=e.trim().replace(/^#/,""),this.object=null}return e.prototype.getInfo=function(e,t){return F(e,t+("<urlLink url='"+this.url+"'>\n"))},e}(),g=function(){function e(e,t){this.url=e,this.scope=t,this.object=null}return e.prototype.getInfo=function(e,t){return F(e,t+("<fxLink url='"+this.url+"'>\n"))},e}(),L=function(){function e(e,t){var n,i,a,r,o,d,s,p;for(this.url=t,this.object=null,this.id=null,this.sids=[],this.member=null,this.indices=null,this.dotSyntax=!1,this.arrSyntax=!1,d=t.split("/"),this.id=d.shift(),"."===this.id&&(this.id=e);1<d.length;)this.sids.push(d.shift());if(0<d.length)if(o=d[0],a=0<=o.indexOf("."),i=0<=o.indexOf("("),a)d=o.split("."),this.sids.push(d.shift()),this.member=d.shift(),this.dotSyntax=!0;else if(i){for(n=o.split("("),this.sids.push(n.shift()),this.indices=[],(s=0,p=n.length);s<p;s++)r=n[s],this.indices.push(parseInt(r.replace(/\)/,""),10));this.arrSyntax=!0}else this.sids.push(o)}return e.prototype.getInfo=function(e,t){var n,i;return i="<sidLink id='"+this.id+"'",0<this.sids.length&&(i+=", sids='[",i+=this.sids.join(","),i+="]'"),i+=">\n",n=F(e,t+i)},e}(),t=function(){function e(){this.animTarget={},this.animTarget.channels=[],this.animTarget.activeChannels=[],this.animTarget.dataRows=null,this.animTarget.dataColumns=null}return e.prototype.selectAnimation=function(e){var t,n,i,a;for(this.animTarget.activeChannels=[],a=this.animTarget.channels,(n=0,i=a.length);n<i;n++)t=a[n],e(t,n)&&this.animTarget.activeChannels.push(t)},e.prototype.selectAnimationById=function(e){this.selectAnimation(function(t){return t.animation.id===e})},e.prototype.selectAnimationByName=function(e){this.selectAnimation(function(t){return t.animation.name===e})},e.prototype.selectAllAnimations=function(){this.selectAnimation(function(){return!0})},e.prototype.applyAnimationKeyframe=function(){throw new Error("applyAnimationKeyframe() not implemented")},e.prototype.initAnimationTarget=function(){throw new Error("initAnimationTarget() not implemented")},e.prototype.resetAnimation=function(){throw new Error("resetAnimation() not implemented")},e}(),n=function(){function e(){this.unit=1,this.upAxis=null}return e.prototype.getInfo=function(e,t){return F(e,t+"<asset>\n")},e}(),D=function(){function e(){this.id=null,this.children=[],this.sidChildren=[]}return e.prototype.getInfo=function(e,t){var n,i,a,r,o;if(i=F(e,t+("<visualScene id='"+this.id+"'>\n")),null!=this.children)for(o=this.children,a=0,r=o.length;a<r;a++)n=o[a],i+=R(n,e+1,"child ");return i},e}(),V=function(){function e(){this.id=null,this.sid=null,this.name=null,this.type=null,this.layer=null,this.parent=null,this.children=[],this.sidChildren=[],this.transformations=[],this.geometries=[],this.controllers=[],this.lights=[],this.cameras=[]}return e.prototype.getInfo=function(e,t){var n,i,a,r,o,d,s,p,l,u,m,g,c,f,h,_,y;if(i=F(e,t+("<visualSceneNode id='"+this.id+"', sid='"+this.sid+"', name='"+this.name+"'>\n")),null!=this.geometries)for(c=this.geometries,a=0,s=c.length;a<s;a++)n=c[a],i+=R(n,e+1,"geometry ");if(null!=this.controllers)for(f=this.controllers,r=0,p=f.length;r<p;r++)n=f[r],i+=R(n,e+1,"controller ");if(null!=this.lights)for(h=this.lights,o=0,l=h.length;o<l;o++)n=h[o],i+=R(n,e+1,"light ");if(null!=this.cameras)for(_=this.cameras,d=0,u=_.length;d<u;d++)n=_[d],i+=R(n,e+1,"camera ");if(null!=this.children)for(y=this.children,g=0,m=y.length;g<m;g++)n=y[g],i+=R(n,e+1,"child ");return i},e.prototype.getTransformMatrix=function(e){var t,n,i,a,r;for(t=new THREE.Matrix4,e.identity(),r=this.transformations,(i=0,a=r.length);i<a;i++)n=r[i],n.getTransformMatrix(t),e.multiplyMatrices(e,t)},e}(),k=function(e){function t(){t.__super__.constructor.call(this),this.sid=null,this.type=null,this.data=null,this.originalData=null,this.node=null}return ae(t,e),t.prototype.getTransformMatrix=function(e){var t;switch(this.type){case"matrix":H(this.data,0,e);break;case"rotate":t=new THREE.Vector3(this.data[0],this.data[1],this.data[2]),e.makeRotationAxis(t,this.data[3]*W);break;case"translate":e.makeTranslation(this.data[0],this.data[1],this.data[2]);break;case"scale":e.makeScale(this.data[0],this.data[1],this.data[2]);break;default:throw new Error("transform type '"+this.type+"' not implemented");}},t.prototype.applyAnimationKeyframe=function(e){var t,n,i,a,r,o,d;for(o=this.animTarget.activeChannels,a=0,r=o.length;a<r;a++)for(t=o[a],i=t.outputData,(n=0,d=t.count-1);n<=d;n+=1)this.data[t.offset+n]=i[e*t.stride+n]},t.prototype.initAnimationTarget=function(){var e,t,n,i;for(this.originalData=new Float32Array(this.data.length),i=this.data,(e=0,n=i.length);e<n;e++)t=i[e],this.originalData[e]=this.data[e];switch(this.type){case"matrix":this.animTarget.dataColumns=4,this.animTarget.dataRows=4;break;case"rotate":this.animTarget.dataColumns=4,this.animTarget.dataRows=1;break;case"translate":case"scale":this.animTarget.dataColumns=3,this.animTarget.dataRows=1;break;default:throw new Error("transform type '"+this.type+"' not implemented");}},t.prototype.resetAnimation=function(){var e,t,n,i;for(i=this.originalData,e=0,n=i.length;e<n;e++)t=i[e],this.data[e]=this.originalData[e]},t}(t),x=function(){function e(){this.geometry=null,this.materials=[],this.sidChildren=[]}return e.prototype.getInfo=function(e,t){var n,i,a,r,o;for(i=F(e,t+"<instanceGeometry>\n"),i+=R(this.geometry,e+1,"geometry "),o=this.materials,(a=0,r=o.length);a<r;a++)n=o[a],i+=R(n,e+1,"material ");return i},e}(),y=function(){function e(){this.controller=null,this.skeletons=[],this.materials=[],this.sidChildren=[]}return e.prototype.getInfo=function(e,t){var n,i,a,r,o,d,s,p,l;for(i=F(e,t+"<instanceController>\n"),i+=R(this.controller,e+1,"controller "),p=this.skeletons,(r=0,d=p.length);r<d;r++)a=p[r],i+=R(a,e+1,"skeleton ");for(l=this.materials,o=0,s=l.length;o<s;o++)n=l[o],i+=R(n,e+1,"material ");return i},e}(),T=function(){function e(){this.sid=null,this.symbol=null,this.material=null,this.name=null,this.vertexInputs={},this.params={}}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<instanceMaterial sid='"+this.sid+"'>\n")),n+=R(this.material,e+1,"material "),n},e}(),b=function(){function e(){this.sid=null,this.light=null,this.name=null,this.sidChildren=[]}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+"<instanceLight>\n"),n+=R(this.light,e+1,"light "),n},e}(),_=function(){function e(){this.sid=null,this.camera=null,this.name=null,this.sidChildren=[]}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+"<instanceCamera>\n"),n+=R(this.light,e+1,"camera "),n},e}(),f=function(){function e(){this.id=null,this.initFrom=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<image id='"+this.id+"'>\n")),n+=R(this.initFrom,e+1,"initFrom "),n},e}(),s=function(){function e(){this.id=null,this.sids={},this.technique=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<effect id='"+this.id+"'>\n")),n+=R(this.technique,e+1,"technique "),n},e}(),u=function(){function e(){this.sid=null,this.sids={},this.fxScope=null,this.shading=null,this.emission=null,this.ambient=null,this.diffuse=null,this.specular=null,this.shininess=null,this.reflective=null,this.transparent=null,this.bump=null,this.reflectivity=null,this.transparency=null,this.index_of_refraction=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<technique sid='"+this.sid+"'>\n")),n},e}(),l=function(){function e(){this.sid=null,this.fxScope=null,this.type=null,this.initFrom=null,this.format=null,this.size=null,this.viewportRatio=null,this.mipLevels=null,this.mipmapGenerate=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<surface sid='"+this.sid+"'>\n")),n+=R(this.initFrom,e+1,"initFrom "),n},e}(),p=function(){function e(){this.sid=null,this.fxScope=null,this.surface=null,this.image=null,this.wrapS=null,this.wrapT=null,this.minfilter=null,this.magfilter=null,this.borderColor=null,this.mipmapMaxLevel=null,this.mipmapBias=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<sampler sid='"+this.sid+"'>\n")),n+=R(this.image,e+1,"image "),n+=R(this.surface,e+1,"surface "),n},e}(),o=function(){return function(){this.color=null,this.textureSampler=null,this.texcoord=null,this.opaque=null,this.bumptype=null}}(),M=function(){function e(){this.id=null,this.name=null,this.effect=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<material id='"+this.id+"' name='"+this.name+"'>\n")),n+=R(this.effect,e+1,"effect "),n},e}(),c=function(){function e(){this.id=null,this.name=null,this.sources=[],this.vertices=null,this.triangles=[]}return e.prototype.getInfo=function(e,t){var n,i,a,r,o,d,s,p,l;for(n=F(e,t+("<geometry id='"+this.id+"' name='"+this.name+"'>\n")),p=this.sources,(r=0,d=p.length);r<d;r++)i=p[r],n+=R(i,e+1,"source ");for(n+=R(this.vertices,e+1,"vertices "),l=this.triangles,(o=0,s=l.length);o<s;o++)a=l[o],n+=R(a,e+1,"triangles ");return n},e}(),U=function(){function e(){this.id=null,this.name=null,this.sourceId=null,this.count=null,this.stride=null,this.data=null,this.params={}}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<source id='"+this.id+"' name='"+this.name+"'>\n")),n+=R(this.sourceId,e+1,"sourceId "),n},e}(),O=function(){function e(){this.id=null,this.name=null,this.inputs=[]}return e.prototype.getInfo=function(e,t){var n,i,a,r,o;for(i=F(e,t+("<vertices id='"+this.id+"' name='"+this.name+"'>\n")),o=this.inputs,(a=0,r=o.length);a<r;a++)n=o[a],i+=R(n,e+1,"input ");return i},e}(),E=function(){function e(){this.name=null,this.count=null,this.material=null,this.inputs=[],this.indices=null}return e.prototype.getInfo=function(e,t){var n,i,a,r,o;for(i=F(e,t+("<triangles name='"+this.name+"'>\n")),i+=R(this.material,e+1,"material "),o=this.inputs,(a=0,r=o.length);a<r;a++)n=o[a],i+=R(n,e+1,"input ");return i},e}(),h=function(){function e(){this.semantic=null,this.source=null,this.offset=null,this.set=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<input semantic="+this.semantic+">\n")),n+=R(this.source,e+1,"source "),n},e}(),d=function(){function e(){this.id=null,this.name=null,this.skin=null,this.morph=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+("<controller id='"+this.id+"', name='"+this.name+"'>\n")),n+=R(this.skin,e+1,"skin "),n+=R(this.morph,e+1,"morph "),n},e}(),I=function(){function e(){this.source=null,this.bindShapeMatrix=null,this.sources=[],this.joints=null,this.vertexWeights=null}return e.prototype.getInfo=function(e,t){var n,i,a,r,o;for(n=F(e,t+("<skin source='"+this.source+"'>\n")),n+=R(this.bindShapeMatrix,e+1,"bind_shape_matrix "),o=this.sources,(a=0,r=o.length);a<r;a++)i=o[a],n+=R(i,e+1,"source ");return n+=R(this.joints,e+1,"joints "),n+=R(this.vertexWeights,e+1,"vertex_weights "),n},e}(),C=function(){function e(){this.joints=null,this.invBindMatrices=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+"<joints>\n"),n+=R(this.joints,e+1,"joints "),n+=R(this.invBindMatrices,e+1,"invBindMatrices "),n},e}(),w=function(){function e(){this.inputs=[],this.vcount=null,this.v=null,this.joints=null,this.weights=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+"<vertex_weights>\n"),n+=R(this.joints,e+1,"joints "),n+=R(this.weights,e+1,"weights "),n},e}(),e=function(){function e(){this.id=null,this.name=null,this.parent=null,this.rootId=null,this.rootName=null,this.animations=[],this.sources=[],this.samplers=[],this.channels=[]}return e.prototype.getInfo=function(e,t){var n,i,a,r,o,d,s,p,l,u,m,g,c,f,h,_,y;for(a=F(e,t+("<animation id='"+this.id+"', name='"+name+"'>\n")),f=this.animations,(d=0,u=f.length);d<u;d++)n=f[d],a+=R(n,e+1,"animation ");for(h=this.sources,s=0,m=h.length;s<m;s++)o=h[s],a+=R(o,e+1,"source ");for(_=this.samplers,p=0,g=_.length;p<g;p++)r=_[p],a+=R(r,e+1,"sampler ");for(y=this.channels,l=0,c=y.length;l<c;l++)i=y[l],a+=R(i,e+1,"channel ");return a},e}(),S=function(){function e(){this.id=null,this.input=null,this.outputs=[],this.inTangents=[],this.outTangents=[],this.interpolation=null}return e.prototype.getInfo=function(e,n){var i,a,r,t,o,d,s,p,l,u,m,g;for(a=F(e,n+("<sampler id='"+this.id+"'>\n")),a+=R(this.input,e+1,"input "),u=this.outputs,(t=0,s=u.length);t<s;t++)i=u[t],a+=R(i,e+1,"output ");for(m=this.inTangents,o=0,p=m.length;o<p;o++)r=m[o],a+=R(r,e+1,"inTangent ");for(g=this.outTangents,d=0,l=g.length;d<l;d++)r=g[d],a+=R(r,e+1,"outTangent ");return a+=R(this.interpolation,e+1,"interpolation "),a},e}(),r=function(){function e(){this.animation=null,this.source=null,this.target=null}return e.prototype.getInfo=function(e,t){var n;return n=F(e,t+"<channel>\n"),n+=R(this.source,e+1,"source "),n+=R(this.target,e+1,"target "),n},e}(),v=function(){function e(){this.id=null,this.name=null,this.type=null,this.color=null,this.params={},this.sidChildren=[]}return e.prototype.getInfo=function(e,t){return F(e,t+"<light>\n")},e}(),A=function(){return function(){this.sid=null,this.name=null,this.value=null}}(),i=function(){function e(){this.id=null,this.name=null,this.type=null,this.params={},this.sidChildren=[]}return e.prototype.getInfo=function(e,t){return F(e,t+"<camera>\n")},e}(),a=function(){return function(){this.sid=null,this.name=null,this.value=null}}(),P=function(){return function(){this.inputData=null,this.outputData=null,this.offset=null,this.stride=null,this.count=null,this.animation=null}}(),G=function(){function e(){this.index=null,this.node=null,this.sid=null,this.parent=null,this.isAnimated=null,this.matrix=new THREE.Matrix4,this.worldMatrix=new THREE.Matrix4,this.invBindMatrix=new THREE.Matrix4,this.skinMatrix=new THREE.Matrix4,this.worldMatrixDirty=!0}return e.prototype.getWorldMatrix=function(){return this.worldMatrixDirty&&(null==this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiplyMatrices(this.parent.getWorldMatrix(),this.matrix),this.worldMatrixDirty=!1),this.worldMatrix},e.prototype.applyAnimation=function(e){var t,n,i,a;if(this.isAnimated){for(a=this.node.transformations,n=0,i=a.length;n<i;n++)t=a[n],t.applyAnimationKeyframe(e);this.node.getTransformMatrix(this.matrix)}return this.worldMatrixDirty=!0,null},e.prototype.updateSkinMatrix=function(e){var t;return t=this.getWorldMatrix(),this.skinMatrix.multiplyMatrices(t,this.invBindMatrix),this.skinMatrix.multiplyMatrices(this.skinMatrix,e),null},e}(),q=function(){return function(){this.materials=[],this.indices={},this.needTangents=!1}}(),m=function(){function m(e){var t,n,i;for(t in this._url=null,this._baseUrl=null,this._loader=e,this._options={},i=e.options,i)n=i[t],this._options[t]=n;this._log=e.log,this._readyCallback=null,this._progressCallback=null,this.dae={},this.dae.ids={},this.dae.animationTargets=[],this.dae.libEffects=[],this.dae.libMaterials=[],this.dae.libGeometries=[],this.dae.libControllers=[],this.dae.libLights=[],this.dae.libCameras=[],this.dae.libImages=[],this.dae.libVisualScenes=[],this.dae.libAnimations=[],this.dae.asset=null,this.dae.scene=null,this.threejs={},this.threejs.scene=null,this.threejs.images=[],this.threejs.geometries=[],this.threejs.materials=[],this.scene=null}return m.prototype.setUrl=function(e){var t;null==e?(this._url="",this._baseUrl=""):(this._url=e,t=e.split("/"),t.pop(),this._baseUrl=(1>t.length?".":t.join("/"))+"/")},m.prototype.getLibInfo=function(e,t,n){var i,a,r,o,d;if(null==e)return"";for(r=F(t,n+(" <"+n+">\n")),a=0,(o=0,d=e.length);o<d;o++)i=e[o],r+=R(i,t+1,""),a+=1;return 0<a?r:""},m.prototype.getInfo=function(e){var t;return t="<collada url='"+this.url+"'>\n",t+=R(this.dae.asset,e+1,"asset "),t+=R(this.dae.scene,e+1,"scene "),t+=this.getLibInfo(this.dae.libEffects,e+1,"library_effects"),t+=this.getLibInfo(this.dae.libMaterials,e+1,"library_materials"),t+=this.getLibInfo(this.dae.libGeometries,e+1,"library_geometries"),t+=this.getLibInfo(this.dae.libControllers,e+1,"library_controllers"),t+=this.getLibInfo(this.dae.libLights,e+1,"library_lights"),t+=this.getLibInfo(this.dae.libCameras,e+1,"library_cameras"),t+=this.getLibInfo(this.dae.libImages,e+1,"library_images"),t+=this.getLibInfo(this.dae.libVisualScenes,e+1,"library_visual_scenes"),t+=this.getLibInfo(this.dae.libAnimations,e+1,"library_animations"),t},m.prototype._reportUnexpectedChild=function(e,t){this._log("Skipped unknown <"+e.nodeName+"> child <"+t.nodeName+">.",N.messageWarning)},m.prototype._reportUnhandledExtra=function(e,t){this._log("Skipped element <"+e.nodeName+">/<"+t.nodeName+">. Element is legal, but not handled by this loader.",N.messageWarning)},m.prototype._getAttributeAsFloat=function(e,t,n){var i;return i=e.getAttribute(t),null==i?n:parseFloat(i)},m.prototype._getAttributeAsInt=function(e,t,n){var i;return i=e.getAttribute(t),null==i?n:parseInt(i,10)},m.prototype._addUrlTarget=function(e,t,n){var i;return null!=t&&t.push(e),i=e.id,null==i?void(n&&this._log("Object has no ID.",N.messageError)):null==this.dae.ids[i]?void(this.dae.ids[i]=e):void this._log("There is already an object with ID "+i+".",N.messageError)},m.prototype._resolveUrlLink=function(e){return e.object=this.dae.ids[e.url],null!=e.object||(this._log("Could not resolve URL #"+e.url,N.messageError),!1)},m.prototype._addFxTarget=function(e,t){var n;return n=e.sid,null==n?void this._log("Cannot add a FX target: object has no SID.",N.messageError):null==t.sids[n]?void(e.fxScope=t,t.sids[n]=e):void this._log("There is already an FX target with SID "+n+".",N.messageError)},m.prototype._resolveFxLink=function(e){var t;for(t=e.scope;null==e.object&&null!=t;)e.object=t.sids[e.url],t=t.fxScope;return null!=e.object||(this._log("Could not resolve FX parameter #"+e.url,N.messageError),!1)},m.prototype._addSidTarget=function(e,t){null!=t.sidChildren||(t.sidChildren=[]),t.sidChildren.push(e)},m.prototype._findSidTarget=function(e,t){var n,i,a,r,o,d,s,p,l,u,m,g;for(s=t.split("/"),a=e,n=null,(p=0,u=s.length);p<u;p++){for(o=s[p],r=[a];0!==r.length;){if(i=r.shift(),i.sid===o){n=i;break}if(null!=i.sidChildren)for(g=i.sidChildren,l=0,m=g.length;l<m;l++)d=g[l],r.push(d)}if(null==n)return null;a=n}return n},m.prototype._resolveSidLink=function(e){var t,n,i,a,r,o,d,s,p,l,u,m,g;if(t=this.dae.ids[e.id],null==t)return this._log("Could not resolve SID #"+e.url+", missing base ID "+e.id,N.messageError),!1;for(a=t,n=null,m=e.sids,(s=0,l=m.length);s<l;s++){for(o=m[s],r=[a];0!==r.length;){if(i=r.shift(),i.sid===o){n=i;break}if(null!=i.sidChildren)for(g=i.sidChildren,p=0,u=g.length;p<u;p++)d=g[p],r.push(d)}if(null==n)return this._log("Could not resolve SID #"+e.url+", missing SID part "+o,N.messageError),!1;a=n}return e.object=n,!0},m.prototype._getLinkTarget=function(e,t){return null==e?null:(null!=e.object||(e instanceof j?this._resolveUrlLink(e):e instanceof L?this._resolveSidLink(e):e instanceof g?this._resolveFxLink(e):this._log("Trying to resolve an object that is not a link",N.messageError)),null==t||null==e.object||e.object instanceof t||this._log("Link "+e.url+" does not link to a "+t.name,N.messageError),e.object)},m.prototype._parseXml=function(e){var t,n;t=e.childNodes[0],"COLLADA"===(null==t||null==(n=t.nodeName)?void 0:n.toUpperCase())?this._parseCollada(t):this._log("Can not parse document, top level element is not <COLLADA>.",N.messageError)},m.prototype._parseCollada=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"asset":this._parseAsset(t);break;case"scene":this._parseScene(t);break;case"library_effects":this._parseLibEffect(t);break;case"library_materials":this._parseLibMaterial(t);break;case"library_geometries":this._parseLibGeometry(t);break;case"library_images":this._parseLibImage(t);break;case"library_visual_scenes":this._parseLibVisualScene(t);break;case"library_controllers":this._parseLibController(t);break;case"library_animations":this._parseLibAnimation(t);break;case"library_lights":this._parseLibLight(t);break;case"library_cameras":this._parseLibCamera(t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseAsset=function(e){var t,i,a,r;for(this.dae.asset||(this.dae.asset=new n),r=e.childNodes,(i=0,a=r.length);i<a;i++)if(t=r[i],1===t.nodeType)switch(t.nodeName){case"unit":this.dae.asset.unit=this._getAttributeAsFloat(t,"meter");break;case"up_axis":this.dae.asset.upAxis=t.textContent.toUpperCase().charAt(0);break;case"contributor":case"created":case"modified":case"revision":case"title":case"subject":case"keywords":break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseScene=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"instance_visual_scene":this.dae.scene=new j(t.getAttribute("url"));break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseLibVisualScene=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"visual_scene":this._parseVisualScene(t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseVisualScene=function(e){var t,n,i,a,r;for(n=new D,n.id=e.getAttribute("id"),this._addUrlTarget(n,this.dae.libVisualScenes,!0),r=e.childNodes,(i=0,a=r.length);i<a;i++)if(t=r[i],1===t.nodeType)switch(t.nodeName){case"node":this._parseSceneNode(n,t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseSceneNode=function(e,t){var n,i,a,r,o;for(i=new V,i.id=t.getAttribute("id"),i.sid=t.getAttribute("sid"),i.name=t.getAttribute("name"),i.type=t.getAttribute("type"),i.layer=t.getAttribute("layer"),i.parent=e,e.children.push(i),this._addUrlTarget(i,null,!1),this._addSidTarget(i,e),o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"instance_geometry":this._parseInstanceGeometry(i,n);break;case"instance_controller":this._parseInstanceController(i,n);break;case"instance_light":this._parseInstanceLight(i,n);break;case"instance_camera":this._parseInstanceCamera(i,n);break;case"matrix":case"rotate":case"translate":case"scale":this._parseTransformElement(i,n);break;case"node":this._parseSceneNode(i,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseInstanceGeometry=function(e,t){var n,i,a,r,o;for(i=new x,i.geometry=new j(t.getAttribute("url")),i.sid=t.getAttribute("sid"),e.geometries.push(i),this._addSidTarget(i,e),o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"bind_material":this._parseBindMaterial(i,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseInstanceController=function(e,t){var n,i,a,r,o;for(i=new y,i.controller=new j(t.getAttribute("url")),i.sid=t.getAttribute("sid"),i.name=t.getAttribute("name"),e.controllers.push(i),this._addSidTarget(i,e),o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"skeleton":i.skeletons.push(new j(n.textContent));break;case"bind_material":this._parseBindMaterial(i,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseBindMaterial=function(e,t){var n,i,a,r;for(r=t.childNodes,i=0,a=r.length;i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"technique_common":this._parseBindMaterialTechnique(e,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseBindMaterialTechnique=function(e,t){var n,i,a,r;for(r=t.childNodes,i=0,a=r.length;i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"instance_material":this._parseInstanceMaterial(e,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseInstanceMaterial=function(e,t){var n,i,a,r,o,d,s,p,l;for(r=new T,r.symbol=t.getAttribute("symbol"),r.material=new j(t.getAttribute("target")),e.materials.push(r),this._addSidTarget(r,e),l=t.childNodes,(s=0,p=l.length);s<p;s++)if(n=l[s],1===n.nodeType)switch(n.nodeName){case"bind_vertex_input":o=n.getAttribute("semantic"),i=n.getAttribute("input_semantic"),a=n.getAttribute("input_set"),null!=a&&(a=parseInt(a,10)),r.vertexInputs[o]={inputSemantic:i,inputSet:a};break;case"bind":o=n.getAttribute("semantic"),d=new L(null,n.getAttribute("target")),r.params[o]={target:d};break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseTransformElement=function(e,t){var n,i;switch(i=new k,i.sid=t.getAttribute("sid"),i.type=t.nodeName,i.node=e,e.transformations.push(i),this._addSidTarget(i,e),this.dae.animationTargets.push(i),i.data=ee(t.textContent),n=0,i.type){case"matrix":n=16;break;case"rotate":n=4;break;case"translate":n=3;break;case"scale":n=3;break;case"skew":n=7;break;case"lookat":n=9;break;default:this._log("Unknown transformation type "+i.type+".",N.messageError);}i.data.length!==n&&this._log("Wrong number of elements for transformation type '"+i.type+"': expected "+n+", found "+i.data.length,N.messageError)},m.prototype._parseInstanceLight=function(e,t){var n,i,a,r,o;for(i=new b,i.light=new j(t.getAttribute("url")),i.sid=t.getAttribute("sid"),i.name=t.getAttribute("name"),e.lights.push(i),this._addSidTarget(i,e),o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"extra":this._reportUnhandledExtra(t,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseInstanceCamera=function(e,t){var n,i,a,r,o;for(n=new _,n.camera=new j(t.getAttribute("url")),n.sid=t.getAttribute("sid"),n.name=t.getAttribute("name"),e.cameras.push(n),this._addSidTarget(n,e),o=t.childNodes,(a=0,r=o.length);a<r;a++)if(i=o[a],1===i.nodeType)switch(i.nodeName){case"extra":this._reportUnhandledExtra(t,i);break;default:this._reportUnexpectedChild(t,i);}},m.prototype._parseLibEffect=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"effect":this._parseEffect(t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseEffect=function(e){var t,n,i,a,r;for(n=new s,n.id=e.getAttribute("id"),this._addUrlTarget(n,this.dae.libEffects,!0),r=e.childNodes,(i=0,a=r.length);i<a;i++)if(t=r[i],1===t.nodeType)switch(t.nodeName){case"profile_COMMON":this._parseEffectProfileCommon(n,t);break;case"profile":this._log("Skipped non-common effect profile for effect "+n.id+".",N.messageWarning);break;case"extra":break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseEffectProfileCommon=function(e,t){var n,i,a,r;for(r=t.childNodes,i=0,a=r.length;i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"newparam":this._parseEffectNewparam(e,n);break;case"technique":this._parseEffectTechnique(e,n);break;case"extra":this._parseTechniqueExtra(e.technique,"COMMON",n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseEffectNewparam=function(e,t){var n,i,a,r,o;for(i=t.getAttribute("sid"),o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"surface":this._parseEffectSurface(e,i,n);break;case"sampler2D":this._parseEffectSampler(e,i,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseEffectSurface=function(e,t,n){var i,a,r,o,d;for(a=new l,a.type=n.getAttribute("type"),a.sid=t,this._addFxTarget(a,e),d=n.childNodes,(r=0,o=d.length);r<o;r++)if(i=d[r],1===i.nodeType)switch(i.nodeName){case"init_from":a.initFrom=new j(i.textContent);break;case"format":a.format=i.textContent;break;case"size":a.size=ee(i.textContent);break;case"viewport_ratio":a.viewportRatio=ee(i.textContent);break;case"mip_levels":a.mipLevels=parseInt(i.textContent,10);break;case"mipmap_generate":a.mipmapGenerate=i.textContent;break;default:this._reportUnexpectedChild(n,i);}},m.prototype._parseEffectSampler=function(e,t,n){var i,a,r,o,d;for(a=new p,a.sid=t,this._addFxTarget(a,e),d=n.childNodes,(r=0,o=d.length);r<o;r++)if(i=d[r],1===i.nodeType)switch(i.nodeName){case"source":a.surface=new g(i.textContent,e);break;case"instance_image":a.image=new j(i.getAttribute("url"));break;case"wrap_s":a.wrapS=i.textContent;break;case"wrap_t":a.wrapT=i.textContent;break;case"minfilter":a.minfilter=i.textContent;break;case"magfilter":a.magfilter=i.textContent;break;case"border_color":a.borderColor=ee(i.textContent);break;case"mipmap_maxlevel":a.mipmapMaxLevel=parseInt(i.textContent,10);break;case"mipmap_bias":a.mipmapBias=parseFloat(i.textContent);break;default:this._reportUnexpectedChild(n,i);}},m.prototype._parseEffectTechnique=function(e,t){var n,i,a,r,o;for(i=new u,i.sid=t.getAttribute("sid"),this._addFxTarget(i,e),e.technique=i,o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"blinn":case"phong":case"lambert":case"constant":i.shading=n.nodeName,this._parseTechniqueParam(i,"COMMON",n);break;case"extra":this._parseTechniqueExtra(i,"COMMON",n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseTechniqueParam=function(e,t,n){var i,a,r,o;for(o=n.childNodes,a=0,r=o.length;a<r;a++)if(i=o[a],1===i.nodeType)switch(i.nodeName){case"newparam":this._parseEffectNewparam(e,i);break;case"emission":case"ambient":case"diffuse":case"specular":case"reflective":this._parseEffectColorOrTexture(e,i);break;case"shininess":case"reflectivity":case"transparency":case"index_of_refraction":e[i.nodeName]=parseFloat(i.childNodes[1].textContent);break;case"transparent":this._parseEffectColorOrTexture(e,i),e.transparent.opaque=i.getAttribute("opaque");break;case"bump":this._parseEffectColorOrTexture(e,i),e.bump.bumptype=i.getAttribute("bumptype");break;case"double_sided":e.doubleSided=1===parseInt(i.textContent,10);break;default:"COMMON"===t&&this._reportUnexpectedChild(n,i);}},m.prototype._parseTechniqueExtra=function(e,t,n){var i,a,r,o;for(o=n.childNodes,a=0,r=o.length;a<r;a++)if(i=o[a],1===i.nodeType)switch(i.nodeName){case"technique":t=i.getAttribute("profile"),this._parseTechniqueParam(e,t,i);break;default:this._reportUnexpectedChild(n,i);}},m.prototype._parseEffectColorOrTexture=function(e,t){var n,i,a,r,d,s,p;for(a=t.nodeName,i=e[a],null!=i||(i=new o,e[a]=i),p=t.childNodes,(d=0,s=p.length);d<s;d++)if(n=p[d],1===n.nodeType)switch(n.nodeName){case"color":i.color=$(n.textContent);break;case"texture":r=n.getAttribute("texture"),i.textureSampler=new g(r,e),i.texcoord=n.getAttribute("texcoord");break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseLibMaterial=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"material":this._parseMaterial(t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseMaterial=function(e){var t,n,i,a,r;for(n=new M,n.id=e.getAttribute("id"),n.name=e.getAttribute("name"),this._addUrlTarget(n,this.dae.libMaterials,!0),r=e.childNodes,(i=0,a=r.length);i<a;i++)if(t=r[i],1===t.nodeType)switch(t.nodeName){case"instance_effect":n.effect=new j(t.getAttribute("url"));break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseLibGeometry=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"geometry":this._parseGeometry(t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseGeometry=function(e){var t,n,i,a,r;for(n=new c,n.id=e.getAttribute("id"),n.name=e.getAttribute("name"),this._addUrlTarget(n,this.dae.libGeometries,!0),r=e.childNodes,(i=0,a=r.length);i<a;i++)if(t=r[i],1===t.nodeType)switch(t.nodeName){case"mesh":this._parseMesh(n,t);break;case"convex_mesh":case"spline":this._log("Geometry type "+t.nodeName+" not supported.",N.messageError);break;case"extra":this._parseGeometryExtra(n,t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseMesh=function(e,t){var n,i,a,r;for(r=t.childNodes,i=0,a=r.length;i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"source":this._parseSource(e,n);break;case"vertices":this._parseVertices(e,n);break;case"triangles":case"polylist":case"polygons":this._parseTriangles(e,n);break;case"lines":case"linestrips":case"trifans":case"tristrips":this._log("Geometry primitive type "+n.nodeName+" not supported.",N.messageError);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseGeometryExtra=function(e,t){var n,i,a,r,o;for(o=t.childNodes,a=0,r=o.length;a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"technique":i=n.getAttribute("profile"),this._parseGeometryExtraTechnique(e,i,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseGeometryExtraTechnique=function(e,t,n){var i,a,r,o;for(o=n.childNodes,a=0,r=o.length;a<r;a++)if(i=o[a],1===i.nodeType)switch(i.nodeName){case"double_sided":e.doubleSided="1"===n.textContent;}},m.prototype._parseSource=function(e,t){var n,i,a,r,o;for(i=new U,i.id=t.getAttribute("id"),i.name=t.getAttribute("name"),this._addUrlTarget(i,e.sources,!0),o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"bool_array":i.sourceId=n.getAttribute("id"),i.data=Z(n.textContent);break;case"float_array":i.sourceId=n.getAttribute("id"),i.data=ee(n.textContent);break;case"int_array":i.sourceId=n.getAttribute("id"),i.data=te(n.textContent);break;case"IDREF_array":case"Name_array":i.sourceId=n.getAttribute("id"),i.data=ne(n.textContent);break;case"technique_common":this._parseSourceTechniqueCommon(i,n);break;case"technique":break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseVertices=function(e,t){var n,i,a,r,o;for(i=new O,i.id=t.getAttribute("id"),i.name=t.getAttribute("name"),this._addUrlTarget(i,null,!0),e.vertices=i,o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"input":i.inputs.push(this._parseInput(n));break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseTriangles=function(e,t){var n,i,a,r,o;for(i=new E,i.name=t.getAttribute("name"),i.material=t.getAttribute("material"),i.count=this._getAttributeAsInt(t,"count"),i.type=t.nodeName,e.triangles.push(i),o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"input":i.inputs.push(this._parseInput(n));break;case"vcount":i.vcount=te(n.textContent);break;case"p":i.indices=te(n.textContent);break;default:this._reportUnexpectedChild(t,n);}return i},m.prototype._parseSourceTechniqueCommon=function(e,t){var n,i,a,r;for(r=t.childNodes,i=0,a=r.length;i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"accessor":this._parseAccessor(e,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseAccessor=function(e,t){var n,i,a,r,o,d,s;for(a=t.getAttribute("source"),e.count=t.getAttribute("count"),e.stride=this._getAttributeAsInt(t,"stride",1),a!=="#"+e.sourceId&&this._log("Non-local sources not supported, source data will be empty",N.messageError),s=t.childNodes,(o=0,d=s.length);o<d;o++)if(n=s[o],1===n.nodeType)switch(n.nodeName){case"param":i=n.getAttribute("name"),r=n.getAttribute("type"),e.params[i]=r;break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseInput=function(e){var t;return t=new h,t.semantic=e.getAttribute("semantic"),t.source=new j(e.getAttribute("source")),t.offset=this._getAttributeAsInt(e,"offset"),t.set=this._getAttributeAsInt(e,"set"),t},m.prototype._parseLibImage=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"image":this._parseImage(t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseImage=function(e){var t,n,i,a,r;for(n=new f,n.id=e.getAttribute("id"),this._addUrlTarget(n,this.dae.libImages,!0),r=e.childNodes,(i=0,a=r.length);i<a;i++)if(t=r[i],1===t.nodeType)switch(t.nodeName){case"init_from":n.initFrom=t.textContent;break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseLibController=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"controller":this._parseController(t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseController=function(e){var t,n,i,a,r;for(n=new d,n.id=e.getAttribute("id"),n.name=e.getAttribute("name"),this._addUrlTarget(n,this.dae.libControllers,!0),r=e.childNodes,(i=0,a=r.length);i<a;i++)if(t=r[i],1===t.nodeType)switch(t.nodeName){case"skin":this._parseSkin(n,t);break;case"morph":this._parseMorph(n,t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseMorph=function(){this._log("Morph controllers not implemented",N.messageError)},m.prototype._parseSkin=function(e,t){var n,i,a,r,o;for(i=new I,i.source=new j(t.getAttribute("source")),(null!=e.skin||null!=e.morph)&&this._log("Controller already has a skin or morph",N.messageError),e.skin=i,o=t.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"bind_shape_matrix":this._parseBindShapeMatrix(i,n);break;case"source":this._parseSource(i,n);break;case"joints":this._parseJoints(i,n);break;case"vertex_weights":this._parseVertexWeights(i,n);break;default:this._reportUnexpectedChild(t,n);}},m.prototype._parseBindShapeMatrix=function(e,t){e.bindShapeMatrix=ee(t.textContent)},m.prototype._parseJoints=function(e,t){var n,i,a,r,o,d,s,p,l;for(r=new C,null!=e.joints&&this._log("Skin already has a joints array",N.messageError),e.joints=r,a=[],l=t.childNodes,(o=0,s=l.length);o<s;o++)if(n=l[o],1===n.nodeType)switch(n.nodeName){case"input":a.push(this._parseInput(n));break;default:this._reportUnexpectedChild(t,n);}for(d=0,p=a.length;d<p;d++)switch(i=a[d],i.semantic){case"JOINT":r.joints=i;break;case"INV_BIND_MATRIX":r.invBindMatrices=i;break;default:this._log("Unknown joints input semantic "+i.semantic,N.messageError);}},m.prototype._parseVertexWeights=function(e,t){var n,i,a,r,o,d,s,p,l;for(r=new w,r.count=parseInt(t.getAttribute("count"),10),null!=e.vertexWeights&&this._log("Skin already has a vertex weight array",N.messageError),e.vertexWeights=r,a=[],l=t.childNodes,(o=0,s=l.length);o<s;o++)if(n=l[o],1===n.nodeType)switch(n.nodeName){case"input":a.push(this._parseInput(n));break;case"vcount":r.vcount=te(n.textContent);break;case"v":r.v=te(n.textContent);break;default:this._reportUnexpectedChild(t,n);}for(d=0,p=a.length;d<p;d++)switch(i=a[d],i.semantic){case"JOINT":r.joints=i;break;case"WEIGHT":r.weights=i;break;default:this._log("Unknown vertex weight input semantic "+i.semantic,N.messageError);}},m.prototype._parseLibAnimation=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"animation":this._parseAnimation(null,t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseAnimation=function(t,n){var i,a,r,o,d;for(i=new e,i.id=n.getAttribute("id"),i.name=n.getAttribute("name"),i.parent=t,null==t?(i.rootId=i.id,i.rootName=i.name):(i.rootId=t.rootId,i.rootName=t.rootName),this._addUrlTarget(i,(null==t?void 0:t.animations)||this.dae.libAnimations,!1),d=n.childNodes,(r=0,o=d.length);r<o;r++)if(a=d[r],1===a.nodeType)switch(a.nodeName){case"animation":this._parseAnimation(i,a);break;case"source":this._parseSource(i,a);break;case"sampler":this._parseSampler(i,a);break;case"channel":this._parseChannel(i,a);break;default:this._reportUnexpectedChild(n,a);}},m.prototype._parseSampler=function(e,t){var n,i,a,r,o,d,s,p,l;for(r=new S,r.id=t.getAttribute("id"),null!=r.id&&this._addUrlTarget(r,e.samplers,!1),a=[],l=t.childNodes,(o=0,s=l.length);o<s;o++)if(n=l[o],1===n.nodeType)switch(n.nodeName){case"input":a.push(this._parseInput(n));break;default:this._reportUnexpectedChild(t,n);}for(d=0,p=a.length;d<p;d++)switch(i=a[d],i.semantic){case"INPUT":r.input=i;break;case"OUTPUT":r.outputs.push(i);break;case"INTERPOLATION":r.interpolation=i;break;case"IN_TANGENT":r.inTangents.push(i);break;case"OUT_TANGENT":r.outTangents.push(i);break;default:this._log("Unknown sampler input semantic "+i.semantic,N.messageError);}},m.prototype._parseChannel=function(e,t){var n,i,a,o,d;for(n=new r,n.source=new j(t.getAttribute("source")),n.target=new L(e.id,t.getAttribute("target")),e.channels.push(n),n.animation=e,d=t.childNodes,(a=0,o=d.length);a<o;a++)i=d[a],1===i.nodeType&&this._reportUnexpectedChild(t,i)},m.prototype._parseLibLight=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"light":this._parseLight(t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseLight=function(e){var t,n,i,a,r;for(n=new v,n.id=e.getAttribute("id"),n.name=e.getAttribute("name"),null!=n.id&&this._addUrlTarget(n,this.dae.libLights,!0),r=e.childNodes,(i=0,a=r.length);i<a;i++)if(t=r[i],1===t.nodeType)switch(t.nodeName){case"technique_common":this._parseLightTechniqueCommon(t,n);break;case"extra":this._reportUnhandledExtra(e,t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseLightTechniqueCommon=function(e,t){var n,i,a,r;for(r=e.childNodes,i=0,a=r.length;i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"ambient":this._parseLightParams(n,"COMMON",t);break;case"directional":this._parseLightParams(n,"COMMON",t);break;case"point":this._parseLightParams(n,"COMMON",t);break;case"spot":this._parseLightParams(n,"COMMON",t);break;default:this._reportUnexpectedChild(e,n);}},m.prototype._parseLightParams=function(e,t,n){var i,a,r,o;for(n.type=e.nodeName,o=e.childNodes,(a=0,r=o.length);a<r;a++)if(i=o[a],1===i.nodeType)switch(i.nodeName){case"color":this._parseLightColor(i,t,n);break;case"constant_attenuation":this._parseLightParam(i,t,n);break;case"linear_attenuation":this._parseLightParam(i,t,n);break;case"quadratic_attenuation":this._parseLightParam(i,t,n);break;case"falloff_angle":this._parseLightParam(i,t,n);break;case"falloff_exponent":this._parseLightParam(i,t,n);break;default:this._reportUnexpectedChild(e,i);}},m.prototype._parseLightColor=function(e,t,n){n.color=ee(e.textContent)},m.prototype._parseLightParam=function(e,t,n){var i;i=new A,i.sid=e.getAttribute("sid"),i.name=e.nodeName,n.params[i.name]=i,this._addSidTarget(i,n),i.value=parseFloat(e.textContent)},m.prototype._parseLibCamera=function(e){var t,n,i,a;for(a=e.childNodes,n=0,i=a.length;n<i;n++)if(t=a[n],1===t.nodeType)switch(t.nodeName){case"camera":this._parseCamera(t);break;case"extra":this._reportUnhandledExtra(e,t);break;default:this._reportUnexpectedChild(e,t);}},m.prototype._parseCamera=function(e){var t,n,a,r,o;for(t=new i,t.id=e.getAttribute("id"),null!=t.id&&this._addUrlTarget(t,this.dae.libCameras,!0),t.name=e.getAttribute("name"),o=e.childNodes,(a=0,r=o.length);a<r;a++)if(n=o[a],1===n.nodeType)switch(n.nodeName){case"asset":this._reportUnhandledExtra(e,n);break;case"optics":this._parseCameraOptics(n,t);break;case"imager":this._reportUnhandledExtra(e,n);break;case"extra":this._reportUnhandledExtra(e,n);break;default:this._reportUnexpectedChild(e,n);}},m.prototype._parseCameraOptics=function(e,t){var n,i,a,r;for(r=e.childNodes,i=0,a=r.length;i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"technique_common":this._parseCameraTechniqueCommon(n,t);break;case"technique":this._reportUnhandledExtra(e,n);break;case"extra":this._reportUnhandledExtra(e,n);break;default:this._reportUnexpectedChild(e,n);}},m.prototype._parseCameraTechniqueCommon=function(e,t){var n,i,a,r;for(r=e.childNodes,i=0,a=r.length;i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"orthographic":this._parseCameraParams(n,t);break;case"perspective":this._parseCameraParams(n,t);break;default:this._reportUnexpectedChild(e,n);}},m.prototype._parseCameraParams=function(e,t){var n,i,a,r;for(t.type=e.nodeName,r=e.childNodes,(i=0,a=r.length);i<a;i++)if(n=r[i],1===n.nodeType)switch(n.nodeName){case"xmag":this._parseCameraParam(n,t);break;case"ymag":this._parseCameraParam(n,t);break;case"xfov":this._parseCameraParam(n,t);break;case"yfov":this._parseCameraParam(n,t);break;case"aspect_ratio":this._parseCameraParam(n,t);break;case"znear":this._parseCameraParam(n,t);break;case"zfar":this._parseCameraParam(n,t);break;case"extra":this._reportUnhandledExtra(e,n);break;default:this._reportUnexpectedChild(e,n);}},m.prototype._parseCameraParam=function(e,t){var n;n=new a,n.sid=e.getAttribute("sid"),n.name=e.nodeName,t.params[n.name]=n,this._addSidTarget(n,t),n.value=parseFloat(e.textContent)},m.prototype._linkAnimations=function(){var e,t,n,i,a,r,o,d;for(o=this.dae.animationTargets,n=0,a=o.length;n<a;n++)t=o[n],t.initAnimationTarget();for(d=this.dae.libAnimations,i=0,r=d.length;i<r;i++)e=d[i],this._linkAnimationChannels(e)},m.prototype._linkAnimationChannels=function(e){var n,i,a,r,o,d,s,p,l,u,m,g,c,f,h;for(c=e.channels,l=0,m=c.length;l<m;l++){if(n=c[l],s=this._getLinkTarget(n.target,t),null==s){this._log("Animation channel has an invalid target '"+n.target.url+"', animation ignored",N.messageWarning);continue}if(d=this._getLinkTarget(n.source,S),null==d){this._log("Animation channel has an invalid sampler '"+n.source.url+"', animation ignored",N.messageWarning);continue}if(a=this._getLinkTarget(null==(f=d.input)?void 0:f.source),null==a){this._log("Animation channel has no input data, animation ignored",N.messageWarning);continue}if(0===d.outputs.length){this._log("Animation channel has no output, animation ignored",N.messageWarning);continue}if(1<d.outputs.length&&this._log("Animation channel has more than one output, using only the first output",N.messageWarning),r=d.outputs[0],o=this._getLinkTarget(null==r?void 0:r.source),null==o){this._log("Animation channel has no output data, animation ignored",N.messageWarning);continue}if(p=new P,p.outputData=o.data,p.inputData=a.data,p.stride=o.stride,p.animation=e,n.target.dotSyntax)switch(p.semantic=n.target.member,p.count=1,p.semantic){case"X":p.offset=0;break;case"Y":p.offset=1;break;case"Z":p.offset=2;break;case"W":p.offset=3;break;case"R":p.offset=0;break;case"G":p.offset=1;break;case"B":p.offset=2;break;case"U":p.offset=0;break;case"V":p.offset=1;break;case"S":p.offset=0;break;case"T":p.offset=1;break;case"P":p.offset=2;break;case"Q":p.offset=3;break;case"ANGLE":p.offset=3;break;default:this._log("Unknown semantic for '"+targetLink.url+"', animation ignored",N.messageWarning);continue;}else if(n.target.arrSyntax){switch(targetLink.indices.length){case 1:p.offset=targetLink.indices[0];break;case 2:p.offset=targetLink.indices[0]*s.animTarget.dataRows+targetLink.indices[1];break;default:this._log("Invalid number of indices for '"+targetLink.url+"', animation ignored",N.messageWarning);continue;}p.count=1}else p.offset=0,p.count=s.animTarget.dataColumns*s.animTarget.dataRows;s.animTarget.channels.push(p)}for(h=e.animations,u=0,g=h.length;u<g;u++)i=h[u],this._linkAnimationChannels(i)},m.prototype._createSceneGraph=function(){var e,t,n,i,a,r;if(t=this._getLinkTarget(this.dae.scene,D),null!=t){for(n=new THREE.Object3D,this.threejs.scene=n,r=t.children,(i=0,a=r.length);i<a;i++)e=r[i],this._createSceneGraphNode(e,n);this.scene=n}},m.prototype._setNodeTransformation=function(e,t){e.getTransformMatrix(t.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale),t.rotation.setFromQuaternion(t.quaternion)},m.prototype._createSceneGraphNode=function(e,t){var n,i,a,r,o,d,s,p,l,u,m,g,c,f,h,_,y,x,b,T,C,v,A,M,k,S,L,I;for(p=[],M=e.geometries,(g=0,_=M.length);g<_;g++)r=M[g],u=this._createStaticMesh(r),null!=u&&(u.name=null==e.name?"":e.name,p.push(u));for(k=e.controllers,c=0,y=k.length;c<y;c++)a=k[c],u=this._createAnimatedMesh(a),null!=u&&(u.name=null==e.name?"":e.name,p.push(u));for(S=e.lights,f=0,x=S.length;f<x;f++)o=S[f],l=this._createLight(o),null!=l&&(l.name=null==e.name?"":e.name,p.push(l));for(L=e.cameras,h=0,b=L.length;h<b;h++)n=L[h],d=this._createCamera(n),null!=d&&(d.name=null==e.name?"":e.name,p.push(d));if(1<p.length){for(m=new THREE.Object3D,v=0,T=p.length;v<T;v++)s=p[v],null!=s&&m.add(s);t.add(m)}else 1===p.length?(m=p[0],t.add(m)):0===p.length&&("JOINT"!==e.type&&this._log("Collada node "+e.name+" did not produce any threejs nodes",N.messageWarning),m=new THREE.Object3D,t.add(m));for(this._setNodeTransformation(e,m),I=e.children,(A=0,C=I.length);A<C;A++)i=I[A],this._createSceneGraphNode(i,m)},m.prototype._createLight=function(e){var t,n,i,a,r,o,d,s,p,l,u,m,g;if(s=this._getLinkTarget(e.light,v),null==s)return this._log("Light instance has no light, light ignored",N.messageWarning),null;switch(a=s.color,r=255*a[0]<<16^255*a[1]<<8^255*a[2]<<0,t=null==(p=s.params.constant_attenuation)?void 0:p.value,n=null==(l=s.params.linear_attenuation)?void 0:l.value,i=null==(u=s.params.quadratic_attenuation)?void 0:u.value,o=null==(m=s.params.falloff_angle)?void 0:m.value,d=null==(g=s.params.falloff_exponent)?void 0:g.value,s.type){case"ambient":s=new THREE.AmbientLight(r);break;case"directional":s=new THREE.DirectionalLight(r,1);break;case"point":s=new THREE.PointLight(r,t,n);break;case"spot":s=new THREE.SpotLight(r,t,n,o,d);break;default:this._log("Unknown light type "+e.type+", light ignored.",N.messageError);}return s},m.prototype._createCamera=function(e){var t,n,a,r,o,d,s,p,l,u,m,g,c,f,h;if(n=this._getLinkTarget(e.camera,i),null==n)return this._log("Camera instance has no camera, camera ignored",N.messageWarning),null;switch(r=null==(l=n.params.xmag)?void 0:l.value,d=null==(u=n.params.ymag)?void 0:u.value,a=null==(m=n.params.xfov)?void 0:m.value,o=null==(g=n.params.yfov)?void 0:g.value,t=null==(c=n.params.aspect_ratio)?void 0:c.value,p=null==(f=n.params.znear)?void 0:f.value,s=null==(h=n.params.zfar)?void 0:h.value,n.type){case"orthographic":null!=r&&null!=d?t=r/d:null!=d&&null!=t?r=d*t:null!=r&&null!=t?d=r/t:null==r?null==d?this._log("Not enough field of view parameters for an orthographic camera.",N.messageError):(t=1,r=d):(t=1,d=r),n=new THREE.OrthographicCamera(-r,+r,-d,+d,p,s);break;case"perspective":null!=a&&null!=o?t=a/o:null!=o&&null!=t?a=o*t:null!=a&&null!=t?o=a/t:null==a?null==o?this._log("Not enough field of view parameters for a perspective camera.",N.messageError):(t=1,a=o):(t=1,o=a),n=new THREE.PerspectiveCamera(o,t,p,s);break;default:this._log("Unknown camera type "+e.type+", camera ignored.",N.messageError);}return n},m.prototype._createStaticMesh=function(e){var t,n,i,a,r;return(t=this._getLinkTarget(e.geometry,c),null==t)?(this._log("Geometry instance has no geometry, mesh ignored",N.messageWarning),null):(r=this._createGeometryAndMaterial(t,e.materials),i=r[0],a=r[1],n=new THREE.Mesh(i,a),n)},m.prototype._createGeometryAndMaterial=function(e,t){var n,i,a,r,o,d,s;if(r=this._createMaterials(t),i=this._createGeometry(e,r),a=null,1<r.materials.length)for(a=new THREE.MeshFaceMaterial,s=r.materials,(o=0,d=s.length);o<d;o++)n=s[o],a.materials.push(n);else a=r.materials[0];return[i,a]},m.prototype._createAnimatedMesh=function(e,t){return(t=this._getLinkTarget(e.controller,d),null!=t.skin)?this._createSkinMesh(e,t):null==t.morph?(this._log("Controller has neither a skin nor a morph, can not create a mesh",N.messageError),null):this._createMorphMesh(e,t)},m.prototype._createSkinMesh=function(e,t){var n,a,r,o,d,s,p,i,l,u,m,g,c,f,h,_,y,x,b,T,C,v,A,M,k,S,L,E,j,w,O;if(d=t.skin,null==d||!(d instanceof I))return this._log("Controller for a skinned mesh has no skin, mesh ignored",N.messageError),null;if(s=this._getLinkTarget(d.source),null==s)return this._log("Skin for a skinned mesh has no geometry, mesh ignored",N.messageError),null;if(!this._options.useAnimations)return k=this._createGeometryAndMaterial(s,e.materials),h=k[0],_=k[1],new THREE.Mesh(h,_);for(f=[],S=e.skeletons,(y=0,C=S.length);y<C;y++){if(c=S[y],g=this._getLinkTarget(c,V),null==g){this._log("Controller instance for a skinned mesh uses unknown skeleton "+g+", skeleton ignored",N.messageError);continue}f.push(g)}if(0===f.length)return this._log("Controller instance for a skinned mesh has no skeleton, mesh ignored",N.messageError),null;if(null==d.joints)return this._log("Skin has no joints, mesh ignored",N.messageError),null;if(o=this._getLinkTarget(null==(L=d.joints.joints)?void 0:L.source,U),null==o||null==o.data)return this._log("Skin has no joints source, mesh ignored",N.messageError),null;if(r=this._getLinkTarget(null==(E=d.joints.invBindMatrices)?void 0:E.source,U),null==r||null==r.data)return this._log("Skin has no inverse bind matrix source, mesh ignored",N.messageError),null;if(16*o.data.length!==r.data.length)return this._log("Skin has an inconsistent length of joint data sources, mesh ignored",N.messageError),null;for(a=[],j=o.data,(x=0,v=j.length);x<v;x++){if(l=j[x],i=this._findJointNode(l,f),null==i)return this._log("Joint "+l+" not found for skin with skeletons "+f.map(function(e){return e.id}).join(", ")+", mesh ignored",N.messageError),null;n=this._createBone(i,l,a),H(r.data,16*n.index,n.invBindMatrix)}for(this._options.verboseMessages&&this._log("Skin contains "+a.length+" bones",N.messageInfo),p=0;p<a.length;){for(n=a[p],++p,(b=0,A=a.length);b<A;b++)if(m=a[b],n.node.parent===m.node){n.parent=m;break}null!=n.node.parent&&n.node.parent instanceof V&&null==n.parent&&(n.parent=this._createBone(n.node.parent,"",a))}if(this._options.verboseMessages&&this._log("Skeleton contains "+a.length+" bones",N.messageInfo),null==d.vertexWeights)return this._log("Skin has no vertex weight data, mesh ignored",N.messageError),null;if(d.vertexWeights.joints.source.url!==d.joints.joints.source.url)return this._log("Skin uses different data sources for joints in <joints> and <vertex_weights>, this is not supported by this loader, mesh ignored",N.messageError),null;if(w=this._createGeometryAndMaterial(s,e.materials),h=w[0],_=w[1],this._options.convertSkinsToMorphs)return this._addSkinMorphTargets(h,d,a,_)?new THREE.MorphAnimMesh(h,_):new THREE.Mesh(h,_);if(this._addSkinBones(h,d,a,_)){for(u=new THREE.SkinnedMesh(h,_),u.boneInverses=[],O=h.bones,(T=0,M=O.length);T<M;T++)n=O[T],u.boneInverses.push(n.inverse);return u}return new THREE.Mesh(h,_)},m.prototype._findJointNode=function(e,t){var n,i,a,r;for(n=null,a=0,r=t.length;a<r&&(i=t[a],n=this._findSidTarget(i,e),null==n);a++);return n instanceof V?n:null},m.prototype._createBone=function(e,t,n){var i,a,r,o,d;for(i=new G,i.sid=t,i.node=e,d=e.transformations,(r=0,o=d.length);r<o;r++)if(a=d[r],0<a.animTarget.channels.length){i.isAnimated=!0;break}return i.matrix=new THREE.Matrix4,e.getTransformMatrix(i.matrix),i.index=n.length,n.push(i),i},m.prototype._addSkinMorphTargets=function(e,t,n,a){var r,o,d,s,p,l,u,m,i,g,c,f,h,_,y,x,b,T,C,v,A,M,k,S,L,I,U,E,j,w,O,D,V,W,P;if(_=this._prepareAnimations(n),0<!_)return null;if(c=e.vertices,b=c.length,M=t.vertexWeights.v,k=t.vertexWeights.vcount,A=this._getLinkTarget(t.vertexWeights.joints.source),L=this._getLinkTarget(t.vertexWeights.weights.source),v=null==A?void 0:A.data,S=null==L?void 0:L.data,null==S)return this._log("Skin has no weights data, no morph targets added for mesh",N.messageError),null;for(r=new THREE.Matrix4,null!=t.bindShapeMatrix&&(r=Q(t.bindShapeMatrix,0)),h=new THREE.Vector3,u=!0,l=!0,(m=0,V=_-1);m<=V;m+=1){for(this._updateSkinMatrices(n,r,m),T=[],(E=0,w=c.length);E<w;E++)f=c[E],T.push(new THREE.Vector3);for(C=0,m=0,O=T.length;m<O;m++){for(x=T[m],g=c[m],U=k[m],y=0,(I=0,W=U-1);I<=W;I+=1)d=M[C],p=M[C+1],C+=2,s=S[p],y+=s,0<=d?(o=n[d],h.copy(g),h.applyMatrix4(o.skinMatrix),h.multiplyScalar(s),x.add(h)):(h.copy(g),h.applyMatrix4(r),h.multiplyScalar(s),x.add(h));0===U?(x.copy(g),u&&(this._log("Skinned vertex not influenced by any bone, some vertices will be unskinned",N.messageWarning),u=!1)):0.01<y&&1e6>y?x.multiplyScalar(1/y):(x.copy(g),l&&(this._log("Zero or infinite total weight for skinned vertex, some vertices will be unskinned",N.messageWarning),l=!1))}C!==M.length&&this._log("Skinning did not consume all weights",N.messageError),e.morphTargets.push({name:"target",vertices:T})}if(e.computeMorphNormals(),a.morphTargets=!0,a.morphNormals=!0,null!=a.materials)for(P=a.materials,j=0,D=P.length;j<D;j++)i=P[j],i.morphTargets=!0,i.morphNormals=!0;return!0},m.prototype._prepareAnimations=function(e){var t,n,i,a,r,o,d,s,p,l,u,m,g,c;for(r=null,d=0,l=e.length;d<l;d++){for(t=e[d],a=!1,g=t.node.transformations,(s=0,u=g.length);s<u;s++)for(o=g[s],o.resetAnimation(),o.selectAllAnimations(),c=o.animTarget.activeChannels,(p=0,m=c.length);p<m;p++){if(n=c[p],a=!0,i=n.inputData.length,null!=r&&i!==r)return this._log("Inconsistent number of time steps, no morph targets added for mesh. Resample all animations to fix this.",N.messageError),null;r=i}this._options.verboseMessages&&!a&&this._log("Joint '"+t.sid+"' has no animation channel",N.messageWarning)}return r},m.prototype._updateSkinMatrices=function(e,t,n){var i,a,r,o,d;for(a=0,o=e.length;a<o;a++)i=e[a],i.applyAnimation(n);for(r=0,d=e.length;r<d;r++)i=e[r],i.updateSkinMatrix(t);return null},m.prototype._addSkinBones=function(e,t,n,a){var r,o,d,s,p,l,u,m,g,i,c,f,h,_,y,x,b,T,C,v,A,M,k,S,L,I,U,E,j,O,D,V,W,P,q,w,G,R,F,B,z,X,J,H,K,Y,Z,$,ee;if(S=this._prepareAnimations(n),0<!S)return null;if(b=e.vertices,U=b.length,D=t.vertexWeights.v,V=t.vertexWeights.vcount,O=this._getLinkTarget(t.vertexWeights.joints.source),P=this._getLinkTarget(t.vertexWeights.weights.source),j=null==O?void 0:O.data,W=null==P?void 0:P.data,null==W)return this._log("Skin has no weights data, no skin added for mesh",N.messageError),null;for(r=new THREE.Matrix4,null!=t.bindShapeMatrix&&(r=Q(t.bindShapeMatrix,0)),_=new THREE.Vector3,y=new THREE.Quaternion,x=new THREE.Vector3,m=!0,u=!0,M=[],k=[],E=0,l=4,i=[0,0,0,0],G=[0,0,0,0],(g=0,z=b.length);g<z;g++){for(I=b[g],w=V[g],w>l&&(m&&(this._log("Too many bones influence a vertex, some influences will be discarded. Threejs supports only "+l+" bones per vertex.",N.messageWarning),m=!1),w=l),L=0,(q=0,K=w-1);q<=K;q+=1)d=D[E],p=D[E+1],E+=2,s=W[p],L+=s,i[q]=d,G[q]=s;for(q=G,Y=l-1;q<=Y;q+=1)i[q]=0,G[q]=0;if(!(0.01<L&&1e6>L))u&&(this._log("Zero or infinite total weight for skinned vertex, skin will be broken",N.messageWarning),u=!1);else for(q=0,Z=l-1;q<=Z;q+=1)G[q]/=L;M.push(new THREE.Vector4(i[0],i[1],i[2],i[3])),k.push(new THREE.Vector4(G[0],G[1],G[2],G[3]))}for(e.skinIndices=M,e.skinWeights=k,A=[],(R=0,X=n.length);R<X;R++)o=n[R],C={},C.parent=null==o.parent?-1:o.parent.index,C.name=o.node.name,o.matrix.decompose(_,y,x),C.pos=[_.x,_.y,_.z],C.scl=[x.x,x.y,x.z],C.rotq=[y.x,y.y,y.z,y.w],C.rot=null,C.inverse=new THREE.Matrix4,C.inverse.multiplyMatrices(o.invBindMatrix,r),A.push(C);for(e.bones=A,T={},T.name="animation",T.hierarchy=[],(F=0,J=n.length);F<J;F++){for(o=n[F],v={},v.parent=o.index,v.keys=[],(f=0,$=S-1);f<=$;f+=1)o.applyAnimation(f),o.updateSkinMatrix(r),c={},c.time=f,o.matrix.decompose(_,y,x),c.pos=[_.x,_.y,_.z],c.scl=[x.x,x.y,x.z],c.rot=[y.x,y.y,y.z,y.w],v.keys.push(c);T.hierarchy.push(v)}if(T.fps=30,T.length=S-1,e.animation=T,a.skinning=!0,null!=a.materials)for(ee=a.materials,B=0,H=ee.length;B<H;B++)h=ee[B],h.skinning=!0;return!0},m.prototype._createMorphMesh=function(){return this._log("Morph animated meshes not supported, mesh ignored",N.messageError),null},m.prototype._createGeometry=function(e,t){var n,i,a,r,o,d;for(i=new THREE.Geometry,d=e.triangles,(r=0,o=d.length);r<o;r++)a=d[r],n=t.indices[a.material],null!=n||(this._log("Material symbol "+a.material+" has no bound material instance",N.messageError),n=0),this._addTrianglesToGeometry(e,a,n,i);return i.computeFaceNormals(),i.computeCentroids(),t.needtangents&&i.computeTangents(),i.computeBoundingBox(),i},m.prototype._addTrianglesToGeometry=function(e,t,n,a){var r,o,d,s,p,l,u,m,g,c,f,h,_,y,x,b,i,T,C,v,A,M,k,S,L,I,E,j,w,D,V,W,P,q,G,R,F,B,z,X,J,H,K,Q,Y,Z,$,ee,te,ne,ie,ae,re,oe,de,se,pe,le,ue,me,ge,ce,fe,he,_e,ye,xe,be,Te,Ce,ve=this;for(M=null,v=null,C=null,A=[],_e=t.inputs,(de=0,le=_e.length);de<le;de++)switch(T=_e[de],T.semantic){case"VERTEX":M=T;break;case"NORMAL":v=T;break;case"COLOR":C=T;break;case"TEXCOORD":A.push(T);break;default:this._log("Unknown triangles input semantic "+T.semantic+" ignored",N.messageWarning);}if(z=this._getLinkTarget(M.source,O),null==z)return void this._log("Geometry "+e.id+" has no vertices",N.messageError);for(F=this._getLinkTarget(null==v?void 0:v.source,U),R=this._getLinkTarget(null==C?void 0:C.source,U),B=A.map(function(e){return ve._getLinkTarget(null==e?void 0:e.source,U)}),L=null,S=null,k=null,I=[],ye=z.inputs,(se=0,ue=ye.length);se<ue;se++)switch(T=ye[se],T.semantic){case"POSITION":L=T;break;case"NORMAL":S=T;break;case"COLOR":k=T;break;case"TEXCOORD":I.push(T);break;default:this._log("Unknown vertices input semantic "+T.semantic+" ignored",N.messageWarning);}if(H=this._getLinkTarget(L.source,U),null==H)return void this._log("Geometry "+e.id+" has no vertex positions",N.messageError);for(J=this._getLinkTarget(null==S?void 0:S.source,U),X=this._getLinkTarget(null==k?void 0:k.source,U),K=I.map(function(e){return ve._getLinkTarget(null==e?void 0:e.source,U)}),h=this._createVector3Array(H),f=this._createVector3Array(J),m=this._createVector3Array(F),c=this._createColorArray(X),u=this._createColorArray(R),_=K.map(function(e){return ve._createUVArray(e)}),g=B.map(function(e){return ve._createUVArray(e)}),a.vertices=h,G=_.length+g.length,P=a.faceVertexUvs.length,q=t.count,W=a.faces.count,xe=a.faceVertexUvs,(b=0,me=xe.length);b<me;b++)x=xe[b],b<G?(E=x.length-a.faces.length,this._addEmptyUVs(x,E)):(E=x.length-a.faces.length+q,this._addEmptyUVs(x,E));for(;a.faceVertexUvs.length<G;)x=[],this._addEmptyUVs(x,W),a.faceVertexUvs.push(x);if("triangles"!==t.type)for(re=t.vcount,pe=0,ge=re.length;pe<ge;pe++)if(s=re[pe],3!==s)return void this._log("Geometry "+e.id+" has non-triangle polygons, geometry ignored",N.messageError);for(i=t.indices,te=i.length/t.count,oe=te/3,be=t.indices,(ee=0,ce=be.length,Te=te);ee<ce;ee+=Te){for(Ce=be[ee],r=ee+0*oe,o=ee+1*oe,d=ee+2*oe,ne=i[r+M.offset],ie=i[o+M.offset],ae=i[d+M.offset],null==f?null==m?V=null:(j=i[r+v.offset],w=i[o+v.offset],D=i[d+v.offset],V=[m[j],m[w],m[D]]):V=[f[ne],f[ie],f[ae]],null==c?null==u?p=null:(j=i[r+C.offset],w=i[o+C.offset],D=i[d+C.offset],p=[u[j],u[w],u[D]]):p=[c[ne],c[ie],c[ae]],y=new THREE.Face3(ne,ie,ae,V,p),null!=n&&(y.materialIndex=n),a.faces.push(y),(b=0,fe=_.length);b<fe;b++)l=_[b],null==l?geometry.faceVertexUvs[b].push([new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0)]):($=[l[ne],l[ie],l[ae]],geometry.faceVertexUvs[b].push($));for(b=0,he=g.length;b<he;b++)l=g[b],null==l?geometry.faceVertexUvs[b].push([new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0)]):(Q=i[r+A[b].offset],Y=i[o+A[b].offset],Z=i[d+A[b].offset],$=[l[Q],l[Y],l[Z]],a.faceVertexUvs[b].push($))}},m.prototype._addEmptyUVs=function(e,t){var n,i;for(n=0,i=t-1;n<=i;n+=1)e.push(new THREE.Vector2(0,0))},m.prototype._createVector3Array=function(e){var t,n,i,a;if(null==e)return null;if(3!==e.stride)return this._log("Vector source data does not contain 3D vectors",N.messageError),null;for(t=[],i=e.data,(n=0,a=i.length-1);n<=a;n+=3)t.push(new THREE.Vector3(i[n],i[n+1],i[n+2]));return t},m.prototype._createColorArray=function(e){var t,n,i,a,r;if(null==e)return null;if(3>e.stride)return this._log("Color source data does not contain 3+D vectors",N.messageError),null;for(t=[],i=e.data,(n=0,a=i.length-1,r=e.stride);0<=a?n<=a:n>=a;n+=r)t.push(new THREE.Color().setRGB(i[n],i[n+1],i[n+2]));return t},m.prototype._createUVArray=function(e){var t,n,i,a,r;if(null==e)return null;if(2>e.stride)return this._log("UV source data does not contain 2+D vectors",N.messageError),null;for(t=[],i=e.data,(n=0,a=i.length-1,r=e.stride);0<=a?n<=a:n>=a;n+=r)t.push(new THREE.Vector2(i[n],1-i[n+1]));return t},m.prototype._createMaterials=function(e){var t,n,i,a,r,o,d;for(i=new q,n=0,(o=0,d=e.length);o<d;o++){if(t=e[o],a=t.symbol,null==a){this._log("Material instance has no symbol, material skipped.",N.messageError);continue}if(null!=i.indices[a]){this._log("Geometry instance tried to map material symbol "+a+" multiple times",N.messageError);continue}r=this._createMaterial(t),(null!=r.bumpMap||null!=r.normalMap)&&(i.needtangents=!0),this.threejs.materials.push(r),i.materials.push(r),i.indices[a]=n++}return i},m.prototype._createMaterial=function(e){var t,n;return(n=this._getLinkTarget(e.material,M),null==n)?this._createDefaultMaterial:(t=this._getLinkTarget(n.effect,s),null==t?this._createDefaultMaterial:this._createBuiltInMaterial(t))},m.prototype._createShaderMaterial=function(e){var t,n,i,a,r,o,d,s,p,l,u;return i=e.technique,n=THREE.ShaderUtils.lib.normal,s=THREE.UniformsUtils.clone(n.uniforms),o=this._loadThreejsTexture(i.bump),null!=o&&(s.tNormal.texture=o,s.uNormalScale.value=0.85),a=this._loadThreejsTexture(i.diffuse),null==a?s.enableDiffuse.value=!1:(s.tDiffuse.texture=a,s.enableDiffuse.value=!0),d=this._loadThreejsTexture(i.specular),null==d?s.enableSpecular.value=!1:(s.tSpecular.texture=d,s.enableSpecular.value=!0),r=this._loadThreejsTexture(i.emission),null==r?s.enableAO.value=!1:(s.tAO.texture=r,s.enableAO.value=!0),null!=(null==(p=i.diffuse)?void 0:p.color)&&s.uDiffuseColor.value.setHex(X(i.diffuse.color)),null!=(null==(l=i.specular)?void 0:l.color)&&s.uSpecularColor.value.setHex(X(i.specular.color)),null!=(null==(u=i.ambient)?void 0:u.color)&&s.uAmbientColor.value.setHex(X(i.ambient.color)),null!=i.shininess&&(s.uShininess.value=i.shininess),null!=i.transparency&&(s.uOpacity.value=this._getOpacity(e)),t=new THREE.ShaderMaterial({fragmentShader:n.fragmentShader,vertexShader:n.vertexShader,uniforms:s,lights:!0}),t},m.prototype._getOpacity=function(e){var t,n,i,a,r,o;return n=e.technique,a=n.transparent,t=null==a?void 0:a.opaque,null!=t&&"A_ONE"!==t&&this._log("Opacity mode "+t+" not supported, transparency will be broken",N.messageWarning),null!=(null==a?void 0:a.textureSampler)&&this._log("Separate transparency texture not supported, transparency will be broken",N.messageWarning),r=(null==a||null==(o=a.color)?void 0:o[3])||1,i=n.transparency||1,r*i},m.prototype._hasTransparency=function(e){var t,n,i;return t=e.technique,null!=(null==(n=t.transparent)?void 0:n.textureSampler)||0>=(i=t.transparency)&&1<=i},m.prototype._createBuiltInMaterial=function(e){var t,n,i,a;switch(a=e.technique,i={},this._setThreejsMaterialParam(i,a.diffuse,"diffuse","map",!1),this._setThreejsMaterialParam(i,a.emission,"emissive",null,!1),this._setThreejsMaterialParam(i,a.ambient,"ambient","lightMap",!1),this._setThreejsMaterialParam(i,a.specular,"specular","specularMap",!1),this._setThreejsMaterialParam(i,a.bump,null,"normalMap",!1),i.bumpMap&&(i.bumpScale=1),i.normalMap&&(i.normalScale=new THREE.Vector2(1,1)),null!=i.map&&(i.diffuse=16777215),null!=i.specularMap&&(i.specular=16777215),null!=i.diffuse||(i.diffuse=16777215),null!=a.shininess&&(i.shininess=a.shininess),null!=a.reflectivity&&(i.reflectivity=a.reflectivity),t=this._hasTransparency(e),t&&(i.transparent=!0,n=this._getOpacity(e),i.opacity=n,i.alphaTest=1e-3),a.doubleSided&&(i.side=THREE.DoubleSide),i.shading=THREE.SmoothShading,i.perPixel=!0,a.shading){case"blinn":case"phong":return i.color=i.diffuse,new THREE.MeshPhongMaterial(i);case"lambert":return i.color=i.diffuse,new THREE.MeshLambertMaterial(i);case"constant":return i.color=i.emission,new THREE.MeshBasicMaterial(i);default:return this._createDefaultMaterial;}},m.prototype._createDefaultMaterial=function(){return new THREE.MeshLambertMaterial({color:14540253,shading:THREE.FlatShading})},m.prototype._setThreejsMaterialParam=function(e,t,n,i,a){var r;if(null!=t)if(null!=t.color&&null!=n){if(!a&&null!=e[n])return;e[n]=X(t.color)}else if(null!=t.textureSampler&&null!=i){if(!a&&null!=e[i])return;r=this._loadThreejsTexture(t),null!=r&&(e[i]=r)}},m.prototype._loadThreejsTexture=function(e){var t,n,i,a,r;return null==e.textureSampler?null:(a=this._getLinkTarget(e.textureSampler,p),null==a)?null:(i=null,null==a.image?null!=a.surface&&(r=this._getLinkTarget(a.surface,l),i=this._getLinkTarget(r.initFrom,f)):i=this._getLinkTarget(a.image,f),null==i)?null:(t=this._baseUrl+i.initFrom,n=this._loader._loadTextureFromURL(t),n)},m}(),N=function(){function e(){this.log=e.logConsole,this._imageCache={},this.options={useAnimations:!0,convertSkinsToMorphs:!1,verboseMessages:!1,localImageMode:!1}}return e.messageTrace=0,e.messageInfo=1,e.messageWarning=2,e.messageError=3,e.messageTypes=["TRACE","INFO","WARNING","ERROR"],e.logConsole=function(t,n){console.log("ColladaLoader2 "+e.messageTypes[n]+": "+t)},e.prototype.setLog=function(e){this.log=e||this.logConsole},e.prototype.addChachedTextures=function(e){var t,n;for(t in e)n=e[t],this._imageCache[t]=n},e.prototype.load=function(t,n,i){var a,r,o,d=this;a=0,(null==(o=document.implementation)?void 0:o.createDocument)?(r=new XMLHttpRequest,"function"===typeof r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onreadystatechange=function(){if(4===r.readyState){if(0===r.status||200===r.status)return r.responseXML?d.parse(r.responseXML,n,t):d.log("Empty or non-existing file "+t+".",e.messageError);}else if(3===r.readyState&&i)return 0===a&&(a=r.getResponseHeader("Content-Length")),i({total:a,loaded:r.responseText.length})},r.open("GET",t,!0),r.send(null)):this.log("Don't know how to parse XML!",e.messageError)},e.prototype.parse=function(e,t,n){var i;return i=new m(this),i.setUrl(n),i._readyCallback=t,i._parseXml(e),i._linkAnimations(),i._createSceneGraph(),i._readyCallback&&i._readyCallback(i),i},e.prototype._loadTextureFromURL=function(t){var n;return(n=this._imageCache[t],null!=n)?n:(this.options.localImageMode&&(n=this._loadImageLocal(t)),null!=n||(n=this._loadImageSimple(t)),null==n?this.log("Texture "+t+" could not be loaded, texture will be ignored.",e.messageError):this._imageCache[t]=n,n)},e.prototype._loadImageThreejs=function(e){var t;return t=THREE.ImageUtils.loadTexture(e),t.flipY=!1,t},e.prototype._loadImageSimple=function(e){var t,n;return t=new Image,n=new THREE.Texture(t),n.flipY=!1,n.wrapS=THREE.RepeatWrapping,n.wrapT=THREE.RepeatWrapping,t.onload=function(){return n.needsUpdate=!0},t.crossOrigin="anonymous",t.src=e,n},e.prototype._loadImageLocal=function(e){var t,n,i,a,r,o,d;for(i in n=this._removeSameDirectoryPath(e),o=this._imageCache,o)if(r=o[i],t=this._removeSameDirectoryPath(i),0<=n.indexOf(t)){a=r;break}if(n=this._removeSameDirectoryPath(this._removeFileExtension(e)),null==a)for(i in d=this._imageCache,d)if(r=d[i],t=this._removeSameDirectoryPath(this._removeFileExtension(i)),0<=n.indexOf(t)){a=r;break}return a},e.prototype._removeFileExtension=function(e){return e.substr(0,e.lastIndexOf("."))||e},e.prototype._removeSameDirectoryPath=function(e){return e.replace(/^.\//,"")},e}(),ne=function(e){var t;return 0<e.length?(t=e.trim(),t.split(/\s+/)):[]},ee=function(e){var t,n,i,a,r;for(a=ne(e),t=new Float32Array(a.length),(n=0,r=a.length);n<r;n++)i=a[n],t[n]=parseFloat(i);return t},te=function(e){var t,n,i,a,r;for(a=ne(e),t=new Int32Array(a.length),(n=0,r=a.length);n<r;n++)i=a[n],t[n]=parseInt(i,10);return t},Z=function(e){var t,n,i,a,r,o;for(a=ne(e),t=new Uint8Array(a.length),(n=0,r=a.length);n<r;n++)i=a[n],t[n]=null==(o="true"===i||"1"===i)?{1:0}:o;return t},$=function(e){var t;return t=ee(e),4===t.length?t:null},X=function(e){var t=Math.floor;return null==e?null:t(255*e[0])<<16^t(255*e[1])<<8^t(255*e[2])},K=function(e,t){return new THREE.Matrix4(e[0+t],e[4+t],e[8+t],e[12+t],e[1+t],e[5+t],e[9+t],e[13+t],e[2+t],e[6+t],e[10+t],e[14+t],e[3+t],e[7+t],e[11+t],e[15+t])},Q=function(e,t){return new THREE.Matrix4(e[0+t],e[1+t],e[2+t],e[3+t],e[4+t],e[5+t],e[6+t],e[7+t],e[8+t],e[9+t],e[10+t],e[11+t],e[12+t],e[13+t],e[14+t],e[15+t])},J=function(e,t,n){return n.set(e[0+t],e[4+t],e[8+t],e[12+t],e[1+t],e[5+t],e[9+t],e[13+t],e[2+t],e[6+t],e[10+t],e[14+t],e[3+t],e[7+t],e[11+t],e[15+t])},H=function(e,t,n){return n.set(e[0+t],e[1+t],e[2+t],e[3+t],e[4+t],e[5+t],e[6+t],e[7+t],e[8+t],e[9+t],e[10+t],e[11+t],e[12+t],e[13+t],e[14+t],e[15+t])},z=function(e){var t,n,i,a,r=Math.sqrt;if(a=e.elements,0!==a[3]||0!==a[7]||0!==a[11]||1!==a[15])throw new Error("Last row isnt [0,0,0,1]");if(t=r(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),n=r(a[4]*a[4]+a[5]*a[5]+a[6]*a[6]),i=r(a[8]*a[8]+a[9]*a[9]+a[10]*a[10]),0.9>t||1.1<t)throw new Error("First column has significant scaling");if(0.9>n||1.1<n)throw new Error("Second column has significant scaling");if(0.9>i||1.1<i)throw new Error("Third column has significant scaling")},Y=function(e){return new THREE.Vector3(e[0],e[1],e[2])},W=Math.PI/180,N.prototype.setLog=N.prototype.setLog,N.prototype.addChachedTextures=N.prototype.addChachedTextures,N.prototype.load=N.prototype.load,N.prototype.parse=N.prototype.parse,"undefined"!==typeof module&&null!==module?module.exports=N:"undefined"!==typeof window&&null!==window&&(window.ColladaLoader2=N)}).call(this);</script><script>THREE.STLLoader=function(){},THREE.STLLoader.prototype={constructor:THREE.STLLoader},THREE.STLLoader.prototype.load=function(a,b){var c=this,d=new XMLHttpRequest;d.addEventListener('load',function(d){if(200===d.target.status||0===d.target.status){var e=c.parse(d.target.response||d.target.responseText);c.dispatchEvent({type:'load',content:e}),b&&b(e)}else c.dispatchEvent({type:'error',message:'Couldn\'t load URL ['+a+']',response:d.target.responseText})},!1),d.addEventListener('progress',function(a){c.dispatchEvent({type:'progress',loaded:a.loaded,total:a.total})},!1),d.addEventListener('error',function(){c.dispatchEvent({type:'error',message:'Couldn\'t load URL ['+a+']'})},!1),d.overrideMimeType('text/plain; charset=x-user-defined'),d.open('GET',a,!0),d.responseType='arraybuffer',d.send(null)},THREE.STLLoader.prototype.parse=function(a){var b=this.ensureBinary(a);return function(){var a,c,d,e;return e=new DataView(b),c=50,d=e.getUint32(80,!0),a=84+d*c,a===e.byteLength}()?this.parseBinary(b):this.parseASCII(this.ensureString(a))},THREE.STLLoader.prototype.parseBinary=function(a){var b,c,d,e,f,g,h,i,j,k,l;for(e=new DataView(a),d=e.getUint32(80,!0),c=new THREE.Geometry,i=84,j=50,b=0;b<d;b++){for(k=i+b*j,g=new THREE.Vector3(e.getFloat32(k,!0),e.getFloat32(k+4,!0),e.getFloat32(k+8,!0)),h=1;3>=h;h++)l=k+12*h,c.vertices.push(new THREE.Vector3(e.getFloat32(l,!0),e.getFloat32(l+4,!0),e.getFloat32(l+8,!0)));f=c.vertices.length,c.faces.push(new THREE.Face3(f-3,f-2,f-1,g))}return c.computeCentroids(),c.computeBoundingSphere(),c},THREE.STLLoader.prototype.parseASCII=function(a){var b,c,d,e,f,g,h,i;for(b=new THREE.Geometry,e=/facet([\s\S]*?)endfacet/g;null!=(h=e.exec(a));){for(i=h[0],f=/normal[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!=(h=f.exec(i));)d=new THREE.Vector3(parseFloat(h[1]),parseFloat(h[3]),parseFloat(h[5]));for(g=/vertex[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!=(h=g.exec(i));)b.vertices.push(new THREE.Vector3(parseFloat(h[1]),parseFloat(h[3]),parseFloat(h[5])));c=b.vertices.length,b.faces.push(new THREE.Face3(c-3,c-2,c-1,d))}return b.computeCentroids(),b.computeBoundingBox(),b.computeBoundingSphere(),b},THREE.STLLoader.prototype.ensureString=function(a){if('string'!==typeof a){for(var b=new Uint8Array(a),c='',d=0;d<a.byteLength;d++)c+=String.fromCharCode(b[d]);return c}return a},THREE.STLLoader.prototype.ensureBinary=function(a){if('string'===typeof a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=255&a.charCodeAt(c);return b.buffer||b}return a},THREE.EventDispatcher.prototype.apply(THREE.STLLoader.prototype),'undefined'===typeof DataView&&(DataView=function(a,b,c){this.buffer=a,this.byteOffset=b||0,this.byteLength=c||a.byteLength||a.length,this._isString='string'===typeof a},DataView.prototype={_getCharCodes:function(a,b,c){b=b||0,c=c||a.length;for(var d=b+c,e=[],f=b;f<d;f++)e.push(255&a.charCodeAt(f));return e},_getBytes:function(a,b,c){var d;if(void 0===c&&(c=this._littleEndian),b=void 0===b?this.byteOffset:this.byteOffset+b,void 0===a&&(a=this.byteLength-b),'number'!==typeof b)throw new TypeError('DataView byteOffset is not a number');if(0>a||b+a>this.byteLength)throw new Error('DataView length or (byteOffset+length) value is out of bounds');return d=this.isString?this._getCharCodes(this.buffer,b,b+a):this.buffer.slice(b,b+a),!c&&1<a&&(!(d instanceof Array)&&(d=Array.prototype.slice.call(d)),d.reverse()),d},getFloat64:function(a,c){var d=this._getBytes(8,a,c),b=1-2*(d[7]>>7),e=((255&d[7]<<1)<<3|d[6]>>4)-1023,f=281474976710656*(15&d[6])+1099511627776*d[5]+4294967296*d[4]+16777216*d[3]+65536*d[2]+256*d[1]+d[0];return 1024===e?0===f?b*Infinity:NaN:-1023===e?5e-324*(b*f):b*(1+2.220446049250313e-16*f)*Math.pow(2,e)},getFloat32:function(a,c){var d=this._getBytes(4,a,c),b=1-2*(d[3]>>7),e=(255&d[3]<<1|d[2]>>7)-127,f=(127&d[2])<<16|d[1]<<8|d[0];return 128===e?0===f?b*Infinity:NaN:-127===e?1.401298464324817e-45*(b*f):b*(1+1.1920928955078125e-7*f)*Math.pow(2,e)},getInt32:function(a,c){var d=this._getBytes(4,a,c);return d[3]<<24|d[2]<<16|d[1]<<8|d[0]},getUint32:function(a,b){return this.getInt32(a,b)>>>0},getInt16:function(a,b){return this.getUint16(a,b)<<16>>16},getUint16:function(a,c){var d=this._getBytes(2,a,c);return d[1]<<8|d[0]},getInt8:function(a){return this.getUint8(a)<<24>>24},getUint8:function(a){return this._getBytes(1,a)[0]}});</script><script>var ROS3D=ROS3D||{REVISION:'0.17.0-SNAPSHOT'};ROS3D.MARKER_ARROW=0,ROS3D.MARKER_CUBE=1,ROS3D.MARKER_SPHERE=2,ROS3D.MARKER_CYLINDER=3,ROS3D.MARKER_LINE_STRIP=4,ROS3D.MARKER_LINE_LIST=5,ROS3D.MARKER_CUBE_LIST=6,ROS3D.MARKER_SPHERE_LIST=7,ROS3D.MARKER_POINTS=8,ROS3D.MARKER_TEXT_VIEW_FACING=9,ROS3D.MARKER_MESH_RESOURCE=10,ROS3D.MARKER_TRIANGLE_LIST=11,ROS3D.INTERACTIVE_MARKER_KEEP_ALIVE=0,ROS3D.INTERACTIVE_MARKER_POSE_UPDATE=1,ROS3D.INTERACTIVE_MARKER_MENU_SELECT=2,ROS3D.INTERACTIVE_MARKER_BUTTON_CLICK=3,ROS3D.INTERACTIVE_MARKER_MOUSE_DOWN=4,ROS3D.INTERACTIVE_MARKER_MOUSE_UP=5,ROS3D.INTERACTIVE_MARKER_NONE=0,ROS3D.INTERACTIVE_MARKER_MENU=1,ROS3D.INTERACTIVE_MARKER_BUTTON=2,ROS3D.INTERACTIVE_MARKER_MOVE_AXIS=3,ROS3D.INTERACTIVE_MARKER_MOVE_PLANE=4,ROS3D.INTERACTIVE_MARKER_ROTATE_AXIS=5,ROS3D.INTERACTIVE_MARKER_MOVE_ROTATE=6,ROS3D.INTERACTIVE_MARKER_INHERIT=0,ROS3D.INTERACTIVE_MARKER_FIXED=1,ROS3D.INTERACTIVE_MARKER_VIEW_FACING=2,ROS3D.COLLADA_LOADER=1,ROS3D.COLLADA_LOADER_2=2,ROS3D.makeColorMaterial=function(e,t,o,r){var i=new THREE.Color;return i.setRGB(e,t,o),0.99>=r?new THREE.MeshBasicMaterial({color:i.getHex(),opacity:r+0.1,transparent:!0,depthWrite:!0,blendSrc:THREE.SrcAlphaFactor,blendDst:THREE.OneMinusSrcAlphaFactor,blendEquation:THREE.ReverseSubtractEquation,blending:THREE.NormalBlending}):new THREE.MeshPhongMaterial({color:i.getHex(),opacity:r,blending:THREE.NormalBlending})},ROS3D.intersectPlane=function(e,t,o){var r=new THREE.Vector3,a=new THREE.Vector3;r.subVectors(t,e.origin);var i=e.direction.dot(o);if(!(Math.abs(i)<e.precision)){var s=o.dot(r)/i;return a.addVectors(e.origin,e.direction.clone().multiplyScalar(s)),a}},ROS3D.findClosestPoint=function(e,t){var o=new THREE.Vector3;o.subVectors(e.origin,t.origin);var r=t.direction.clone(),a=e.direction.clone(),i=o.dot(r),s=r.dot(a),n=o.dot(a),c=r.dot(r),p=a.dot(a),l=p*c-s*s;if(!(1e-4>=Math.abs(l))){return(i*s-n*c)/l}},ROS3D.closestAxisPoint=function(e,r,a){var i=new THREE.Projector,s=e.origin.clone();i.projectVector(s,r);var o=e.direction.clone().add(e.origin);i.projectVector(o,r);var n=o.clone().sub(s),c=new THREE.Vector2,p=c.subVectors(a,s).dot(n)/n.dot(n),t=new THREE.Vector2;t.addVectors(s,n.clone().multiplyScalar(p));var l=new THREE.Vector3(t.x,t.y,0.5);i.unprojectVector(l,r);var d=new THREE.Ray(r.position,l.sub(r.position).normalize());return ROS3D.findClosestPoint(e,d)},ROS3D.DepthCloud=function(e){e=e||{},THREE.Object3D.call(this),this.url=e.url,this.streamType=e.streamType||'vp8',this.f=e.f||526,this.pointSize=e.pointSize||3,this.width=e.width||1024,this.height=e.height||1024,this.whiteness=e.whiteness||0,this.varianceThreshold=e.varianceThreshold||1.6667e-5;this.isMjpeg='mjpeg'===this.streamType.toLowerCase(),this.video=document.createElement(this.isMjpeg?'img':'video'),this.video.addEventListener(this.isMjpeg?'load':'loadedmetadata',this.metaLoaded.bind(this),!1),this.isMjpeg||(this.video.loop=!0),this.video.src=this.url,this.video.crossOrigin='Anonymous',this.video.setAttribute('crossorigin','Anonymous'),this.vertex_shader='uniform sampler2D map;\n\nuniform float width;\nuniform float height;\nuniform float nearClipping, farClipping;\n\nuniform float pointSize;\nuniform float zOffset;\n\nuniform float focallength;\n\nvarying vec2 vUvP;\nvarying vec2 colorP;\n\nvarying float depthVariance;\nvarying float maskVal;\n\nfloat sampleDepth(vec2 pos)\n  {\n    float depth;\n    \n    vec2 vUv = vec2( pos.x / (width*2.0), pos.y / (height*2.0)+0.5 );\n    vec2 vUv2 = vec2( pos.x / (width*2.0)+0.5, pos.y / (height*2.0)+0.5 );\n    \n    vec4 depthColor = texture2D( map, vUv );\n    \n    depth = ( depthColor.r + depthColor.g + depthColor.b ) / 3.0 ;\n    \n    if (depth>0.99)\n    {\n      vec4 depthColor2 = texture2D( map, vUv2 );\n      float depth2 = ( depthColor2.r + depthColor2.g + depthColor2.b ) / 3.0 ;\n      depth = 0.99+depth2;\n    }\n    \n    return depth;\n  }\n\nfloat median(float a, float b, float c)\n  {\n    float r=a;\n    \n    if ( (a<b) && (b<c) )\n    {\n      r = b;\n    }\n    if ( (a<c) && (c<b) )\n    {\n      r = c;\n    }\n    return r;\n  }\n\nfloat variance(float d1, float d2, float d3, float d4, float d5, float d6, float d7, float d8, float d9)\n  {\n    float mean = (d1 + d2 + d3 + d4 + d5 + d6 + d7 + d8 + d9) / 9.0;\n    float t1 = (d1-mean);\n    float t2 = (d2-mean);\n    float t3 = (d3-mean);\n    float t4 = (d4-mean);\n    float t5 = (d5-mean);\n    float t6 = (d6-mean);\n    float t7 = (d7-mean);\n    float t8 = (d8-mean);\n    float t9 = (d9-mean);\n    float v = (t1*t1+t2*t2+t3*t3+t4*t4+t5*t5+t6*t6+t7*t7+t8*t8+t9*t9)/9.0;\n    return v;\n  }\n\nvec2 decodeDepth(vec2 pos)\n  {\n    vec2 ret;\n    \n    \n    float depth1 = sampleDepth(vec2(position.x-1.0, position.y-1.0));\n    float depth2 = sampleDepth(vec2(position.x, position.y-1.0));\n    float depth3 = sampleDepth(vec2(position.x+1.0, position.y-1.0));\n    float depth4 = sampleDepth(vec2(position.x-1.0, position.y));\n    float depth5 = sampleDepth(vec2(position.x, position.y));\n    float depth6 = sampleDepth(vec2(position.x+1.0, position.y));\n    float depth7 = sampleDepth(vec2(position.x-1.0, position.y+1.0));\n    float depth8 = sampleDepth(vec2(position.x, position.y+1.0));\n    float depth9 = sampleDepth(vec2(position.x+1.0, position.y+1.0));\n    \n    float median1 = median(depth1, depth2, depth3);\n    float median2 = median(depth4, depth5, depth6);\n    float median3 = median(depth7, depth8, depth9);\n    \n    ret.x = median(median1, median2, median3);\n    ret.y = variance(depth1, depth2, depth3, depth4, depth5, depth6, depth7, depth8, depth9);\n    \n    return ret;\n    \n  }\n\n\nvoid main() {\n  \n  vUvP = vec2( position.x / (width*2.0), position.y / (height*2.0)+0.5 );\n  colorP = vec2( position.x / (width*2.0)+0.5 , position.y / (height*2.0)  );\n  \n  vec4 pos = vec4(0.0,0.0,0.0,0.0);\n  depthVariance = 0.0;\n  \n  if ( (vUvP.x<0.0)|| (vUvP.x>0.5) || (vUvP.y<0.5) || (vUvP.y>0.0))\n  {\n    vec2 smp = decodeDepth(vec2(position.x, position.y));\n    float depth = smp.x;\n    depthVariance = smp.y;\n    \n    float z = -depth;\n    \n    pos = vec4(\n      ( position.x / width - 0.5 ) * z * (1000.0/focallength) * -1.0,\n      ( position.y / height - 0.5 ) * z * (1000.0/focallength),\n      (- z + zOffset / 1000.0) * 2.0,\n      1.0);\n    \n    vec2 maskP = vec2( position.x / (width*2.0), position.y / (height*2.0)  );\n    vec4 maskColor = texture2D( map, maskP );\n    maskVal = ( maskColor.r + maskColor.g + maskColor.b ) / 3.0 ;\n  }\n  \n  gl_PointSize = pointSize;\n  gl_Position = projectionMatrix * modelViewMatrix * pos;\n  \n}',this.fragment_shader='uniform sampler2D map;\nuniform float varianceThreshold;\nuniform float whiteness;\n\nvarying vec2 vUvP;\nvarying vec2 colorP;\n\nvarying float depthVariance;\nvarying float maskVal;\n\n\nvoid main() {\n  \n  vec4 color;\n  \n  if ( (depthVariance>varianceThreshold) || (maskVal>0.5) ||(vUvP.x<0.0)|| (vUvP.x>0.5) || (vUvP.y<0.5) || (vUvP.y>1.0))\n  {  \n    discard;\n  }\n  else \n  {\n    color = texture2D( map, colorP );\n    \n    float fader = whiteness /100.0;\n    \n    color.r = color.r * (1.0-fader)+ fader;\n    \n    color.g = color.g * (1.0-fader)+ fader;\n    \n    color.b = color.b * (1.0-fader)+ fader;\n    \n    color.a = 1.0;//smoothstep( 20000.0, -20000.0, gl_FragCoord.z / gl_FragCoord.w );\n  }\n  \n  gl_FragColor = vec4( color.r, color.g, color.b, color.a );\n  \n}'},ROS3D.DepthCloud.prototype.__proto__=THREE.Object3D.prototype,ROS3D.DepthCloud.prototype.metaLoaded=function(){this.metaLoaded=!0,this.initStreamer()},ROS3D.DepthCloud.prototype.initStreamer=function(){if(this.metaLoaded){this.texture=new THREE.Texture(this.video),this.geometry=new THREE.Geometry;for(var e,t=0,o=this.width*this.height;t<o;t++)e=new THREE.Vector3,e.x=t%this.width,e.y=Math.floor(t/this.width),this.geometry.vertices.push(e);this.material=new THREE.ShaderMaterial({uniforms:{map:{type:'t',value:this.texture},width:{type:'f',value:this.width},height:{type:'f',value:this.height},focallength:{type:'f',value:this.f},pointSize:{type:'f',value:this.pointSize},zOffset:{type:'f',value:0},whiteness:{type:'f',value:this.whiteness},varianceThreshold:{type:'f',value:this.varianceThreshold}},vertexShader:this.vertex_shader,fragmentShader:this.fragment_shader}),this.mesh=new THREE.ParticleSystem(this.geometry,this.material),this.mesh.position.x=0,this.mesh.position.y=0,this.add(this.mesh);var r=this;setInterval(function(){(r.isMjpeg||r.video.readyState===r.video.HAVE_ENOUGH_DATA)&&(r.texture.needsUpdate=!0)},1e3/30)}},ROS3D.DepthCloud.prototype.startStream=function(){this.isMjpeg||this.video.play()},ROS3D.DepthCloud.prototype.stopStream=function(){this.isMjpeg||this.video.pause()},ROS3D.InteractiveMarker=function(e){THREE.Object3D.call(this),THREE.EventDispatcher.call(this);var t=this;e=e||{};var o=e.handle;this.name=o.name;var r=e.camera,a=e.path||'/',i=e.loader||ROS3D.COLLADA_LOADER_2;this.dragging=!1,this.onServerSetPose({pose:o.pose}),this.dragStart={position:new THREE.Vector3,orientation:new THREE.Quaternion,positionWorld:new THREE.Vector3,orientationWorld:new THREE.Quaternion,event3d:{}},o.controls.forEach(function(e){t.add(new ROS3D.InteractiveMarkerControl({parent:t,handle:o,message:e,camera:r,path:a,loader:i}))}),0<o.menuEntries.length&&(this.menu=new ROS3D.InteractiveMarkerMenu({menuEntries:o.menuEntries,menuFontSize:o.menuFontSize}),this.menu.addEventListener('menu-select',function(e){t.dispatchEvent(e)}))},ROS3D.InteractiveMarker.prototype.__proto__=THREE.Object3D.prototype,ROS3D.InteractiveMarker.prototype.showMenu=function(e,t){this.menu&&this.menu.show(e,t)},ROS3D.InteractiveMarker.prototype.moveAxis=function(e,o,r){if(this.dragging){var a=e.currentControlOri,i=o.clone().applyQuaternion(a),s=this.dragStart.event3d.intersection.point,n=i.clone().applyQuaternion(this.dragStart.orientationWorld.clone()),c=new THREE.Ray(s,n),l=ROS3D.closestAxisPoint(c,r.camera,r.mousePos),t=new THREE.Vector3;t.addVectors(this.dragStart.position,i.clone().applyQuaternion(this.dragStart.orientation).multiplyScalar(l)),this.setPosition(e,t),r.stopPropagation()}},ROS3D.InteractiveMarker.prototype.movePlane=function(e,t,o){if(this.dragging){var r=e.currentControlOri,a=t.clone().applyQuaternion(r),i=this.dragStart.event3d.intersection.point,s=a.clone().applyQuaternion(this.dragStart.orientationWorld),n=ROS3D.intersectPlane(o.mouseRay,i,s),c=new THREE.Vector3;c.subVectors(n,i),c.add(this.dragStart.positionWorld),this.setPosition(e,c),o.stopPropagation()}},ROS3D.InteractiveMarker.prototype.rotateAxis=function(e,t,o){var r=Math.atan2;if(this.dragging){e.updateMatrixWorld();var a=e.currentControlOri,i=a.clone().multiply(t.clone()),s=new THREE.Vector3(1,0,0).applyQuaternion(i),n=this.dragStart.event3d.intersection.point,c=s.applyQuaternion(this.dragStart.orientationWorld),p=ROS3D.intersectPlane(o.mouseRay,n,c),l=new THREE.Ray(this.dragStart.positionWorld,c),d=ROS3D.intersectPlane(l,n,c),u=this.dragStart.orientationWorld.clone().multiply(i),m=u.clone().inverse();p.sub(d),p.applyQuaternion(m);var h=this.dragStart.event3d.intersection.point.clone();h.sub(d),h.applyQuaternion(m);var g=r(p.y,p.z),b=r(h.y,h.z),y=new THREE.Quaternion;y.setFromAxisAngle(s,b-g),this.setOrientation(e,y.multiply(this.dragStart.orientationWorld)),o.stopPropagation()}},ROS3D.InteractiveMarker.prototype.feedbackEvent=function(e,t){this.dispatchEvent({type:e,position:this.position.clone(),orientation:this.quaternion.clone(),controlName:t.name})},ROS3D.InteractiveMarker.prototype.startDrag=function(e,t){if(0===t.domEvent.button){t.stopPropagation(),this.dragging=!0,this.updateMatrixWorld(!0);var o=new THREE.Vector3;this.matrixWorld.decompose(this.dragStart.positionWorld,this.dragStart.orientationWorld,o),this.dragStart.position=this.position.clone(),this.dragStart.orientation=this.quaternion.clone(),this.dragStart.event3d=t,this.feedbackEvent('user-mousedown',e)}},ROS3D.InteractiveMarker.prototype.stopDrag=function(e,t){0===t.domEvent.button&&(t.stopPropagation(),this.dragging=!1,this.dragStart.event3d={},this.onServerSetPose(this.bufferedPoseEvent),this.bufferedPoseEvent=void 0,this.feedbackEvent('user-mouseup',e))},ROS3D.InteractiveMarker.prototype.buttonClick=function(e,t){t.stopPropagation(),this.feedbackEvent('user-button-click',e)},ROS3D.InteractiveMarker.prototype.setPosition=function(e,t){this.position=t,this.feedbackEvent('user-pose-change',e)},ROS3D.InteractiveMarker.prototype.setOrientation=function(e,t){t.normalize(),this.quaternion=t,this.feedbackEvent('user-pose-change',e)},ROS3D.InteractiveMarker.prototype.onServerSetPose=function(e){if(e!==void 0)if(this.dragging)this.bufferedPoseEvent=e;else{var t=e.pose;this.position.x=t.position.x,this.position.y=t.position.y,this.position.z=t.position.z,this.quaternion=new THREE.Quaternion(t.orientation.x,t.orientation.y,t.orientation.z,t.orientation.w),this.updateMatrixWorld(!0)}},ROS3D.InteractiveMarker.prototype.dispose=function(){var e=this;this.children.forEach(function(t){t.children.forEach(function(e){e.dispose(),t.remove(e)}),e.remove(t)})},THREE.EventDispatcher.prototype.apply(ROS3D.InteractiveMarker.prototype),ROS3D.InteractiveMarkerClient=function(e){this;e=e||{},this.ros=e.ros,this.tfClient=e.tfClient,this.topicName=e.topic,this.path=e.path||'/',this.camera=e.camera,this.rootObject=e.rootObject||new THREE.Object3D,this.loader=e.loader||ROS3D.COLLADA_LOADER_2,this.menuFontSize=e.menuFontSize||'0.8em',this.interactiveMarkers={},this.updateTopic=null,this.feedbackTopic=null,this.topicName&&this.subscribe(this.topicName)},ROS3D.InteractiveMarkerClient.prototype.subscribe=function(e){this.unsubscribe(),this.updateTopic=new ROSLIB.Topic({ros:this.ros,name:e+'/tunneled/update',messageType:'visualization_msgs/InteractiveMarkerUpdate',compression:'png'}),this.updateTopic.subscribe(this.processUpdate.bind(this)),this.feedbackTopic=new ROSLIB.Topic({ros:this.ros,name:e+'/feedback',messageType:'visualization_msgs/InteractiveMarkerFeedback',compression:'png'}),this.feedbackTopic.advertise(),this.initService=new ROSLIB.Service({ros:this.ros,name:e+'/tunneled/get_init',serviceType:'demo_interactive_markers/GetInit'});var t=new ROSLIB.ServiceRequest({});this.initService.callService(t,this.processInit.bind(this))},ROS3D.InteractiveMarkerClient.prototype.unsubscribe=function(){for(var e in this.updateTopic&&this.updateTopic.unsubscribe(),this.feedbackTopic&&this.feedbackTopic.unadvertise(),this.interactiveMarkers)this.eraseIntMarker(e);this.interactiveMarkers={}},ROS3D.InteractiveMarkerClient.prototype.processInit=function(e){var t=e.msg;for(var o in t.erases=[],this.interactiveMarkers)t.erases.push(o);t.poses=[],this.processUpdate(t)},ROS3D.InteractiveMarkerClient.prototype.processUpdate=function(e){var t=this;e.erases.forEach(function(e){t.eraseIntMarker(e)}),e.poses.forEach(function(e){var o=t.interactiveMarkers[e.name];o&&o.setPoseFromServer(e.pose)}),e.markers.forEach(function(e){var o=t.interactiveMarkers[e.name];o&&t.eraseIntMarker(o.name);var r=new ROS3D.InteractiveMarkerHandle({message:e,feedbackTopic:t.feedbackTopic,tfClient:t.tfClient,menuFontSize:t.menuFontSize});t.interactiveMarkers[e.name]=r;var a=new ROS3D.InteractiveMarker({handle:r,camera:t.camera,path:t.path,loader:t.loader});a.name=e.name,t.rootObject.add(a),r.on('pose',function(e){a.onServerSetPose({pose:e})}),a.addEventListener('user-pose-change',r.setPoseFromClientBound),a.addEventListener('user-mousedown',r.onMouseDownBound),a.addEventListener('user-mouseup',r.onMouseUpBound),a.addEventListener('user-button-click',r.onButtonClickBound),a.addEventListener('menu-select',r.onMenuSelectBound),r.subscribeTf()})},ROS3D.InteractiveMarkerClient.prototype.eraseIntMarker=function(e){if(this.interactiveMarkers[e]){var t=this.rootObject.getObjectByName(e);this.rootObject.remove(t);var o=this.interactiveMarkers[e];o.unsubscribeTf(),t.removeEventListener('user-pose-change',o.setPoseFromClientBound),t.removeEventListener('user-mousedown',o.onMouseDownBound),t.removeEventListener('user-mouseup',o.onMouseUpBound),t.removeEventListener('user-button-click',o.onButtonClickBound),t.removeEventListener('menu-select',o.onMenuSelectBound),delete this.interactiveMarkers[e],t.dispose()}},ROS3D.InteractiveMarkerControl=function(e){function t(e){e.stopPropagation()}var o=this;THREE.Object3D.call(this),e=e||{},this.parent=e.parent;var r=e.handle,a=e.message;this.name=a.name,this.camera=e.camera,this.path=e.path||'/',this.loader=e.loader||ROS3D.COLLADA_LOADER_2,this.dragging=!1,this.startMousePos=new THREE.Vector2;var i=new THREE.Quaternion(a.orientation.x,a.orientation.y,a.orientation.z,a.orientation.w);i.normalize();var s=new THREE.Vector3(1,0,0);switch(s.applyQuaternion(i),this.currentControlOri=new THREE.Quaternion,a.interaction_mode){case ROS3D.INTERACTIVE_MARKER_MOVE_AXIS:this.addEventListener('mousemove',this.parent.moveAxis.bind(this.parent,this,s)),this.addEventListener('touchmove',this.parent.moveAxis.bind(this.parent,this,s));break;case ROS3D.INTERACTIVE_MARKER_ROTATE_AXIS:this.addEventListener('mousemove',this.parent.rotateAxis.bind(this.parent,this,i));break;case ROS3D.INTERACTIVE_MARKER_MOVE_PLANE:this.addEventListener('mousemove',this.parent.movePlane.bind(this.parent,this,s));break;case ROS3D.INTERACTIVE_MARKER_BUTTON:this.addEventListener('click',this.parent.buttonClick.bind(this.parent,this));break;default:}a.interaction_mode!==ROS3D.INTERACTIVE_MARKER_NONE&&(this.addEventListener('mousedown',this.parent.startDrag.bind(this.parent,this)),this.addEventListener('mouseup',this.parent.stopDrag.bind(this.parent,this)),this.addEventListener('contextmenu',this.parent.showMenu.bind(this.parent,this)),this.addEventListener('mouseup',function(e){0===o.startMousePos.distanceToSquared(e.mousePos)&&(e.type='contextmenu',o.dispatchEvent(e))}),this.addEventListener('mouseover',t),this.addEventListener('mouseout',t),this.addEventListener('click',t),this.addEventListener('mousedown',function(e){o.startMousePos=e.mousePos}),this.addEventListener('touchstart',function(e){1===e.domEvent.touches.length&&(e.type='mousedown',e.domEvent.button=0,o.dispatchEvent(e))}),this.addEventListener('touchmove',function(e){1===e.domEvent.touches.length&&(e.type='mousemove',e.domEvent.button=0,o.dispatchEvent(e))}),this.addEventListener('touchend',function(e){0===e.domEvent.touches.length&&(e.domEvent.button=0,e.type='mouseup',o.dispatchEvent(e),e.type='click',o.dispatchEvent(e))}));var n=new THREE.Quaternion,c=this.parent.position.clone().multiplyScalar(-1);switch(a.orientation_mode){case ROS3D.INTERACTIVE_MARKER_INHERIT:n=this.parent.quaternion.clone().inverse(),this.updateMatrixWorld=function(e){ROS3D.InteractiveMarkerControl.prototype.updateMatrixWorld.call(o,e),o.currentControlOri.copy(o.quaternion),o.currentControlOri.normalize()};break;case ROS3D.INTERACTIVE_MARKER_FIXED:this.updateMatrixWorld=function(e){o.quaternion=o.parent.quaternion.clone().inverse(),o.updateMatrix(),o.matrixWorldNeedsUpdate=!0,ROS3D.InteractiveMarkerControl.prototype.updateMatrixWorld.call(o,e),o.currentControlOri.copy(o.quaternion)};break;case ROS3D.INTERACTIVE_MARKER_VIEW_FACING:var p=a.independent_marker_orientation;this.updateMatrixWorld=function(e){o.camera.updateMatrixWorld();var t=new THREE.Matrix4().extractRotation(o.camera.matrixWorld),r=new THREE.Matrix4,a=0.5*Math.PI,i=new THREE.Euler(-a,0,a);r.makeRotationFromEuler(i);var s=new THREE.Matrix4;s.getInverse(o.parent.matrixWorld),t.multiplyMatrices(t,r),t.multiplyMatrices(s,t),o.currentControlOri.setFromRotationMatrix(t),p||(o.quaternion.copy(o.currentControlOri),o.updateMatrix(),o.matrixWorldNeedsUpdate=!0),ROS3D.InteractiveMarkerControl.prototype.updateMatrixWorld.call(o,e)};break;default:console.error('Unkown orientation mode: '+a.orientation_mode);}var l=new ROSLIB.TFClient({ros:r.tfClient.ros,fixedFrame:r.message.header.frame_id,serverName:r.tfClient.serverName});a.markers.forEach(function(e){var t=function(t){var r=new ROS3D.Marker({message:e,path:o.path,loader:o.loader});if(null!==t){var a=new ROSLIB.Pose({position:r.position,orientation:r.quaternion});a.applyTransform(new ROSLIB.Transform(t));var i=new ROS3D.Marker({message:e,path:o.path,loader:o.loader});i.position.add(c),i.position.applyQuaternion(n),i.quaternion.multiplyQuaternions(n,i.quaternion);var s=new THREE.Vector3(i.position.x,i.position.y,i.position.z),p=new ROSLIB.Transform({translation:s,orientation:i.quaternion});a.applyTransform(p),r.setPose(a),r.updateMatrixWorld(),l.unsubscribe(e.header.frame_id)}o.add(r)};''===e.header.frame_id?t(null):l.subscribe(e.header.frame_id,t)})},ROS3D.InteractiveMarkerControl.prototype.__proto__=THREE.Object3D.prototype,ROS3D.InteractiveMarkerHandle=function(e){e=e||{},this.message=e.message,this.feedbackTopic=e.feedbackTopic,this.tfClient=e.tfClient,this.menuFontSize=e.menuFontSize||'0.8em',this.name=this.message.name,this.header=this.message.header,this.controls=this.message.controls,this.menuEntries=this.message.menu_entries,this.dragging=!1,this.timeoutHandle=null,this.tfTransform=new ROSLIB.Transform,this.pose=new ROSLIB.Pose,this.setPoseFromClientBound=this.setPoseFromClient.bind(this),this.onMouseDownBound=this.onMouseDown.bind(this),this.onMouseUpBound=this.onMouseUp.bind(this),this.onButtonClickBound=this.onButtonClick.bind(this),this.onMenuSelectBound=this.onMenuSelect.bind(this),this.setPoseFromServer(this.message.pose),this.tfUpdateBound=this.tfUpdate.bind(this)},ROS3D.InteractiveMarkerHandle.prototype.__proto__=EventEmitter2.prototype,ROS3D.InteractiveMarkerHandle.prototype.subscribeTf=function(){0===this.message.header.stamp.secs&&0===this.message.header.stamp.nsecs&&this.tfClient.subscribe(this.message.header.frame_id,this.tfUpdateBound)},ROS3D.InteractiveMarkerHandle.prototype.unsubscribeTf=function(){this.tfClient.unsubscribe(this.message.header.frame_id,this.tfUpdateBound)},ROS3D.InteractiveMarkerHandle.prototype.emitServerPoseUpdate=function(){var e=new ROSLIB.Pose(this.pose);e.applyTransform(this.tfTransform),this.emit('pose',e)},ROS3D.InteractiveMarkerHandle.prototype.setPoseFromServer=function(e){this.pose=new ROSLIB.Pose(e),this.emitServerPoseUpdate()},ROS3D.InteractiveMarkerHandle.prototype.tfUpdate=function(e){this.tfTransform=new ROSLIB.Transform(e),this.emitServerPoseUpdate()},ROS3D.InteractiveMarkerHandle.prototype.setPoseFromClient=function(e){this.pose=new ROSLIB.Pose(e);var t=this.tfTransform.clone();t.rotation.invert(),t.translation.multiplyQuaternion(t.rotation),t.translation.x*=-1,t.translation.y*=-1,t.translation.z*=-1,this.pose.applyTransform(t),this.sendFeedback(ROS3D.INTERACTIVE_MARKER_POSE_UPDATE,void 0,0,e.controlName),this.dragging&&(this.timeoutHandle&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(this.setPoseFromClient.bind(this,e),250))},ROS3D.InteractiveMarkerHandle.prototype.onButtonClick=function(e){this.sendFeedback(ROS3D.INTERACTIVE_MARKER_BUTTON_CLICK,e.clickPosition,0,e.controlName)},ROS3D.InteractiveMarkerHandle.prototype.onMouseDown=function(e){this.sendFeedback(ROS3D.INTERACTIVE_MARKER_MOUSE_DOWN,e.clickPosition,0,e.controlName),this.dragging=!0},ROS3D.InteractiveMarkerHandle.prototype.onMouseUp=function(e){this.sendFeedback(ROS3D.INTERACTIVE_MARKER_MOUSE_UP,e.clickPosition,0,e.controlName),this.dragging=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)},ROS3D.InteractiveMarkerHandle.prototype.onMenuSelect=function(e){this.sendFeedback(ROS3D.INTERACTIVE_MARKER_MENU_SELECT,void 0,e.id,e.controlName)},ROS3D.InteractiveMarkerHandle.prototype.sendFeedback=function(e,t,o,r){var a=t!==void 0;t=t||{x:0,y:0,z:0};var i={header:this.header,client_id:this.clientID,marker_name:this.name,control_name:r,event_type:e,pose:this.pose,mouse_point:t,mouse_point_valid:a,menu_entry_id:o};this.feedbackTopic.publish(i)},ROS3D.InteractiveMarkerMenu=function(e){function t(e,t){this.dispatchEvent({type:'menu-select',domEvent:t,id:e.id,controlName:this.controlName}),this.hide(t)}function o(e,a){var s=document.createElement('ul');e.appendChild(s);for(var n=a.children,c=0;c<n.length;c++){var i=document.createElement('li'),p=document.createElement('div');p.appendChild(document.createTextNode(n[c].title)),s.appendChild(i),i.appendChild(p),0<n[c].children.length?(o(i,n[c]),p.addEventListener('click',r.hide.bind(r)),p.addEventListener('touchstart',r.hide.bind(r))):(p.addEventListener('click',t.bind(r,n[c])),p.addEventListener('touchstart',t.bind(r,n[c])),p.className='default-interactive-marker-menu-entry')}}var r=this;e=e||{};var a=e.menuEntries,s=e.className||'default-interactive-marker-menu',n=e.entryClassName||'default-interactive-marker-menu-entry',c=e.overlayClassName||'default-interactive-marker-overlay',p=e.menuFontSize||'0.8em',l=[];if(l[0]={children:[]},THREE.EventDispatcher.call(this),null===document.getElementById('default-interactive-marker-menu-css')){var d=document.createElement('style');d.id='default-interactive-marker-menu-css',d.type='text/css',d.innerHTML='.default-interactive-marker-menu {background-color: #444444;border: 1px solid #888888;border: 1px solid #888888;padding: 0px 0px 0px 0px;color: #FFFFFF;font-family: sans-serif;font-size: '+p+';z-index: 1002;}.default-interactive-marker-menu ul {padding: 0px 0px 5px 0px;margin: 0px;list-style-type: none;}.default-interactive-marker-menu ul li div {-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;cursor: default;padding: 3px 10px 3px 10px;}.default-interactive-marker-menu-entry:hover {  background-color: #666666;  cursor: pointer;}.default-interactive-marker-menu ul ul {  font-style: italic;  padding-left: 10px;}.default-interactive-marker-overlay {  position: absolute;  top: 0%;  left: 0%;  width: 100%;  height: 100%;  background-color: black;  z-index: 1001;  -moz-opacity: 0.0;  opacity: .0;  filter: alpha(opacity = 0);}',document.getElementsByTagName('head')[0].appendChild(d)}this.menuDomElem=document.createElement('div'),this.menuDomElem.style.position='absolute',this.menuDomElem.className=s,this.menuDomElem.addEventListener('contextmenu',function(e){e.preventDefault()}),this.overlayDomElem=document.createElement('div'),this.overlayDomElem.className=c,this.hideListener=this.hide.bind(this),this.overlayDomElem.addEventListener('contextmenu',this.hideListener),this.overlayDomElem.addEventListener('click',this.hideListener),this.overlayDomElem.addEventListener('touchstart',this.hideListener);var u,i,m;for(u=0;u<a.length;u++)i=a[u],m=i.id,l[m]={title:i.title,id:m,children:[]};for(u=0;u<a.length;u++){i=a[u],m=i.id;var h=l[m],g=l[i.parent_id];g.children.push(h)}o(this.menuDomElem,l[0])},ROS3D.InteractiveMarkerMenu.prototype.show=function(e,t){t&&t.preventDefault&&t.preventDefault(),this.controlName=e.name,t.domEvent.changedTouches===void 0?(this.menuDomElem.style.left=t.domEvent.clientX+'px',this.menuDomElem.style.top=t.domEvent.clientY+'px'):(this.menuDomElem.style.left=t.domEvent.changedTouches[0].pageX+'px',this.menuDomElem.style.top=t.domEvent.changedTouches[0].pageY+'px'),document.body.appendChild(this.overlayDomElem),document.body.appendChild(this.menuDomElem)},ROS3D.InteractiveMarkerMenu.prototype.hide=function(e){e&&e.preventDefault&&e.preventDefault(),document.body.removeChild(this.overlayDomElem),document.body.removeChild(this.menuDomElem)},THREE.EventDispatcher.prototype.apply(ROS3D.InteractiveMarkerMenu.prototype),ROS3D.Marker=function(e){var t=Math.round,o=Math.ceil;e=e||{};var r=e.path||'/',a=e.message,s=e.loader||ROS3D.COLLADA_LOADER_2;'/'!==r.substr(r.length-1)&&(r+='/'),THREE.Object3D.call(this),this.msgScale=a.scale?[a.scale.x,a.scale.y,a.scale.z]:[1,1,1],this.msgColor=a.color,this.msgMesh=void 0,this.setPose(a.pose);var n=ROS3D.makeColorMaterial(this.msgColor.r,this.msgColor.g,this.msgColor.b,this.msgColor.a);switch(a.type){case ROS3D.MARKER_ARROW:var l,d=a.scale.x,u=0.23*d,m=a.scale.y,h=0.5*m,g=null;if(2===a.points.length){g=new THREE.Vector3(a.points[0].x,a.points[0].y,a.points[0].z);var b=new THREE.Vector3(a.points[1].x,a.points[1].y,a.points[1].z);l=g.clone().negate().add(b),d=l.length(),m=a.scale.y,h=a.scale.x,0!==a.scale.z&&(u=a.scale.z)}this.add(new ROS3D.Arrow({direction:l,origin:g,length:d,headLength:u,shaftDiameter:h,headDiameter:m,material:n}));break;case ROS3D.MARKER_CUBE:var y=new THREE.CubeGeometry(a.scale.x,a.scale.y,a.scale.z);this.add(new THREE.Mesh(y,n));break;case ROS3D.MARKER_SPHERE:var f=new THREE.SphereGeometry(0.5),E=new THREE.Mesh(f,n);E.scale.x=a.scale.x,E.scale.y=a.scale.y,E.scale.z=a.scale.z,this.add(E);break;case ROS3D.MARKER_CYLINDER:var _=new THREE.CylinderGeometry(0.5,0.5,1,16,1,!1),M=new THREE.Mesh(_,n);M.quaternion.setFromAxisAngle(new THREE.Vector3(1,0,0),0.5*Math.PI),M.scale=new THREE.Vector3(a.scale.x,a.scale.z,a.scale.y),this.add(M);break;case ROS3D.MARKER_LINE_STRIP:var T,C=new THREE.Geometry,R=new THREE.LineBasicMaterial({size:a.scale.x});for(T=0;T<a.points.length;T++){var x=new THREE.Vector3;x.x=a.points[T].x,x.y=a.points[T].y,x.z=a.points[T].z,C.vertices.push(x)}if(a.colors.length===a.points.length)for(R.vertexColors=!0,T=0;T<a.points.length;T++){var O=new THREE.Color;O.setRGB(a.colors[T].r,a.colors[T].g,a.colors[T].b),C.colors.push(O)}else R.color.setRGB(a.color.r,a.color.g,a.color.b);this.add(new THREE.Line(C,R));break;case ROS3D.MARKER_LINE_LIST:var A,I=new THREE.Geometry,k=new THREE.LineBasicMaterial({size:a.scale.x});for(A=0;A<a.points.length;A++){var D=new THREE.Vector3;D.x=a.points[A].x,D.y=a.points[A].y,D.z=a.points[A].z,I.vertices.push(D)}if(a.colors.length===a.points.length)for(k.vertexColors=!0,A=0;A<a.points.length;A++){var v=new THREE.Color;v.setRGB(a.colors[A].r,a.colors[A].g,a.colors[A].b),I.colors.push(v)}else k.color.setRGB(a.color.r,a.color.g,a.color.b);this.add(new THREE.Line(I,k,THREE.LinePieces));break;case ROS3D.MARKER_CUBE_LIST:var c,p,S,P,L=new THREE.Object3D,V=a.points.length,j=V===a.colors.length,N=o(V/1250);for(c=0;c<V;c+=N)p=new THREE.CubeGeometry(a.scale.x,a.scale.y,a.scale.z),S=j?ROS3D.makeColorMaterial(a.colors[c].r,a.colors[c].g,a.colors[c].b,a.colors[c].a):n,P=new THREE.Mesh(p,S),P.position.x=a.points[c].x,P.position.y=a.points[c].y,P.position.z=a.points[c].z,L.add(P);this.add(L);break;case ROS3D.MARKER_SPHERE_LIST:var z,w,U,K,B=new THREE.Object3D,G=a.points.length,H=G===a.colors.length,F=o(G/1250);for(z=0;z<G;z+=F)w=new THREE.SphereGeometry(0.5,8,8),U=H?ROS3D.makeColorMaterial(a.colors[z].r,a.colors[z].g,a.colors[z].b,a.colors[z].a):n,K=new THREE.Mesh(w,U),K.scale.x=a.scale.x,K.scale.y=a.scale.y,K.scale.z=a.scale.z,K.position.x=a.points[z].x,K.position.y=a.points[z].y,K.position.z=a.points[z].z,B.add(K);this.add(B);break;case ROS3D.MARKER_POINTS:var W,i=new THREE.Geometry,q=new THREE.ParticleBasicMaterial({size:a.scale.x});for(W=0;W<a.points.length;W++){var Q=new THREE.Vector3;Q.x=a.points[W].x,Q.y=a.points[W].y,Q.z=a.points[W].z,i.vertices.push(Q)}if(a.colors.length===a.points.length)for(q.vertexColors=!0,W=0;W<a.points.length;W++){var X=new THREE.Color;X.setRGB(a.colors[W].r,a.colors[W].g,a.colors[W].b),i.colors.push(X)}else q.color.setRGB(a.color.r,a.color.g,a.color.b);this.add(new THREE.ParticleSystem(i,q));break;case ROS3D.MARKER_TEXT_VIEW_FACING:if(0<a.text.length){var Y=this.msgColor,Z=document.createElement('canvas'),J=Z.getContext('2d'),$=100,ee='normal '+$+'px sans-serif';J.font=ee;var te=J.measureText(a.text),oe=te.width;Z.width=oe,Z.height=1.5*$,J.font=ee,J.fillStyle='rgba('+t(255*Y.r)+', '+t(255*Y.g)+', '+t(255*Y.b)+', '+Y.a+')',J.textAlign='left',J.textBaseline='middle',J.fillText(a.text,0,Z.height/2);var re=new THREE.Texture(Z);re.needsUpdate=!0;var ae=new THREE.SpriteMaterial({map:re,useScreenCoordinates:!1}),ie=new THREE.Sprite(ae),se=a.scale.x;ie.scale.set(oe/Z.height*se,se,1),this.add(ie)}break;case ROS3D.MARKER_MESH_RESOURCE:var ne=null;(0!==a.color.r||0!==a.color.g||0!==a.color.b||0!==a.color.a)&&(ne=n),this.msgMesh=a.mesh_resource.substr(10);var ce=new ROS3D.MeshResource({path:r,resource:this.msgMesh,material:ne,loader:s});this.add(ce);break;case ROS3D.MARKER_TRIANGLE_LIST:var pe=new ROS3D.TriangleList({material:n,vertices:a.points,colors:a.colors});pe.scale=new THREE.Vector3(a.scale.x,a.scale.y,a.scale.z),this.add(pe);break;default:console.error('Currently unsupported marker type: '+a.type);}},ROS3D.Marker.prototype.__proto__=THREE.Object3D.prototype,ROS3D.Marker.prototype.setPose=function(e){this.position.x=e.position.x,this.position.y=e.position.y,this.position.z=e.position.z,this.quaternion=new THREE.Quaternion(e.orientation.x,e.orientation.y,e.orientation.z,e.orientation.w),this.quaternion.normalize(),this.updateMatrixWorld()},ROS3D.Marker.prototype.update=function(e){var t=Math.abs;if(this.setPose(e.pose),e.color.r!==this.msgColor.r||e.color.g!==this.msgColor.g||e.color.b!==this.msgColor.b||e.color.a!==this.msgColor.a){var o=ROS3D.makeColorMaterial(e.color.r,e.color.g,e.color.b,e.color.a);switch(e.type){case ROS3D.MARKER_LINE_STRIP:case ROS3D.MARKER_LINE_LIST:case ROS3D.MARKER_POINTS:break;case ROS3D.MARKER_ARROW:case ROS3D.MARKER_CUBE:case ROS3D.MARKER_SPHERE:case ROS3D.MARKER_CYLINDER:case ROS3D.MARKER_TRIANGLE_LIST:case ROS3D.MARKER_TEXT_VIEW_FACING:this.traverse(function(e){e instanceof THREE.Mesh&&(e.material=o)});break;case ROS3D.MARKER_MESH_RESOURCE:var r=null;(0!==e.color.r||0!==e.color.g||0!==e.color.b||0!==e.color.a)&&(r=this.colorMaterial),this.traverse(function(e){e instanceof THREE.Mesh&&(e.material=r)});break;case ROS3D.MARKER_CUBE_LIST:case ROS3D.MARKER_SPHERE_LIST:return!1;default:return!1;}this.msgColor=e.color}var a=1e-6<t(this.msgScale[0]-e.scale.x)||1e-6<t(this.msgScale[1]-e.scale.y)||1e-6<t(this.msgScale[2]-e.scale.z);switch(this.msgScale=[e.scale.x,e.scale.y,e.scale.z],e.type){case ROS3D.MARKER_CUBE:case ROS3D.MARKER_SPHERE:case ROS3D.MARKER_CYLINDER:if(a)return!1;break;case ROS3D.MARKER_TEXT_VIEW_FACING:if(a||this.text!==e.text)return!1;break;case ROS3D.MARKER_MESH_RESOURCE:var i=e.mesh_resource.substr(10);if(i!==this.msgMesh)return!1;if(a)return!1;break;case ROS3D.MARKER_ARROW:case ROS3D.MARKER_LINE_STRIP:case ROS3D.MARKER_LINE_LIST:case ROS3D.MARKER_CUBE_LIST:case ROS3D.MARKER_SPHERE_LIST:case ROS3D.MARKER_POINTS:case ROS3D.MARKER_TRIANGLE_LIST:return!1;default:}return!0},ROS3D.Marker.prototype.dispose=function(){this.children.forEach(function(e){e instanceof ROS3D.MeshResource?e.children.forEach(function(t){t.material!==void 0&&t.material.dispose(),t.children.forEach(function(e){e.geometry!==void 0&&e.geometry.dispose(),e.material!==void 0&&e.material.dispose(),t.remove(e)}),e.remove(t)}):(e.geometry!==void 0&&e.geometry.dispose(),e.material!==void 0&&e.material.dispose()),e.parent.remove(e)})},ROS3D.MarkerArrayClient=function(e){e=e||{},this.ros=e.ros,this.topicName=e.topic,this.tfClient=e.tfClient,this.rootObject=e.rootObject||new THREE.Object3D,this.path=e.path||'/',this.loader=e.loader||ROS3D.COLLADA_LOADER_2,this.markers={},this.rosTopic=void 0,this.subscribe()},ROS3D.MarkerArrayClient.prototype.__proto__=EventEmitter2.prototype,ROS3D.MarkerArrayClient.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'visualization_msgs/MarkerArray',compression:'png'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.MarkerArrayClient.prototype.processMessage=function(e){e.markers.forEach(function(e){if(0===e.action){var t=!1;if(e.ns+e.id in this.markers&&(t=this.markers[e.ns+e.id].children[0].update(e),!t&&(this.markers[e.ns+e.id].unsubscribeTf(),this.rootObject.remove(this.markers[e.ns+e.id]))),!t){var o=new ROS3D.Marker({message:e,path:this.path,loader:this.loader});this.markers[e.ns+e.id]=new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:o}),this.rootObject.add(this.markers[e.ns+e.id])}}else if(1===e.action)console.warn('Received marker message with deprecated action identifier "1"');else if(2===e.action)this.markers[e.ns+e.id].unsubscribeTf(),this.rootObject.remove(this.markers[e.ns+e.id]),delete this.markers[e.ns+e.id];else if(3===e.action){for(var r in this.markers)this.markers[r].unsubscribeTf(),this.rootObject.remove(this.markers[r]);this.markers={}}else console.warn('Received marker message with unknown action identifier "'+e.action+'"')}.bind(this)),this.emit('change')},ROS3D.MarkerArrayClient.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.MarkerClient=function(e){e=e||{},this.ros=e.ros,this.topicName=e.topic,this.tfClient=e.tfClient,this.rootObject=e.rootObject||new THREE.Object3D,this.path=e.path||'/',this.loader=e.loader||ROS3D.COLLADA_LOADER_2,this.markers={},this.rosTopic=void 0,this.subscribe()},ROS3D.MarkerClient.prototype.__proto__=EventEmitter2.prototype,ROS3D.MarkerClient.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.MarkerClient.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'visualization_msgs/Marker',compression:'png'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.MarkerClient.prototype.processMessage=function(e){var t=new ROS3D.Marker({message:e,path:this.path,loader:this.loader}),o=this.markers[e.ns+e.id];o&&(o.unsubscribeTf(),this.rootObject.remove(o)),this.markers[e.ns+e.id]=new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:t}),this.rootObject.add(this.markers[e.ns+e.id]),this.emit('change')},ROS3D.Arrow=function(e){e=e||{};var t=e.origin||new THREE.Vector3(0,0,0),o=e.direction||new THREE.Vector3(1,0,0),r=e.length||1,a=e.headLength||0.2,i=e.shaftDiameter||0.05,s=e.headDiameter||0.1,n=e.material||new THREE.MeshBasicMaterial,c=r-a,p=new THREE.CylinderGeometry(0.5*i,0.5*i,c,12,1),l=new THREE.Matrix4;l.setPosition(new THREE.Vector3(0,0.5*c,0)),p.applyMatrix(l);var d=new THREE.CylinderGeometry(0,0.5*s,a,12,1);l.setPosition(new THREE.Vector3(0,c+0.5*a,0)),d.applyMatrix(l),THREE.GeometryUtils.merge(p,d),THREE.Mesh.call(this,p,n),this.position=t,this.setDirection(o)},ROS3D.Arrow.prototype.__proto__=THREE.Mesh.prototype,ROS3D.Arrow.prototype.setDirection=function(e){var t=new THREE.Vector3(0,1,0).cross(e),o=Math.acos(new THREE.Vector3(0,1,0).dot(e.clone().normalize()));this.matrix=new THREE.Matrix4().makeRotationAxis(t.normalize(),o),this.rotation.setFromRotationMatrix(this.matrix,this.rotation.order)},ROS3D.Arrow.prototype.setLength=function(e){this.scale.set(e,e,e)},ROS3D.Arrow.prototype.setColor=function(e){this.material.color.setHex(e)},ROS3D.Arrow.prototype.dispose=function(){this.geometry!==void 0&&this.geometry.dispose(),this.material!==void 0&&this.material.dispose()},ROS3D.Arrow2=function(e){e=e||{};var t=e.origin||new THREE.Vector3(0,0,0),o=e.direction||new THREE.Vector3(1,0,0),r=e.length||1,a=e.headLength||0.2,i=e.shaftDiameter||0.05,s=e.headDiameter||0.1,n=e.material||new THREE.MeshBasicMaterial;THREE.ArrowHelper.call(this,o,t,r,16711680)},ROS3D.Arrow2.prototype.__proto__=THREE.ArrowHelper.prototype,ROS3D.Arrow2.prototype.dispose=function(){this.line!==void 0&&(this.line.material.dispose(),this.line.geometry.dispose()),this.cone!==void 0&&(this.cone.material.dispose(),this.cone.geometry.dispose())},ROS3D.Axes=function(e){function t(e){var t=new THREE.Color;t.setRGB(e.x,e.y,e.z);var r=new THREE.MeshBasicMaterial({color:t.getHex()}),a=new THREE.Vector3;a.crossVectors(e,new THREE.Vector3(0,-1,0));var i=new THREE.Quaternion;i.setFromAxisAngle(a,0.5*Math.PI);var s=new THREE.Mesh(o.headGeom,r);s.position=e.clone(),s.position.multiplyScalar(0.95),s.quaternion=i,s.updateMatrix(),o.add(s);var n=new THREE.Mesh(o.lineGeom,r);n.position=e.clone(),n.position.multiplyScalar(0.45),n.quaternion=i,n.updateMatrix(),o.add(n)}var o=this;e=e||{};var r=e.shaftRadius||8e-3,a=e.headRadius||0.023,i=e.headLength||0.1;THREE.Object3D.call(this),this.lineGeom=new THREE.CylinderGeometry(r,r,1-i),this.headGeom=new THREE.CylinderGeometry(0,a,i),t(new THREE.Vector3(1,0,0)),t(new THREE.Vector3(0,1,0)),t(new THREE.Vector3(0,0,1))},ROS3D.Axes.prototype.__proto__=THREE.Object3D.prototype,ROS3D.Grid=function(e){e=e||{};var t=e.num_cells||10,o=e.color||'#cccccc',r=e.lineWidth||1,a=e.cellSize||1;THREE.Object3D.call(this);for(var s=new THREE.LineBasicMaterial({color:o,linewidth:r}),n=0;n<=t;++n){var i=a*t/2,c=i-n*a,p=new THREE.Geometry;p.vertices.push(new THREE.Vector3(-i,c,0),new THREE.Vector3(i,c,0));var l=new THREE.Geometry;l.vertices.push(new THREE.Vector3(c,-i,0),new THREE.Vector3(c,i,0)),this.add(new THREE.Line(p,s)),this.add(new THREE.Line(l,s))}},ROS3D.Grid.prototype.__proto__=THREE.Object3D.prototype,ROS3D.MeshResource=function(e){var t=this;e=e||{};var o=e.path||'/',r=e.resource,a=e.material||null;this.warnings=e.warnings;var i=e.loader||ROS3D.COLLADA_LOADER_2;THREE.Object3D.call(this),'/'!==o.substr(o.length-1)&&(this.path+='/');var s,n=o+r,c=n.substr(-4).toLowerCase();'.dae'===c?(s=i===ROS3D.COLLADA_LOADER?new THREE.ColladaLoader:new ColladaLoader2,s.log=function(e){t.warnings&&console.warn(e)},s.load(n,function(e){if(i===ROS3D.COLLADA_LOADER_2&&e.dae.asset.unit){var o=e.dae.asset.unit;e.scene.scale=new THREE.Vector3(o,o,o)}if(null!==a){var r=function(e,t){if(e.material=t,e.children)for(var o=0;o<e.children.length;o++)r(e.children[o],t)};r(e.scene,a)}t.add(e.scene)})):'.stl'===c&&(s=new THREE.STLLoader,s.load(n,function(e){e.computeFaceNormals();var o;o=null===a?new THREE.Mesh(e,new THREE.MeshBasicMaterial({color:10066329})):new THREE.Mesh(e,a),t.add(o)}))},ROS3D.MeshResource.prototype.__proto__=THREE.Object3D.prototype,ROS3D.TriangleList=function(e){e=e||{};var t=e.material||new THREE.MeshBasicMaterial,o=e.vertices,r=e.colors;THREE.Object3D.call(this),t.side=THREE.DoubleSide;var a=new THREE.Geometry;for(s=0;s<o.length;s++)a.vertices.push(new THREE.Vector3(o[s].x,o[s].y,o[s].z));var s,i;if(r.length===o.length){for(s=0;s<o.length;s+=3){var n=new THREE.Face3(s,s+1,s+2);for(i=3*s;i<3*s+3;s++){var c=new THREE.Color;c.setRGB(r[s].r,r[s].g,r[s].b),n.vertexColors.push(c)}a.faces.push(n)}t.vertexColors=THREE.VertexColors}else if(r.length===o.length/3){for(s=0;s<o.length;s+=3){var p=new THREE.Face3(s,s+1,s+2);p.color.setRGB(r[s/3].r,r[s/3].g,r[s/3].b),a.faces.push(p)}t.vertexColors=THREE.FaceColors}else for(s=0;s<o.length;s+=3){var l=new THREE.Face3(s,s+1,s+2);a.faces.push(l)}a.computeBoundingBox(),a.computeBoundingSphere(),a.computeCentroids(),a.computeFaceNormals(),this.add(new THREE.Mesh(a,t))},ROS3D.TriangleList.prototype.__proto__=THREE.Object3D.prototype,ROS3D.TriangleList.prototype.setColor=function(e){this.mesh.material.color.setHex(e)},ROS3D.OccupancyGrid=function(e){e=e||{};var t=e.message,o=e.color||{r:255,g:255,b:255},r=e.opacity||1,a=t.info.width,s=t.info.height,n=new THREE.PlaneGeometry(a,s),c=document.createElement('canvas');c.width=a,c.height=s;for(var p=c.getContext('2d'),l=p.createImageData(a,s),d=0;d<s;d++)for(var u=0;u<a;u++){var m,h=u+(s-d-1)*a,g=t.data[h];m=100===g?0:0===g?255:127;var b=4*(u+d*a);l.data[b]=m*o.r/255,l.data[++b]=m*o.g/255,l.data[++b]=m*o.b/255,l.data[++b]=255}p.putImageData(l,0,0);var i=new THREE.Texture(c);i.needsUpdate=!0;var y=new THREE.MeshBasicMaterial({map:i,transparent:1>r,opacity:r});y.side=THREE.DoubleSide,THREE.Mesh.call(this,n,y),this.quaternion=new THREE.Quaternion(t.info.origin.orientation.x,t.info.origin.orientation.y,t.info.origin.orientation.z,t.info.origin.orientation.w),this.position.x=a*t.info.resolution/2+t.info.origin.position.x,this.position.y=s*t.info.resolution/2+t.info.origin.position.y,this.position.z=t.info.origin.position.z,this.scale.x=t.info.resolution,this.scale.y=t.info.resolution},ROS3D.OccupancyGrid.prototype.__proto__=THREE.Mesh.prototype,ROS3D.OccupancyGridClient=function(e){e=e||{},this.ros=e.ros,this.topicName=e.topic||'/map',this.continuous=e.continuous,this.tfClient=e.tfClient,this.rootObject=e.rootObject||new THREE.Object3D,this.offsetPose=e.offsetPose||new ROSLIB.Pose,this.color=e.color||{r:255,g:255,b:255},this.opacity=e.opacity||1,this.currentGrid=null,this.rosTopic=void 0,this.subscribe()},ROS3D.OccupancyGridClient.prototype.__proto__=EventEmitter2.prototype,ROS3D.OccupancyGridClient.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.OccupancyGridClient.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'nav_msgs/OccupancyGrid',compression:'png'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.OccupancyGridClient.prototype.processMessage=function(e){this.currentGrid&&(this.currentGrid.tfClient&&this.currentGrid.unsubscribeTf(),this.rootObject.remove(this.currentGrid));var t=new ROS3D.OccupancyGrid({message:e,color:this.color,opacity:this.opacity});this.currentGrid=this.tfClient?new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:t,pose:this.offsetPose}):t,this.rootObject.add(this.currentGrid),this.emit('change'),this.continuous||this.rosTopic.unsubscribe()},ROS3D.Odometry=function(e){this.options=e||{},this.ros=e.ros,this.topicName=e.topic||'/particlecloud',this.tfClient=e.tfClient,this.color=e.color||13369599,this.length=e.length||1,this.rootObject=e.rootObject||new THREE.Object3D,this.keep=e.keep||1,THREE.Object3D.call(this),this.sns=[],this.rosTopic=void 0,this.subscribe()},ROS3D.Odometry.prototype.__proto__=THREE.Object3D.prototype,ROS3D.Odometry.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.Odometry.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'nav_msgs/Odometry'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.Odometry.prototype.processMessage=function(e){this.sns.length>=this.keep&&(this.sns[0].unsubscribeTf(),this.rootObject.remove(this.sns[0]),this.sns.shift()),this.options.origin=new THREE.Vector3(e.pose.pose.position.x,e.pose.pose.position.y,e.pose.pose.position.z);var t=new THREE.Quaternion(e.pose.pose.orientation.x,e.pose.pose.orientation.y,e.pose.pose.orientation.z,e.pose.pose.orientation.w);this.options.direction=new THREE.Vector3(1,0,0),this.options.direction.applyQuaternion(t),this.options.material=new THREE.MeshBasicMaterial({color:this.color});var o=new ROS3D.Arrow(this.options);this.sns.push(new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:o})),this.rootObject.add(this.sns[this.sns.length-1])},ROS3D.Path=function(e){e=e||{},this.ros=e.ros,this.topicName=e.topic||'/path',this.tfClient=e.tfClient,this.color=e.color||13369599,this.rootObject=e.rootObject||new THREE.Object3D,THREE.Object3D.call(this),this.sn=null,this.line=null,this.rosTopic=void 0,this.subscribe()},ROS3D.Path.prototype.__proto__=THREE.Object3D.prototype,ROS3D.Path.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.Path.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'nav_msgs/Path'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.Path.prototype.processMessage=function(e){null!==this.sn&&(this.sn.unsubscribeTf(),this.rootObject.remove(this.sn));for(var t,o=new THREE.Geometry,r=0;r<e.poses.length;r++)t=new THREE.Vector3(e.poses[r].pose.position.x,e.poses[r].pose.position.y,e.poses[r].pose.position.z),o.vertices.push(t);o.computeLineDistances();var a=new THREE.LineBasicMaterial({color:this.color}),i=new THREE.Line(o,a);this.sn=new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:i}),this.rootObject.add(this.sn)},ROS3D.Point=function(e){this.options=e||{},this.ros=e.ros,this.topicName=e.topic||'/point',this.tfClient=e.tfClient,this.color=e.color||13369599,this.rootObject=e.rootObject||new THREE.Object3D,this.radius=e.radius||0.2,THREE.Object3D.call(this),this.sn=null,this.rosTopic=void 0,this.subscribe()},ROS3D.Point.prototype.__proto__=THREE.Object3D.prototype,ROS3D.Point.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.Point.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'geometry_msgs/PointStamped'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.Point.prototype.processMessage=function(e){null!==this.sn&&(this.sn.unsubscribeTf(),this.rootObject.remove(this.sn));var t=new THREE.SphereGeometry(this.radius),o=new THREE.MeshBasicMaterial({color:this.color}),r=new THREE.Mesh(t,o);r.position.set(e.point.x,e.point.y,e.point.z),this.sn=new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:r}),this.rootObject.add(this.sn)},ROS3D.Polygon=function(e){e=e||{},this.ros=e.ros,this.topicName=e.topic||'/path',this.tfClient=e.tfClient,this.color=e.color||13369599,this.rootObject=e.rootObject||new THREE.Object3D,THREE.Object3D.call(this),this.sn=null,this.line=null,this.rosTopic=void 0,this.subscribe()},ROS3D.Polygon.prototype.__proto__=THREE.Object3D.prototype,ROS3D.Polygon.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.Polygon.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'geometry_msgs/PolygonStamped'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.Polygon.prototype.processMessage=function(e){null!==this.sn&&(this.sn.unsubscribeTf(),this.rootObject.remove(this.sn));for(var t,o=new THREE.Geometry,r=0;r<e.polygon.points.length;r++)t=new THREE.Vector3(e.polygon.points[r].x,e.polygon.points[r].y,e.polygon.points[r].z),o.vertices.push(t);t=new THREE.Vector3(e.polygon.points[0].x,e.polygon.points[0].y,e.polygon.points[0].z),o.vertices.push(t),o.computeLineDistances();var a=new THREE.LineBasicMaterial({color:this.color}),i=new THREE.Line(o,a);this.sn=new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:i}),this.rootObject.add(this.sn)},ROS3D.Pose=function(e){this.options=e||{},this.ros=e.ros,this.topicName=e.topic||'/pose',this.tfClient=e.tfClient,this.color=e.color||13369599,this.rootObject=e.rootObject||new THREE.Object3D,THREE.Object3D.call(this),this.sn=null,this.rosTopic=void 0,this.subscribe()},ROS3D.Pose.prototype.__proto__=THREE.Object3D.prototype,ROS3D.Pose.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.Pose.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'geometry_msgs/PoseStamped'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.Pose.prototype.processMessage=function(e){null!==this.sn&&(this.sn.unsubscribeTf(),this.rootObject.remove(this.sn)),this.options.origin=new THREE.Vector3(e.pose.position.x,e.pose.position.y,e.pose.position.z);var t=new THREE.Quaternion(e.pose.orientation.x,e.pose.orientation.y,e.pose.orientation.z,e.pose.orientation.w);this.options.direction=new THREE.Vector3(1,0,0),this.options.direction.applyQuaternion(t),this.options.material=new THREE.MeshBasicMaterial({color:this.color});var o=new ROS3D.Arrow(this.options);this.sn=new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:o}),this.rootObject.add(this.sn)},ROS3D.PoseArray=function(e){this.options=e||{},this.ros=e.ros,this.topicName=e.topic||'/particlecloud',this.tfClient=e.tfClient,this.color=e.color||13369599,this.length=e.length||1,this.rootObject=e.rootObject||new THREE.Object3D,THREE.Object3D.call(this),this.sn=null,this.rosTopic=void 0,this.subscribe()},ROS3D.PoseArray.prototype.__proto__=THREE.Object3D.prototype,ROS3D.PoseArray.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.PoseArray.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'geometry_msgs/PoseArray'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.PoseArray.prototype.processMessage=function(e){null!==this.sn&&(this.sn.unsubscribeTf(),this.rootObject.remove(this.sn));for(var t,o=new THREE.Object3D,r=0;r<e.poses.length;r++){var a=new THREE.Geometry,i=new THREE.Vector3(e.poses[r].position.x,e.poses[r].position.y,e.poses[r].position.z);a.vertices.push(i);var s=new THREE.Quaternion(e.poses[r].orientation.x,e.poses[r].orientation.y,e.poses[r].orientation.z,e.poses[r].orientation.w),n=new THREE.Vector3(this.length,0,0),c=new THREE.Vector3(0.8*this.length,0.2*this.length,0),p=new THREE.Vector3(0.8*this.length,0.2*-this.length,0);n.applyQuaternion(s),c.applyQuaternion(s),p.applyQuaternion(s),a.vertices.push(n.add(i)),a.vertices.push(c.add(i)),a.vertices.push(p.add(i)),a.vertices.push(n),a.computeLineDistances();var l=new THREE.LineBasicMaterial({color:this.color});t=new THREE.Line(a,l),o.add(t)}this.sn=new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:o}),this.rootObject.add(this.sn)},ROS3D.PoseWithCovariance=function(e){this.options=e||{},this.ros=e.ros,this.topicName=e.topic||'/PoseWithCovariance',this.tfClient=e.tfClient,this.color=e.color||13369599,this.rootObject=e.rootObject||new THREE.Object3D,THREE.Object3D.call(this),this.sn=null,this.rosTopic=void 0,this.subscribe()},ROS3D.PoseWithCovariance.prototype.__proto__=THREE.Object3D.prototype,ROS3D.PoseWithCovariance.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.PoseWithCovariance.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'geometry_msgs/PoseWithCovarianceStamped'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.PoseWithCovariance.prototype.processMessage=function(e){null!==this.sn&&(this.sn.unsubscribeTf(),this.rootObject.remove(this.sn)),this.options.origin=new THREE.Vector3(e.pose.pose.position.x,e.pose.pose.position.y,e.pose.pose.position.z);var t=new THREE.Quaternion(e.pose.pose.orientation.x,e.pose.pose.orientation.y,e.pose.pose.orientation.z,e.pose.pose.orientation.w);this.options.direction=new THREE.Vector3(1,0,0),this.options.direction.applyQuaternion(t),this.options.material=new THREE.MeshBasicMaterial({color:this.color});var o=new ROS3D.Arrow(this.options);this.sn=new ROS3D.SceneNode({frameID:e.header.frame_id,tfClient:this.tfClient,object:o}),this.rootObject.add(this.sn)},ROS3D.LaserScan=function(e){e=e||{},this.ros=e.ros,this.topicName=e.topic||'/scan',this.color=e.color||16753920,this.particles=new ROS3D.Particles(e),this.rosTopic=void 0,this.subscribe()},ROS3D.LaserScan.prototype.__proto__=THREE.Object3D.prototype,ROS3D.LaserScan.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.LaserScan.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'sensor_msgs/LaserScan'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.LaserScan.prototype.processMessage=function(e){setFrame(this.particles,e.header.frame_id);for(var t,o=e.ranges.length,r=0;r<o;r++){if(t=e.ranges[r],t<e.range_min||t>e.range_max)this.particles.alpha[r]=0;else{var a=e.angle_min+r*e.angle_increment;this.particles.points[r]=new THREE.Vector3(t*Math.cos(a),t*Math.sin(a),0),this.particles.alpha[r]=1}this.particles.colors[r]=new THREE.Color(this.color)}finishedUpdate(this.particles,o)},ROS3D.Particles=function(e){e=e||{},this.tfClient=e.tfClient;var t=e.texture||'https://upload.wikimedia.org/wikipedia/commons/a/a2/Pixel-white.png',o=e.size||0.05;this.max_pts=e.max_pts||1e4,this.first_size=null,this.prev_pts=0,this.rootObject=e.rootObject||new THREE.Object3D;this;THREE.Object3D.call(this),this.vertex_shader=['attribute vec3 customColor;','attribute float alpha;','varying vec3 vColor;','varying float falpha;','void main() ','{','    vColor = customColor; // set color associated to vertex; use later in fragment shader','    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );','    falpha = alpha; ','','    // option (1): draw particles at constant size on screen','    // gl_PointSize = size;','    // option (2): scale particles as objects in 3D space','    gl_PointSize = ',o,'* ( 300.0 / length( mvPosition.xyz ) );','    gl_Position = projectionMatrix * mvPosition;','}'].join('\n'),this.fragment_shader='uniform sampler2D texture;\nvarying vec3 vColor; // colors associated to vertices; assigned by vertex shader\nvarying float falpha;\nvoid main() \n{\n    // THREE.Material.alphaTest is not evaluated for ShaderMaterial, so we\n    // have to take care of this ourselves.\n    if (falpha < 0.5) discard;\n    // calculates a color for the particle\n    gl_FragColor = vec4( vColor, falpha );\n    // sets particle texture to desired color\n    gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );\n}',this.geom=new THREE.Geometry;for(var r=0;r<this.max_pts;r++)this.geom.vertices.push(new THREE.Vector3);var a={texture:{type:'t',value:THREE.ImageUtils.loadTexture(t)}};this.attribs={customColor:{type:'c',value:[]},alpha:{type:'f',value:[]}},this.shaderMaterial=new THREE.ShaderMaterial({uniforms:a,attributes:this.attribs,vertexShader:this.vertex_shader,fragmentShader:this.fragment_shader,transparent:!0}),this.ps=new THREE.ParticleSystem(this.geom,this.shaderMaterial),this.sn=null,this.points=this.geom.vertices,this.colors=this.attribs.customColor.value,this.alpha=this.attribs.alpha.value};function setFrame(e,t){null===e.sn&&(e.sn=new ROS3D.SceneNode({frameID:t,tfClient:e.tfClient,object:e.ps}),e.rootObject.add(e.sn))}function finishedUpdate(e,t){null===e.first_size&&(e.first_size=t,e.max_pts=Math.max(e.max_pts,t));for(var o=t;o<e.prev_pts;o++)e.alpha[o]=0;e.prev_pts=t,e.geom.verticesNeedUpdate=!0,e.attribs.customColor.needsUpdate=!0,e.attribs.alpha.needsUpdate=!0,t>e.max_pts&&console.error('Attempted to draw more points than max_pts allows')}function read_point(e,t,o){for(var r,a=[],i=e.point_step*t,s=0;s<e.fields.length;s++)r=i+e.fields[s].offset,'rgb'===e.fields[s].name?a.rgb=o.getInt32(r,1):a[e.fields[s].name]=o.getFloat32(r,1);return a}var BASE64='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function decode64(e){for(var t=[],o=0,r=0,a=0,i=e.length;a<i;a++)o+=BASE64.indexOf(e[a]),r+=6,8<=r&&(r-=8,t.push(o>>r),o&=Math.pow(2,r)-1),o<<=6;return t}ROS3D.PointCloud2=function(e){e=e||{},this.ros=e.ros,this.topicName=e.topic||'/points',this.particles=new ROS3D.Particles(e),this.rosTopic=void 0,this.subscribe()},ROS3D.PointCloud2.prototype.__proto__=THREE.Object3D.prototype,ROS3D.PointCloud2.prototype.unsubscribe=function(){this.rosTopic&&this.rosTopic.unsubscribe()},ROS3D.PointCloud2.prototype.subscribe=function(){this.unsubscribe(),this.rosTopic=new ROSLIB.Topic({ros:this.ros,name:this.topicName,messageType:'sensor_msgs/PointCloud2'}),this.rosTopic.subscribe(this.processMessage.bind(this))},ROS3D.PointCloud2.prototype.processMessage=function(e){setFrame(this.particles,e.header.frame_id);var t,o=e.height*e.width;t=e.data.buffer?e.data.buffer.buffer:Uint8Array.from(decode64(e.data)).buffer;for(var r,a=new DataView(t),s=0;s<o;s++)r=read_point(e,s,a),this.particles.points[s]=new THREE.Vector3(r.x,r.y,r.z),this.particles.colors[s]=new THREE.Color(r.rgb),this.particles.alpha[s]=1;finishedUpdate(this.particles,o)},ROS3D.Urdf=function(e){e=e||{};var t=e.urdfModel,o=e.path||'/',r=e.tfClient,a=e.tfPrefix||'',s=e.loader||ROS3D.COLLADA_LOADER_2;THREE.Object3D.call(this);var n=t.links;for(var c in n)for(var p,l=n[c],d=0;d<l.visuals.length;d++)if(p=l.visuals[d],p&&p.geometry){var i=a+'/'+l.name,u=null;if(p.material&&p.material.color){var m=p.material&&p.material.color;u=ROS3D.makeColorMaterial(m.r,m.g,m.b,m.a)}if(p.geometry.type===ROSLIB.URDF_MESH){var h=p.geometry.filename,g=h.indexOf('package://');-1!==g&&(h=h.substr(g+10));var b=h.substr(-4).toLowerCase();if('.dae'===b||'.stl'===b){var y=new ROS3D.MeshResource({path:o,resource:h,loader:s});l.visuals[d].geometry.scale&&(y.scale=new THREE.Vector3(p.geometry.scale.x,p.geometry.scale.y,p.geometry.scale.z));var f=new ROS3D.SceneNode({frameID:i,pose:p.origin,tfClient:r,object:y});this.add(f)}else console.warn('Could not load geometry mesh: '+h)}else{u||(u=ROS3D.makeColorMaterial(0,0,0,1));var v;switch(p.geometry.type){case ROSLIB.URDF_BOX:var E=p.geometry.dimension,_=new THREE.CubeGeometry(E.x,E.y,E.z);v=new THREE.Mesh(_,u);break;case ROSLIB.URDF_CYLINDER:var M=p.geometry.radius,T=p.geometry.length,C=new THREE.CylinderGeometry(M,M,T,16,1,!1);v=new THREE.Mesh(C,u),v.quaternion.setFromAxisAngle(new THREE.Vector3(1,0,0),0.5*Math.PI);break;case ROSLIB.URDF_SPHERE:var R=new THREE.SphereGeometry(p.geometry.radius,16);v=new THREE.Mesh(R,u);}var x=new ROS3D.SceneNode({frameID:i,pose:p.origin,tfClient:r,object:v});this.add(x)}}},ROS3D.Urdf.prototype.__proto__=THREE.Object3D.prototype,ROS3D.Urdf.prototype.unsubscribeTf=function(){this.children.forEach(function(e){'function'===typeof e.unsubscribeTf&&e.unsubscribeTf()})},ROS3D.UrdfClient=function(e){var t=this;e=e||{};var o=e.ros;this.param=e.param||'robot_description',this.path=e.path||'/',this.tfClient=e.tfClient,this.rootObject=e.rootObject||new THREE.Object3D,this.tfPrefix=e.tfPrefix||'',this.loader=e.loader||ROS3D.COLLADA_LOADER_2;var r=new ROSLIB.Param({ros:o,name:this.param});r.get(function(e){var o=new ROSLIB.UrdfModel({string:e});t.urdf=new ROS3D.Urdf({urdfModel:o,path:t.path,tfClient:t.tfClient,tfPrefix:t.tfPrefix,loader:t.loader}),t.rootObject.add(t.urdf)})},ROS3D.Highlighter=function(e){e=e||{},this.mouseHandler=e.mouseHandler,this.hoverObjs=[],this.mouseHandler.addEventListener('mouseover',this.onMouseOver.bind(this)),this.mouseHandler.addEventListener('mouseout',this.onMouseOut.bind(this))},ROS3D.Highlighter.prototype.onMouseOver=function(e){this.hoverObjs.push(e.currentTarget)},ROS3D.Highlighter.prototype.onMouseOut=function(e){this.hoverObjs.splice(this.hoverObjs.indexOf(e.currentTarget),1)},ROS3D.Highlighter.prototype.getWebglObjects=function(e,t,r){for(var a=e.__webglObjects,i=0;i<t.length;i++)if(t[i]){for(var s=a.length-1;0<=s;s--)if(a[s].object===t[i]){r.push(a[s]);break}this.getWebglObjects(e,t[i].children,r)}},ROS3D.Highlighter.prototype.renderHighlight=function(e,t,o){var r=[];this.getWebglObjects(t,this.hoverObjs,r),t.overrideMaterial=new THREE.MeshBasicMaterial({fog:!1,opacity:0.5,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetUnits:-1,side:THREE.DoubleSide});var a=t.__webglObjects;t.__webglObjects=r,e.render(t,o),t.__webglObjects=a,t.overrideMaterial=null},ROS3D.MouseHandler=function(e){THREE.EventDispatcher.call(this),this.renderer=e.renderer,this.camera=e.camera,this.rootObject=e.rootObject,this.fallbackTarget=e.fallbackTarget,this.lastTarget=this.fallbackTarget,this.dragging=!1,this.projector=new THREE.Projector;this.listeners={},['contextmenu','click','dblclick','mouseout','mousedown','mouseup','mousemove','mousewheel','DOMMouseScroll','touchstart','touchend','touchcancel','touchleave','touchmove'].forEach(function(e){this.listeners[e]=this.processDomEvent.bind(this),this.renderer.domElement.addEventListener(e,this.listeners[e],!1)},this)},ROS3D.MouseHandler.prototype.processDomEvent=function(e){e.preventDefault();var t,o,r=e.target,a=r.getBoundingClientRect();if(-1!==e.type.indexOf('touch')){t=0,o=0;for(var s=0;s<e.touches.length;++s)t+=e.touches[s].clientX,o+=e.touches[s].clientY;t/=e.touches.length,o/=e.touches.length}else t=e.clientX,o=e.clientY;var i=t-a.left-r.clientLeft+r.scrollLeft,n=o-a.top-r.clientTop+r.scrollTop,c=2*(i/r.clientWidth)-1,p=2*(-n/r.clientHeight)+1,l=new THREE.Vector3(c,p,0.5);this.projector.unprojectVector(l,this.camera);var d=new THREE.Raycaster(this.camera.position.clone(),l.sub(this.camera.position).normalize());d.linePrecision=1e-3;var u=d.ray,m={mousePos:new THREE.Vector2(c,p),mouseRay:u,domEvent:e,camera:this.camera,intersection:this.lastIntersection};if('mouseout'===e.type)return this.dragging&&(this.notify(this.lastTarget,'mouseup',m),this.dragging=!1),this.notify(this.lastTarget,'mouseout',m),void(this.lastTarget=null);if('touchleave'===e.type||'touchend'===e.type)return this.dragging&&(this.notify(this.lastTarget,'mouseup',m),this.dragging=!1),this.notify(this.lastTarget,'touchend',m),void(this.lastTarget=null);if(this.dragging)return this.notify(this.lastTarget,e.type,m),void(('mouseup'===e.type&&2===e.button||'click'===e.type||'touchend'===e.type)&&(this.dragging=!1));r=this.lastTarget;var h=[];if(h=d.intersectObject(this.rootObject,!0),0<h.length?(r=h[0].object,m.intersection=this.lastIntersection=h[0]):r=this.fallbackTarget,r!==this.lastTarget&&e.type.match(/mouse/)){var g=this.notify(r,'mouseover',m);g?this.notify(this.lastTarget,'mouseout',m):(r=this.fallbackTarget,r!==this.lastTarget&&(this.notify(r,'mouseover',m),this.notify(this.lastTarget,'mouseout',m)))}if(r!==this.lastTarget&&e.type.match(/touch/)){var b=this.notify(r,e.type,m);b?(this.notify(this.lastTarget,'touchleave',m),this.notify(this.lastTarget,'touchend',m)):(r=this.fallbackTarget,r!==this.lastTarget&&(this.notify(this.lastTarget,'touchmove',m),this.notify(this.lastTarget,'touchend',m)))}this.notify(r,e.type,m),('mousedown'===e.type||'touchstart'===e.type||'touchmove'===e.type)&&(this.dragging=!0),this.lastTarget=r},ROS3D.MouseHandler.prototype.notify=function(e,t,o){for(o.type=t,o.cancelBubble=!1,o.stopPropagation=function(){o.cancelBubble=!0},o.currentTarget=e;o.currentTarget;){if(o.currentTarget.dispatchEvent&&o.currentTarget.dispatchEvent instanceof Function&&(o.currentTarget.dispatchEvent(o),o.cancelBubble))return this.dispatchEvent(o),!0;o.currentTarget=o.currentTarget.parent}return!1},THREE.EventDispatcher.prototype.apply(ROS3D.MouseHandler.prototype),ROS3D.OrbitControls=function(e){function t(e,t,o){var r=new THREE.Vector3,a=new THREE.Vector3;r.subVectors(t,e.origin);var i=e.direction.dot(o);if(Math.abs(i)<e.precision)return null;var s=o.dot(r)/i;return a=e.direction.clone().multiplyScalar(s),a}function o(e){if(a.userZoom){var t,o=e.domEvent;t='undefined'===typeof o.wheelDelta?-o.detail:o.wheelDelta,0<t?a.zoomIn():a.zoomOut(),this.showAxes()}}var r=Math.PI;THREE.EventDispatcher.call(this);var a=this;e=e||{};var i=e.scene;this.camera=e.camera,this.center=new THREE.Vector3,this.userZoom=!0,this.userZoomSpeed=e.userZoomSpeed||1,this.userRotate=!0,this.userRotateSpeed=e.userRotateSpeed||1,this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed||2,this.camera.up=new THREE.Vector3(0,0,1);var s=1800,n=10,c=new THREE.Vector2,p=new THREE.Vector2,l=new THREE.Vector2,d=new THREE.Vector2,u=new THREE.Vector2,m=new THREE.Vector2,h=new THREE.Vector3,g=new THREE.Vector3,b=new THREE.Vector3,y=new THREE.Vector3,f=[,,],v=[,,];this.phiDelta=0,this.thetaDelta=0,this.scale=1,this.lastPosition=new THREE.Vector3;var E={NONE:-1,ROTATE:0,ZOOM:1,MOVE:2},_=E.NONE;this.axes=new ROS3D.Axes({shaftRadius:0.025,headRadius:0.07,headLength:0.2}),i.add(this.axes),this.axes.traverse(function(e){e.visible=!1}),this.addEventListener('mousedown',function(e){var o=e.domEvent;switch(o.preventDefault(),o.button){case 0:_=E.ROTATE,c.set(o.clientX,o.clientY);break;case 1:_=E.MOVE,g=new THREE.Vector3(0,0,1);var r=new THREE.Matrix4().extractRotation(this.camera.matrix);g.applyMatrix4(r),h=a.center.clone(),b=a.camera.position.clone(),y=t(e.mouseRay,h,g);break;case 2:_=E.ZOOM,d.set(o.clientX,o.clientY);}this.showAxes()}),this.addEventListener('mouseup',function(){a.userRotate&&(_=E.NONE)}),this.addEventListener('mousemove',function(e){var o=e.domEvent;if(_===E.ROTATE)p.set(o.clientX,o.clientY),l.subVectors(p,c),a.rotateLeft(2*r*l.x/s*a.userRotateSpeed),a.rotateUp(2*r*l.y/s*a.userRotateSpeed),c.copy(p),this.showAxes();else if(_===E.ZOOM)u.set(o.clientX,o.clientY),m.subVectors(u,d),0<m.y?a.zoomIn():a.zoomOut(),d.copy(u),this.showAxes();else if(_===E.MOVE){var i=t(e.mouseRay,a.center,g);if(!i)return;var n=new THREE.Vector3().subVectors(y.clone(),i.clone());a.center.addVectors(h.clone(),n.clone()),a.camera.position.addVectors(b.clone(),n.clone()),a.update(),a.camera.updateMatrixWorld(),this.showAxes()}}),this.addEventListener('touchstart',function(e){var o=e.domEvent;switch(o.touches.length){case 1:_=E.ROTATE,c.set(o.touches[0].pageX-window.scrollX,o.touches[0].pageY-window.scrollY);break;case 2:_=E.NONE,g=new THREE.Vector3(0,0,1);var r=new THREE.Matrix4().extractRotation(this.camera.matrix);g.applyMatrix4(r),h=a.center.clone(),b=a.camera.position.clone(),y=t(e.mouseRay,h,g),f[0]=new THREE.Vector2(o.touches[0].pageX,o.touches[0].pageY),f[1]=new THREE.Vector2(o.touches[1].pageX,o.touches[1].pageY),v[0]=new THREE.Vector2(0,0),v[1]=new THREE.Vector2(0,0);}this.showAxes(),o.preventDefault()}),this.addEventListener('touchmove',function(e){var o=e.domEvent;if(_===E.ROTATE)p.set(o.touches[0].pageX-window.scrollX,o.touches[0].pageY-window.scrollY),l.subVectors(p,c),a.rotateLeft(2*r*l.x/s*a.userRotateSpeed),a.rotateUp(2*r*l.y/s*a.userRotateSpeed),c.copy(p),this.showAxes();else{if(v[0].set(f[0].x-o.touches[0].pageX,f[0].y-o.touches[0].pageY),v[1].set(f[1].x-o.touches[1].pageX,f[1].y-o.touches[1].pageY),v[0].lengthSq()>n&&v[1].lengthSq()>n&&(f[0].set(o.touches[0].pageX,o.touches[0].pageY),f[1].set(o.touches[1].pageX,o.touches[1].pageY),0<v[0].dot(v[1])&&_!==E.ZOOM?_=E.MOVE:0>v[0].dot(v[1])&&_!==E.MOVE&&(_=E.ZOOM),_===E.ZOOM)){var i=new THREE.Vector2;i.subVectors(f[0],f[1]),0>v[0].dot(i)&&0<v[1].dot(i)?a.zoomOut():0<v[0].dot(i)&&0>v[1].dot(i)&&a.zoomIn()}if(_===E.MOVE){var d=t(e.mouseRay,a.center,g);if(!d)return;var u=new THREE.Vector3().subVectors(y.clone(),d.clone());a.center.addVectors(h.clone(),u.clone()),a.camera.position.addVectors(b.clone(),u.clone()),a.update(),a.camera.updateMatrixWorld()}this.showAxes(),o.preventDefault()}}),this.addEventListener('touchend',function(e){var t=e.domEvent;1===t.touches.length&&_!==E.ROTATE?(_=E.ROTATE,c.set(t.touches[0].pageX-window.scrollX,t.touches[0].pageY-window.scrollY)):_=E.NONE}),this.addEventListener('mousewheel',o),this.addEventListener('DOMMouseScroll',o)},ROS3D.OrbitControls.prototype.showAxes=function(){var e=this;this.axes.traverse(function(e){e.visible=!0}),this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){e.axes.traverse(function(e){e.visible=!1}),e.hideTimeout=!1},1e3)},ROS3D.OrbitControls.prototype.rotateLeft=function(e){e===void 0&&(e=2*Math.PI/60/60*this.autoRotateSpeed),this.thetaDelta-=e},ROS3D.OrbitControls.prototype.rotateRight=function(e){e===void 0&&(e=2*Math.PI/60/60*this.autoRotateSpeed),this.thetaDelta+=e},ROS3D.OrbitControls.prototype.rotateUp=function(e){e===void 0&&(e=2*Math.PI/60/60*this.autoRotateSpeed),this.phiDelta-=e},ROS3D.OrbitControls.prototype.rotateDown=function(e){e===void 0&&(e=2*Math.PI/60/60*this.autoRotateSpeed),this.phiDelta+=e},ROS3D.OrbitControls.prototype.zoomIn=function(e){e===void 0&&(e=Math.pow(0.95,this.userZoomSpeed)),this.scale/=e},ROS3D.OrbitControls.prototype.zoomOut=function(e){e===void 0&&(e=Math.pow(0.95,this.userZoomSpeed)),this.scale*=e},ROS3D.OrbitControls.prototype.update=function(){var e=Math.sin,t=Math.cos,o=Math.PI,r=Math.atan2,a=this.camera.position,i=a.clone().sub(this.center),s=r(i.y,i.x),n=r(Math.sqrt(i.y*i.y+i.x*i.x),i.z);this.autoRotate&&this.rotateLeft(2*o/60/60*this.autoRotateSpeed),s+=this.thetaDelta,n+=this.phiDelta;var c=1e-6;n=Math.max(c,Math.min(o-c,n));var p=i.length();i.y=p*e(n)*e(s),i.z=p*t(n),i.x=p*e(n)*t(s),i.multiplyScalar(this.scale),a.copy(this.center).add(i),this.camera.lookAt(this.center),p=i.length(),this.axes.position=this.center.clone(),this.axes.scale.x=this.axes.scale.y=this.axes.scale.z=0.05*p,this.axes.updateMatrixWorld(!0),this.thetaDelta=0,this.phiDelta=0,this.scale=1,0<this.lastPosition.distanceTo(this.camera.position)&&(this.dispatchEvent({type:'change'}),this.lastPosition.copy(this.camera.position))},THREE.EventDispatcher.prototype.apply(ROS3D.OrbitControls.prototype),ROS3D.SceneNode=function(e){e=e||{};var t=this;this.tfClient=e.tfClient,this.frameID=e.frameID;var o=e.object;this.pose=e.pose||new ROSLIB.Pose,THREE.Object3D.call(this),this.visible=!1,this.add(o),this.updatePose(this.pose),this.tfUpdate=function(e){var o=new ROSLIB.Transform(e),r=new ROSLIB.Pose(t.pose);r.applyTransform(o),t.updatePose(r),t.visible=!0},this.tfClient.subscribe(this.frameID,this.tfUpdate)},ROS3D.SceneNode.prototype.__proto__=THREE.Object3D.prototype,ROS3D.SceneNode.prototype.updatePose=function(e){this.position.set(e.position.x,e.position.y,e.position.z),this.quaternion.set(e.orientation.x,e.orientation.y,e.orientation.z,e.orientation.w),this.updateMatrixWorld(!0)},ROS3D.SceneNode.prototype.unsubscribeTf=function(){this.tfClient.unsubscribe(this.frameID,this.tfUpdate)},ROS3D.Viewer=function(e){e=e||{};var t=e.divID,o=e.width,r=e.height,a=e.background||'#111111',i=e.antialias,s=e.intensity||0.66,n=e.near||0.01,c=e.far||1e3,p=e.alpha||1,l=e.cameraPose||{x:3,y:3,z:3},d=e.cameraZoomSpeed||0.5;this.renderer=new THREE.WebGLRenderer({antialias:i,alpha:!0}),this.renderer.setClearColor(parseInt(a.replace('#','0x'),16),p),this.renderer.sortObjects=!1,this.renderer.setSize(o,r),this.renderer.shadowMapEnabled=!1,this.renderer.autoClear=!1,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(40,o/r,n,c),this.camera.position.x=l.x,this.camera.position.y=l.y,this.camera.position.z=l.z,this.cameraControls=new ROS3D.OrbitControls({scene:this.scene,camera:this.camera}),this.cameraControls.userZoomSpeed=d,this.scene.add(new THREE.AmbientLight(5592405)),this.directionalLight=new THREE.DirectionalLight(16777215,s),this.scene.add(this.directionalLight),this.selectableObjects=new THREE.Object3D,this.scene.add(this.selectableObjects);var u=new ROS3D.MouseHandler({renderer:this.renderer,camera:this.camera,rootObject:this.selectableObjects,fallbackTarget:this.cameraControls});this.highlighter=new ROS3D.Highlighter({mouseHandler:u}),this.stopped=!0,this.animationRequestId=void 0,document.getElementById(t).appendChild(this.renderer.domElement),this.start()},ROS3D.Viewer.prototype.start=function(){this.stopped=!1,this.draw()},ROS3D.Viewer.prototype.draw=function(){this.stopped||(this.cameraControls.update(),this.directionalLight.position=this.camera.localToWorld(new THREE.Vector3(-1,1,0)),this.directionalLight.position.normalize(),this.renderer.clear(!0,!0,!0),this.renderer.render(this.scene,this.camera),this.highlighter.renderHighlight(this.renderer,this.scene,this.camera),this.animationRequestId=requestAnimationFrame(this.draw.bind(this)))},ROS3D.Viewer.prototype.stop=function(){this.stopped||cancelAnimationFrame(this.animationRequestId),this.stopped=!0},ROS3D.Viewer.prototype.addObject=function(e,t){t?this.selectableObjects.add(e):this.scene.add(e)},ROS3D.Viewer.prototype.resize=function(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)};</script><script>Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:'on',observer:'_valueChanged'}},observers:['_requiredChanged(required)'],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(){return this.disabled||!this.required||this.checked},_requiredChanged:function(){this.required?this.setAttribute('aria-required','true'):this.removeAttribute('aria-required')},_checkedChanged:function(){this.active=this.checked,this.fire('iron-change')},_valueChanged:function(){(this.value===void 0||null===this.value)&&(this.value='on')}},Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl];</script><script>Polymer.PaperInkyFocusBehaviorImpl={observers:['_focusedChanged(receivedFocusFromKeyboard)'],_focusedChanged:function(a){a&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=a)},_createRipple:function(){var a=Polymer.PaperRippleBehavior._createRipple();return a.id='ink',a.setAttribute('center',''),a.classList.add('circle'),a}},Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl];</script><script>Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this),this.hasRipple()&&(this.checked?this._ripple.setAttribute('checked',''):this._ripple.removeAttribute('checked'))},_buttonStateChanged:function(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this);this.disabled||this.isAttached&&(this.checked=this.active)}},Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl];</script><dom-module id="paper-checkbox" assetpath="bower_components/paper-checkbox/"><template strip-whitespace=""><style>:host{display:inline-block;white-space:nowrap;cursor:pointer;--calculated-paper-checkbox-size:var(--paper-checkbox-size, 18px);--calculated-paper-checkbox-ink-size:var(--paper-checkbox-ink-size, -1px);@apply --paper-font-common-base;line-height:0;-webkit-tap-highlight-color:transparent;}:host([hidden]){display:none !important;}:host(:focus){outline:none;}.hidden{display:none;}#checkboxContainer{display:inline-block;position:relative;width:var(--calculated-paper-checkbox-size);height:var(--calculated-paper-checkbox-size);min-width:var(--calculated-paper-checkbox-size);margin:var(--paper-checkbox-margin, initial);vertical-align:var(--paper-checkbox-vertical-align, middle);background-color:var(--paper-checkbox-unchecked-background-color, transparent);}#ink{position:absolute;top:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);left:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);width:var(--calculated-paper-checkbox-ink-size);height:var(--calculated-paper-checkbox-ink-size);color:var(--paper-checkbox-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;}:host-context([dir="rtl"]) #ink{right:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);left:auto;}#ink[checked]{color:var(--paper-checkbox-checked-ink-color, var(--primary-color));}#checkbox{position:relative;box-sizing:border-box;height:100%;border:solid 2px;border-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));border-radius:2px;pointer-events:none;-webkit-transition:background-color 140ms, border-color 140ms;transition:background-color 140ms, border-color 140ms;}#checkbox.checked #checkmark{-webkit-animation:checkmark-expand 140ms ease-out forwards;animation:checkmark-expand 140ms ease-out forwards;}@-webkit-keyframes checkmark-expand{0%{-webkit-transform:scale(0, 0) rotate(45deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes checkmark-expand{0%{transform:scale(0, 0) rotate(45deg);}100%{transform:scale(1, 1) rotate(45deg);}}#checkbox.checked{background-color:var(--paper-checkbox-checked-color, var(--primary-color));border-color:var(--paper-checkbox-checked-color, var(--primary-color));}#checkmark{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-bottom-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-color:var(--paper-checkbox-checkmark-color, white);-webkit-transform-origin:97% 86%;transform-origin:97% 86%;box-sizing:content-box;}:host-context([dir="rtl"]) #checkmark{-webkit-transform-origin:50% 14%;transform-origin:50% 14%;}#checkboxLabel{position:relative;display:inline-block;vertical-align:middle;padding-left:var(--paper-checkbox-label-spacing, 8px);white-space:normal;line-height:normal;color:var(--paper-checkbox-label-color, var(--primary-text-color));@apply --paper-checkbox-label;}:host([checked]) #checkboxLabel{color:var(--paper-checkbox-label-checked-color, var(--paper-checkbox-label-color, var(--primary-text-color)));@apply --paper-checkbox-label-checked;}:host-context([dir="rtl"]) #checkboxLabel{padding-right:var(--paper-checkbox-label-spacing, 8px);padding-left:0;}#checkboxLabel[hidden]{display:none;}:host([disabled]) #checkbox{opacity:0.5;border-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));}:host([disabled][checked]) #checkbox{background-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #checkboxLabel{opacity:0.65;}#checkbox.invalid:not(.checked){border-color:var(--paper-checkbox-error-color, var(--error-color));}</style><div id="checkboxContainer"><div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]"><div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div></div></div><div id="checkboxLabel"><slot></slot></div></template><script>Polymer({is:'paper-checkbox',behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:'checkbox',"aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:'aria-checked'}},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){var a=this.getComputedStyleValue('--calculated-paper-checkbox-ink-size').trim();if('-1px'===a){var b=this.getComputedStyleValue('--calculated-paper-checkbox-size').trim(),c=b.match(/[A-Za-z]+$/)[0]||'px',d=parseFloat(b,10),e=8/3*d;'px'===c&&(e=Math.floor(e),e%2!==d%2&&e++),this.updateStyles({"--paper-checkbox-ink-size":e+c})}})},_computeCheckboxClass:function(a,b){var c='';return a&&(c+='checked '),b&&(c+='invalid'),c},_computeCheckmarkClass:function(a){return a?'':'hidden'},_createRipple:function(){return this._rippleContainer=this.$.checkboxContainer,Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)}});</script></dom-module><dom-module id="paper-icon-button" assetpath="bower_components/paper-icon-button/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;padding:8px;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;z-index:0;line-height:1;width:40px;height:40px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;box-sizing:border-box !important;@apply --paper-icon-button;}:host #ink{color:var(--paper-icon-button-ink-color, var(--primary-text-color));opacity:0.6;}:host([disabled]){color:var(--paper-icon-button-disabled-text, var(--disabled-text-color));pointer-events:none;cursor:auto;@apply --paper-icon-button-disabled;}:host([hidden]){display:none !important;}:host(:hover){@apply --paper-icon-button-hover;}iron-icon{--iron-icon-width:100%;--iron-icon-height:100%;}</style><iron-icon id="icon" src="[[src]]" icon="[[icon]]" alt$="[[alt]]"></iron-icon></template><script>Polymer({is:'paper-icon-button',hostAttributes:{role:'button',tabindex:'0'},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:'_altChanged'}},_altChanged:function(a,b){var c=this.getAttribute('aria-label');c&&b!=c||this.setAttribute('aria-label',a)}});</script></dom-module><dom-module id="ros-service" assetpath="bower_components/ros-service/"><template></template><script>Polymer({is:'ros-service',properties:{auto:{type:Boolean,default:!1},name:{type:String,observer:'_initService'},request:{type:Object,default:null,observer:'_requestChanged'},lastResponse:{type:Object,default:null,notify:!0,readOnly:!0},lastError:{type:String,default:null,notify:!0,readOnly:!0},ros:{type:Object,default:null,observer:'_initService'},serviceType:{type:String,observer:'_initService'},_service:{type:Object,default:null}},_requestChanged:function(){this._setLastResponse(null),this._setLastError(null),this._service&&this.request&&this.auto&&this.call(this.request)},_initService:function(){if(this.ros&&this.name&&this.serviceType){var a=this;this._service=new ROSLIB.Service({ros:a.ros,name:a.name,serviceType:a.serviceType})}},call:function(a){if(this._service&&a){var b=this,c=this.lastResponse,d=new ROSLIB.ServiceRequest(a);this._service.callService(d,function(a){b._setLastResponse(a),b.fire('response',a)},function(a){b.lastError=a,b.fire('fail',a)})}else{var e='ros-service was not initialized before calling.';console.error(e),this.fire('fail',e)}}});</script></dom-module><dom-module id="ros-rviz-depth-cloud" assetpath="bower_components/ros-rviz/"><template><paper-input always-float-label="" label="ros_web_video encoded depth image URL:" value="{{_topic}}" on-blur="_onOptionsChanged"><div slot="prefix">[[globalOptions.videoServer]]/www/</div></paper-input><paper-input label="Camera frame ID" value="{{_frameId}}" on-blur="_onOptionsChanged"></paper-input></template><script>Polymer({is:'ros-rviz-depth-cloud',properties:{topic:{type:String,value:'depthcloud_encoded',notify:!0},frameId:{type:String,value:'/camera_rgb_optical_frame',notify:!0},globalOptions:Object,isShown:Boolean,name:{type:String,value:'Depth cloud'},tfClient:Object,viewer:Object,ros:Object,_cloud:{type:Object,value:null},_sceneNode:Object,_depthUrl:String,_depthUrlTopic:String},observers:['_optionsChanged(ros, tfClient, viewer, globalOptions.videoServer, topic, frameId, isShown)'],_onOptionsChanged:function(){this.topic!==this._topic&&(this.topic=this._topic),this.frameId!==this._frameId&&(this.frameId=this._frameId)},_optionsChanged:function(a,b,c,d,e,f,g){if(a&&b&&c&&d&&e&&f&&(g||!1==g)){this._topic!==e&&(this._topic=e),this._frameId!==f&&(this._frameId=f),this.destroy();this._cloud=new ROS3D.DepthCloud({url:d+'/streams/'+e+'.webm?enc=webm&bitrate=250000&framerate=15',f:525}),this._sceneNode=new ROS3D.SceneNode({frameID:f,tfClient:b,object:this._cloud}),this._sceneNode.scale.x=0.5,this._sceneNode.scale.y=0.5,this._sceneNode.scale.z=0.5,this.isShown&&this.show()}},destroy:function(){this.hide(),this._sceneNode&&delete this._sceneNode,this._cloud&&delete this._cloud},hide:function(){this._cloud&&this._cloud.stopStream(),this._sceneNode&&this.viewer.scene.remove(this._sceneNode)},show:function(){this.isShown&&(this._cloud&&this._cloud.startStream(),this._sceneNode&&this.viewer.scene.add(this._sceneNode))}});</script></dom-module><dom-module id="ros-rviz-grid" assetpath="bower_components/ros-rviz/"><template><paper-input label="Cell size (m)" value="{{cellSize}}"></paper-input><paper-input label="Color" value="{{color}}"></paper-input><paper-input label="# cells per side" value="{{numCells}}"></paper-input></template><script>Polymer({is:'ros-rviz-grid',properties:{cellSize:{notify:!0,type:Number,value:1},color:{type:String,value:'#cccccc',notify:!0},isShown:Boolean,name:{type:String,value:'Grid'},numCells:{notify:!0,type:Number,value:10},viewer:{type:Object},_grid:Object},observers:['_optionsChanged(viewer, cellSize, color, numCells)'],destroy:function(){},hide:function(){this.viewer&&this.viewer.scene.remove(this._grid)},show:function(){this.viewer&&this.isShown&&(this.viewer.scene.remove(this._grid),this.viewer.addObject(this._grid))},_optionsChanged:function(){this.hide(),this._updateGrid(),this.show()},_updateGrid:function(){this.viewer&&this.viewer.scene.remove(this._grid),this._grid=new ROS3D.Grid({cellSize:this.cellSize,color:this.color,lineWidth:this.lineWidth,num_cells:this.numCells})}});</script></dom-module><dom-module id="ros-rviz-interactive-markers" assetpath="bower_components/ros-rviz/"><template><paper-input label="Interactive marker topic" on-blur="_updateDisplay" value="{{topic}}"></paper-input></template><script>Polymer({is:'ros-rviz-interactive-markers',properties:{globalOptions:Object,isShown:Boolean,name:{type:String,value:'Interactive Markers'},ros:Object,tfClient:Object,topic:{type:String,value:'/basic_controls',notify:!0},viewer:Object,_client:{type:Object,value:null}},observers:['_optionsChanged(viewer, topic, ros)'],destroy:function(){},detached:function(){this.hide()},hide:function(){this._client&&this._client.unsubscribe()},show:function(){this._client&&this.isShown&&this._client.subscribe(this.topic)},_optionsChanged:function(){this.hide(),this._updateDisplay()},_updateDisplay:function(){if(this.viewer&&this.topic&&this.ros){var a=this;this._client&&this._client.unsubscribe();var b=ROS3D.COLLADA_LOADER_2;'collada'===a.globalOptions.colladaLoader?b=ROS3D.COLLADA_LOADER:'collada2'===a.globalOptions.colladaLoader?b=ROS3D.COLLADA_LOADER_2:(console.warn('Unknown Collada loader',a.globalOptions.colladaLoader),b=ROS3D.COLLADA_LOADER_2),this._client=new ROS3D.InteractiveMarkerClient({loader:b,path:this.globalOptions.colladaServer,ros:this.ros,tfClient:this.tfClient,topic:this.topic,camera:this.viewer.camera,rootObject:this.viewer.selectableObjects})}}});</script></dom-module><dom-module id="ros-rviz-marker-array" assetpath="bower_components/ros-rviz/"><template><paper-input label="Marker array topic" on-blur="_topicChanged" value="{{topic}}"></paper-input></template><script>Polymer({is:'ros-rviz-marker-array',properties:{globalOptions:Object,isShown:Boolean,name:{type:String,value:'Marker array'},ros:Object,tfClient:Object,topic:{type:String,value:'/visualization_marker_array',notify:!0},viewer:Object,_markers:{type:Object,value:function(){return{}}},_topic:Object,_lastRenderedTopic:{type:String,value:''}},ready:function(){this.show()},destroy:function(){for(var a in this._markers)this._markers[a].unsubscribeTf();this._markers={},this._topic.unsubscribe()},hide:function(){if(this.viewer)for(var a in this._markers)this.viewer.scene.remove(this._markers[a])},show:function(){if(this._updateDisplay(),this.viewer)for(var a in this._markers)this.isShown&&this.viewer.addObject(this._markers[a])},_topicChanged:function(){if(this.topic!==this._lastRenderedTopic){for(var a in this.hide(),this._markers)this._markers[a].unsubscribeTf();this._markers={},this._updateDisplay()}},_updateDisplay:function(){var a=this;this._topic&&this._topic.unsubscribe(),this._topic=new ROSLIB.Topic({ros:this.ros,name:this.topic,messageType:'visualization_msgs/MarkerArray',compression:'png'}),this._topic.subscribe(function(b){a._msgCallback(a,b)}),this._lastRenderedTopic=this.topic},_msgCallback:function(a,b){var c=ROS3D.COLLADA_LOADER_2;'collada'===a.globalOptions.colladaLoader?c=ROS3D.COLLADA_LOADER:'collada2'===a.globalOptions.colladaLoader?c=ROS3D.COLLADA_LOADER_2:(console.warn('Unknown Collada loader',a.globalOptions.colladaLoader),c=ROS3D.COLLADA_LOADER_2);var d=a.globalOptions.colladaServer;b.markers.forEach(function(b){if(0===b.action){var e=!1;if(b.ns+'_'+b.id in a._markers&&(e=a._markers[b.ns+'_'+b.id].children[0].update(b),!e&&(a._markers[b.ns+'_'+b.id].unsubscribeTf(),a.viewer.scene.remove(a._markers[b.ns+'_'+b.id]))),!e){var f=new ROS3D.Marker({message:b,path:d,loader:c});a._markers[b.ns+'_'+b.id]=new ROS3D.SceneNode({frameID:b.header.frame_id,tfClient:a.tfClient,object:f}),a.isShown&&a.viewer.scene.add(a._markers[b.ns+'_'+b.id])}}else if(1===b.action)console.warn('Received marker message with deprecated action identifier "1"');else if(2===b.action)a._markers[b.ns+'_'+b.id].unsubscribeTf(),a.viewer.scene.remove(a._markers[b.ns+'_'+b.id]),delete a._markers[b.ns+'_'+b.id];else if(3===b.action){for(var g in a._markers)a._markers[g].unsubscribeTf(),a.viewer.scene.remove(a._markers[g]);a._markers={}}else console.warn('Received marker message with unknown action identifier "'+b.action+'"')})}});</script></dom-module><dom-module id="ros-rviz-markers" assetpath="bower_components/ros-rviz/"><template><paper-input label="Marker topic" on-blur="_updateDisplay" value="{{topic}}"></paper-input></template><script>Polymer({is:'ros-rviz-markers',properties:{globalOptions:Object,isShown:Boolean,name:{type:String,value:'Markers'},ros:Object,tfClient:Object,topic:{type:String,value:'/visualization_marker',notify:!0},viewer:Object,_markers:{type:Object,value:function(){return{}}},_topic:Object},ready:function(){this._updateDisplay(),this.show()},destroy:function(){this._topic.unsubscribe()},hide:function(){if(this.viewer)for(var a in this._markers)this._markers[a].unsubscribeTf(),this.viewer.scene.remove(this._markers[a])},show:function(){if(this.viewer)for(var a in this._markers)this.viewer.addObject(this._markers[a])},_updateDisplay:function(){var a=this;this._topic&&this._topic.unsubscribe(),this._topic=new ROSLIB.Topic({ros:this.ros,name:this.topic,messageType:'visualization_msgs/Marker',compression:'png'}),this._topic.subscribe(function(b){a._msgCallback(a,b)})},_msgCallback:function(a,b){var c=ROS3D.COLLADA_LOADER_2;'collada'===a.globalOptions.colladaLoader?c=ROS3D.COLLADA_LOADER:'collada2'===a.globalOptions.colladaLoader?c=ROS3D.COLLADA_LOADER_2:(console.warn('Unknown Collada loader',a.globalOptions.colladaLoader),c=ROS3D.COLLADA_LOADER_2);var d=new ROS3D.Marker({message:b,path:a.globalOptions.colladaServer,loader:c}),e=a._markers[b.ns+b.id];e&&(e.unsubscribeTf(),a.viewer.scene.remove(e)),a._markers[b.ns+b.id]=new ROS3D.SceneNode({frameID:b.header.frame_id,tfClient:a.tfClient,object:d}),a.isShown&&a.viewer.addObject(a._markers[b.ns+b.id])}});</script></dom-module><dom-module id="ros-rviz-occupancy-grid" assetpath="bower_components/ros-rviz/"><template><paper-input label="Map topic" value="{{topic}}"></paper-input><paper-checkbox checked="{{continuous}}">Continuously update</paper-checkbox><paper-input label="Opacity" value="{{opacity}}"></paper-input></template><script>Polymer({is:'ros-rviz-occupancy-grid',properties:{name:{type:String,value:'Map'},topic:{type:String,value:'/map',notify:!0},continuous:{type:Boolean,value:!0,notify:!0},opacity:{type:Number,value:1,notify:!0},globalOptions:Object,isShown:Boolean,ros:Object,tfClient:Object,viewer:Object},observers:['_optionsChanged(viewer, topic, continuous, opacity, ros)'],destroy:function(){},hide:function(){this.viewer&&this._gridClient&&this.viewer.scene.remove(this._gridClient.currentGrid),this._gridClient&&(this._gridClient.unsubscribe(),this._gridClient=null)},show:function(){this.viewer&&this.isShown&&!this._gridClient&&this._updateDisplay()},_optionsChanged:function(){this.hide(),this._updateDisplay(),this.show()},_updateDisplay:function(){this.ros&&this.viewer&&this.topic&&(this.continuous||!1===this.continuous)&&(this.opacity||0===this.opacity)&&(this._gridClient&&this._gridClient.unsubscribe(),this._gridClient=new ROS3D.OccupancyGridClient({ros:this.ros,topic:this.topic,continuous:this.continuous,rootObject:this.viewer.scene,offsetPose:null,color:{r:255,g:255,b:255},opacity:this.opacity}))}});</script></dom-module><dom-module id="paper-radio-button" assetpath="bower_components/paper-radio-button/"><template strip-whitespace=""><style>:host{display:inline-block;line-height:0;white-space:nowrap;cursor:pointer;@apply --paper-font-common-base;--calculated-paper-radio-button-size:var(--paper-radio-button-size, 16px);--calculated-paper-radio-button-ink-size:var(--paper-radio-button-ink-size, -1px);}:host(:focus){outline:none;}#radioContainer{@apply --layout-inline;@apply --layout-center-center;position:relative;width:var(--calculated-paper-radio-button-size);height:var(--calculated-paper-radio-button-size);vertical-align:middle;@apply --paper-radio-button-radio-container;}#ink{position:absolute;top:50%;left:50%;right:auto;width:var(--calculated-paper-radio-button-ink-size);height:var(--calculated-paper-radio-button-ink-size);color:var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);}#ink[checked]{color:var(--paper-radio-button-checked-ink-color, var(--primary-color));}#offRadio, #onRadio{position:absolute;box-sizing:border-box;top:0;left:0;width:100%;height:100%;border-radius:50%;}#offRadio{border:2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));background-color:var(--paper-radio-button-unchecked-background-color, transparent);transition:border-color 0.28s;}#onRadio{background-color:var(--paper-radio-button-checked-color, var(--primary-color));-webkit-transform:scale(0);transform:scale(0);transition:-webkit-transform ease 0.28s;transition:transform ease 0.28s;will-change:transform;}:host([checked]) #offRadio{border-color:var(--paper-radio-button-checked-color, var(--primary-color));}:host([checked]) #onRadio{-webkit-transform:scale(0.5);transform:scale(0.5);}#radioLabel{line-height:normal;position:relative;display:inline-block;vertical-align:middle;margin-left:var(--paper-radio-button-label-spacing, 10px);white-space:normal;color:var(--paper-radio-button-label-color, var(--primary-text-color));@apply --paper-radio-button-label;}:host([checked]) #radioLabel{@apply --paper-radio-button-label-checked;}:host-context([dir="rtl"]) #radioLabel{margin-left:0;margin-right:var(--paper-radio-button-label-spacing, 10px);}#radioLabel[hidden]{display:none;}:host([disabled]) #offRadio{border-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled][checked]) #onRadio{background-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #radioLabel{opacity:0.65;}</style><div id="radioContainer"><div id="offRadio"></div><div id="onRadio"></div></div><div id="radioLabel"><slot></slot></div></template><script>Polymer({is:'paper-radio-button',behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:'radio',"aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:'aria-checked'}},ready:function(){this._rippleContainer=this.$.radioContainer},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){var a=this.getComputedStyleValue('--calculated-paper-radio-button-ink-size').trim();if('-1px'===a){var b=parseFloat(this.getComputedStyleValue('--calculated-paper-radio-button-size').trim()),c=Math.floor(3*b);c%2!==b%2&&c++,this.updateStyles({"--paper-radio-button-ink-size":c+'px'})}})}});</script></dom-module><script>Polymer.IronMenubarBehaviorImpl={hostAttributes:{role:'menubar'},keyBindings:{left:'_onLeftKey',right:'_onRightKey'},_onUpKey:function(a){this.focusedItem.click(),a.detail.keyboardEvent.preventDefault()},_onDownKey:function(a){this.focusedItem.click(),a.detail.keyboardEvent.preventDefault()},get _isRTL(){return'rtl'===window.getComputedStyle(this).direction},_onLeftKey:function(a){this._isRTL?this._focusNext():this._focusPrevious(),a.detail.keyboardEvent.preventDefault()},_onRightKey:function(a){this._isRTL?this._focusPrevious():this._focusNext(),a.detail.keyboardEvent.preventDefault()},_onKeydown:function(a){this.keyboardEventMatchesKeys(a,'up down left right esc')||this._focusWithKeyboardEvent(a)}},Polymer.IronMenubarBehavior=[Polymer.IronMenuBehavior,Polymer.IronMenubarBehaviorImpl];</script><dom-module id="paper-radio-group" assetpath="bower_components/paper-radio-group/"><template><style>:host{display:inline-block;}:host ::slotted(*){padding:var(--paper-radio-group-item-padding, 12px);}</style><slot></slot></template></dom-module><script>Polymer({is:'paper-radio-group',behaviors:[Polymer.IronMenubarBehavior],hostAttributes:{role:'radiogroup',tabindex:0},properties:{attrForSelected:{type:String,value:'name'},selectedAttribute:{type:String,value:'checked'},selectable:{type:String,value:'paper-radio-button'},allowEmptySelection:{type:Boolean,value:!1}},select:function(a){var b=this._valueToItem(a);if(!(b&&b.hasAttribute('disabled'))){if(this.selected){var c=this._valueToItem(this.selected);if(this.selected==a)if(this.allowEmptySelection)a='';else return void(c&&(c.checked=!0));c&&(c.checked=!1)}Polymer.IronSelectableBehavior.select.apply(this,[a]),this.fire('paper-radio-group-changed')}},_activateFocusedItem:function(){this._itemActivate(this._valueForItem(this.focusedItem),this.focusedItem)},_onUpKey:function(a){this._focusPrevious(),a.preventDefault(),this._activateFocusedItem()},_onDownKey:function(a){this._focusNext(),a.preventDefault(),this._activateFocusedItem()},_onLeftKey:function(){Polymer.IronMenubarBehaviorImpl._onLeftKey.apply(this,arguments),this._activateFocusedItem()},_onRightKey:function(){Polymer.IronMenubarBehaviorImpl._onRightKey.apply(this,arguments),this._activateFocusedItem()}});</script><dom-module id="ros-rviz-global-options" assetpath="bower_components/ros-rviz/"><template><style include="iron-flex iron-flex-alignment"></style><style>label{@apply (--paper-font-common-base);}</style><paper-input id="fixedFrame" label="Fixed frame" value="[[globalOptions.fixedFrame]]" on-blur="_updateGlobalOptions"></paper-input><paper-input id="bgColor" label="Background color" value="[[globalOptions.background]]" on-blur="_updateGlobalOptions"></paper-input><paper-input id="websocketUrl" label="Websocket URL" value="[[globalOptions.url]]" on-blur="_updateGlobalOptions"></paper-input><paper-input id="webVideoUrl" label="Web video server URL" value="[[globalOptions.videoServer]]" on-blur="_updateGlobalOptions"></paper-input><paper-input id="colladaUrl" label="Collada file server URL" value="[[globalOptions.colladaServer]]" on-blur="_updateGlobalOptions"></paper-input><label id="colladaLabel">Collada loader:</label><paper-radio-group selected="{{globalOptions.colladaLoader}}" aria-labelledby="colladaLabel"><paper-radio-button name="collada">Loader 1</paper-radio-button><paper-radio-button name="collada2">Loader 2</paper-radio-button></paper-radio-group></template><script>Polymer({is:'ros-rviz-global-options',properties:{globalOptions:{type:Object,notify:!0},name:{type:String,value:'Options'}},ready:function(){if(this.globalOptions.background||this.set('globalOptions.background','#111111'),this.globalOptions.colladaLoader||this.set('globalOptions.colladaLoader','collada2'),!this.globalOptions.colladaServer){var a=window.location.protocol,b=window.location.hostname,c=a+'//'+b+':8001/';this.set('globalOptions.colladaServer',c)}if(this.globalOptions.fixedFrame||this.set('globalOptions.fixedFrame','/base_link'),!this.globalOptions.websocketUrl){var b=window.location.hostname,a='ws:';'https:'===window.location.protocol&&(a='wss:');var c=a+'//'+b+':9090';this.set('globalOptions.url',c)}if(!this.globalOptions.videoServer){var a=window.location.protocol,b=window.location.hostname,c=a+'//'+b+':9999';this.set('globalOptions.videoServer',c)}},destroy:function(){},hide:function(){},show:function(){},_updateGlobalOptions:function(){this.set('globalOptions.background',this.$.bgColor.value),this.set('globalOptions.colladaServer',this.$.colladaUrl.value),this.set('globalOptions.fixedFrame',this.$.fixedFrame.value),this.set('globalOptions.url',this.$.websocketUrl.value),this.set('globalOptions.videoServer',this.$.webVideoUrl.value)}});</script></dom-module><dom-module id="ros-rviz-point-cloud-2" assetpath="bower_components/ros-rviz/"><template><paper-input label="Topic" value="{{topic}}"></paper-input><paper-input label="Size" value="{{size}}"></paper-input></template><script>Polymer({is:'ros-rviz-point-cloud-2',properties:{name:{type:String,value:'Point cloud 2'},topic:{type:String,value:'',notify:!0},size:{type:Number,value:0.01,notify:!0},globalOptions:Object,isShown:Boolean,ros:Object,tfClient:Object,viewer:Object,_pc2:Object},observers:['_optionsChanged(topic, size, viewer, ros)'],destroy:function(){this._pc2&&(this._pc2.unsubscribe(),this.viewer.scene.remove(this._pc2.particles.sn),delete this._pc2)},hide:function(){this._pc2&&(this._pc2.unsubscribe(),this.viewer.scene.remove(this._pc2.particles.sn),delete this._pc2)},show:function(){this.isShown&&this._updateDisplay()},_optionsChanged:function(){var a=this;this.debounce('updateForOptions',function(){a.hide(),a.show()},200)},_updateDisplay:function(a){if(this.ros&&this.tfClient&&this.topic){this.destroy();this;this._pc2=new ROS3D.PointCloud2({ros:this.ros,topic:this.topic,size:this.size,max_pts:307200,tfClient:this.tfClient,rootObject:this.viewer.scene}),a&&a()}}});</script></dom-module><dom-module id="ros-rviz-point-cloud" assetpath="bower_components/ros-rviz/"><template><ros-service id="startPcService" on-response="_onPcStart" on-fail="_onPcStartFail" name="/start_point_cloud" ros="{{ros}}" service-type="rws_rviz/StartPointCloud"></ros-service><ros-service id="stopPcService" name="/stop_point_cloud" on-fail="_onPcStopFail" ros="{{ros}}" service-type="rws_rviz/StopPointCloud"></ros-service><paper-input label="Topic" value="{{topic}}" on-blur="_onOptionsChanged"></paper-input><paper-input label="Camera frame ID" value="{{frameId}}" on-blur="_onOptionsChanged"></paper-input></template><script>Polymer({is:'ros-rviz-point-cloud',properties:{topic:{type:String,value:'/head_mount_kinect/depth_registered/points'},frameId:{type:String,value:'/head_mount_kinect_rgb_optical_frame'},globalOptions:Object,isShown:Boolean,name:{type:String,value:'Point cloud'},tfClient:Object,viewer:Object,ros:Object,_cloud:{type:Object,value:null},_oldTopic:String,_sceneNode:Object,_url:String,_urlTopic:String},ready:function(){this._updateStream();var a=this;window.addEventListener('beforeunload',function(){a._endStream()}),this.show()},destroy:function(){this._cloud&&this._cloud.stopStream(),this._endStream(),this._sceneNode&&(this.viewer.scene.remove(this._sceneNode),delete this._sceneNode)},hide:function(){this._cloud&&this._cloud.stopStream(),this._sceneNode&&this.viewer.scene.remove(this._sceneNode)},show:function(){this.isShown&&(this._cloud&&this._cloud.startStream(),this._sceneNode&&this.viewer.scene.add(this._sceneNode))},_updateDisplay:function(){this;this._cloud&&this._cloud.stopStream();this._url&&(this._cloud=new ROS3D.DepthCloud({url:this._url,f:525}),this._cloud.startStream(),this._sceneNode=new ROS3D.SceneNode({frameID:this.frameId,tfClient:this.tfClient,object:this._cloud}),this._sceneNode.scale.x=0.5,this._sceneNode.scale.y=0.5,this._sceneNode.scale.z=0.5,this.viewer.scene.add(this._sceneNode))},_computeUrl:function(a){var b=this.globalOptions.videoServer+'/streams'+a+'.webm?enc=webm&bitrate=250000&framerate=15';return b},_onPcStart:function(a){this._urlTopic=a.detail.topic,this._url=this._computeUrl(this._urlTopic),this._updateDisplay()},_onOptionsChanged:function(){this._updateStream()},_updateStream:function(){this._endStream();this.topic&&(this._oldTopic=this.topic,this.$.startPcService.call({topic:this.topic,camera_frame_id:this.frameId,client_id:this.globalOptions.clientId}))},_endStream:function(){this._oldTopic&&this.$.stopPcService.call({topic:this._oldTopic,client_id:this.globalOptions.clientId})},_onPcStartFail:function(a){console.error('Error starting point cloud stream',a.detail)},_onPcStopFail:function(a){console.error('Error stopping point cloud stream',a.detail)}});</script></dom-module><dom-module id="ros-rviz-urdf" assetpath="bower_components/ros-rviz/"><template><paper-input label="Robot description topic" value="{{param}}"></paper-input></template><script>Polymer({is:'ros-rviz-urdf',properties:{name:{type:String,value:'Robot model'},param:{type:String,value:'robot_description',notify:!0},globalOptions:Object,isShown:Boolean,ros:Object,tfClient:Object,viewer:Object,_urdf:Object},observers:['_optionsChanged(param, tfClient, ros, globalOptions.colladaLoader, globalOptions.colladaServer)'],destroy:function(){},hide:function(){this.viewer&&this.viewer.scene.remove(this._urdf)},show:function(){this.viewer&&this.isShown&&this.viewer.addObject(this._urdf)},_optionsChanged:function(){var a=this;this.debounce('updateForOptions',function(){a.hide(),a._updateDisplay(function(){a.show()})},1e3)},_updateDisplay:function(a){if(this.ros&&this.tfClient&&this.param&&this.globalOptions.colladaLoader&&this.globalOptions.colladaServer){var b=new ROSLIB.Param({ros:this.ros,name:this.param}),c=this;b.get(function(b){var d=new ROSLIB.UrdfModel({string:b}),e=ROS3D.COLLADA_LOADER_2;'collada'===c.globalOptions.colladaLoader?e=ROS3D.COLLADA_LOADER:'collada2'===c.globalOptions.colladaLoader?e=ROS3D.COLLADA_LOADER_2:(console.warn('Unknown Collada loader',c.globalOptions.colladaLoader),e=ROS3D.COLLADA_LOADER_2),c.hide(),c._urdf=new ROS3D.Urdf({urdfModel:d,path:c.globalOptions.colladaServer,tfClient:c.tfClient,tfPrefix:'',loader:e}),a&&a()})}}});</script></dom-module><dom-module id="ros-rviz-display" assetpath="bower_components/ros-rviz/"><template><style include="iron-flex iron-flex-alignment"></style><style>:host{display:block;}h1{@apply (--paper-font-subhead);}paper-checkbox{display:inline;}#collapse{padding:0px 10px;}#header{cursor:pointer;padding:0px 10px;}#header:hover{background-color:var(--paper-grey-200);}#deleteButton{color:var(--paper-grey-500);}#deleteButton:hover{color:var(--paper-red-500);}[hidden]{display:none;}</style><div class="layout horizontal" id="header" on-tap="_toggleCollapse"><paper-checkbox checked="{{isShown}}" hidden$="[[permanent]]" on-tap="_handleCheckbox"><h1>{{name}}</h1></paper-checkbox><h1 hidden$="[[!permanent]]">{{name}}</h1><div class="flex"></div><paper-icon-button id="deleteButton" icon="cancel" on-tap="destroy" hidden$="[[permanent]]"></paper-icon-button></div><iron-collapse id="collapse"><template is="dom-if" if="{{_typeIs('globalOptions', type)}}"><ros-rviz-global-options id="display" global-options="{{globalOptions}}"></ros-rviz-global-options></template><template is="dom-if" if="{{_typeIs('grid', type)}}" restamp="true"><ros-rviz-grid id="display" cell-size="{{options.cellSize}}" color="{{options.color}}" global-options="{{globalOptions}}" is-shown="{{isShown}}" num-cells="{{options.numCells}}" viewer="{{viewer}}"></ros-rviz-grid></template><template is="dom-if" if="{{_typeIs('depthCloud', type)}}" restamp="true"><ros-rviz-depth-cloud id="display" topic="{{options.topic}}" frame-id="{{options.frameId}}" global-options="{{globalOptions}}" is-shown="{{isShown}}" ros="{{ros}}" tf-client="{{tfClient}}" viewer="{{viewer}}"></ros-rviz-depth-cloud></template><template is="dom-if" if="{{_typeIs('interactiveMarkers', type)}}" restamp="true"><ros-rviz-interactive-markers id="display" global-options="{{globalOptions}}" is-shown="{{isShown}}" ros="{{ros}}" tf-client="{{tfClient}}" topic="{{options.topic}}" viewer="{{viewer}}"></ros-rviz-interactive-markers></template><template is="dom-if" if="{{_typeIs('markers', type)}}" restamp="true"><ros-rviz-markers id="display" global-options="{{globalOptions}}" is-shown="{{isShown}}" ros="{{ros}}" tf-client="{{tfClient}}" topic="{{options.topic}}" viewer="{{viewer}}"></ros-rviz-markers></template><template is="dom-if" if="{{_typeIs('markerArray', type)}}" restamp="true"><ros-rviz-marker-array id="display" global-options="{{globalOptions}}" is-shown="{{isShown}}" ros="{{ros}}" tf-client="{{tfClient}}" topic="{{options.topic}}" viewer="{{viewer}}"></ros-rviz-marker-array></template><template is="dom-if" if="{{_typeIs('occupancyGrid', type)}}" restamp="true"><ros-rviz-occupancy-grid id="display" continuous="{{options.continuous}}" global-options="[[globalOptions]]" is-shown="[[isShown]]" opacity="{{options.opacity}}" ros="[[ros]]" tf-client="[[tfClient]]" topic="{{options.topic}}" viewer="{{viewer}}"></ros-rviz-occupancy-grid></template><template is="dom-if" if="{{_typeIs('pointCloud', type)}}" restamp="true"><ros-rviz-point-cloud id="display" global-options="{{globalOptions}}" is-shown="{{isShown}}" ros="{{ros}}" tf-client="{{tfClient}}" topic="{{options.topic}}" viewer="{{viewer}}"></ros-rviz-point-cloud></template><template is="dom-if" if="{{_typeIs('pointCloud2', type)}}" restamp="true"><ros-rviz-point-cloud-2 id="display" global-options="{{globalOptions}}" is-shown="{{isShown}}" ros="{{ros}}" size="{{options.size}}" tf-client="{{tfClient}}" topic="{{options.topic}}" viewer="{{viewer}}"></ros-rviz-point-cloud-2></template><template is="dom-if" if="{{_typeIs('urdf', type)}}" restamp="true"><ros-rviz-urdf id="display" global-options="{{globalOptions}}" is-shown="{{isShown}}" param="{{options.param}}" ros="{{ros}}" tf-client="{{tfClient}}" viewer="{{viewer}}"></ros-rviz-urdf></template></iron-collapse></template><script>Polymer({is:'ros-rviz-display',properties:{display:Object,name:String,index:Number,isShown:{type:Boolean,observer:'_onIsShownChanged'},globalOptions:{type:Object,notify:!0},options:{type:Object,value:function(){return{}}},permanent:{type:Boolean,value:!1},ros:Object,tfClient:Object,type:{type:String},viewer:Object},show:function(){this.isShown=!0},detached:function(){this.hide(),this.destroy()},destroy:function(){if(!this.permanent){var a=this.$$('#display');a&&(a.hide(),a.destroy(),this.fire('delete-display',{index:this.index}))}},hide:function(){this.permanent||(this.isShown=!1)},_handleCheckbox:function(a){a.stopPropagation()},_onIsShownChanged:function(a){var b=this.$$('#display');a&&b?b.show():!a&&b&&b.hide()},_toggleCollapse:function(){this.$.collapse.toggle()},_typeIs:function(a,b){return a===b}});</script></dom-module><dom-module id="ros-rviz" assetpath="bower_components/ros-rviz/"><template><style include="iron-flex iron-flex-alignment"><style>
      :host{display:block;height:100%;@apply (--paper-font-common-base);}#displays{background-color:var(--paper-grey-50);color:rgba(0, 0, 0, 0.87);}#displayHeader{background-color:var(--paper-grey-300);color:rgba(0, 0, 0, 0.87);}#addButton{color:rgba(0, 0, 0, 0.87);background-color:#ffc107;position:relative;top:28px;z-index:2;}#container{height:100%;}#sidebar{height:100%;}#displays{width:300px;height:100%;}#viewer{overflow:hidden;width:100%;height:100%;}#openDisplays{position:absolute;margin:10px;color:rgba(255, 255, 255, 0.87);background-color:rgba(255, 255, 255, 0.2);}#openDisplays:hover{background-color:rgba(255, 255, 255, 0.3);}paper-item{--paper-item:{cursor:pointer;};}[hidden]{display:none;}paper-button{@apply (--paper-font-button);}paper-dialog{max-width:900px;width:90%;height:90%;padding:0px 24px;margin-top:0;}span[main-title]{@apply (--paper-font-title);}#displayPaperMenu{min-width:200px;}</style><div id="container" class="layout horizontal"><iron-collapse id="sidebar" opened="{{config.sidebarOpened}}" horizontal=""><app-header-layout id="displays" has-scrolling-region=""><app-header slot="header" fixed="" id="displayHeader"><app-toolbar><paper-icon-button id="closeDisplays" icon="arrow-back" on-tap="_toggleDisplayList"></paper-icon-button><paper-tooltip position="right" animation-delay="0" for="closeDisplays">Hide displays panel</paper-tooltip><span main-title="">Displays</span><paper-tooltip position="bottom" animation-delay="0" for="addButton">Add a display</paper-tooltip><paper-menu-button id="displayMenu"><paper-fab icon="add" id="addButton" slot="dropdown-trigger"></paper-fab><paper-listbox id="displayPaperMenu" slot="dropdown-content" on-tap="_onDisplaySelected"><paper-item on-tap="addDepthCloud">Depth cloud</paper-item><paper-item on-tap="addGrid">Grid</paper-item><paper-item on-tap="addInteractiveMarkers">Interactive markers</paper-item><paper-item on-tap="addMarkers">Markers</paper-item><paper-item on-tap="addMarkerArray">Marker array</paper-item><paper-item on-tap="addOccupancyGrid">Occupancy grid</paper-item><paper-item on-tap="addPointCloud2">Point cloud 2</paper-item><paper-item on-tap="addUrdf">Robot model</paper-item></paper-listbox></paper-menu-button></app-toolbar></app-header><paper-button on-tap="_showConfig">Load config</paper-button><div id="displayList"><ros-rviz-display id="options" global-options="{{config.globalOptions}}" name="Global options" permanent="" type="globalOptions"></ros-rviz-display><template is="dom-repeat" items="{{config.displays}}" as="display"><ros-rviz-display global-options="{{config.globalOptions}}" index="{{index}}" is-shown="{{display.isShown}}" on-delete-display="_deleteDisplay" viewer="{{_viewer}}" ros="{{ros}}" tf-client="{{_tfClient}}" name="{{display.name}}" options="{{display.options}}" type="{{display.type}}"></ros-rviz-display></template></div></app-header-layout></iron-collapse><paper-fab icon="menu" id="openDisplays" hidden$="{{config.sidebarOpened}}" on-tap="_toggleDisplayList"></paper-fab><paper-tooltip position="right" animation-delay="0" for="openDisplays">Open displays</paper-tooltip><div id="viewer" class="flex"></div><paper-dialog id="configDialog" modal="" class="layout vertical"><textarea id="configText" class="flex"></textarea><div class="buttons"><paper-button dialog-dismiss="">Cancel</paper-button><paper-button dialog-confirm="" autofocus="" on-tap="_applyConfigText">Apply</paper-button></div></paper-dialog></div></template><script>Polymer({is:'ros-rviz',properties:{config:{notify:!0,type:Object,value:function(){return{globalOptions:{},sidebarOpened:!0,displays:[]}}},ros:{type:Object,observer:'_rosChanged'},websocketUrl:{notify:!0,type:String,observer:'_websocketUrlChanged'},_tfClient:Object,_viewer:Object},behaviors:[Polymer.IronResizableBehavior],observers:['_fixedFrameChanged(config.globalOptions.fixedFrame)','_backgroundChanged(config.globalOptions.background)','_globalWebsocketUrlChanged(config.globalOptions.url)'],_websocketUrlChanged:function(a){this.set('config.globalOptions.url',a)},_globalWebsocketUrlChanged:function(a){this.websocketUrl=a},_backgroundChanged:function(a){a&&this._viewer&&this._viewer.renderer.setClearColor(parseInt(a.replace('#','0x'),16),1)},_fixedFrameChanged:function(a){this._tfClient&&(this._tfClient.fixedFrame=a,this._tfClient.updateGoal())},attached:function(){Polymer.RenderStatus.beforeNextRender(this,function(){if(!this._attached){var a=this.$.viewer.offsetWidth,b=this.$.viewer.offsetHeight,c=this.config.globalOptions.background,d=document.getElementById,e=this;document.getElementById=function(a){return e.shadowRoot.getElementById(a)},this._viewer=new ROS3D.Viewer({background:c,divID:'viewer',width:a,height:b,antialias:!0}),document.getElementById=d,this._attached=!0}}),Polymer.RenderStatus.afterNextRender(this,function(){var a=this;window.setTimeout(function(){a.resize()},100),this.addEventListener('iron-resize',function(){a.resize()})})},addGrid:function(){this.push('config.displays',{isShown:!0,name:'Grid',options:{cellSize:1,color:'#cccccc',numCells:10},type:'grid'})},addInteractiveMarkers:function(){this.push('config.displays',{isShown:!0,name:'Interactive Markers',options:{topic:'/basic_controls'},type:'interactiveMarkers'})},addMarkers:function(){this.push('config.displays',{isShown:!0,name:'Markers',options:{topic:'/visualization_marker'},type:'markers'})},addMarkerArray:function(){this.push('config.displays',{isShown:!0,name:'Marker array',options:{topic:'/visualization_marker_array'},type:'markerArray'})},addOccupancyGrid:function(){this.push('config.displays',{isShown:!0,name:'Map',options:{color:{r:255,g:255,b:255},continuous:!0,opacity:1,topic:'/map'},type:'occupancyGrid'})},addDepthCloud:function(){this.push('config.displays',{isShown:!0,name:'Depth cloud',options:{topic:'depthcloud_encoded',frameId:'/camera_rgb_optical_frame'},type:'depthCloud'})},addPointCloud:function(){this.push('config.displays',{isShown:!0,name:'Point cloud',options:{topic:''},type:'pointCloud'})},addPointCloud2:function(){this.push('config.displays',{isShown:!0,name:'Point cloud 2',options:{topic:'',size:0.01},type:'pointCloud2'})},addUrdf:function(){this.push('config.displays',{isShown:!0,name:'Robot model',options:{param:'robot_description'},type:'urdf'})},resize:function(){if(this._viewer){var a=this.$.viewer.offsetWidth,b=this.$.viewer.offsetHeight;this._viewer.resize(a,b)}},_deleteDisplay:function(a){var b=a.detail.index;this.splice('config.displays',b,1)},_onDisplaySelected:function(){this.$.displayPaperMenu.selected=void 0},_rosChanged:function(){this._tfClient=new ROSLIB.TFClient({ros:this.ros,angularThres:0.01,fixedFrame:this.config.globalOptions.fixedFrame,transThres:0.01,rate:10})},_toggleDisplayList:function(){this.$.sidebar.toggle()},_showConfig:function(){this.$.configText.value=JSON.stringify(this.config,null,2),this.$.configDialog.open()},_applyConfigText:function(){var a=this.$.configText.value,b=JSON.parse(a);this.config=b}});</script></dom-module><iron-iconset-svg name="paper-dropdown-menu" size="24"><svg><defs><g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g></defs></svg></iron-iconset-svg><dom-module id="paper-dropdown-menu-shared-styles" assetpath="bower_components/paper-dropdown-menu/"><template><style>:host{display:inline-block;position:relative;text-align:left;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;--paper-input-container-input:{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%;box-sizing:border-box;cursor:pointer;};@apply --paper-dropdown-menu;}:host([disabled]){@apply --paper-dropdown-menu-disabled;}:host([noink]) paper-ripple{display:none;}:host([no-label-float]) paper-ripple{top:8px;}paper-ripple{top:12px;left:0px;bottom:8px;right:0px;@apply --paper-dropdown-menu-ripple;}paper-menu-button{display:block;padding:0;@apply --paper-dropdown-menu-button;}paper-input{@apply --paper-dropdown-menu-input;}iron-icon{color:var(--disabled-text-color);@apply --paper-dropdown-menu-icon;}</style></template></dom-module><dom-module id="paper-dropdown-menu" assetpath="bower_components/paper-dropdown-menu/"><template><style include="paper-dropdown-menu-shared-styles"></style><span role="button"></span><paper-menu-button id="menuButton" vertical-align="[[verticalAlign]]" horizontal-align="[[horizontalAlign]]" dynamic-align="[[dynamicAlign]]" vertical-offset="[[_computeMenuVerticalOffset(noLabelFloat)]]" disabled="[[disabled]]" no-animations="[[noAnimations]]" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect" opened="{{opened}}" close-on-activate="" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]"><div class="dropdown-trigger" slot="dropdown-trigger"><paper-ripple></paper-ripple><paper-input type="text" invalid="[[invalid]]" readonly="" disabled="[[disabled]]" value="[[selectedItemLabel]]" placeholder="[[placeholder]]" error-message="[[errorMessage]]" always-float-label="[[alwaysFloatLabel]]" no-label-float="[[noLabelFloat]]" label="[[label]]"><iron-icon icon="paper-dropdown-menu:arrow-drop-down" suffix="" slot="suffix"></iron-icon></paper-input></div><slot id="content" name="dropdown-content" slot="dropdown-content"></slot></paper-menu-button></template><script>(function(){'use strict';Polymer({is:'paper-dropdown-menu',behaviors:[Polymer.IronButtonState,Polymer.IronControlState,Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior],properties:{selectedItemLabel:{type:String,notify:!0,readOnly:!0},selectedItem:{type:Object,notify:!0,readOnly:!0},value:{type:String,notify:!0,readOnly:!0},label:{type:String},placeholder:{type:String},errorMessage:{type:String},opened:{type:Boolean,notify:!0,value:!1,observer:'_openedChanged'},allowOutsideScroll:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1,reflectToAttribute:!0},alwaysFloatLabel:{type:Boolean,value:!1},noAnimations:{type:Boolean,value:!1},horizontalAlign:{type:String,value:'right'},verticalAlign:{type:String,value:'top'},dynamicAlign:{type:Boolean},restoreFocusOnClose:{type:Boolean,value:!0}},listeners:{tap:'_onTap'},keyBindings:{"up down":'open',esc:'close'},hostAttributes:{role:'combobox',"aria-autocomplete":'none',"aria-haspopup":'true'},observers:['_selectedItemChanged(selectedItem)'],attached:function(){var a=this.contentElement;a&&a.selectedItem&&this._setSelectedItem(a.selectedItem)},get contentElement(){for(var a=Polymer.dom(this.$.content).getDistributedNodes(),b=0,c=a.length;b<c;b++)if(a[b].nodeType===Node.ELEMENT_NODE)return a[b]},open:function(){this.$.menuButton.open()},close:function(){this.$.menuButton.close()},_onIronSelect:function(a){this._setSelectedItem(a.detail.item)},_onIronDeselect:function(){this._setSelectedItem(null)},_onTap:function(a){Polymer.Gestures.findOriginalTarget(a)===this&&this.open()},_selectedItemChanged:function(a){var b='';b=a?a.label||a.getAttribute('label')||a.textContent.trim():'',this._setValue(b),this._setSelectedItemLabel(b)},_computeMenuVerticalOffset:function(a){return a?-4:8},_getValidity:function(){return this.disabled||!this.required||this.required&&!!this.value},_openedChanged:function(){var a=this.opened?'true':'false',b=this.contentElement;b&&b.setAttribute('aria-expanded',a)}})})();</script></dom-module><dom-module id="shared-styles" assetpath="src/"><template><style include="paper-material-styles"></style><style>paper-button{@apply (--paper-font-button);margin-left:0;}paper-button.normal{background-color:var(--paper-grey-300);}paper-button.normal:hover{background-color:var(--paper-grey-500);}paper-button.clear{color:#000;background-color:transparent;}paper-button.clear:hover{background-color:var(--paper-grey-300);}paper-button.important{color:#000;background-color:var(--paper-amber-500);}paper-button.important:hover{background-color:var(--paper-amber-300);}paper-button.delete{background-color:transparent;color:var(--paper-red-500);}paper-button.delete:hover{background-color:var(--paper-red-100);}.paper-material{@apply --paper-material-elevation-1;}[hidden]{display:none;}</style></template></dom-module><dom-module id="pbd-arm-cart-action" assetpath="src/"><template><style include="shared-styles"></style><style is="custom-style" include="iron-flex iron-flex-alignment"></style><style>:host{display:block;}paper-dropdown-menu{max-width:150px;}.read{margin-left:10px;}paper-input{max-width:250px;}</style><ros-topic auto="" id="eventPub" msg-type="rapid_pbd_msgs/EditorEvent" topic="rapid_pbd/editor_events" ros="[[ros]]"></ros-topic><div class="layout horizontal center"><paper-dropdown-menu label="Arm to move" hidden$="[[!params.hasTwoArms]]"><paper-listbox slot="dropdown-content" attr-for-selected="data-actuator-group" selected="{{action.actuator_group}}"><paper-item data-actuator-group="left arm" on-tap="_updateActuatorGroup">Left arm</paper-item><paper-item data-actuator-group="right arm" on-tap="_updateActuatorGroup">Right arm</paper-item></paper-listbox></paper-dropdown-menu><paper-button class="read normal" on-tap="_updatePose">Read position</paper-button></div><div><paper-dropdown-menu label="Relative to"><paper-listbox slot="dropdown-content" selected="[[_landmarkName(action.landmark)]]" attr-for-selected="name"><template is="dom-repeat" items="[[landmarks]]"><paper-item name="[[_landmarkName(item)]]" on-tap="_updateLandmark">[[_landmarkName(item)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div><paper-input label="x" value="[[action.pose.position.x]]" on-change="_xChanged"></paper-input><paper-input label="y" value="[[action.pose.position.y]]" on-change="_yChanged"></paper-input><paper-input label="z" value="[[action.pose.position.z]]" on-change="_zChanged"></paper-input></div></template><script>Polymer({is:'pbd-arm-cart-action',properties:{action:{notify:!0,type:Object},index:Number,stepIndex:Number,params:Object,programId:String,landmarks:Array,ros:Object},observers:['_actionChanged(action)'],_actionChanged:function(a){if('move to cartesian goal'===a.type&&('arm'===a.actuator_group||'left arm'===a.actuator_group||'right arm'===a.actuator_group)){if(!a.control_strategy){this.set('action.control_strategy',{type:'default position',max_speed:0.2})}if(a.control_strategy.max_speed&&0!==a.control_strategy.max_speed||this.set('action.control_strategy.max_speed',0.2),0===this.action.pose.orientation.w&&0===this.action.pose.orientation.x&&0===this.action.pose.orientation.y&&0===this.action.pose.orientation.z){var b=this;this.debounce('get_ee_pose',function(){b._updatePose()},100)}}},_updateActuatorGroup:function(a){var b=a.target.dataset.actuatorGroup;b&&(this.set('action.actuator_group',b),this._updatePose())},_updateLandmark:function(a){this.set('action.landmark',a.model.item),this._updatePose()},_landmarkName:function(a){if(!a||!a.type)return'Unknown landmark';return'tf frame'===a.type?'base_link'===a.name||'base_footprint'===a.name||'base'===a.name?'Robot base':'torso_lift_link'===a.name||'torso'===a.name?'Robot torso':a.name:'surface box'===a.type?a.name:'Unknown landmark'},_updatePose:function(){var a={type:'get pose',program_info:{db_id:this.programId},step_num:this.stepIndex,action_num:this.index,action:this.action};this.$.eventPub.publish(a)},_maxSpeedChanged:function(a){this._parseString(a.target.value,'action.control_strategy.max_speed')},_xChanged:function(a){this._parseString(a.target.value,'action.pose.position.x')},_yChanged:function(a){this._parseString(a.target.value,'action.pose.position.y')},_zChanged:function(a){this._parseString(a.target.value,'action.pose.position.z')},_parseString:function(a,b){if('string'===typeof a){var c=parseFloat(a);isNaN(c)||'0.'===a||this.set(b,c)}else this.set(b,a)}});</script></dom-module><dom-module id="pbd-detect-surface-objects-action" assetpath="src/"><template><style include="shared-styles"></style><style>:host{display:block;}paper-button{margin-left:10px;}</style><ros-topic auto="" id="eventPub" msg-type="rapid_pbd_msgs/EditorEvent" topic="rapid_pbd/editor_events" ros="[[ros]]"></ros-topic><p>Detected objects can be used as landmarks starting on the next step.</p><paper-button class="normal" on-tap="_detect">Detect now</paper-button></template><script>Polymer({is:'pbd-detect-surface-objects-action',properties:{action:{notify:!0,type:Object},programId:String,stepNum:Number,ros:Object},_detect:function(){if(!this.ros||!this.programId||!this.stepNum&&0!==this.stepNum)return void console.error('Unable to call detection right now.');var a={type:'detect surface objects',program_info:{db_id:this.programId},step_num:this.stepNum};this.$.eventPub.publish(a)}});</script></dom-module><dom-module id="pbd-gripper-action" assetpath="src/"><template><style include="shared-styles"></style><style is="custom-style" include="iron-flex iron-flex-alignment"></style><style>:host{display:block;}paper-button{margin-left:10px;}</style><ros-action-client id="armAction" server="/gripper_controller/gripper_action" action-type="control_msgs/GripperCommandAction" ros="[[ros]]"></ros-action-client><ros-action-client id="leftAction" server="/rapid_pbd/l_gripper_action" action-type="control_msgs/GripperCommandAction" ros="[[ros]]"></ros-action-client><ros-action-client id="rightAction" server="/rapid_pbd/r_gripper_action" action-type="control_msgs/GripperCommandAction" ros="[[ros]]"></ros-action-client><div class="layout horizontal center"><paper-dropdown-menu label="Gripper" hidden$="[[!params.hasTwoArms]]"><paper-listbox slot="dropdown-content" attr-for-selected="data-actuator-group" selected="{{action.actuator_group}}"><paper-item data-actuator-group="left gripper">Left gripper</paper-item><paper-item data-actuator-group="right gripper">Right gripper</paper-item></paper-listbox></paper-dropdown-menu><paper-input hidden$="[[_isOpen]]" label="Closing force (35-100 N)" value="[[action.gripper_command.max_effort]]" on-change="_maxEffortChanged"></paper-input><paper-button class="normal" hidden$="[[!_isOpen]]" on-tap="_openGripper">Open now</paper-button><paper-button class="normal" hidden$="[[_isOpen]]" on-tap="_closeGripper">Close now</paper-button></div></template><script>Polymer({is:'pbd-gripper-action',properties:{action:{notify:!0,type:Object},params:Object,ros:Object,_isOpen:{type:Boolean,computed:'_computeIsOpen(action.gripper_command)'}},observers:['_actionChanged(action)'],_actionChanged:function(a){var b=a.type,c=a.actuator_group;'actuate gripper'===b&&('gripper'===c||'left gripper'===c||'right gripper'===c)&&(a.gripper_command||this.set('action.gripper_command',{}))},_computeIsOpen:function(a){return!!a&&0<a.position},_openGripper:function(){var a={command:this.action.gripper_command};'gripper'===this.action.actuator_group?this.$.armAction.send(a):'left gripper'===this.action.actuator_group?this.$.leftAction.send(a):'right gripper'===this.action.actuator_group&&this.$.rightAction.send(a)},_closeGripper:function(){var a={command:this.action.gripper_command};'gripper'===this.action.actuator_group?this.$.armAction.send(a):'left gripper'===this.action.actuator_group?this.$.leftAction.send(a):'right gripper'===this.action.actuator_group&&this.$.rightAction.send(a)},_maxEffortChanged:function(a){var b=a.target.value;if('string'===typeof b){var c=parseFloat(b);isNaN(c)||'0.'===b||this.set('action.gripper_command.max_effort',c)}}});</script></dom-module><script>(function(){function a(a){function b(b,c,d,e,f,g){for(;0<=f&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!B(c)&&u.keys(c),h=(g||c).length,i=0<a?0:h-1;return 3>arguments.length&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=w(c,d);for(var e=A(b),f=0<a?0:e-1;0<=f&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,g){var h=0,i=A(d);if('number'==typeof g)0<a?h=0<=g?g:f(g+i,h):i=0<=g?Math.min(g+1,i):g+i+1;else if(c&&g&&i)return g=c(d,e),d[g]===e?g:-1;if(e!==e)return g=b(m.call(d,h,i),u.isNaN),0<=g?g+h:-1;for(g=0<a?h:i-1;0<=g&&g<i;g+=a)if(d[g]===e)return g;return-1}}function d(a,b){var c=G.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f='constructor';for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=G[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var e=Math.floor,f=Math.max,g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};'undefined'===typeof exports?g._=u:('undefined'!==typeof module&&module.exports&&(exports=module.exports=u),exports._=u),u.VERSION='1.8.3';var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,Infinity)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;e<d;e++)for(var f,g=arguments[e],h=a(g),j=h.length,k=0;k<j;k++)f=h[k],b&&void 0!==c[f]||(c[f]=g[f]);return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=z('length'),B=function(a){var b=A(a);return'number'==typeof b&&0<=b&&b<=9007199254740991};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(B(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d,e=!B(a)&&u.keys(a),f=(e||a).length,g=Array(f),h=0;h<f;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;if(d=B(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d)return a[d]},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d,e=!B(a)&&u.keys(a),f=(e||a).length,g=0;g<f;g++)if(d=e?e[g]:g,!b(a[d],d,a))return!1;return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d,e=!B(a)&&u.keys(a),f=(e||a).length,g=0;g<f;g++)if(d=e?e[g]:g,b(a[d],d,a))return!0;return!1},u.contains=u.includes=u.include=function(a,b,c,d){return B(a)||(a=u.values(a)),('number'!=typeof c||d)&&(c=0),0<=u.indexOf(a,b,c)},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-Infinity,g=-Infinity;if(null==b&&null!=a){a=B(a)?a:u.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-Infinity&&f===-Infinity)&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=Infinity,g=Infinity;if(null==b&&null!=a){a=B(a)?a:u.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d<f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e<g||e===Infinity&&f===Infinity)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=B(a)?a:u.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(B(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,f(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(c,d){var e=c.criteria,a=d.criteria;if(e!==a){if(e>a||void 0===e)return 1;if(e<a||void 0===a)return-1}return c.index-d.index}),'value')};var C=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=C(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=C(function(a,b,c){a[c]=b}),u.countBy=C(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):B(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:B(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,f(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,f(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var D=function(a,b,c,d){for(var e,f=[],g=0,h=d||0,i=A(a);h<i;h++)if(e=a[h],B(e)&&(u.isArray(e)||u.isArguments(e))){b||(e=D(e,b,c));var k=0,j=e.length;for(f.length+=j;k<j;)f[g++]=e[k++]}else c||(f[g++]=e);return f};u.flatten=function(a,b){return D(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=A(a);g<h;g++){var j=a[g],k=c?c(j,g,a):j;b?((!g||f!==k)&&e.push(j),f=k):c?!u.contains(f,k)&&(f.push(k),e.push(j)):!u.contains(e,j)&&e.push(j)}return e},u.union=function(){return u.uniq(D(arguments,!0,!0))},u.intersection=function(a){for(var b,c=[],d=arguments.length,e=0,f=A(a);e<f;e++)if(b=a[e],!u.contains(c,b)){for(var g=1;g<d&&!!u.contains(arguments[g],b);g++);g===d&&c.push(b)}return c},u.difference=function(a){var b=D(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,A).length||0,c=Array(b),d=0;d<b;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=A(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=b(1),u.findLastIndex=b(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var f=c(b),g=0,h=A(a);g<h;){var i=e((g+h)/2);c(a[i])<f?g=i+1:h=i}return g},u.indexOf=c(1,u.findIndex,u.sortedIndex),u.lastIndexOf=c(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=f(Math.ceil((b-a)/c),0),e=Array(d),g=0;g<d;g++,a+=c)e[g]=a;return e};var E=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError('Bind must be called on a function');var c=m.call(arguments,2),d=function(){return E(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return E(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error('bindAll must be passed function names');for(b=1;b<d;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=''+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||!1!==c.leading||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),!g&&(d=e=null)):!g&&!1!==c.trailing&&(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;j<b&&0<=j?d=setTimeout(i,b-j):(d=null,!c&&(h=a.apply(f,e),!d&&(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}},u.before=function(a,b){var c;return function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var F=!{toString:null}.propertyIsEnumerable('toString'),G=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return F&&d(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return F&&d(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=D(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(D(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e,f=Object(a),g=0;g<d;g++)if(e=c[g],b[e]!==f[e]||!(e in f))return!1;return!0};var H=function(c,d,e,f){if(c===d)return 0!==c||1/c===1/d;if(null==c||null==d)return c===d;c instanceof u&&(c=c._wrapped),d instanceof u&&(d=d._wrapped);var g=n.call(c);if(g!==n.call(d))return!1;switch(g){case'[object RegExp]':case'[object String]':return''+c===''+d;case'[object Number]':return+c===+c?0===+c?1/+c===1/d:+c===+d:+d!==+d;case'[object Date]':case'[object Boolean]':return+c===+d;}var h='[object Array]'===g;if(!h){if('object'!=typeof c||'object'!=typeof d)return!1;var i=c.constructor,j=d.constructor;if(i!==j&&!(u.isFunction(i)&&i instanceof i&&u.isFunction(j)&&j instanceof j)&&'constructor'in c&&'constructor'in d)return!1}e=e||[],f=f||[];for(var k=e.length;k--;)if(e[k]===c)return f[k]===d;if(e.push(c),f.push(d),h){if(k=c.length,k!==d.length)return!1;for(;k--;)if(!H(c[k],d[k],e,f))return!1}else{var l,m=u.keys(c);if(k=m.length,u.keys(d).length!==k)return!1;for(;k--;)if(l=m[k],!(u.has(d,l)&&H(c[l],d[l],e,f)))return!1}return e.pop(),f.pop(),!0};u.isEqual=function(c,a){return H(c,a)},u.isEmpty=function(a){return!(null!=a)||(B(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length)},u.isElement=function(a){return!!(a&&1===a.nodeType)},u.isArray=p||function(a){return'[object Array]'===n.call(a)},u.isObject=function(a){var b=typeof a;return'function'===b||'object'===b&&!!a},u.each(['Arguments','Function','String','Number','Date','RegExp','Error'],function(a){u['is'+a]=function(b){return n.call(b)==='[object '+a+']'}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,'callee')}),'function'!=typeof /./&&'object'!=typeof Int8Array&&(u.isFunction=function(a){return'function'==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return!0===a||!1===a||'[object Boolean]'===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(f(0,a));b=v(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+e(Math.random()*(b-a+1))},u.now=Date.now||function(){return new Date().getTime()};var I={"&":'&amp;',"<":'&lt;',">":'&gt;','"':'&quot;',"'":'&#x27;',"`":'&#x60;'},J=u.invert(I),K=function(a){var b=function(b){return a[b]},c='(?:'+u.keys(a).join('|')+')',d=RegExp(c),e=RegExp(c,'g');return function(a){return a=null==a?'':''+a,d.test(a)?a.replace(e,b):a}};u.escape=K(I),u.unescape=K(J),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var L=0;u.uniqueId=function(a){var b=++L+'';return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,N={"'":'\'',"\\":'\\',"\r":'r',"\n":'n',"\u2028":'u2028',"\u2029":'u2029'},O=/\\|'|\r|\n|\u2028|\u2029/g,P=function(a){return'\\'+N[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||M).source,(b.interpolate||M).source,(b.evaluate||M).source].join('|')+'|$','g'),e=0,f='__p+=\'';a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(O,P),e=h+b.length,c?f+='\'+\n((__t=('+c+'))==null?\'\':_.escape(__t))+\n\'':d?f+='\'+\n((__t=('+d+'))==null?\'\':__t)+\n\'':g&&(f+='\';\n'+g+'\n__p+=\''),b}),f+='\';\n',b.variable||(f='with(obj||{}){\n'+f+'}\n'),f='var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\n'+f+'return __p;\n';try{var g=new Function(b.variable||'obj','_',f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,u)},i=b.variable||'obj';return h.source='function('+i+'){\n'+f+'}',h},u.chain=function(a){var b=u(a);return b._chain=!0,b};var Q=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),Q(this,c.apply(u,a))}})},u.mixin(u),u.each(['pop','push','reverse','shift','sort','splice','unshift'],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),('shift'===a||'splice'===a)&&0===c.length&&delete c[0],Q(this,c)}}),u.each(['concat','join','slice'],function(a){var b=i[a];u.prototype[a]=function(){return Q(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return''+this._wrapped},'function'===typeof define&&define.amd&&define('underscore',[],function(){return u})}).call(this);</script><dom-module id="pbd-head-action" assetpath="src/"><template><style include="shared-styles"></style><style is="custom-style" include="iron-flex iron-flex-alignment"></style><style>:host{display:block;}paper-button{margin-left:10px;}</style><ros-action-client id="headAction" server="[[_computeServer(params.robot)]]" action-type="control_msgs/FollowJointTrajectoryAction" ros="[[ros]]"></ros-action-client><div class="layout vertical"><paper-input type="number" step="1" min="-160" max="160" label="Pan angle (degrees, positive value looks left)" value="{{panDegrees}}" on-change="_save"></paper-input><paper-input hidden$="[[!_canTilt(params.robot)]]" type="number" step="1" min="-30" max="60" label="Tilt angle (degrees, positive value looks down)" value="{{tiltDegrees}}" on-change="_save"></paper-input><paper-button class="normal" on-tap="_moveHead">Move now</paper-button></div></template><script>Polymer({is:'pbd-head-action',properties:{action:{notify:!0,type:Object,observer:'_actionChanged'},panDegrees:{type:Number,value:0},params:Object,tiltDegrees:{type:Number,value:0},ros:Object},observers:['_panChanged(action.joint_trajectory.points.0.positions.0)','_tiltChanged(action.joint_trajectory.points.0.positions.1)'],_actionChanged:function(a){var b=a.type,c=a.actuator_group;if('move to joint goal'===b&&'head'===c){a.joint_trajectory||this.set('action.joint_trajectory',{points:[{positions:[0,0]}]}),a.joint_trajectory.points||this.set('action.joint_trajectory.points',[{positions:[0,0]}]),a.joint_trajectory.points[0]||this.set('action.joint_trajectory.points.0',{positions:[0,0]});var d=this.action.joint_trajectory.points[0].positions[0];d||0===d||this.set('action.joint_trajectory.points.0.positions.0',0);var e=this.action.joint_trajectory.points[0].positions[1];e||0===e||(2<=this.action.joint_trajectory.points[0].positions.length?this.set('action.joint_trajectory.points.0.positions.1',0):this.push('action.joint_trajectory.points.0.positions',0));var f=[];'pr2'===this.params.robot||'fetch'===this.params.robot?f=['head_pan_joint','head_tilt_joint']:'baxter'===this.params.robot&&(f=['head_pan']),_.isEqual(this.action.joint_trajectory.joint_names,f)||this.set('action.joint_trajectory.joint_names',f)}},_degToRad(a){return a*Math.PI/180},_radToDeg(a){return 180*a/Math.PI},_clamp(a,b,c){return Math.min(Math.max(a,b),c)},_save:function(){var a=this._clamp(this._degToRad(this.panDegrees),-2.8,2.8),b=this._clamp(this._degToRad(this.tiltDegrees),-0.52,1.22173);this.action.joint_trajectory||this.set('action.joint_trajectory',{points:[]});var c=[];'pr2'===this.params.robot||'fetch'===this.params.robot?c=['head_pan_joint','head_tilt_joint']:'baxter'===this.params.robot&&(c=['head_pan']);var d={positions:[a,b],time_from_start:{secs:2,nsecs:0}};_.isEqual(this.action.joint_trajectory.joint_names,c)||this.set('action.joint_trajectory.joint_names',c),0!==this.action.joint_trajectory.points.length&&_.isEqual(this.action.joint_trajectory.points[0],d)||this.set('action.joint_trajectory.points.0',d)},_moveHead:function(){var a={trajectory:this.action.joint_trajectory};this.$.headAction.send(a)},_panChanged:function(a){if('head'===this.action.actuator_group){if(void 0===a)return void this.set('action.joint_trajectory.points.0.positions.0',0);var b=this._radToDeg(a);this.panDegrees!==b&&(this.panDegrees=b)}},_tiltChanged(a){if('head'===this.action.actuator_group){if(void 0===a)return this.set('action.joint_trajectory.points.0.positions.1',0),void(this.tiltDegrees=0);var b=this._radToDeg(a);this.tiltDegrees!==b&&(this.tiltDegrees=b)}},_canTilt(a){return'pr2'===a||'fetch'===a||'baxter'!==a&&(console.error('Unknown robot type',a),!1)},_computeServer(a){return'pr2'===a?'/head_traj_controller/follow_joint_trajectory':'fetch'===a?'/head_controller/follow_joint_trajectory':'baxter'===a?'/rapid_pbd/head_action':''}});</script></dom-module><dom-module id="pbd-joint-angle-action" assetpath="src/"><template><style include="shared-styles"></style><style is="custom-style" include="iron-flex iron-flex-alignment"></style><style>:host{display:block;}paper-dropdown-menu{max-width:150px;}.read{margin-left:10px;}paper-input{max-width:250px;}</style><ros-topic auto="" id="eventPub" msg-type="rapid_pbd_msgs/EditorEvent" topic="rapid_pbd/editor_events" ros="[[ros]]"></ros-topic><div class="layout horizontal center"><paper-dropdown-menu label="Arm to move" hidden$="[[!params.hasTwoArms]]"><paper-listbox slot="dropdown-content" attr-for-selected="data-actuator-group" selected="{{action.actuator_group}}"><paper-item data-actuator-group="left arm" on-tap="_updateActuatorGroup">Left arm</paper-item><paper-item data-actuator-group="right arm" on-tap="_updateActuatorGroup">Right arm</paper-item></paper-listbox></paper-dropdown-menu><paper-button class="read normal" on-tap="_updateJointValues">Read joint values</paper-button></div><div><paper-input type="number" step="0.5" label="Movement duration (seconds)" value="{{_timeFromStart}}" on-change="_updateTimeFromStart"></paper-input><template id="positionList" is="dom-repeat" items="[[jointValues]]" as="kv"><paper-input type="number" step="0.01" label="[[kv.name]]" value="[[kv.value]]" on-change="_updateJoint"></paper-input></template></div></template><script>Polymer({is:'pbd-joint-angle-action',properties:{action:{notify:!0,type:Object},index:Number,stepIndex:Number,params:Object,programId:String,jointValues:{type:Array,value:function(){return[]}},ros:Object},observers:['_actionChanged(action)','_renderTimeFromStart(action.joint_trajectory.points.0.time_from_start)','_computeJointValues(action.joint_trajectory.joint_names, action.joint_trajectory.points.0.positions)'],_computeJointValues:function(a,b){if(this.splice('jointValues',0,this.jointValues.length),a&&b)for(var c=0;c<a.length;++c)this.push('jointValues',{name:a[c],value:b[c]})},_actionChanged:function(a){var b=a.type,c=a.actuator_group;if('move to joint goal'===b&&('arm'===c||'left arm'===c||'right arm'===c)){var d=this;this.action.joint_trajectory||this.set('action.joint_trajectory',{points:[]}),0===this.action.joint_trajectory.points.length&&this.debounce('get_joint_angles',function(){d._updateJointValues()},100)}},_updateActuatorGroup:function(a){var b=a.target.dataset.actuatorGroup;this.set('action.actuator_group',b),this._updateJointValues()},_getTimeFromStartObject:function(){var a={secs:5,nsecs:0};if(this.action.joint_trajectory&&this.action.joint_trajectory.points&&this.action.joint_trajectory.points[0]&&this.action.joint_trajectory.points[0].time_from_start){var b=this.action.joint_trajectory.points[0].time_from_start;return b.secs||b.nsecs?b:a}return a},_updateJointValues:function(){var a={type:'get joint values',program_info:{db_id:this.programId},step_num:this.stepIndex,action_num:this.index,action:this.action};this.$.eventPub.publish(a)},_updateJoint:function(a){var b=this.$.positionList.indexForElement(a.target),c=parseFloat(a.target.value);isNaN(c)||this.set('action.joint_trajectory.points.0.positions.'+b,c)},_renderTimeFromStart:function(a){if(a){var b=a.secs+a.nsecs/1e9;this._timeFromStart=b}},_updateTimeFromStart:function(){0>this._timeFromStart&&(this._timeFromStart=1);var a=parseFloat(this._timeFromStart),b=Math.floor(a),c=parseInt(Math.round(1e9*(a-b)));this.set('action.joint_trajectory.points.0.time_from_start.secs',b),this.set('action.joint_trajectory.points.0.time_from_start.nsecs',c)}});</script></dom-module><dom-module id="pbd-action" assetpath="src/"><template><style include="shared-styles"></style><style is="custom-style" include="iron-flex iron-flex-alignment"></style><style>:host{display:block;}.paper-material{background-color:#fff;padding:10px;margin-top:10px;}h4{margin:0px 0px;}paper-icon-button{color:var(--paper-grey-500);}</style><div class="paper-material"><div class="layout horizontal center"><h4>[[_actionDescription]]</h4><div class="flex"></div><paper-icon-button icon="delete" on-tap="_delete"></paper-icon-button><paper-icon-button icon="expand-less" hidden$="[[!_isCollapseOpen]]" on-tap="toggleCollapse"></paper-icon-button><paper-icon-button icon="expand-more" hidden$="[[_isCollapseOpen]]" on-tap="toggleCollapse"></paper-icon-button></div><iron-collapse id="collapse" opened="[[_isCollapseOpen]]"><paper-dropdown-menu label="Action type"><paper-listbox slot="dropdown-content" attr-for-selected="data-type" selected="{{_displayActionType}}"><paper-item data-type="open gripper">Open gripper</paper-item><paper-item data-type="close gripper">Close gripper</paper-item><paper-item data-type="move to cartesian goal">Move to gripper pose</paper-item><paper-item data-type="move to joint goal">Move to joint angles</paper-item><paper-item data-type="move head">Move head</paper-item><paper-item data-type="detect tabletop objects">Detect tabletop objects</paper-item></paper-listbox></paper-dropdown-menu><template is="dom-if" restamp="" if="[[_displayActionTypeIs(_displayActionType, 'open gripper')]]"><pbd-gripper-action id="gripperAction" action="{{action}}" params="[[params]]" ros="[[ros]]"></pbd-gripper-action></template><template is="dom-if" restamp="" if="[[_displayActionTypeIs(_displayActionType, 'close gripper')]]"><pbd-gripper-action id="gripperAction" action="{{action}}" params="[[params]]" ros="[[ros]]"></pbd-gripper-action></template><template is="dom-if" restamp="" if="[[_displayActionTypeIs(_displayActionType, 'move to cartesian goal')]]"><pbd-arm-cart-action action="{{action}}" params="[[params]]" program-id="[[programId]]" step-index="[[stepNum]]" index="[[index]]" landmarks="[[landmarks]]" ros="[[ros]]"></pbd-arm-cart-action></template><template is="dom-if" restamp="" if="[[_displayActionTypeIs(_displayActionType, 'move to joint goal')]]"><pbd-joint-angle-action action="{{action}}" program-id="[[programId]]" step-index="[[stepNum]]" index="[[index]]" params="[[params]]" ros="[[ros]]"></pbd-joint-angle-action></template><template is="dom-if" restamp="" if="[[_displayActionTypeIs(_displayActionType, 'move head')]]"><pbd-head-action action="{{action}}" params="[[params]]" ros="[[ros]]"></pbd-head-action></template><template is="dom-if" restamp="" if="[[_displayActionTypeIs(_displayActionType, 'detect tabletop objects')]]"><pbd-detect-surface-objects-action action="{{action}}" program-id="[[programId]]" step-num="[[stepNum]]" ros="[[ros]]"></pbd-detect-surface-objects-action></template><template is="dom-if" restamp="" if="[[_displayActionTypeIs(_displayActionType, 'find custom landmark')]]">CustomLandmarks options</template></iron-collapse></div></template><script>Polymer({is:'pbd-action',properties:{action:{notify:!0,type:Object},params:Object,landmarks:Array,stepNum:Number,index:Number,programId:String,ros:Object,_isCollapseOpen:{type:Boolean,value:!0}},observers:['_computeActionDescription(action.*, index)','_actionTypeChanged(action.type)','_displayActionTypeChanged(_displayActionType)'],toggleCollapse:function(){this._isCollapseOpen=!this._isCollapseOpen},_computeActionDescription(a,b){if(this._actionDescription='Action '+(b+1),'move to cartesian goal'===this.action.type)this._actionDescription='Move arm',('arm'===this.action.actuator_group||'left arm'===this.action.actuator_group||'right arm'===this.action.actuator_group)&&(this._actionDescription='Move '+this.action.actuator_group);else if('move to joint goal'===this.action.type)this._actionDescription='Move joints','arm'===this.action.actuator_group||'left arm'===this.action.actuator_group||'right arm'===this.action.actuator_group?this._actionDescription='Move '+this.action.actuator_group:'head'===this.action.actuator_group&&(this._actionDescription='Move head');else if('actuate gripper'===this.action.type){var c='Actuate',d='gripper';c=0<this.action.gripper_command.position?'Open':'Close',('gripper'===this.action.actuator_group||'left gripper'===this.action.actuator_group||'right gripper'===this.action.actuator_group)&&(d=this.action.actuator_group),this._actionDescription=c+' '+d}else'detect tabletop objects'===this.action.type?this._actionDescription='Detect tabletop objects':'find custom landmark'===this.action.type&&(this._actionDescription='Find custom landmark')},_delete:function(){this.fire('delete',{index:this.index})},_actionTypeChanged:function(a){'actuate gripper'===a?0<this.action.gripper_command.position?this._displayActionType='open gripper':this._displayActionType='close gripper':'move to joint goal'===a?'head'===this.action.actuator_group?this._displayActionType='move head':this._displayActionType='move to joint goal':this._displayActionType!==a&&(this._displayActionType=a)},_displayActionTypeChanged:function(a){'open gripper'===a?(this.set('action.type','actuate gripper'),this.set('action.gripper_command.position',0.1),this.set('action.gripper_command.max_effort',100)):'close gripper'===a?(this.set('action.type','actuate gripper'),this.set('action.gripper_command.position',0),!this.action.gripper_command.max_effort&&this.set('action.gripper_command.max_effort',75)):'move head'===a?(this.set('action.type','move to joint goal'),this.set('action.actuator_group','head')):this.action.type!==a&&this.set('action.type',a)},_displayActionTypeIs:function(a,b){return a===b}});</script></dom-module><dom-module id="pbd-action-picker" assetpath="src/"><template><style include="shared-styles"></style><style is="custom-style" include="iron-flex iron-flex-alignment"></style><style>:host{display:block;width:100%;position:relative;}.paper-material{padding:5px;}h3{margin:0px;}paper-button{margin-top:5px;}.group+.group{margin-top:10px;}.half{width:50%;}#cancel{height:22px;}</style><ros-topic auto="" id="topic" last-message="{{_armState}}" topic="rapid_pbd/arm_controller_state" ros="[[ros]]" msg-type="rapid_pbd_msgs/ArmControllerState"></ros-topic><ros-service id="freeze" last-message="{{_armState}}" name="rapid_pbd/freeze_arm" ros="[[ros]]" service-type="rapid_pbd_msgs/FreezeArm"></ros-service><ros-service id="relax" last-message="{{_armState}}" name="rapid_pbd/relax_arm" ros="[[ros]]" service-type="rapid_pbd_msgs/RelaxArm"></ros-service><ros-action-client id="gripperAction" server="/gripper_controller/gripper_action" action-type="control_msgs/GripperCommandAction" ros="[[ros]]"></ros-action-client><ros-action-client id="leftGripperAction" server="/rapid_pbd/l_gripper_action" action-type="control_msgs/GripperCommandAction" ros="[[ros]]"></ros-action-client><ros-action-client id="rightGripperAction" server="/rapid_pbd/r_gripper_action" action-type="control_msgs/GripperCommandAction" ros="[[ros]]"></ros-action-client><div class="paper-material"><template is="dom-if" if="[[params.manualFreeze]]"><div class="layout horizontal center"><h3>Temporary actions</h3><div class="flex"></div><paper-button id="cancel" on-tap="cancel" class="clear">Cancel</paper-button></div><template is="dom-if" if="[[params.hasTwoArms]]"><div class="group layout horizontal"><div class="half"><paper-button hidden$="[[!_isLeftArmFrozen]]" class="normal" on-tap="_relaxArm" data-actuator-group="left arm">Relax left arm</paper-button><paper-button hidden$="[[_isLeftArmFrozen]]" class="normal" on-tap="_freezeArm" data-actuator-group="left arm">Freeze left arm</paper-button></div><div class="half"><paper-button hidden$="[[!_isRightArmFrozen]]" class="normal" on-tap="_relaxArm" data-actuator-group="right arm">Relax right arm</paper-button><paper-button hidden$="[[_isRightArmFrozen]]" class="normal" on-tap="_freezeArm" data-actuator-group="right arm">Freeze right arm</paper-button></div></div></template><template is="dom-if" if="[[!params.hasTwoArms]]"><div class="group layout horizontal"><paper-button hidden$="[[!_isArmFrozen]]" class="normal" on-tap="_relaxArm" data-actuator-group="arm">Relax arm</paper-button><paper-button hidden$="[[_isArmFrozen]]" class="normal" on-tap="_freezeArm" data-actuator-group="arm">Freeze arm</paper-button></div></template></template><div class="group"><h3>Perception</h3><paper-button class="normal" on-tap="selectMoveHead">Move head</paper-button><paper-button class="normal" on-tap="selectDetectTabletopObjects">Detect tabletop objects</paper-button></div><template is="dom-if" if="[[params.hasTwoArms]]"><div class="group layout horizontal"><div class="half"><h3>Left arm</h3><paper-button class="normal" on-tap="selectLeftGripperPose">Save gripper pose</paper-button><br><paper-button class="normal" on-tap="selectLeftOpenGripper">Open gripper</paper-button><br><paper-button class="normal" on-tap="selectLeftCloseGripper">Close gripper</paper-button></div><div class="half"><h3>Right arm</h3><paper-button class="normal" on-tap="selectRightGripperPose">Save gripper pose</paper-button><br><paper-button class="normal" on-tap="selectRightOpenGripper">Open gripper</paper-button><br><paper-button class="normal" on-tap="selectRightCloseGripper">Close gripper</paper-button></div></div></template><template is="dom-if" if="[[!params.hasTwoArms]]"><div class="group" hidden$="[[params.hasTwoArms]]"><h3>Arm</h3><div><paper-button class="normal" on-tap="selectGripperPose">Save gripper pose</paper-button><br><paper-button class="normal" on-tap="selectOpenGripper">Open gripper</paper-button><br><paper-button class="normal" on-tap="selectCloseGripper">Close gripper</paper-button></div></div></template></div></template><script>Polymer({is:'pbd-action-picker',properties:{ros:Object,_armState:Object,_isArmFrozen:{type:Boolean,computed:'_computeIsArmFrozen(_armState)'},_isLeftArmFrozen:{type:Boolean,computed:'_computeIsLeftArmFrozen(_armState)'},_isRightArmFrozen:{type:Boolean,computed:'_computeIsRightArmFrozen(_armState)'}},cancel:function(){this.fire('iron-deselect')},selectMoveHead:function(){this.fire('iron-select',{type:'move to joint goal',actuator_group:'head'})},selectDetectTabletopObjects:function(){this.fire('iron-select',{type:'detect tabletop objects'})},selectFindCustomLandmark:function(){this.fire('iron-select',{type:'find custom landmark'})},selectGripperPose:function(){this._selectGripperPose('arm')},selectJointAngles:function(){this._selectJointAngles('arm')},selectOpenGripper:function(){this._selectActuateGripper('gripper','open')},selectCloseGripper:function(){this._selectActuateGripper('gripper','close')},selectLeftGripperPose:function(){this._selectGripperPose('left arm')},selectLeftJointAngles:function(){this._selectJointAngles('left arm')},selectLeftOpenGripper:function(){this._selectActuateGripper('left gripper','open')},selectLeftCloseGripper:function(){this._selectActuateGripper('left gripper','close')},selectRightGripperPose:function(){this._selectGripperPose('right arm')},selectRightJointAngles:function(){this._selectJointAngles('right arm')},selectRightOpenGripper:function(){this._selectActuateGripper('right gripper','open')},selectRightCloseGripper:function(){this._selectActuateGripper('right gripper','close')},_selectGripperPose:function(a){this.fire('iron-select',{type:'move to cartesian goal',actuator_group:a})},_selectJointAngles:function(a){this.fire('iron-select',{type:'move to joint goal',actuator_group:a})},_selectActuateGripper:function(a,b){var c={position:0.1,max_effort:100};'close'===b&&(c.position=0,c.max_effort=75);var d=null;'gripper'===a?d=this.$.gripperAction:'left gripper'===a?d=this.$.leftGripperAction:'right gripper'===a&&(d=this.$.rightGripperAction),d.send({command:c});this.fire('iron-select',{type:'actuate gripper',actuator_group:a,gripper_command:c})},_computeIsArmFrozen:function(a){return!a||'frozen'===a.arm_controller},_computeIsLeftArmFrozen:function(a){return!a||'frozen'===a.l_arm_controller},_computeIsRightArmFrozen:function(a){return!a||'frozen'===a.r_arm_controller},_freezeArm:function(a){var b=a.target.dataset.actuatorGroup;this.$.freeze.call({actuator_group:b})},_relaxArm:function(a){var b=a.target.dataset.actuatorGroup;this.$.relax.call({actuator_group:b})}});</script></dom-module><dom-module id="pbd-step" assetpath="src/"><template><style include="shared-styles"></style><style is="custom-style" include="iron-flex iron-flex-alignment"></style><style>:host{display:block;}.title{border-top:1px solid var(--paper-grey-300);padding-top:10px;margin-bottom:10px;}.title paper-button{height:30px;}h3{margin:auto 0px;display:inline-block;}</style><ros-topic auto="" id="eventPub" msg-type="rapid_pbd_msgs/EditorEvent" topic="rapid_pbd/editor_events" ros="[[ros]]"></ros-topic><div class="center horizontal layout title"><h3>Step [[_stepNum(index)]]</h3><span class="flex"></span><paper-button class="add important" on-tap="_togglePicker">+ Add parallel action</paper-button><paper-button class="delete" on-tap="_maybeDeleteStep">Delete</paper-button></div><iron-collapse id="picker"><pbd-action-picker class="dropdown-content" params="[[params]]" ros="[[ros]]" on-iron-select="_addAction" on-iron-deselect="closeActionPicker"></pbd-action-picker></iron-collapse><div hidden$="[[hasActions(step.actions)]]">No actions</div><template is="dom-repeat" items="{{step.actions}}" as="action" index-as="stepIndex"><pbd-action action="{{action}}" params="[[params]]" program-id="[[programId]]" step-num="[[index]]" index="[[stepIndex]]" landmarks="[[landmarks]]" on-delete="_handleDeleteAction" ros="[[ros]]"></pbd-action></template><paper-dialog id="deleteDialog" modal=""><h2>Delete step [[_stepNum(index)]]?</h2><div class="deleteButtons"><paper-button dialog-dismiss="" class="clear">Cancel</paper-button><paper-button dialog-confirm="" on-tap="deleteStep" class="delete">Delete</paper-button></div></paper-dialog></template><script>Polymer({is:'pbd-step',properties:{index:Number,landmarks:{type:Array,value:function(){return[]}},params:Object,program:Object,programId:String,step:{notify:!0,type:Object},ros:Object},observers:['_computeLandmarks(program, index)'],_computeLandmarks(a,b){var c=[];if(a&&(b||0===b))for(var d=b-1;0<=d;--d){for(var e,f=a.steps[d].landmarks,g=[],h=0;h<f.length;++h)e=f[h],'surface box'===e.type&&g.push(e);if(0<g.length){c=g;break}}var i=[{type:'tf frame',name:'base_link'},{type:'tf frame',name:'torso_lift_link'}];i=i.concat(c),this.set('landmarks',i)},hasActions:function(a){return a&&0<a.length},deleteStep:function(){this.fire('delete',{index:this.index})},_addAction:function(a){var b=a.detail,c={type:'add action',program_info:{db_id:this.programId},step_num:this.index,action:b};this.$.eventPub.publish(c),this.$.picker.opened=!1},_maybeDeleteStep:function(){this.$.deleteDialog.open()},_handleDeleteAction:function(a){var b=a.detail.index,c={type:'delete action',program_info:{db_id:this.programId},step_num:this.index,action_num:b};this.$.eventPub.publish(c),a.stopPropagation()},_stepNum:function(a){return parseInt(a)+1},_togglePicker:function(){this.$.picker.toggle()},openActionPicker:function(){this.$.picker.opened=!0},closeActionPicker:function(){this.$.picker.opened=!1}});</script></dom-module><dom-module id="pbd-program" assetpath="src/"><template><style include="shared-styles"></style><style is="custom-style" include="iron-flex iron-flex-alignment"></style><style>:host{display:block;height:100%;}a{color:#000;text-decoration:none;}.add{height:25px;padding:5px 5px;line-height:14px;margin-bottom:5px;}paper-button.back{height:40px;}paper-button.back:hover{background-color:transparent;}.step{background-color:var(--paper-grey-300);padding:5px 5px;line-height:14px;margin-bottom:5px;min-width:25px;}.steps > span{margin-right:5px;}.step.iron-selected{background-color:var(--paper-grey-400);}.step:hover{background-color:var(--paper-grey-400);}.runstop{color:#fff;margin-left:10px;height:40px;}.run{background-color:var(--paper-green-500);}.stop{background-color:var(--paper-red-500);}.stepDiv{min-width:350px;margin-bottom:10px;overflow-y:auto;padding-left:2px;padding-right:2px;padding-bottom:2px;}#rviz{display:block;height:500px;}@media (min-width: 768px){#layout{height:100%;}.content{@apply (--layout-horizontal);@apply (--layout-flex);}.stepDiv{width:350px;max-height:100%;margin-bottom:0px;margin-right:10px;}#rviz{height:100%;width:350px;@apply (--layout-flex);}}</style><app-route route="{{route}}" pattern="/:id" data="{{routeData}}"></app-route><ros-topic id="programSub" on-message="_handleProgram" msg-type="rapid_pbd_msgs/Program" topic="rapid_pbd/program/{{routeData.id}}" ros="[[ros]]"></ros-topic><ros-topic auto="" id="eventPub" msg-type="rapid_pbd_msgs/EditorEvent" topic="rapid_pbd/editor_events" ros="[[ros]]"></ros-topic><ros-action-client id="programAction" ros="[[ros]]" server="/rapid_pbd/execute_program_action" action-type="rapid_pbd_msgs/ExecuteProgramAction" on-feedback="_handleFeedback" on-result="_handleResult"></ros-action-client><ros-topic auto="" last-message="{{isRunning}}" msg-type="std_msgs/Bool" topic="rapid_pbd/is_running" ros="[[ros]]"></ros-topic><div id="layout" class="layout vertical"><div class="layout horizontal center"><a href="#/" class="self-end"><paper-button class="back clear"><iron-icon icon="arrow-back"></iron-icon>Back</paper-button></a><paper-input class="flex" id="programName" label="Program name" value="[[program.name]]" on-blur="save"></paper-input><paper-button class="runstop run" hidden$="[[isRunning.data]]" raised="" on-tap="run"><iron-icon icon="av:play-arrow"></iron-icon>Run</paper-button><paper-button class="runstop stop" hidden$="[[!isRunning.data]]" raised="" on-tap="stop"><iron-icon icon="av:stop"></iron-icon>Stop</paper-button></div><div class="layout horizontal center"><span>Steps:&nbsp;</span> <span hidden$="[[_hasSteps(program.steps)]]">None</span><iron-selector attr-for-selected="name" selected="{{currentStepNum}}"><template is="dom-repeat" id="stepList" items="[[program.steps]]"><paper-button class="step" name="[[index]]" on-tap="selectStep">{{_stepNum(index)}}</paper-button></template></iron-selector><paper-button class="add important" on-tap="addStep">+ Add Step</paper-button></div><div class="content"><array-selector id="selector" items="{{program.steps}}" selected="{{currentStep}}"></array-selector><div class="stepDiv" hidden$="[[!_hasSteps(program.steps)]]"><div class="stepDivInner"><pbd-step id="step" index="[[currentStepNum]]" params="[[params]]" program-id="[[routeData.id]]" program="[[program]]" step="{{currentStep}}" ros="[[ros]]" on-delete="_deleteStep"></pbd-step></div></div><ros-rviz id="rviz" ros="[[ros]]"></ros-rviz></div></div><paper-dialog id="errorDialog" modal=""><h2>Error running the program</h2><p>[[error]]</p><div class="buttons"><paper-button dialog-confirm="" class="clear">OK</paper-button></div></paper-dialog></template><script>Polymer({is:'pbd-program',properties:{currentStepNum:{type:Number,value:0},params:Object,program:{type:Object,observer:'_programChanged'},ros:Object,route:Object,isRunning:{type:Object,value:function(){return{data:!1}}}},observers:['load(routeData.id, params.*)','_programUpdated(program.*)','_stepChanged(ros, routeData.id, currentStepNum)','_currentStepNumChanged(program, currentStepNum)','_isRunningChanged(isRunning.data)'],load:function(a){if(a&&this.params.robot){this.$.programSub.subscribe(),this.currentStepNum=0;var b='';'pr2'===this.params.robot?b='/head_mount_kinect_rgb_optical_frame':'fetch'===this.params.robot?b='/head_camera_rgb_optical_frame':'baxter'===this.params.robot?b='/camera_rgb_optical_frame':console.error('Unknown robot type',this.params.robot);var c='';'pr2'===this.params.robot||'fetch'===this.params.robot?c='/base_link':'baxter'===this.params.robot?c='/base':console.error('Unknown robot type',this.params.robot);var d={globalOptions:{background:'#113344',colladaLoader:'collada2',colladaServer:window.location.protocol+'//'+window.location.hostname+':8001/',fixedFrame:c,videoServer:window.location.protocol+'//'+window.location.hostname+':9998',url:'ws://'+window.location.hostname+':9090'},displays:[{isShown:!0,name:'Grid',type:'grid',options:{cellSize:1,color:'#cccccc',numCells:20}},{isShown:!0,name:'Program robot model',type:'markerArray',options:{topic:'/rapid_pbd/robot/'+a}},{isShown:!0,name:'Scene',type:'pointCloud2',options:{size:0.01,topic:'/rapid_pbd/scene/'+a}},{isShown:!0,name:'Surface segmentation',type:'markerArray',options:{topic:'/rapid_pbd/surface_segmentation/'+a}},{isShown:!1,name:'Current robot model',type:'urdf',options:{param:'robot_description',tfPrefix:''}},{isShown:!1,name:'Current surface segmentation',type:'markerArray',options:{topic:'/rapid_pbd/runtime_segmentation'}},{isShown:!1,name:'Current depth cloud',type:'depthCloud',options:{topic:'depthcloud_encoded',frameId:b}}],sidebarOpened:!1};this.$.rviz?this.$.rviz.config=d:console.error('rviz not ready')}},save:function(){this.program.name=this.$.programName.value;var a={type:'update program',program_info:{db_id:this.routeData.id,name:this.program.name},program:this.program};console.debug('Saving',this.program),this.$.eventPub.publish(a)},run:function(){var a={program:this.program};this.$.programAction.send(a)},stop:function(){this.$.programAction.cancel()},_programUpdated:function(a){if(a.base&&'program'!==a.path){if(a.path.endsWith('.length'))return;var b=this;this.debounce('save',function(){b.save()},100)}},addStep:function(){var a={type:'add step',program_info:{db_id:this.routeData.id}};this.$.eventPub.publish(a),this.currentStepNum=this.program.steps.length,this.$.step.openActionPicker()},selectStep:function(a){this.$.stepList.itemForElement(a.target);this.currentStepNum=parseInt(a.target.name)},_deleteStep:function(a){var b={type:'delete step',program_info:{db_id:this.routeData.id},step_num:this.currentStepNum};this.$.eventPub.publish(b),this.currentStepNum=Math.max(this.currentStepNum-1,0),a.stopPropagation()},_programChanged:function(a){!a||0<a.steps.length&&this.$.selector.select(a.steps[0])},_hasSteps:function(a){return a&&0<a.length},_currentStepNumChanged:function(a,b){a&&a.steps&&this.$.selector.select(a.steps[b])},_stepChanged(a,b,c){if(a&&b&&(c||0===c)){this.$.eventPub.publish({type:'view step',program_info:{db_id:b},step_num:c})}},_stepNum:function(a){return parseInt(a)+1},_handleFeedback:function(a){this.currentStepNum=a.detail.step_number},_handleResult:function(a){var b=a.detail.error;b&&(this.error=a.detail.error,this.$.errorDialog.open())},_handleProgram:function(a){var b=a.detail;return this.program?void(!_.isEqual(this.program,b)&&this.set('program',b)):void this.set('program',b)},_isRunningChanged:function(a){a?(this.$.rviz.set('config.displays.1.isShown',!1),this.$.rviz.set('config.displays.2.isShown',!1),this.$.rviz.set('config.displays.3.isShown',!1),this.$.rviz.set('config.displays.4.isShown',!0),this.$.rviz.set('config.displays.5.isShown',!0),this.$.rviz.set('config.displays.6.isShown',!0)):(this.$.rviz.set('config.displays.1.isShown',!0),this.$.rviz.set('config.displays.2.isShown',!0),this.$.rviz.set('config.displays.3.isShown',!0),this.$.rviz.set('config.displays.4.isShown',!1),this.$.rviz.set('config.displays.5.isShown',!1),this.$.rviz.set('config.displays.6.isShown',!1))}});</script></dom-module><dom-module id="pbd-program-list" assetpath="src/"><template><style include="shared-styles"></style><style>:host{display:block;}.paper-material{margin-top:10px;}table{border-spacing:0;width:100%;}td, th{padding:10px;text-align:left;}td{border-top:1px solid rgba(0, 0, 0, var(--light-divider-opacity));}.deleteButtons{text-align:right;}a{color:#000;text-decoration:none;}</style><ros-topic auto="" last-message="{{programList}}" msg-type="rapid_pbd_msgs/ProgramInfoList" topic="rapid_pbd/program_list" ros="[[ros]]"></ros-topic><ros-topic auto="" id="eventPub" msg-type="rapid_pbd_msgs/EditorEvent" topic="rapid_pbd/editor_events" ros="[[ros]]"></ros-topic><ros-service auto="" id="createSrv" on-fail="_handleServiceError" on-response="_handleServiceResponse" name="/rapid_pbd/create_program" ros="[[ros]]" service-type="rapid_pbd_msgs/CreateProgram"></ros-service><paper-button id="createButton" class="important" raised="" on-tap="_handleCreate">+ Create new program</paper-button><div class="paper-material"><table><tbody><tr><th>Name</th><th>Actions</th></tr><template is="dom-if" if="[[!programList.programs.length]]"><tr><td colspan="2">No programs have been created yet.</td></tr></template><template is="dom-repeat" items="[[programList.programs]]" as="program"><tr><td>{{program.name}}</td><td><a href="#/program/{{program.db_id}}"><paper-button class="clear">Open</paper-button></a><paper-button class="delete" data-db-id="{{program.db_id}}" on-tap="_maybeDelete">Delete</paper-button></td></tr></template></tbody></table><paper-dialog id="deleteDialog" modal=""><h2>Delete program?</h2><div class="deleteButtons"><paper-button class="clear" dialog-dismiss="">Cancel</paper-button><paper-button dialog-confirm="" on-tap="_handleDelete" class="delete">Delete</paper-button></div></paper-dialog></div></template><script>Polymer({is:'pbd-program-list',properties:{ros:Object,route:Object,programList:{type:Object,value:function(){return{programs:[]}}}},_maybeDelete:function(a){var b=a.model.get('program.db_id');this._idToDelete=b,this.$.deleteDialog.open()},_handleDelete:function(){this.$.deleteDialog.close();var a={type:'delete program',program_info:{db_id:this._idToDelete}};this.$.eventPub.publish(a)},_handleCreate:function(){var a=new Date,b='Untitled program '+a.toLocaleString();this.$.createSrv.call({name:b})},_handleServiceResponse(a){var b=a.detail.db_id;window.history.pushState({},null,'#/program/'+b),window.dispatchEvent(new CustomEvent('location-changed'))},_handleServiceError:function(a){console.error(a.detail)}});</script></dom-module><dom-module id="pbd-app" assetpath="src/"><template><style include="shared-styles"></style><style>:host{display:block;@apply (--paper-font-common-base);height:100%;}paper-dialog paper-button:hover{background-color:var(--paper-grey-300);}#buttons{text-align:right;}</style><app-location route="{{route}}" use-hash-as-path=""></app-location><app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{routeTail}}"></app-route><ros-websocket auto="" url="{{url}}" id="websocket" on-connection="_handleConnection" on-error="_handleClose" on-close="_handleClose" ros="{{ros}}"></ros-websocket><ros-topic auto="" on-message="_handleRosout" msg-type="rosgraph_msgs/Log" topic="rosout" ros="[[ros]]"></ros-topic><ros-param id="param" name="rapid_pbd/robot" string-val="{{_robot}}" ros="[[ros]]"></ros-param><paper-dialog modal="" id="dialog"><h2>Disconnected from server</h2><p>Please check that the robot's websocket server is running and try again.</p><paper-input id="websocketUrl" label="Websocket URL" value="{{url}}"></paper-input><div id="buttons"><paper-button dialog-confirm="" on-tap="reconnect">Reconnect</paper-button></div></paper-dialog><template is="dom-if" if="[[!_shouldShowProgram(routeData.page)]]"><pbd-program-list data-page="" ros="[[ros]]" route="{{route}}"></pbd-program-list></template><template is="dom-if" if="[[_shouldShowProgram(routeData.page)]]"><pbd-program data-page="program" params="[[params]]" ros="[[ros]]" route="{{routeTail}}"></pbd-program></template></template><script>Polymer({is:'pbd-app',properties:{routeData:{type:Object,value:function(){return{page:''}}},url:{type:String,value:function(){var a=window.location.hostname,b='ws:';return'https:'===window.location.protocol&&(b='wss:'),b+'//'+a+':9090'}},params:{type:Object,value:function(){return{}}},_robot:{type:String}},observers:['_robotChanged(_robot)'],reconnect:function(){var a=this.$.websocketUrl.value;this.$.websocket.connect(a)},_handleConnection:function(){this.$.dialog.close()},_handleClose:function(){this.$.dialog.open()},_handleRosout:function(a){var b=a.detail;-1===b.name.search('rapid_pbd')||(1==b.level||2==b.level?console.info(b.msg):4==b.level?console.warn(b.msg):(8==b.level||16==b.level)&&console.error(b.msg))},_shouldShowProgram:function(a){return'program'===a},_robotChanged:function(a){'pr2'===a?(this.set('params.robot',a),this.set('params.hasTwoArms',!0),this.set('params.manualFreeze',!0)):'fetch'===a?(this.set('params.robot',a),this.set('params.hasTwoArms',!1),this.set('params.manualFreeze',!0)):'baxter'===a?(this.set('params.robot',a),this.set('params.hasTwoArms',!0),this.set('params.manualFreeze',!1)):console.error('Unknown robot type:',a)}});</script></dom-module><style>html{background-color:#fafafa;height:100%;}body{height:100%;box-sizing:border-box;margin:0;padding:8px;}</style></div><pbd-app></pbd-app></body></html>